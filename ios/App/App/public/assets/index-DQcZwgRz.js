var xF=Object.defineProperty;var cI=r=>{throw TypeError(r)};var _F=(r,e,t)=>e in r?xF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var uI=(r,e,t)=>_F(r,typeof e!="symbol"?e+"":e,t),ex=(r,e,t)=>e.has(r)||cI("Cannot "+t);var fe=(r,e,t)=>(ex(r,e,"read from private field"),t?t.call(r):e.get(r)),Dt=(r,e,t)=>e.has(r)?cI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),dt=(r,e,t,n)=>(ex(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Tn=(r,e,t)=>(ex(r,e,"access private method"),t);var fg=(r,e,t,n)=>({set _(s){dt(r,e,s,t)},get _(){return fe(r,e,n)}});function bF(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Pb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function EF(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var tx={exports:{}},cf={},rx={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function TF(){if(dI)return wt;dI=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,_={};function E(W,Z,Se){this.props=W,this.context=Z,this.refs=_,this.updater=Se||w}E.prototype.isReactComponent={},E.prototype.setState=function(W,Z){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Z,"setState")},E.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=E.prototype;function P(W,Z,Se){this.props=W,this.context=Z,this.refs=_,this.updater=Se||w}var j=P.prototype=new C;j.constructor=P,k(j,E.prototype),j.isPureReactComponent=!0;var M=Array.isArray,$=Object.prototype.hasOwnProperty,B={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R(W,Z,Se){var ge,Me={},qe=null,pe=null;if(Z!=null)for(ge in Z.ref!==void 0&&(pe=Z.ref),Z.key!==void 0&&(qe=""+Z.key),Z)$.call(Z,ge)&&!A.hasOwnProperty(ge)&&(Me[ge]=Z[ge]);var je=arguments.length-2;if(je===1)Me.children=Se;else if(1<je){for(var Ve=Array(je),Qe=0;Qe<je;Qe++)Ve[Qe]=arguments[Qe+2];Me.children=Ve}if(W&&W.defaultProps)for(ge in je=W.defaultProps,je)Me[ge]===void 0&&(Me[ge]=je[ge]);return{$$typeof:r,type:W,key:qe,ref:pe,props:Me,_owner:B.current}}function D(W,Z){return{$$typeof:r,type:W.type,key:Z,ref:W.ref,props:W.props,_owner:W._owner}}function V(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function U(W){var Z={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Se){return Z[Se]})}var L=/\/+/g;function N(W,Z){return typeof W=="object"&&W!==null&&W.key!=null?U(""+W.key):Z.toString(36)}function Y(W,Z,Se,ge,Me){var qe=typeof W;(qe==="undefined"||qe==="boolean")&&(W=null);var pe=!1;if(W===null)pe=!0;else switch(qe){case"string":case"number":pe=!0;break;case"object":switch(W.$$typeof){case r:case e:pe=!0}}if(pe)return pe=W,Me=Me(pe),W=ge===""?"."+N(pe,0):ge,M(Me)?(Se="",W!=null&&(Se=W.replace(L,"$&/")+"/"),Y(Me,Z,Se,"",function(Qe){return Qe})):Me!=null&&(V(Me)&&(Me=D(Me,Se+(!Me.key||pe&&pe.key===Me.key?"":(""+Me.key).replace(L,"$&/")+"/")+W)),Z.push(Me)),1;if(pe=0,ge=ge===""?".":ge+":",M(W))for(var je=0;je<W.length;je++){qe=W[je];var Ve=ge+N(qe,je);pe+=Y(qe,Z,Se,Ve,Me)}else if(Ve=v(W),typeof Ve=="function")for(W=Ve.call(W),je=0;!(qe=W.next()).done;)qe=qe.value,Ve=ge+N(qe,je++),pe+=Y(qe,Z,Se,Ve,Me);else if(qe==="object")throw Z=String(W),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return pe}function ae(W,Z,Se){if(W==null)return W;var ge=[],Me=0;return Y(W,ge,"","",function(qe){return Z.call(Se,qe,Me++)}),ge}function de(W){if(W._status===-1){var Z=W._result;Z=Z(),Z.then(function(Se){(W._status===0||W._status===-1)&&(W._status=1,W._result=Se)},function(Se){(W._status===0||W._status===-1)&&(W._status=2,W._result=Se)}),W._status===-1&&(W._status=0,W._result=Z)}if(W._status===1)return W._result.default;throw W._result}var he={current:null},X={transition:null},J={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:X,ReactCurrentOwner:B};function K(){throw Error("act(...) is not supported in production builds of React.")}return wt.Children={map:ae,forEach:function(W,Z,Se){ae(W,function(){Z.apply(this,arguments)},Se)},count:function(W){var Z=0;return ae(W,function(){Z++}),Z},toArray:function(W){return ae(W,function(Z){return Z})||[]},only:function(W){if(!V(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},wt.Component=E,wt.Fragment=t,wt.Profiler=s,wt.PureComponent=P,wt.StrictMode=n,wt.Suspense=d,wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,wt.act=K,wt.cloneElement=function(W,Z,Se){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ge=k({},W.props),Me=W.key,qe=W.ref,pe=W._owner;if(Z!=null){if(Z.ref!==void 0&&(qe=Z.ref,pe=B.current),Z.key!==void 0&&(Me=""+Z.key),W.type&&W.type.defaultProps)var je=W.type.defaultProps;for(Ve in Z)$.call(Z,Ve)&&!A.hasOwnProperty(Ve)&&(ge[Ve]=Z[Ve]===void 0&&je!==void 0?je[Ve]:Z[Ve])}var Ve=arguments.length-2;if(Ve===1)ge.children=Se;else if(1<Ve){je=Array(Ve);for(var Qe=0;Qe<Ve;Qe++)je[Qe]=arguments[Qe+2];ge.children=je}return{$$typeof:r,type:W.type,key:Me,ref:qe,props:ge,_owner:pe}},wt.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},wt.createElement=R,wt.createFactory=function(W){var Z=R.bind(null,W);return Z.type=W,Z},wt.createRef=function(){return{current:null}},wt.forwardRef=function(W){return{$$typeof:c,render:W}},wt.isValidElement=V,wt.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:de}},wt.memo=function(W,Z){return{$$typeof:h,type:W,compare:Z===void 0?null:Z}},wt.startTransition=function(W){var Z=X.transition;X.transition={};try{W()}finally{X.transition=Z}},wt.unstable_act=K,wt.useCallback=function(W,Z){return he.current.useCallback(W,Z)},wt.useContext=function(W){return he.current.useContext(W)},wt.useDebugValue=function(){},wt.useDeferredValue=function(W){return he.current.useDeferredValue(W)},wt.useEffect=function(W,Z){return he.current.useEffect(W,Z)},wt.useId=function(){return he.current.useId()},wt.useImperativeHandle=function(W,Z,Se){return he.current.useImperativeHandle(W,Z,Se)},wt.useInsertionEffect=function(W,Z){return he.current.useInsertionEffect(W,Z)},wt.useLayoutEffect=function(W,Z){return he.current.useLayoutEffect(W,Z)},wt.useMemo=function(W,Z){return he.current.useMemo(W,Z)},wt.useReducer=function(W,Z,Se){return he.current.useReducer(W,Z,Se)},wt.useRef=function(W){return he.current.useRef(W)},wt.useState=function(W){return he.current.useState(W)},wt.useSyncExternalStore=function(W,Z,Se){return he.current.useSyncExternalStore(W,Z,Se)},wt.useTransition=function(){return he.current.useTransition()},wt.version="18.3.1",wt}var hI;function Ab(){return hI||(hI=1,rx.exports=TF()),rx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI;function SF(){if(fI)return cf;fI=1;var r=Ab(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,h){var p,g={},v=null,w=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(w=d.ref);for(p in d)n.call(d,p)&&!i.hasOwnProperty(p)&&(g[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:c,key:v,ref:w,props:g,_owner:s.current}}return cf.Fragment=t,cf.jsx=o,cf.jsxs=o,cf}var pI;function kF(){return pI||(pI=1,tx.exports=SF()),tx.exports}var u=kF(),pg={},nx={exports:{}},es={},sx={exports:{}},ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI;function IF(){return mI||(mI=1,function(r){function e(X,J){var K=X.length;X.push(J);e:for(;0<K;){var W=K-1>>>1,Z=X[W];if(0<s(Z,J))X[W]=J,X[K]=Z,K=W;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var J=X[0],K=X.pop();if(K!==J){X[0]=K;e:for(var W=0,Z=X.length,Se=Z>>>1;W<Se;){var ge=2*(W+1)-1,Me=X[ge],qe=ge+1,pe=X[qe];if(0>s(Me,K))qe<Z&&0>s(pe,Me)?(X[W]=pe,X[qe]=K,W=qe):(X[W]=Me,X[ge]=K,W=ge);else if(qe<Z&&0>s(pe,K))X[W]=pe,X[qe]=K,W=qe;else break e}}return J}function s(X,J){var K=X.sortIndex-J.sortIndex;return K!==0?K:X.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();r.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,g=null,v=3,w=!1,k=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(X){for(var J=t(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=X)n(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(h)}}function M(X){if(_=!1,j(X),!k)if(t(d)!==null)k=!0,de($);else{var J=t(h);J!==null&&he(M,J.startTime-X)}}function $(X,J){k=!1,_&&(_=!1,C(R),R=-1),w=!0;var K=v;try{for(j(J),g=t(d);g!==null&&(!(g.expirationTime>J)||X&&!U());){var W=g.callback;if(typeof W=="function"){g.callback=null,v=g.priorityLevel;var Z=W(g.expirationTime<=J);J=r.unstable_now(),typeof Z=="function"?g.callback=Z:g===t(d)&&n(d),j(J)}else n(d);g=t(d)}if(g!==null)var Se=!0;else{var ge=t(h);ge!==null&&he(M,ge.startTime-J),Se=!1}return Se}finally{g=null,v=K,w=!1}}var B=!1,A=null,R=-1,D=5,V=-1;function U(){return!(r.unstable_now()-V<D)}function L(){if(A!==null){var X=r.unstable_now();V=X;var J=!0;try{J=A(!0,X)}finally{J?N():(B=!1,A=null)}}else B=!1}var N;if(typeof P=="function")N=function(){P(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ae=Y.port2;Y.port1.onmessage=L,N=function(){ae.postMessage(null)}}else N=function(){E(L,0)};function de(X){A=X,B||(B=!0,N())}function he(X,J){R=E(function(){X(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){k||w||(k=!0,de($))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(X){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var K=v;v=J;try{return X()}finally{v=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,J){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var K=v;v=X;try{return J()}finally{v=K}},r.unstable_scheduleCallback=function(X,J,K){var W=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?W+K:W):K=W,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=K+Z,X={id:p++,callback:J,priorityLevel:X,startTime:K,expirationTime:Z,sortIndex:-1},K>W?(X.sortIndex=K,e(h,X),t(d)===null&&X===t(h)&&(_?(C(R),R=-1):_=!0,he(M,K-W))):(X.sortIndex=Z,e(d,X),k||w||(k=!0,de($))),X},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(X){var J=v;return function(){var K=v;v=J;try{return X.apply(this,arguments)}finally{v=K}}}}(ix)),ix}var gI;function CF(){return gI||(gI=1,sx.exports=IF()),sx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI;function PF(){if(yI)return es;yI=1;var r=Ab(),e=CF();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(s[a]=l,a=0;a<l.length;a++)n.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(a){return d.call(g,a)?!0:d.call(p,a)?!1:h.test(a)?g[a]=!0:(p[a]=!0,!1)}function w(a,l,f,y){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,l,f,y){if(l===null||typeof l>"u"||w(a,l,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(a,l,f,y,x,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=x,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=new _(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];E[l]=new _(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new _(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new _(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=new _(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){E[a]=new _(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){E[a]=new _(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){E[a]=new _(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){E[a]=new _(a,5,!1,a.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function P(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(C,P);E[l]=new _(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(C,P);E[l]=new _(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(C,P);E[l]=new _(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){E[a]=new _(a,1,!1,a.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){E[a]=new _(a,1,!1,a.toLowerCase(),null,!0,!0)});function j(a,l,f,y){var x=E.hasOwnProperty(l)?E[l]:null;(x!==null?x.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,f,x,y)&&(f=null),y||x===null?v(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):x.mustUseProperty?a[x.propertyName]=f===null?x.type===3?!1:"":f:(l=x.attributeName,y=x.attributeNamespace,f===null?a.removeAttribute(l):(x=x.type,f=x===3||x===4&&f===!0?"":""+f,y?a.setAttributeNS(y,l,f):a.setAttribute(l,f))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),B=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),U=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),X=Symbol.iterator;function J(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var K=Object.assign,W;function Z(a){if(W===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+a}var Se=!1;function ge(a,l){if(!a||Se)return"";Se=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ie){var y=ie}Reflect.construct(a,[],l)}else{try{l.call()}catch(ie){y=ie}a.call(l.prototype)}else{try{throw Error()}catch(ie){y=ie}a()}}catch(ie){if(ie&&y&&typeof ie.stack=="string"){for(var x=ie.stack.split(`
`),T=y.stack.split(`
`),O=x.length-1,z=T.length-1;1<=O&&0<=z&&x[O]!==T[z];)z--;for(;1<=O&&0<=z;O--,z--)if(x[O]!==T[z]){if(O!==1||z!==1)do if(O--,z--,0>z||x[O]!==T[z]){var H=`
`+x[O].replace(" at new "," at ");return a.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",a.displayName)),H}while(1<=O&&0<=z);break}}}finally{Se=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?Z(a):""}function Me(a){switch(a.tag){case 5:return Z(a.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return a=ge(a.type,!1),a;case 11:return a=ge(a.type.render,!1),a;case 1:return a=ge(a.type,!0),a;default:return""}}function qe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case B:return"Portal";case D:return"Profiler";case R:return"StrictMode";case N:return"Suspense";case Y:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case U:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case L:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ae:return l=a.displayName||null,l!==null?l:qe(a.type)||"Memo";case de:l=a._payload,a=a._init;try{return qe(a(l))}catch{}}return null}function pe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qe(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function je(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ve(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qe(a){var l=Ve(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,T=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(O){y=""+O,T.call(this,O)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function tt(a){a._valueTracker||(a._valueTracker=Qe(a))}function at(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),y="";return a&&(y=Ve(a)?a.checked?"true":"false":a.value),a=y,a!==f?(l.setValue(a),!0):!1}function Pt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Zt(a,l){var f=l.checked;return K({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function pn(a,l){var f=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;f=je(l.value!=null?l.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function kr(a,l){l=l.checked,l!=null&&j(a,"checked",l,!1)}function Ir(a,l){kr(a,l);var f=je(l.value),y=l.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?It(a,l.type,f):l.hasOwnProperty("defaultValue")&&It(a,l.type,je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function On(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function It(a,l,f){(l!=="number"||Pt(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var er=Array.isArray;function Cr(a,l,f,y){if(a=a.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<a.length;f++)x=l.hasOwnProperty("$"+a[f].value),a[f].selected!==x&&(a[f].selected=x),x&&y&&(a[f].defaultSelected=!0)}else{for(f=""+je(f),l=null,x=0;x<a.length;x++){if(a[x].value===f){a[x].selected=!0,y&&(a[x].defaultSelected=!0);return}l!==null||a[x].disabled||(l=a[x])}l!==null&&(l.selected=!0)}}function q(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ne(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(er(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:je(f)}}function ce(a,l){var f=je(l.value),y=je(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function Ce(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function _e(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function we(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?_e(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ne,yt=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,y,x){MSApp.execUnsafeLocalFunction(function(){return a(l,f,y,x)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ne.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function At(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var Kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fo=["Webkit","ms","Moz","O"];Object.keys(Kt).forEach(function(a){fo.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Kt[l]=Kt[a]})});function mn(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||Kt.hasOwnProperty(a)&&Kt[a]?(""+l).trim():l+"px"}function rn(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var y=f.indexOf("--")===0,x=mn(f,l[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,x):a[f]=x}}var wi=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _r(a,l){if(l){if(wi[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function xi(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var us=null;function po(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cs=null,Ys=null,Qt=null;function Kn(a){if(a=Gh(a)){if(typeof Cs!="function")throw Error(t(280));var l=a.stateNode;l&&(l=Cm(l),Cs(a.stateNode,a.type,l))}}function _i(a){Ys?Qt?Qt.push(a):Qt=[a]:Ys=a}function Xe(){if(Ys){var a=Ys,l=Qt;if(Qt=Ys=null,Kn(a),l)for(a=0;a<l.length;a++)Kn(l[a])}}function Rt(a,l){return a(l)}function Ut(){}var fr=!1;function gn(a,l,f){if(fr)return a(l,f);fr=!0;try{return Rt(a,l,f)}finally{fr=!1,(Ys!==null||Qt!==null)&&(Ut(),Xe())}}function yn(a,l){var f=a.stateNode;if(f===null)return null;var y=Cm(f);if(y===null)return null;f=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var vn=!1;if(c)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){vn=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{vn=!1}function ds(a,l,f,y,x,T,O,z,H){var ie=Array.prototype.slice.call(arguments,3);try{l.apply(f,ie)}catch(ye){this.onError(ye)}}var mo=!1,bi=null,nu=!1,Ps=null,om={onError:function(a){mo=!0,bi=a}};function am(a,l,f,y,x,T,O,z,H){mo=!1,bi=null,ds.apply(om,arguments)}function _h(a,l,f,y,x,T,O,z,H){if(am.apply(this,arguments),mo){if(mo){var ie=bi;mo=!1,bi=null}else throw Error(t(198));nu||(nu=!0,Ps=ie)}}function Qs(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function bh(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function lm(a){if(Qs(a)!==a)throw Error(t(188))}function cm(a){var l=a.alternate;if(!l){if(l=Qs(a),l===null)throw Error(t(188));return l!==a?null:a}for(var f=a,y=l;;){var x=f.return;if(x===null)break;var T=x.alternate;if(T===null){if(y=x.return,y!==null){f=y;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===f)return lm(x),a;if(T===y)return lm(x),l;T=T.sibling}throw Error(t(188))}if(f.return!==y.return)f=x,y=T;else{for(var O=!1,z=x.child;z;){if(z===f){O=!0,f=x,y=T;break}if(z===y){O=!0,y=x,f=T;break}z=z.sibling}if(!O){for(z=T.child;z;){if(z===f){O=!0,f=T,y=x;break}if(z===y){O=!0,y=T,f=x;break}z=z.sibling}if(!O)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:l}function um(a){return a=cm(a),a!==null?Nl(a):null}function Nl(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Nl(a);if(l!==null)return l;a=a.sibling}return null}var Eh=e.unstable_scheduleCallback,su=e.unstable_cancelCallback,jl=e.unstable_shouldYield,go=e.unstable_requestPaint,tr=e.unstable_now,R0=e.unstable_getCurrentPriorityLevel,iu=e.unstable_ImmediatePriority,Th=e.unstable_UserBlockingPriority,Ol=e.unstable_NormalPriority,Sh=e.unstable_LowPriority,ou=e.unstable_IdlePriority,Dl=null,hs=null;function dm(a){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Dl,a,void 0,(a.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:Ml,Ei=Math.log,As=Math.LN2;function Ml(a){return a>>>=0,a===0?32:31-(Ei(a)/As|0)|0}var Ti=64,la=4194304;function Mt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function yo(a,l){var f=a.pendingLanes;if(f===0)return 0;var y=0,x=a.suspendedLanes,T=a.pingedLanes,O=f&268435455;if(O!==0){var z=O&~x;z!==0?y=Mt(z):(T&=O,T!==0&&(y=Mt(T)))}else O=f&~x,O!==0?y=Mt(O):T!==0&&(y=Mt(T));if(y===0)return 0;if(l!==0&&l!==y&&(l&x)===0&&(x=y&-y,T=l&-l,x>=T||x===16&&(T&4194240)!==0))return l;if((y&4)!==0&&(y|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)f=31-fs(l),x=1<<f,y|=a[f],l&=~x;return y}function Ll(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vl(a,l){for(var f=a.suspendedLanes,y=a.pingedLanes,x=a.expirationTimes,T=a.pendingLanes;0<T;){var O=31-fs(T),z=1<<O,H=x[O];H===-1?((z&f)===0||(z&y)!==0)&&(x[O]=Ll(z,l)):H<=l&&(a.expiredLanes|=z),T&=~z}}function kh(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ih(){var a=Ti;return Ti<<=1,(Ti&4194240)===0&&(Ti=64),a}function Ch(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function Fl(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-fs(l),a[l]=f}function N0(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var x=31-fs(f),T=1<<x;l[x]=0,y[x]=-1,a[x]=-1,f&=~T}}function Ph(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var y=31-fs(f),x=1<<y;x&l|a[y]&l&&(a[y]|=l),f&=~x}}var kt=0;function Si(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ah,au,Rh,Nh,jh,ki=!1,lu=[],Ii=null,Ci=null,nn=null,Ul=new Map,vo=new Map,ps=[],hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ca(a,l){switch(a){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Ul.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(l.pointerId)}}function Js(a,l,f,y,x,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:f,eventSystemFlags:y,nativeEvent:T,targetContainers:[x]},l!==null&&(l=Gh(l),l!==null&&au(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),a)}function fm(a,l,f,y,x){switch(l){case"focusin":return Ii=Js(Ii,a,l,f,y,x),!0;case"dragenter":return Ci=Js(Ci,a,l,f,y,x),!0;case"mouseover":return nn=Js(nn,a,l,f,y,x),!0;case"pointerover":var T=x.pointerId;return Ul.set(T,Js(Ul.get(T)||null,a,l,f,y,x)),!0;case"gotpointercapture":return T=x.pointerId,vo.set(T,Js(vo.get(T)||null,a,l,f,y,x)),!0}return!1}function cu(a){var l=Wl(a.target);if(l!==null){var f=Qs(l);if(f!==null){if(l=f.tag,l===13){if(l=bh(f),l!==null){a.blockedOn=l,jh(a.priority,function(){Rh(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Yt(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=uu(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);us=y,f.target.dispatchEvent(y),us=null}else return l=Gh(f),l!==null&&au(l),a.blockedOn=f,!1;l.shift()}return!0}function pm(a,l,f){Yt(a)&&f.delete(l)}function j0(){ki=!1,Ii!==null&&Yt(Ii)&&(Ii=null),Ci!==null&&Yt(Ci)&&(Ci=null),nn!==null&&Yt(nn)&&(nn=null),Ul.forEach(pm),vo.forEach(pm)}function ua(a,l){a.blockedOn===l&&(a.blockedOn=null,ki||(ki=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,j0)))}function da(a){function l(x){return ua(x,a)}if(0<lu.length){ua(lu[0],a);for(var f=1;f<lu.length;f++){var y=lu[f];y.blockedOn===a&&(y.blockedOn=null)}}for(Ii!==null&&ua(Ii,a),Ci!==null&&ua(Ci,a),nn!==null&&ua(nn,a),Ul.forEach(l),vo.forEach(l),f=0;f<ps.length;f++)y=ps[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<ps.length&&(f=ps[0],f.blockedOn===null);)cu(f),f.blockedOn===null&&ps.shift()}var wo=M.ReactCurrentBatchConfig,xo=!0;function Pi(a,l,f,y){var x=kt,T=wo.transition;wo.transition=null;try{kt=1,Oh(a,l,f,y)}finally{kt=x,wo.transition=T}}function mm(a,l,f,y){var x=kt,T=wo.transition;wo.transition=null;try{kt=4,Oh(a,l,f,y)}finally{kt=x,wo.transition=T}}function Oh(a,l,f,y){if(xo){var x=uu(a,l,f,y);if(x===null)W0(a,l,y,Ai,f),ca(a,y);else if(fm(x,a,l,f,y))y.stopPropagation();else if(ca(a,y),l&4&&-1<hm.indexOf(a)){for(;x!==null;){var T=Gh(x);if(T!==null&&Ah(T),T=uu(a,l,f,y),T===null&&W0(a,l,y,Ai,f),T===x)break;x=T}x!==null&&y.stopPropagation()}else W0(a,l,y,null,f)}}var Ai=null;function uu(a,l,f,y){if(Ai=null,a=po(y),a=Wl(a),a!==null)if(l=Qs(a),l===null)a=null;else if(f=l.tag,f===13){if(a=bh(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Ai=a,null}function du(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R0()){case iu:return 1;case Th:return 4;case Ol:case Sh:return 16;case ou:return 536870912;default:return 16}default:return 16}}var ms=null,hu=null,_o=null;function gm(){if(_o)return _o;var a,l=hu,f=l.length,y,x="value"in ms?ms.value:ms.textContent,T=x.length;for(a=0;a<f&&l[a]===x[a];a++);var O=f-a;for(y=1;y<=O&&l[f-y]===x[T-y];y++);return _o=x.slice(a,1<y?1-y:void 0)}function $l(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Ri(){return!0}function Dh(){return!1}function wn(a){function l(f,y,x,T,O){this._reactName=f,this._targetInst=x,this.type=y,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var z in a)a.hasOwnProperty(z)&&(f=a[z],this[z]=f?f(T):T[z]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ri:Dh,this.isPropagationStopped=Dh,this}return K(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),l}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=wn(Ni),ha=K({},Ni,{view:0,detail:0}),fu=wn(ha),pu,mu,gs,zl=K({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gs&&(gs&&a.type==="mousemove"?(pu=a.screenX-gs.screenX,mu=a.screenY-gs.screenY):mu=pu=0,gs=a),pu)},movementY:function(a){return"movementY"in a?a.movementY:mu}}),Mh=wn(zl),ym=K({},zl,{dataTransfer:0}),vm=wn(ym),gu=K({},ha,{relatedTarget:0}),sn=wn(gu),wm=K({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),xm=wn(wm),fa=K({},Ni,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=wn(fa),S=K({},Ni,{data:0}),I=wn(S),F={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},re={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ie(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=oe[a])?!!l[a]:!1}function lt(){return Ie}var br=K({},ha,{key:function(a){if(a.key){var l=F[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=$l(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?re[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lt,charCode:function(a){return a.type==="keypress"?$l(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?$l(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$t=wn(br),Ar=K({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ys=wn(Ar),bo=K({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lt}),ji=wn(bo),Oi=K({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=wn(Oi),Lh=K({},zl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),pV=wn(Lh),mV=[9,13,27,32],O0=c&&"CompositionEvent"in window,Vh=null;c&&"documentMode"in document&&(Vh=document.documentMode);var gV=c&&"TextEvent"in window&&!Vh,tS=c&&(!O0||Vh&&8<Vh&&11>=Vh),rS=" ",nS=!1;function sS(a,l){switch(a){case"keyup":return mV.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var vu=!1;function yV(a,l){switch(a){case"compositionend":return iS(l);case"keypress":return l.which!==32?null:(nS=!0,rS);case"textInput":return a=l.data,a===rS&&nS?null:a;default:return null}}function vV(a,l){if(vu)return a==="compositionend"||!O0&&sS(a,l)?(a=gm(),_o=hu=ms=null,vu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tS&&l.locale!=="ko"?null:l.data;default:return null}}var wV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oS(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!wV[a.type]:l==="textarea"}function aS(a,l,f,y){_i(y),l=Sm(l,"onChange"),0<l.length&&(f=new Bl("onChange","change",null,f,y),a.push({event:f,listeners:l}))}var Fh=null,Uh=null;function xV(a){SS(a,0)}function _m(a){var l=Eu(a);if(at(l))return a}function _V(a,l){if(a==="change")return l}var lS=!1;if(c){var D0;if(c){var M0="oninput"in document;if(!M0){var cS=document.createElement("div");cS.setAttribute("oninput","return;"),M0=typeof cS.oninput=="function"}D0=M0}else D0=!1;lS=D0&&(!document.documentMode||9<document.documentMode)}function uS(){Fh&&(Fh.detachEvent("onpropertychange",dS),Uh=Fh=null)}function dS(a){if(a.propertyName==="value"&&_m(Uh)){var l=[];aS(l,Uh,a,po(a)),gn(xV,l)}}function bV(a,l,f){a==="focusin"?(uS(),Fh=l,Uh=f,Fh.attachEvent("onpropertychange",dS)):a==="focusout"&&uS()}function EV(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _m(Uh)}function TV(a,l){if(a==="click")return _m(l)}function SV(a,l){if(a==="input"||a==="change")return _m(l)}function kV(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Xs=typeof Object.is=="function"?Object.is:kV;function $h(a,l){if(Xs(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var x=f[y];if(!d.call(l,x)||!Xs(a[x],l[x]))return!1}return!0}function hS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function fS(a,l){var f=hS(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=l&&y>=l)return{node:f,offset:l-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=hS(f)}}function pS(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?pS(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function mS(){for(var a=window,l=Pt();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=Pt(a.document)}return l}function L0(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function IV(a){var l=mS(),f=a.focusedElem,y=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&pS(f.ownerDocument.documentElement,f)){if(y!==null&&L0(f)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var x=f.textContent.length,T=Math.min(y.start,x);y=y.end===void 0?T:Math.min(y.end,x),!a.extend&&T>y&&(x=y,y=T,T=x),x=fS(f,T);var O=fS(f,y);x&&O&&(a.rangeCount!==1||a.anchorNode!==x.node||a.anchorOffset!==x.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),a.removeAllRanges(),T>y?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var CV=c&&"documentMode"in document&&11>=document.documentMode,wu=null,V0=null,Bh=null,F0=!1;function gS(a,l,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;F0||wu==null||wu!==Pt(y)||(y=wu,"selectionStart"in y&&L0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bh&&$h(Bh,y)||(Bh=y,y=Sm(V0,"onSelect"),0<y.length&&(l=new Bl("onSelect","select",null,l,f),a.push({event:l,listeners:y}),l.target=wu)))}function bm(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var xu={animationend:bm("Animation","AnimationEnd"),animationiteration:bm("Animation","AnimationIteration"),animationstart:bm("Animation","AnimationStart"),transitionend:bm("Transition","TransitionEnd")},U0={},yS={};c&&(yS=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function Em(a){if(U0[a])return U0[a];if(!xu[a])return a;var l=xu[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in yS)return U0[a]=l[f];return a}var vS=Em("animationend"),wS=Em("animationiteration"),xS=Em("animationstart"),_S=Em("transitionend"),bS=new Map,ES="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pa(a,l){bS.set(a,l),i(l,[a])}for(var $0=0;$0<ES.length;$0++){var B0=ES[$0],PV=B0.toLowerCase(),AV=B0[0].toUpperCase()+B0.slice(1);pa(PV,"on"+AV)}pa(vS,"onAnimationEnd"),pa(wS,"onAnimationIteration"),pa(xS,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(_S,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RV=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function TS(a,l,f){var y=a.type||"unknown-event";a.currentTarget=f,_h(y,l,void 0,a),a.currentTarget=null}function SS(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],x=y.event;y=y.listeners;e:{var T=void 0;if(l)for(var O=y.length-1;0<=O;O--){var z=y[O],H=z.instance,ie=z.currentTarget;if(z=z.listener,H!==T&&x.isPropagationStopped())break e;TS(x,z,ie),T=H}else for(O=0;O<y.length;O++){if(z=y[O],H=z.instance,ie=z.currentTarget,z=z.listener,H!==T&&x.isPropagationStopped())break e;TS(x,z,ie),T=H}}}if(nu)throw a=Ps,nu=!1,Ps=null,a}function rr(a,l){var f=l[Q0];f===void 0&&(f=l[Q0]=new Set);var y=a+"__bubble";f.has(y)||(kS(l,a,2,!1),f.add(y))}function z0(a,l,f){var y=0;l&&(y|=4),kS(f,a,y,l)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Wh(a){if(!a[Tm]){a[Tm]=!0,n.forEach(function(f){f!=="selectionchange"&&(RV.has(f)||z0(f,!1,a),z0(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Tm]||(l[Tm]=!0,z0("selectionchange",!1,l))}}function kS(a,l,f,y){switch(du(l)){case 1:var x=Pi;break;case 4:x=mm;break;default:x=Oh}f=x.bind(null,l,f,a),x=void 0,!vn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),y?x!==void 0?a.addEventListener(l,f,{capture:!0,passive:x}):a.addEventListener(l,f,!0):x!==void 0?a.addEventListener(l,f,{passive:x}):a.addEventListener(l,f,!1)}function W0(a,l,f,y,x){var T=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var z=y.stateNode.containerInfo;if(z===x||z.nodeType===8&&z.parentNode===x)break;if(O===4)for(O=y.return;O!==null;){var H=O.tag;if((H===3||H===4)&&(H=O.stateNode.containerInfo,H===x||H.nodeType===8&&H.parentNode===x))return;O=O.return}for(;z!==null;){if(O=Wl(z),O===null)return;if(H=O.tag,H===5||H===6){y=T=O;continue e}z=z.parentNode}}y=y.return}gn(function(){var ie=T,ye=po(f),xe=[];e:{var me=bS.get(a);if(me!==void 0){var De=Bl,Ue=a;switch(a){case"keypress":if($l(f)===0)break e;case"keydown":case"keyup":De=$t;break;case"focusin":Ue="focus",De=sn;break;case"focusout":Ue="blur",De=sn;break;case"beforeblur":case"afterblur":De=sn;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=vm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=ji;break;case vS:case wS:case xS:De=xm;break;case _S:De=yu;break;case"scroll":De=fu;break;case"wheel":De=pV;break;case"copy":case"cut":case"paste":De=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=ys}var We=(l&4)!==0,Er=!We&&a==="scroll",te=We?me!==null?me+"Capture":null:me;We=[];for(var Q=ie,se;Q!==null;){se=Q;var Te=se.stateNode;if(se.tag===5&&Te!==null&&(se=Te,te!==null&&(Te=yn(Q,te),Te!=null&&We.push(qh(Q,Te,se)))),Er)break;Q=Q.return}0<We.length&&(me=new De(me,Ue,null,f,ye),xe.push({event:me,listeners:We}))}}if((l&7)===0){e:{if(me=a==="mouseover"||a==="pointerover",De=a==="mouseout"||a==="pointerout",me&&f!==us&&(Ue=f.relatedTarget||f.fromElement)&&(Wl(Ue)||Ue[Eo]))break e;if((De||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,De?(Ue=f.relatedTarget||f.toElement,De=ie,Ue=Ue?Wl(Ue):null,Ue!==null&&(Er=Qs(Ue),Ue!==Er||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(De=null,Ue=ie),De!==Ue)){if(We=Mh,Te="onMouseLeave",te="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(We=ys,Te="onPointerLeave",te="onPointerEnter",Q="pointer"),Er=De==null?me:Eu(De),se=Ue==null?me:Eu(Ue),me=new We(Te,Q+"leave",De,f,ye),me.target=Er,me.relatedTarget=se,Te=null,Wl(ye)===ie&&(We=new We(te,Q+"enter",Ue,f,ye),We.target=se,We.relatedTarget=Er,Te=We),Er=Te,De&&Ue)t:{for(We=De,te=Ue,Q=0,se=We;se;se=_u(se))Q++;for(se=0,Te=te;Te;Te=_u(Te))se++;for(;0<Q-se;)We=_u(We),Q--;for(;0<se-Q;)te=_u(te),se--;for(;Q--;){if(We===te||te!==null&&We===te.alternate)break t;We=_u(We),te=_u(te)}We=null}else We=null;De!==null&&IS(xe,me,De,We,!1),Ue!==null&&Er!==null&&IS(xe,Er,Ue,We,!0)}}e:{if(me=ie?Eu(ie):window,De=me.nodeName&&me.nodeName.toLowerCase(),De==="select"||De==="input"&&me.type==="file")var He=_V;else if(oS(me))if(lS)He=SV;else{He=EV;var Ze=bV}else(De=me.nodeName)&&De.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(He=TV);if(He&&(He=He(a,ie))){aS(xe,He,f,ye);break e}Ze&&Ze(a,me,ie),a==="focusout"&&(Ze=me._wrapperState)&&Ze.controlled&&me.type==="number"&&It(me,"number",me.value)}switch(Ze=ie?Eu(ie):window,a){case"focusin":(oS(Ze)||Ze.contentEditable==="true")&&(wu=Ze,V0=ie,Bh=null);break;case"focusout":Bh=V0=wu=null;break;case"mousedown":F0=!0;break;case"contextmenu":case"mouseup":case"dragend":F0=!1,gS(xe,f,ye);break;case"selectionchange":if(CV)break;case"keydown":case"keyup":gS(xe,f,ye)}var et;if(O0)e:{switch(a){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else vu?sS(a,f)&&(nt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(nt="onCompositionStart");nt&&(tS&&f.locale!=="ko"&&(vu||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&vu&&(et=gm()):(ms=ye,hu="value"in ms?ms.value:ms.textContent,vu=!0)),Ze=Sm(ie,nt),0<Ze.length&&(nt=new I(nt,a,null,f,ye),xe.push({event:nt,listeners:Ze}),et?nt.data=et:(et=iS(f),et!==null&&(nt.data=et)))),(et=gV?yV(a,f):vV(a,f))&&(ie=Sm(ie,"onBeforeInput"),0<ie.length&&(ye=new I("onBeforeInput","beforeinput",null,f,ye),xe.push({event:ye,listeners:ie}),ye.data=et))}SS(xe,l)})}function qh(a,l,f){return{instance:a,listener:l,currentTarget:f}}function Sm(a,l){for(var f=l+"Capture",y=[];a!==null;){var x=a,T=x.stateNode;x.tag===5&&T!==null&&(x=T,T=yn(a,f),T!=null&&y.unshift(qh(a,T,x)),T=yn(a,l),T!=null&&y.push(qh(a,T,x))),a=a.return}return y}function _u(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function IS(a,l,f,y,x){for(var T=l._reactName,O=[];f!==null&&f!==y;){var z=f,H=z.alternate,ie=z.stateNode;if(H!==null&&H===y)break;z.tag===5&&ie!==null&&(z=ie,x?(H=yn(f,T),H!=null&&O.unshift(qh(f,H,z))):x||(H=yn(f,T),H!=null&&O.push(qh(f,H,z)))),f=f.return}O.length!==0&&a.push({event:l,listeners:O})}var NV=/\r\n?/g,jV=/\u0000|\uFFFD/g;function CS(a){return(typeof a=="string"?a:""+a).replace(NV,`
`).replace(jV,"")}function km(a,l,f){if(l=CS(l),CS(a)!==l&&f)throw Error(t(425))}function Im(){}var q0=null,H0=null;function G0(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var K0=typeof setTimeout=="function"?setTimeout:void 0,OV=typeof clearTimeout=="function"?clearTimeout:void 0,PS=typeof Promise=="function"?Promise:void 0,DV=typeof queueMicrotask=="function"?queueMicrotask:typeof PS<"u"?function(a){return PS.resolve(null).then(a).catch(MV)}:K0;function MV(a){setTimeout(function(){throw a})}function Y0(a,l){var f=l,y=0;do{var x=f.nextSibling;if(a.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(y===0){a.removeChild(x),da(l);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=x}while(f);da(l)}function ma(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function AS(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var bu=Math.random().toString(36).slice(2),Di="__reactFiber$"+bu,Hh="__reactProps$"+bu,Eo="__reactContainer$"+bu,Q0="__reactEvents$"+bu,LV="__reactListeners$"+bu,VV="__reactHandles$"+bu;function Wl(a){var l=a[Di];if(l)return l;for(var f=a.parentNode;f;){if(l=f[Eo]||f[Di]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=AS(a);a!==null;){if(f=a[Di])return f;a=AS(a)}return l}a=f,f=a.parentNode}return null}function Gh(a){return a=a[Di]||a[Eo],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Eu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Cm(a){return a[Hh]||null}var J0=[],Tu=-1;function ga(a){return{current:a}}function nr(a){0>Tu||(a.current=J0[Tu],J0[Tu]=null,Tu--)}function Jt(a,l){Tu++,J0[Tu]=a.current,a.current=l}var ya={},xn=ga(ya),Yn=ga(!1),ql=ya;function Su(a,l){var f=a.type.contextTypes;if(!f)return ya;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var x={},T;for(T in f)x[T]=l[T];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=x),x}function Qn(a){return a=a.childContextTypes,a!=null}function Pm(){nr(Yn),nr(xn)}function RS(a,l,f){if(xn.current!==ya)throw Error(t(168));Jt(xn,l),Jt(Yn,f)}function NS(a,l,f){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var x in y)if(!(x in l))throw Error(t(108,pe(a)||"Unknown",x));return K({},f,y)}function Am(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ya,ql=xn.current,Jt(xn,a),Jt(Yn,Yn.current),!0}function jS(a,l,f){var y=a.stateNode;if(!y)throw Error(t(169));f?(a=NS(a,l,ql),y.__reactInternalMemoizedMergedChildContext=a,nr(Yn),nr(xn),Jt(xn,a)):nr(Yn),Jt(Yn,f)}var To=null,Rm=!1,X0=!1;function OS(a){To===null?To=[a]:To.push(a)}function FV(a){Rm=!0,OS(a)}function va(){if(!X0&&To!==null){X0=!0;var a=0,l=kt;try{var f=To;for(kt=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}To=null,Rm=!1}catch(x){throw To!==null&&(To=To.slice(a+1)),Eh(iu,va),x}finally{kt=l,X0=!1}}return null}var ku=[],Iu=0,Nm=null,jm=0,Rs=[],Ns=0,Hl=null,So=1,ko="";function Gl(a,l){ku[Iu++]=jm,ku[Iu++]=Nm,Nm=a,jm=l}function DS(a,l,f){Rs[Ns++]=So,Rs[Ns++]=ko,Rs[Ns++]=Hl,Hl=a;var y=So;a=ko;var x=32-fs(y)-1;y&=~(1<<x),f+=1;var T=32-fs(l)+x;if(30<T){var O=x-x%5;T=(y&(1<<O)-1).toString(32),y>>=O,x-=O,So=1<<32-fs(l)+x|f<<x|y,ko=T+a}else So=1<<T|f<<x|y,ko=a}function Z0(a){a.return!==null&&(Gl(a,1),DS(a,1,0))}function ew(a){for(;a===Nm;)Nm=ku[--Iu],ku[Iu]=null,jm=ku[--Iu],ku[Iu]=null;for(;a===Hl;)Hl=Rs[--Ns],Rs[Ns]=null,ko=Rs[--Ns],Rs[Ns]=null,So=Rs[--Ns],Rs[Ns]=null}var vs=null,ws=null,ir=!1,Zs=null;function MS(a,l){var f=Ms(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function LS(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,vs=a,ws=ma(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,vs=a,ws=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=Hl!==null?{id:So,overflow:ko}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=Ms(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,vs=a,ws=null,!0):!1;default:return!1}}function tw(a){return(a.mode&1)!==0&&(a.flags&128)===0}function rw(a){if(ir){var l=ws;if(l){var f=l;if(!LS(a,l)){if(tw(a))throw Error(t(418));l=ma(f.nextSibling);var y=vs;l&&LS(a,l)?MS(y,f):(a.flags=a.flags&-4097|2,ir=!1,vs=a)}}else{if(tw(a))throw Error(t(418));a.flags=a.flags&-4097|2,ir=!1,vs=a}}}function VS(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function Om(a){if(a!==vs)return!1;if(!ir)return VS(a),ir=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!G0(a.type,a.memoizedProps)),l&&(l=ws)){if(tw(a))throw FS(),Error(t(418));for(;l;)MS(a,l),l=ma(l.nextSibling)}if(VS(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){ws=ma(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}ws=null}}else ws=vs?ma(a.stateNode.nextSibling):null;return!0}function FS(){for(var a=ws;a;)a=ma(a.nextSibling)}function Cu(){ws=vs=null,ir=!1}function nw(a){Zs===null?Zs=[a]:Zs.push(a)}var UV=M.ReactCurrentBatchConfig;function Kh(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,a));var x=y,T=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var z=x.refs;O===null?delete z[T]:z[T]=O},l._stringRef=T,l)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function Dm(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function US(a){var l=a._init;return l(a._payload)}function $S(a){function l(te,Q){if(a){var se=te.deletions;se===null?(te.deletions=[Q],te.flags|=16):se.push(Q)}}function f(te,Q){if(!a)return null;for(;Q!==null;)l(te,Q),Q=Q.sibling;return null}function y(te,Q){for(te=new Map;Q!==null;)Q.key!==null?te.set(Q.key,Q):te.set(Q.index,Q),Q=Q.sibling;return te}function x(te,Q){return te=ka(te,Q),te.index=0,te.sibling=null,te}function T(te,Q,se){return te.index=se,a?(se=te.alternate,se!==null?(se=se.index,se<Q?(te.flags|=2,Q):se):(te.flags|=2,Q)):(te.flags|=1048576,Q)}function O(te){return a&&te.alternate===null&&(te.flags|=2),te}function z(te,Q,se,Te){return Q===null||Q.tag!==6?(Q=Kw(se,te.mode,Te),Q.return=te,Q):(Q=x(Q,se),Q.return=te,Q)}function H(te,Q,se,Te){var He=se.type;return He===A?ye(te,Q,se.props.children,Te,se.key):Q!==null&&(Q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===de&&US(He)===Q.type)?(Te=x(Q,se.props),Te.ref=Kh(te,Q,se),Te.return=te,Te):(Te=ig(se.type,se.key,se.props,null,te.mode,Te),Te.ref=Kh(te,Q,se),Te.return=te,Te)}function ie(te,Q,se,Te){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=Yw(se,te.mode,Te),Q.return=te,Q):(Q=x(Q,se.children||[]),Q.return=te,Q)}function ye(te,Q,se,Te,He){return Q===null||Q.tag!==7?(Q=tc(se,te.mode,Te,He),Q.return=te,Q):(Q=x(Q,se),Q.return=te,Q)}function xe(te,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Kw(""+Q,te.mode,se),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return se=ig(Q.type,Q.key,Q.props,null,te.mode,se),se.ref=Kh(te,null,Q),se.return=te,se;case B:return Q=Yw(Q,te.mode,se),Q.return=te,Q;case de:var Te=Q._init;return xe(te,Te(Q._payload),se)}if(er(Q)||J(Q))return Q=tc(Q,te.mode,se,null),Q.return=te,Q;Dm(te,Q)}return null}function me(te,Q,se,Te){var He=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return He!==null?null:z(te,Q,""+se,Te);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case $:return se.key===He?H(te,Q,se,Te):null;case B:return se.key===He?ie(te,Q,se,Te):null;case de:return He=se._init,me(te,Q,He(se._payload),Te)}if(er(se)||J(se))return He!==null?null:ye(te,Q,se,Te,null);Dm(te,se)}return null}function De(te,Q,se,Te,He){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return te=te.get(se)||null,z(Q,te,""+Te,He);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case $:return te=te.get(Te.key===null?se:Te.key)||null,H(Q,te,Te,He);case B:return te=te.get(Te.key===null?se:Te.key)||null,ie(Q,te,Te,He);case de:var Ze=Te._init;return De(te,Q,se,Ze(Te._payload),He)}if(er(Te)||J(Te))return te=te.get(se)||null,ye(Q,te,Te,He,null);Dm(Q,Te)}return null}function Ue(te,Q,se,Te){for(var He=null,Ze=null,et=Q,nt=Q=0,Xr=null;et!==null&&nt<se.length;nt++){et.index>nt?(Xr=et,et=null):Xr=et.sibling;var Ot=me(te,et,se[nt],Te);if(Ot===null){et===null&&(et=Xr);break}a&&et&&Ot.alternate===null&&l(te,et),Q=T(Ot,Q,nt),Ze===null?He=Ot:Ze.sibling=Ot,Ze=Ot,et=Xr}if(nt===se.length)return f(te,et),ir&&Gl(te,nt),He;if(et===null){for(;nt<se.length;nt++)et=xe(te,se[nt],Te),et!==null&&(Q=T(et,Q,nt),Ze===null?He=et:Ze.sibling=et,Ze=et);return ir&&Gl(te,nt),He}for(et=y(te,et);nt<se.length;nt++)Xr=De(et,te,nt,se[nt],Te),Xr!==null&&(a&&Xr.alternate!==null&&et.delete(Xr.key===null?nt:Xr.key),Q=T(Xr,Q,nt),Ze===null?He=Xr:Ze.sibling=Xr,Ze=Xr);return a&&et.forEach(function(Ia){return l(te,Ia)}),ir&&Gl(te,nt),He}function We(te,Q,se,Te){var He=J(se);if(typeof He!="function")throw Error(t(150));if(se=He.call(se),se==null)throw Error(t(151));for(var Ze=He=null,et=Q,nt=Q=0,Xr=null,Ot=se.next();et!==null&&!Ot.done;nt++,Ot=se.next()){et.index>nt?(Xr=et,et=null):Xr=et.sibling;var Ia=me(te,et,Ot.value,Te);if(Ia===null){et===null&&(et=Xr);break}a&&et&&Ia.alternate===null&&l(te,et),Q=T(Ia,Q,nt),Ze===null?He=Ia:Ze.sibling=Ia,Ze=Ia,et=Xr}if(Ot.done)return f(te,et),ir&&Gl(te,nt),He;if(et===null){for(;!Ot.done;nt++,Ot=se.next())Ot=xe(te,Ot.value,Te),Ot!==null&&(Q=T(Ot,Q,nt),Ze===null?He=Ot:Ze.sibling=Ot,Ze=Ot);return ir&&Gl(te,nt),He}for(et=y(te,et);!Ot.done;nt++,Ot=se.next())Ot=De(et,te,nt,Ot.value,Te),Ot!==null&&(a&&Ot.alternate!==null&&et.delete(Ot.key===null?nt:Ot.key),Q=T(Ot,Q,nt),Ze===null?He=Ot:Ze.sibling=Ot,Ze=Ot);return a&&et.forEach(function(wF){return l(te,wF)}),ir&&Gl(te,nt),He}function Er(te,Q,se,Te){if(typeof se=="object"&&se!==null&&se.type===A&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case $:e:{for(var He=se.key,Ze=Q;Ze!==null;){if(Ze.key===He){if(He=se.type,He===A){if(Ze.tag===7){f(te,Ze.sibling),Q=x(Ze,se.props.children),Q.return=te,te=Q;break e}}else if(Ze.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===de&&US(He)===Ze.type){f(te,Ze.sibling),Q=x(Ze,se.props),Q.ref=Kh(te,Ze,se),Q.return=te,te=Q;break e}f(te,Ze);break}else l(te,Ze);Ze=Ze.sibling}se.type===A?(Q=tc(se.props.children,te.mode,Te,se.key),Q.return=te,te=Q):(Te=ig(se.type,se.key,se.props,null,te.mode,Te),Te.ref=Kh(te,Q,se),Te.return=te,te=Te)}return O(te);case B:e:{for(Ze=se.key;Q!==null;){if(Q.key===Ze)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){f(te,Q.sibling),Q=x(Q,se.children||[]),Q.return=te,te=Q;break e}else{f(te,Q);break}else l(te,Q);Q=Q.sibling}Q=Yw(se,te.mode,Te),Q.return=te,te=Q}return O(te);case de:return Ze=se._init,Er(te,Q,Ze(se._payload),Te)}if(er(se))return Ue(te,Q,se,Te);if(J(se))return We(te,Q,se,Te);Dm(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Q!==null&&Q.tag===6?(f(te,Q.sibling),Q=x(Q,se),Q.return=te,te=Q):(f(te,Q),Q=Kw(se,te.mode,Te),Q.return=te,te=Q),O(te)):f(te,Q)}return Er}var Pu=$S(!0),BS=$S(!1),Mm=ga(null),Lm=null,Au=null,sw=null;function iw(){sw=Au=Lm=null}function ow(a){var l=Mm.current;nr(Mm),a._currentValue=l}function aw(a,l,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===f)break;a=a.return}}function Ru(a,l){Lm=a,sw=Au=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Jn=!0),a.firstContext=null)}function js(a){var l=a._currentValue;if(sw!==a)if(a={context:a,memoizedValue:l,next:null},Au===null){if(Lm===null)throw Error(t(308));Au=a,Lm.dependencies={lanes:0,firstContext:a}}else Au=Au.next=a;return l}var Kl=null;function lw(a){Kl===null?Kl=[a]:Kl.push(a)}function zS(a,l,f,y){var x=l.interleaved;return x===null?(f.next=f,lw(l)):(f.next=x.next,x.next=f),l.interleaved=f,Io(a,y)}function Io(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var wa=!1;function cw(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WS(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Co(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function xa(a,l,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Nt&2)!==0){var x=y.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),y.pending=l,Io(a,f)}return x=y.interleaved,x===null?(l.next=l,lw(y)):(l.next=x.next,x.next=l),y.interleaved=l,Io(a,f)}function Vm(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,f|=y,l.lanes=f,Ph(a,f)}}function qS(a,l){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var x=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var O={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?x=T=O:T=T.next=O,f=f.next}while(f!==null);T===null?x=T=l:T=T.next=l}else x=T=l;f={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function Fm(a,l,f,y){var x=a.updateQueue;wa=!1;var T=x.firstBaseUpdate,O=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var H=z,ie=H.next;H.next=null,O===null?T=ie:O.next=ie,O=H;var ye=a.alternate;ye!==null&&(ye=ye.updateQueue,z=ye.lastBaseUpdate,z!==O&&(z===null?ye.firstBaseUpdate=ie:z.next=ie,ye.lastBaseUpdate=H))}if(T!==null){var xe=x.baseState;O=0,ye=ie=H=null,z=T;do{var me=z.lane,De=z.eventTime;if((y&me)===me){ye!==null&&(ye=ye.next={eventTime:De,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Ue=a,We=z;switch(me=l,De=f,We.tag){case 1:if(Ue=We.payload,typeof Ue=="function"){xe=Ue.call(De,xe,me);break e}xe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=We.payload,me=typeof Ue=="function"?Ue.call(De,xe,me):Ue,me==null)break e;xe=K({},xe,me);break e;case 2:wa=!0}}z.callback!==null&&z.lane!==0&&(a.flags|=64,me=x.effects,me===null?x.effects=[z]:me.push(z))}else De={eventTime:De,lane:me,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ye===null?(ie=ye=De,H=xe):ye=ye.next=De,O|=me;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;me=z,z=me.next,me.next=null,x.lastBaseUpdate=me,x.shared.pending=null}}while(!0);if(ye===null&&(H=xe),x.baseState=H,x.firstBaseUpdate=ie,x.lastBaseUpdate=ye,l=x.shared.interleaved,l!==null){x=l;do O|=x.lane,x=x.next;while(x!==l)}else T===null&&(x.shared.lanes=0);Jl|=O,a.lanes=O,a.memoizedState=xe}}function HS(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],x=y.callback;if(x!==null){if(y.callback=null,y=f,typeof x!="function")throw Error(t(191,x));x.call(y)}}}var Yh={},Mi=ga(Yh),Qh=ga(Yh),Jh=ga(Yh);function Yl(a){if(a===Yh)throw Error(t(174));return a}function uw(a,l){switch(Jt(Jh,l),Jt(Qh,a),Jt(Mi,Yh),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:we(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=we(l,a)}nr(Mi),Jt(Mi,l)}function Nu(){nr(Mi),nr(Qh),nr(Jh)}function GS(a){Yl(Jh.current);var l=Yl(Mi.current),f=we(l,a.type);l!==f&&(Jt(Qh,a),Jt(Mi,f))}function dw(a){Qh.current===a&&(nr(Mi),nr(Qh))}var lr=ga(0);function Um(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var hw=[];function fw(){for(var a=0;a<hw.length;a++)hw[a]._workInProgressVersionPrimary=null;hw.length=0}var $m=M.ReactCurrentDispatcher,pw=M.ReactCurrentBatchConfig,Ql=0,cr=null,$r=null,Qr=null,Bm=!1,Xh=!1,Zh=0,$V=0;function _n(){throw Error(t(321))}function mw(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Xs(a[f],l[f]))return!1;return!0}function gw(a,l,f,y,x,T){if(Ql=T,cr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$m.current=a===null||a.memoizedState===null?qV:HV,a=f(y,x),Xh){T=0;do{if(Xh=!1,Zh=0,25<=T)throw Error(t(301));T+=1,Qr=$r=null,l.updateQueue=null,$m.current=GV,a=f(y,x)}while(Xh)}if($m.current=qm,l=$r!==null&&$r.next!==null,Ql=0,Qr=$r=cr=null,Bm=!1,l)throw Error(t(300));return a}function yw(){var a=Zh!==0;return Zh=0,a}function Li(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?cr.memoizedState=Qr=a:Qr=Qr.next=a,Qr}function Os(){if($r===null){var a=cr.alternate;a=a!==null?a.memoizedState:null}else a=$r.next;var l=Qr===null?cr.memoizedState:Qr.next;if(l!==null)Qr=l,$r=a;else{if(a===null)throw Error(t(310));$r=a,a={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Qr===null?cr.memoizedState=Qr=a:Qr=Qr.next=a}return Qr}function ef(a,l){return typeof l=="function"?l(a):l}function vw(a){var l=Os(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=$r,x=y.baseQueue,T=f.pending;if(T!==null){if(x!==null){var O=x.next;x.next=T.next,T.next=O}y.baseQueue=x=T,f.pending=null}if(x!==null){T=x.next,y=y.baseState;var z=O=null,H=null,ie=T;do{var ye=ie.lane;if((Ql&ye)===ye)H!==null&&(H=H.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),y=ie.hasEagerState?ie.eagerState:a(y,ie.action);else{var xe={lane:ye,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};H===null?(z=H=xe,O=y):H=H.next=xe,cr.lanes|=ye,Jl|=ye}ie=ie.next}while(ie!==null&&ie!==T);H===null?O=y:H.next=z,Xs(y,l.memoizedState)||(Jn=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=H,f.lastRenderedState=y}if(a=f.interleaved,a!==null){x=a;do T=x.lane,cr.lanes|=T,Jl|=T,x=x.next;while(x!==a)}else x===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function ww(a){var l=Os(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=f.dispatch,x=f.pending,T=l.memoizedState;if(x!==null){f.pending=null;var O=x=x.next;do T=a(T,O.action),O=O.next;while(O!==x);Xs(T,l.memoizedState)||(Jn=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),f.lastRenderedState=T}return[T,y]}function KS(){}function YS(a,l){var f=cr,y=Os(),x=l(),T=!Xs(y.memoizedState,x);if(T&&(y.memoizedState=x,Jn=!0),y=y.queue,xw(XS.bind(null,f,y,a),[a]),y.getSnapshot!==l||T||Qr!==null&&Qr.memoizedState.tag&1){if(f.flags|=2048,tf(9,JS.bind(null,f,y,x,l),void 0,null),Jr===null)throw Error(t(349));(Ql&30)!==0||QS(f,l,x)}return x}function QS(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=cr.updateQueue,l===null?(l={lastEffect:null,stores:null},cr.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function JS(a,l,f,y){l.value=f,l.getSnapshot=y,ZS(l)&&ek(a)}function XS(a,l,f){return f(function(){ZS(l)&&ek(a)})}function ZS(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Xs(a,f)}catch{return!0}}function ek(a){var l=Io(a,1);l!==null&&ni(l,a,1,-1)}function tk(a){var l=Li();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:a},l.queue=a,a=a.dispatch=WV.bind(null,cr,a),[l.memoizedState,a]}function tf(a,l,f,y){return a={tag:a,create:l,destroy:f,deps:y,next:null},l=cr.updateQueue,l===null?(l={lastEffect:null,stores:null},cr.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,l.lastEffect=a)),a}function rk(){return Os().memoizedState}function zm(a,l,f,y){var x=Li();cr.flags|=a,x.memoizedState=tf(1|l,f,void 0,y===void 0?null:y)}function Wm(a,l,f,y){var x=Os();y=y===void 0?null:y;var T=void 0;if($r!==null){var O=$r.memoizedState;if(T=O.destroy,y!==null&&mw(y,O.deps)){x.memoizedState=tf(l,f,T,y);return}}cr.flags|=a,x.memoizedState=tf(1|l,f,T,y)}function nk(a,l){return zm(8390656,8,a,l)}function xw(a,l){return Wm(2048,8,a,l)}function sk(a,l){return Wm(4,2,a,l)}function ik(a,l){return Wm(4,4,a,l)}function ok(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function ak(a,l,f){return f=f!=null?f.concat([a]):null,Wm(4,4,ok.bind(null,l,a),f)}function _w(){}function lk(a,l){var f=Os();l=l===void 0?null:l;var y=f.memoizedState;return y!==null&&l!==null&&mw(l,y[1])?y[0]:(f.memoizedState=[a,l],a)}function ck(a,l){var f=Os();l=l===void 0?null:l;var y=f.memoizedState;return y!==null&&l!==null&&mw(l,y[1])?y[0]:(a=a(),f.memoizedState=[a,l],a)}function uk(a,l,f){return(Ql&21)===0?(a.baseState&&(a.baseState=!1,Jn=!0),a.memoizedState=f):(Xs(f,l)||(f=Ih(),cr.lanes|=f,Jl|=f,a.baseState=!0),l)}function BV(a,l){var f=kt;kt=f!==0&&4>f?f:4,a(!0);var y=pw.transition;pw.transition={};try{a(!1),l()}finally{kt=f,pw.transition=y}}function dk(){return Os().memoizedState}function zV(a,l,f){var y=Ta(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},hk(a))fk(l,f);else if(f=zS(a,l,f,y),f!==null){var x=Mn();ni(f,a,y,x),pk(f,l,y)}}function WV(a,l,f){var y=Ta(a),x={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(hk(a))fk(l,x);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,z=T(O,f);if(x.hasEagerState=!0,x.eagerState=z,Xs(z,O)){var H=l.interleaved;H===null?(x.next=x,lw(l)):(x.next=H.next,H.next=x),l.interleaved=x;return}}catch{}finally{}f=zS(a,l,x,y),f!==null&&(x=Mn(),ni(f,a,y,x),pk(f,l,y))}}function hk(a){var l=a.alternate;return a===cr||l!==null&&l===cr}function fk(a,l){Xh=Bm=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function pk(a,l,f){if((f&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,f|=y,l.lanes=f,Ph(a,f)}}var qm={readContext:js,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},qV={readContext:js,useCallback:function(a,l){return Li().memoizedState=[a,l===void 0?null:l],a},useContext:js,useEffect:nk,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,zm(4194308,4,ok.bind(null,l,a),f)},useLayoutEffect:function(a,l){return zm(4194308,4,a,l)},useInsertionEffect:function(a,l){return zm(4,2,a,l)},useMemo:function(a,l){var f=Li();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var y=Li();return l=f!==void 0?f(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=zV.bind(null,cr,a),[y.memoizedState,a]},useRef:function(a){var l=Li();return a={current:a},l.memoizedState=a},useState:tk,useDebugValue:_w,useDeferredValue:function(a){return Li().memoizedState=a},useTransition:function(){var a=tk(!1),l=a[0];return a=BV.bind(null,a[1]),Li().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var y=cr,x=Li();if(ir){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),Jr===null)throw Error(t(349));(Ql&30)!==0||QS(y,l,f)}x.memoizedState=f;var T={value:f,getSnapshot:l};return x.queue=T,nk(XS.bind(null,y,T,a),[a]),y.flags|=2048,tf(9,JS.bind(null,y,T,f,l),void 0,null),f},useId:function(){var a=Li(),l=Jr.identifierPrefix;if(ir){var f=ko,y=So;f=(y&~(1<<32-fs(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=Zh++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=$V++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},HV={readContext:js,useCallback:lk,useContext:js,useEffect:xw,useImperativeHandle:ak,useInsertionEffect:sk,useLayoutEffect:ik,useMemo:ck,useReducer:vw,useRef:rk,useState:function(){return vw(ef)},useDebugValue:_w,useDeferredValue:function(a){var l=Os();return uk(l,$r.memoizedState,a)},useTransition:function(){var a=vw(ef)[0],l=Os().memoizedState;return[a,l]},useMutableSource:KS,useSyncExternalStore:YS,useId:dk,unstable_isNewReconciler:!1},GV={readContext:js,useCallback:lk,useContext:js,useEffect:xw,useImperativeHandle:ak,useInsertionEffect:sk,useLayoutEffect:ik,useMemo:ck,useReducer:ww,useRef:rk,useState:function(){return ww(ef)},useDebugValue:_w,useDeferredValue:function(a){var l=Os();return $r===null?l.memoizedState=a:uk(l,$r.memoizedState,a)},useTransition:function(){var a=ww(ef)[0],l=Os().memoizedState;return[a,l]},useMutableSource:KS,useSyncExternalStore:YS,useId:dk,unstable_isNewReconciler:!1};function ei(a,l){if(a&&a.defaultProps){l=K({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}function bw(a,l,f,y){l=a.memoizedState,f=f(y,l),f=f==null?l:K({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Hm={isMounted:function(a){return(a=a._reactInternals)?Qs(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var y=Mn(),x=Ta(a),T=Co(y,x);T.payload=l,f!=null&&(T.callback=f),l=xa(a,T,x),l!==null&&(ni(l,a,x,y),Vm(l,a,x))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var y=Mn(),x=Ta(a),T=Co(y,x);T.tag=1,T.payload=l,f!=null&&(T.callback=f),l=xa(a,T,x),l!==null&&(ni(l,a,x,y),Vm(l,a,x))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=Mn(),y=Ta(a),x=Co(f,y);x.tag=2,l!=null&&(x.callback=l),l=xa(a,x,y),l!==null&&(ni(l,a,y,f),Vm(l,a,y))}};function mk(a,l,f,y,x,T,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,T,O):l.prototype&&l.prototype.isPureReactComponent?!$h(f,y)||!$h(x,T):!0}function gk(a,l,f){var y=!1,x=ya,T=l.contextType;return typeof T=="object"&&T!==null?T=js(T):(x=Qn(l)?ql:xn.current,y=l.contextTypes,T=(y=y!=null)?Su(a,x):ya),l=new l(f,T),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Hm,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=x,a.__reactInternalMemoizedMaskedChildContext=T),l}function yk(a,l,f,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==a&&Hm.enqueueReplaceState(l,l.state,null)}function Ew(a,l,f,y){var x=a.stateNode;x.props=f,x.state=a.memoizedState,x.refs={},cw(a);var T=l.contextType;typeof T=="object"&&T!==null?x.context=js(T):(T=Qn(l)?ql:xn.current,x.context=Su(a,T)),x.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(bw(a,l,T,f),x.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&Hm.enqueueReplaceState(x,x.state,null),Fm(a,f,x,y),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308)}function ju(a,l){try{var f="",y=l;do f+=Me(y),y=y.return;while(y);var x=f}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:l,stack:x,digest:null}}function Tw(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function Sw(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var KV=typeof WeakMap=="function"?WeakMap:Map;function vk(a,l,f){f=Co(-1,f),f.tag=3,f.payload={element:null};var y=l.value;return f.callback=function(){Zm||(Zm=!0,Uw=y),Sw(a,l)},f}function wk(a,l,f){f=Co(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var x=l.value;f.payload=function(){return y(x)},f.callback=function(){Sw(a,l)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){Sw(a,l),typeof y!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),f}function xk(a,l,f){var y=a.pingCache;if(y===null){y=a.pingCache=new KV;var x=new Set;y.set(l,x)}else x=y.get(l),x===void 0&&(x=new Set,y.set(l,x));x.has(f)||(x.add(f),a=lF.bind(null,a,l,f),l.then(a,a))}function _k(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function bk(a,l,f,y,x){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Co(-1,1),l.tag=2,xa(f,l,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=x,a)}var YV=M.ReactCurrentOwner,Jn=!1;function Dn(a,l,f,y){l.child=a===null?BS(l,null,f,y):Pu(l,a.child,f,y)}function Ek(a,l,f,y,x){f=f.render;var T=l.ref;return Ru(l,x),y=gw(a,l,f,y,T,x),f=yw(),a!==null&&!Jn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~x,Po(a,l,x)):(ir&&f&&Z0(l),l.flags|=1,Dn(a,l,y,x),l.child)}function Tk(a,l,f,y,x){if(a===null){var T=f.type;return typeof T=="function"&&!Gw(T)&&T.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=T,Sk(a,l,T,y,x)):(a=ig(f.type,null,y,l,l.mode,x),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,(a.lanes&x)===0){var O=T.memoizedProps;if(f=f.compare,f=f!==null?f:$h,f(O,y)&&a.ref===l.ref)return Po(a,l,x)}return l.flags|=1,a=ka(T,y),a.ref=l.ref,a.return=l,l.child=a}function Sk(a,l,f,y,x){if(a!==null){var T=a.memoizedProps;if($h(T,y)&&a.ref===l.ref)if(Jn=!1,l.pendingProps=y=T,(a.lanes&x)!==0)(a.flags&131072)!==0&&(Jn=!0);else return l.lanes=a.lanes,Po(a,l,x)}return kw(a,l,f,y,x)}function kk(a,l,f){var y=l.pendingProps,x=y.children,T=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(Du,xs),xs|=f;else{if((f&1073741824)===0)return a=T!==null?T.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Jt(Du,xs),xs|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:f,Jt(Du,xs),xs|=y}else T!==null?(y=T.baseLanes|f,l.memoizedState=null):y=f,Jt(Du,xs),xs|=y;return Dn(a,l,x,f),l.child}function Ik(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function kw(a,l,f,y,x){var T=Qn(f)?ql:xn.current;return T=Su(l,T),Ru(l,x),f=gw(a,l,f,y,T,x),y=yw(),a!==null&&!Jn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~x,Po(a,l,x)):(ir&&y&&Z0(l),l.flags|=1,Dn(a,l,f,x),l.child)}function Ck(a,l,f,y,x){if(Qn(f)){var T=!0;Am(l)}else T=!1;if(Ru(l,x),l.stateNode===null)Km(a,l),gk(l,f,y),Ew(l,f,y,x),y=!0;else if(a===null){var O=l.stateNode,z=l.memoizedProps;O.props=z;var H=O.context,ie=f.contextType;typeof ie=="object"&&ie!==null?ie=js(ie):(ie=Qn(f)?ql:xn.current,ie=Su(l,ie));var ye=f.getDerivedStateFromProps,xe=typeof ye=="function"||typeof O.getSnapshotBeforeUpdate=="function";xe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(z!==y||H!==ie)&&yk(l,O,y,ie),wa=!1;var me=l.memoizedState;O.state=me,Fm(l,y,O,x),H=l.memoizedState,z!==y||me!==H||Yn.current||wa?(typeof ye=="function"&&(bw(l,f,ye,y),H=l.memoizedState),(z=wa||mk(l,f,z,y,me,H,ie))?(xe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=H),O.props=y,O.state=H,O.context=ie,y=z):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,WS(a,l),z=l.memoizedProps,ie=l.type===l.elementType?z:ei(l.type,z),O.props=ie,xe=l.pendingProps,me=O.context,H=f.contextType,typeof H=="object"&&H!==null?H=js(H):(H=Qn(f)?ql:xn.current,H=Su(l,H));var De=f.getDerivedStateFromProps;(ye=typeof De=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(z!==xe||me!==H)&&yk(l,O,y,H),wa=!1,me=l.memoizedState,O.state=me,Fm(l,y,O,x);var Ue=l.memoizedState;z!==xe||me!==Ue||Yn.current||wa?(typeof De=="function"&&(bw(l,f,De,y),Ue=l.memoizedState),(ie=wa||mk(l,f,ie,y,me,Ue,H)||!1)?(ye||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Ue,H),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Ue,H)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||z===a.memoizedProps&&me===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&me===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Ue),O.props=y,O.state=Ue,O.context=H,y=ie):(typeof O.componentDidUpdate!="function"||z===a.memoizedProps&&me===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&me===a.memoizedState||(l.flags|=1024),y=!1)}return Iw(a,l,f,y,T,x)}function Iw(a,l,f,y,x,T){Ik(a,l);var O=(l.flags&128)!==0;if(!y&&!O)return x&&jS(l,f,!1),Po(a,l,T);y=l.stateNode,YV.current=l;var z=O&&typeof f.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&O?(l.child=Pu(l,a.child,null,T),l.child=Pu(l,null,z,T)):Dn(a,l,z,T),l.memoizedState=y.state,x&&jS(l,f,!0),l.child}function Pk(a){var l=a.stateNode;l.pendingContext?RS(a,l.pendingContext,l.pendingContext!==l.context):l.context&&RS(a,l.context,!1),uw(a,l.containerInfo)}function Ak(a,l,f,y,x){return Cu(),nw(x),l.flags|=256,Dn(a,l,f,y),l.child}var Cw={dehydrated:null,treeContext:null,retryLane:0};function Pw(a){return{baseLanes:a,cachePool:null,transitions:null}}function Rk(a,l,f){var y=l.pendingProps,x=lr.current,T=!1,O=(l.flags&128)!==0,z;if((z=O)||(z=a!==null&&a.memoizedState===null?!1:(x&2)!==0),z?(T=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(x|=1),Jt(lr,x&1),a===null)return rw(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,a=y.fallback,T?(y=l.mode,T=l.child,O={mode:"hidden",children:O},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=og(O,y,0,null),a=tc(a,y,f,null),T.return=l,a.return=l,T.sibling=a,l.child=T,l.child.memoizedState=Pw(f),l.memoizedState=Cw,a):Aw(l,O));if(x=a.memoizedState,x!==null&&(z=x.dehydrated,z!==null))return QV(a,l,O,y,z,x,f);if(T){T=y.fallback,O=l.mode,x=a.child,z=x.sibling;var H={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==x?(y=l.child,y.childLanes=0,y.pendingProps=H,l.deletions=null):(y=ka(x,H),y.subtreeFlags=x.subtreeFlags&14680064),z!==null?T=ka(z,T):(T=tc(T,O,f,null),T.flags|=2),T.return=l,y.return=l,y.sibling=T,l.child=y,y=T,T=l.child,O=a.child.memoizedState,O=O===null?Pw(f):{baseLanes:O.baseLanes|f,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=a.childLanes&~f,l.memoizedState=Cw,y}return T=a.child,a=T.sibling,y=ka(T,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=f),y.return=l,y.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=y,l.memoizedState=null,y}function Aw(a,l){return l=og({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Gm(a,l,f,y){return y!==null&&nw(y),Pu(l,a.child,null,f),a=Aw(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function QV(a,l,f,y,x,T,O){if(f)return l.flags&256?(l.flags&=-257,y=Tw(Error(t(422))),Gm(a,l,O,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(T=y.fallback,x=l.mode,y=og({mode:"visible",children:y.children},x,0,null),T=tc(T,x,O,null),T.flags|=2,y.return=l,T.return=l,y.sibling=T,l.child=y,(l.mode&1)!==0&&Pu(l,a.child,null,O),l.child.memoizedState=Pw(O),l.memoizedState=Cw,T);if((l.mode&1)===0)return Gm(a,l,O,null);if(x.data==="$!"){if(y=x.nextSibling&&x.nextSibling.dataset,y)var z=y.dgst;return y=z,T=Error(t(419)),y=Tw(T,y,void 0),Gm(a,l,O,y)}if(z=(O&a.childLanes)!==0,Jn||z){if(y=Jr,y!==null){switch(O&-O){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(y.suspendedLanes|O))!==0?0:x,x!==0&&x!==T.retryLane&&(T.retryLane=x,Io(a,x),ni(y,a,x,-1))}return Hw(),y=Tw(Error(t(421))),Gm(a,l,O,y)}return x.data==="$?"?(l.flags|=128,l.child=a.child,l=cF.bind(null,a),x._reactRetry=l,null):(a=T.treeContext,ws=ma(x.nextSibling),vs=l,ir=!0,Zs=null,a!==null&&(Rs[Ns++]=So,Rs[Ns++]=ko,Rs[Ns++]=Hl,So=a.id,ko=a.overflow,Hl=l),l=Aw(l,y.children),l.flags|=4096,l)}function Nk(a,l,f){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),aw(a.return,l,f)}function Rw(a,l,f,y,x){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=f,T.tailMode=x)}function jk(a,l,f){var y=l.pendingProps,x=y.revealOrder,T=y.tail;if(Dn(a,l,y.children,f),y=lr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Nk(a,f,l);else if(a.tag===19)Nk(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Jt(lr,y),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(f=l.child,x=null;f!==null;)a=f.alternate,a!==null&&Um(a)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),Rw(l,!1,x,f,T);break;case"backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(a=x.alternate,a!==null&&Um(a)===null){l.child=x;break}a=x.sibling,x.sibling=f,f=x,x=a}Rw(l,!0,f,null,T);break;case"together":Rw(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Km(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Po(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),Jl|=l.lanes,(f&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,f=ka(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=ka(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function JV(a,l,f){switch(l.tag){case 3:Pk(l),Cu();break;case 5:GS(l);break;case 1:Qn(l.type)&&Am(l);break;case 4:uw(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,x=l.memoizedProps.value;Jt(Mm,y._currentValue),y._currentValue=x;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Jt(lr,lr.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?Rk(a,l,f):(Jt(lr,lr.current&1),a=Po(a,l,f),a!==null?a.sibling:null);Jt(lr,lr.current&1);break;case 19:if(y=(f&l.childLanes)!==0,(a.flags&128)!==0){if(y)return jk(a,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Jt(lr,lr.current),y)break;return null;case 22:case 23:return l.lanes=0,kk(a,l,f)}return Po(a,l,f)}var Ok,Nw,Dk,Mk;Ok=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Nw=function(){},Dk=function(a,l,f,y){var x=a.memoizedProps;if(x!==y){a=l.stateNode,Yl(Mi.current);var T=null;switch(f){case"input":x=Zt(a,x),y=Zt(a,y),T=[];break;case"select":x=K({},x,{value:void 0}),y=K({},y,{value:void 0}),T=[];break;case"textarea":x=q(a,x),y=q(a,y),T=[];break;default:typeof x.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=Im)}_r(f,y);var O;f=null;for(ie in x)if(!y.hasOwnProperty(ie)&&x.hasOwnProperty(ie)&&x[ie]!=null)if(ie==="style"){var z=x[ie];for(O in z)z.hasOwnProperty(O)&&(f||(f={}),f[O]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?T||(T=[]):(T=T||[]).push(ie,null));for(ie in y){var H=y[ie];if(z=x!=null?x[ie]:void 0,y.hasOwnProperty(ie)&&H!==z&&(H!=null||z!=null))if(ie==="style")if(z){for(O in z)!z.hasOwnProperty(O)||H&&H.hasOwnProperty(O)||(f||(f={}),f[O]="");for(O in H)H.hasOwnProperty(O)&&z[O]!==H[O]&&(f||(f={}),f[O]=H[O])}else f||(T||(T=[]),T.push(ie,f)),f=H;else ie==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,z=z?z.__html:void 0,H!=null&&z!==H&&(T=T||[]).push(ie,H)):ie==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(ie,""+H):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(H!=null&&ie==="onScroll"&&rr("scroll",a),T||z===H||(T=[])):(T=T||[]).push(ie,H))}f&&(T=T||[]).push("style",f);var ie=T;(l.updateQueue=ie)&&(l.flags|=4)}},Mk=function(a,l,f,y){f!==y&&(l.flags|=4)};function rf(a,l){if(!ir)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function bn(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(l)for(var x=a.child;x!==null;)f|=x.lanes|x.childLanes,y|=x.subtreeFlags&14680064,y|=x.flags&14680064,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)f|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=y,a.childLanes=f,l}function XV(a,l,f){var y=l.pendingProps;switch(ew(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(l),null;case 1:return Qn(l.type)&&Pm(),bn(l),null;case 3:return y=l.stateNode,Nu(),nr(Yn),nr(xn),fw(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(Om(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Zs!==null&&(zw(Zs),Zs=null))),Nw(a,l),bn(l),null;case 5:dw(l);var x=Yl(Jh.current);if(f=l.type,a!==null&&l.stateNode!=null)Dk(a,l,f,y,x),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return bn(l),null}if(a=Yl(Mi.current),Om(l)){y=l.stateNode,f=l.type;var T=l.memoizedProps;switch(y[Di]=l,y[Hh]=T,a=(l.mode&1)!==0,f){case"dialog":rr("cancel",y),rr("close",y);break;case"iframe":case"object":case"embed":rr("load",y);break;case"video":case"audio":for(x=0;x<zh.length;x++)rr(zh[x],y);break;case"source":rr("error",y);break;case"img":case"image":case"link":rr("error",y),rr("load",y);break;case"details":rr("toggle",y);break;case"input":pn(y,T),rr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},rr("invalid",y);break;case"textarea":ne(y,T),rr("invalid",y)}_r(f,T),x=null;for(var O in T)if(T.hasOwnProperty(O)){var z=T[O];O==="children"?typeof z=="string"?y.textContent!==z&&(T.suppressHydrationWarning!==!0&&km(y.textContent,z,a),x=["children",z]):typeof z=="number"&&y.textContent!==""+z&&(T.suppressHydrationWarning!==!0&&km(y.textContent,z,a),x=["children",""+z]):s.hasOwnProperty(O)&&z!=null&&O==="onScroll"&&rr("scroll",y)}switch(f){case"input":tt(y),On(y,T,!0);break;case"textarea":tt(y),Ce(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=Im)}y=x,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=x.nodeType===9?x:x.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=_e(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=O.createElement(f,{is:y.is}):(a=O.createElement(f),f==="select"&&(O=a,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):a=O.createElementNS(a,f),a[Di]=l,a[Hh]=y,Ok(a,l,!1,!1),l.stateNode=a;e:{switch(O=xi(f,y),f){case"dialog":rr("cancel",a),rr("close",a),x=y;break;case"iframe":case"object":case"embed":rr("load",a),x=y;break;case"video":case"audio":for(x=0;x<zh.length;x++)rr(zh[x],a);x=y;break;case"source":rr("error",a),x=y;break;case"img":case"image":case"link":rr("error",a),rr("load",a),x=y;break;case"details":rr("toggle",a),x=y;break;case"input":pn(a,y),x=Zt(a,y),rr("invalid",a);break;case"option":x=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},x=K({},y,{value:void 0}),rr("invalid",a);break;case"textarea":ne(a,y),x=q(a,y),rr("invalid",a);break;default:x=y}_r(f,x),z=x;for(T in z)if(z.hasOwnProperty(T)){var H=z[T];T==="style"?rn(a,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&yt(a,H)):T==="children"?typeof H=="string"?(f!=="textarea"||H!=="")&&At(a,H):typeof H=="number"&&At(a,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&rr("scroll",a):H!=null&&j(a,T,H,O))}switch(f){case"input":tt(a),On(a,y,!1);break;case"textarea":tt(a),Ce(a);break;case"option":y.value!=null&&a.setAttribute("value",""+je(y.value));break;case"select":a.multiple=!!y.multiple,T=y.value,T!=null?Cr(a,!!y.multiple,T,!1):y.defaultValue!=null&&Cr(a,!!y.multiple,y.defaultValue,!0);break;default:typeof x.onClick=="function"&&(a.onclick=Im)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return bn(l),null;case 6:if(a&&l.stateNode!=null)Mk(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(f=Yl(Jh.current),Yl(Mi.current),Om(l)){if(y=l.stateNode,f=l.memoizedProps,y[Di]=l,(T=y.nodeValue!==f)&&(a=vs,a!==null))switch(a.tag){case 3:km(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&km(y.nodeValue,f,(a.mode&1)!==0)}T&&(l.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[Di]=l,l.stateNode=y}return bn(l),null;case 13:if(nr(lr),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(ir&&ws!==null&&(l.mode&1)!==0&&(l.flags&128)===0)FS(),Cu(),l.flags|=98560,T=!1;else if(T=Om(l),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(t(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Di]=l}else Cu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;bn(l),T=!1}else Zs!==null&&(zw(Zs),Zs=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(lr.current&1)!==0?Br===0&&(Br=3):Hw())),l.updateQueue!==null&&(l.flags|=4),bn(l),null);case 4:return Nu(),Nw(a,l),a===null&&Wh(l.stateNode.containerInfo),bn(l),null;case 10:return ow(l.type._context),bn(l),null;case 17:return Qn(l.type)&&Pm(),bn(l),null;case 19:if(nr(lr),T=l.memoizedState,T===null)return bn(l),null;if(y=(l.flags&128)!==0,O=T.rendering,O===null)if(y)rf(T,!1);else{if(Br!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=Um(a),O!==null){for(l.flags|=128,rf(T,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=f,f=l.child;f!==null;)T=f,a=y,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,a=O.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Jt(lr,lr.current&1|2),l.child}a=a.sibling}T.tail!==null&&tr()>Mu&&(l.flags|=128,y=!0,rf(T,!1),l.lanes=4194304)}else{if(!y)if(a=Um(O),a!==null){if(l.flags|=128,y=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),rf(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!ir)return bn(l),null}else 2*tr()-T.renderingStartTime>Mu&&f!==1073741824&&(l.flags|=128,y=!0,rf(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(f=T.last,f!==null?f.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=tr(),l.sibling=null,f=lr.current,Jt(lr,y?f&1|2:f&1),l):(bn(l),null);case 22:case 23:return qw(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(xs&1073741824)!==0&&(bn(l),l.subtreeFlags&6&&(l.flags|=8192)):bn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function ZV(a,l){switch(ew(l),l.tag){case 1:return Qn(l.type)&&Pm(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Nu(),nr(Yn),nr(xn),fw(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return dw(l),null;case 13:if(nr(lr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Cu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return nr(lr),null;case 4:return Nu(),null;case 10:return ow(l.type._context),null;case 22:case 23:return qw(),null;case 24:return null;default:return null}}var Ym=!1,En=!1,eF=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Ou(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){pr(a,l,y)}else f.current=null}function jw(a,l,f){try{f()}catch(y){pr(a,l,y)}}var Lk=!1;function tF(a,l){if(q0=xo,a=mS(),L0(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var x=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var O=0,z=-1,H=-1,ie=0,ye=0,xe=a,me=null;t:for(;;){for(var De;xe!==f||x!==0&&xe.nodeType!==3||(z=O+x),xe!==T||y!==0&&xe.nodeType!==3||(H=O+y),xe.nodeType===3&&(O+=xe.nodeValue.length),(De=xe.firstChild)!==null;)me=xe,xe=De;for(;;){if(xe===a)break t;if(me===f&&++ie===x&&(z=O),me===T&&++ye===y&&(H=O),(De=xe.nextSibling)!==null)break;xe=me,me=xe.parentNode}xe=De}f=z===-1||H===-1?null:{start:z,end:H}}else f=null}f=f||{start:0,end:0}}else f=null;for(H0={focusedElem:a,selectionRange:f},xo=!1,Fe=l;Fe!==null;)if(l=Fe,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Fe=a;else for(;Fe!==null;){l=Fe;try{var Ue=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var We=Ue.memoizedProps,Er=Ue.memoizedState,te=l.stateNode,Q=te.getSnapshotBeforeUpdate(l.elementType===l.type?We:ei(l.type,We),Er);te.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var se=l.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Te){pr(l,l.return,Te)}if(a=l.sibling,a!==null){a.return=l.return,Fe=a;break}Fe=l.return}return Ue=Lk,Lk=!1,Ue}function nf(a,l,f){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var x=y=y.next;do{if((x.tag&a)===a){var T=x.destroy;x.destroy=void 0,T!==void 0&&jw(l,f,T)}x=x.next}while(x!==y)}}function Qm(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==l)}}function Ow(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function Vk(a){var l=a.alternate;l!==null&&(a.alternate=null,Vk(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Di],delete l[Hh],delete l[Q0],delete l[LV],delete l[VV])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Fk(a){return a.tag===5||a.tag===3||a.tag===4}function Uk(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Fk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Dw(a,l,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Im));else if(y!==4&&(a=a.child,a!==null))for(Dw(a,l,f),a=a.sibling;a!==null;)Dw(a,l,f),a=a.sibling}function Mw(a,l,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Mw(a,l,f),a=a.sibling;a!==null;)Mw(a,l,f),a=a.sibling}var on=null,ti=!1;function _a(a,l,f){for(f=f.child;f!==null;)$k(a,l,f),f=f.sibling}function $k(a,l,f){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Dl,f)}catch{}switch(f.tag){case 5:En||Ou(f,l);case 6:var y=on,x=ti;on=null,_a(a,l,f),on=y,ti=x,on!==null&&(ti?(a=on,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):on.removeChild(f.stateNode));break;case 18:on!==null&&(ti?(a=on,f=f.stateNode,a.nodeType===8?Y0(a.parentNode,f):a.nodeType===1&&Y0(a,f),da(a)):Y0(on,f.stateNode));break;case 4:y=on,x=ti,on=f.stateNode.containerInfo,ti=!0,_a(a,l,f),on=y,ti=x;break;case 0:case 11:case 14:case 15:if(!En&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){x=y=y.next;do{var T=x,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&jw(f,l,O),x=x.next}while(x!==y)}_a(a,l,f);break;case 1:if(!En&&(Ou(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(z){pr(f,l,z)}_a(a,l,f);break;case 21:_a(a,l,f);break;case 22:f.mode&1?(En=(y=En)||f.memoizedState!==null,_a(a,l,f),En=y):_a(a,l,f);break;default:_a(a,l,f)}}function Bk(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new eF),l.forEach(function(y){var x=uF.bind(null,a,y);f.has(y)||(f.add(y),y.then(x,x))})}}function ri(a,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var x=f[y];try{var T=a,O=l,z=O;e:for(;z!==null;){switch(z.tag){case 5:on=z.stateNode,ti=!1;break e;case 3:on=z.stateNode.containerInfo,ti=!0;break e;case 4:on=z.stateNode.containerInfo,ti=!0;break e}z=z.return}if(on===null)throw Error(t(160));$k(T,O,x),on=null,ti=!1;var H=x.alternate;H!==null&&(H.return=null),x.return=null}catch(ie){pr(x,l,ie)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)zk(l,a),l=l.sibling}function zk(a,l){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ri(l,a),Vi(a),y&4){try{nf(3,a,a.return),Qm(3,a)}catch(We){pr(a,a.return,We)}try{nf(5,a,a.return)}catch(We){pr(a,a.return,We)}}break;case 1:ri(l,a),Vi(a),y&512&&f!==null&&Ou(f,f.return);break;case 5:if(ri(l,a),Vi(a),y&512&&f!==null&&Ou(f,f.return),a.flags&32){var x=a.stateNode;try{At(x,"")}catch(We){pr(a,a.return,We)}}if(y&4&&(x=a.stateNode,x!=null)){var T=a.memoizedProps,O=f!==null?f.memoizedProps:T,z=a.type,H=a.updateQueue;if(a.updateQueue=null,H!==null)try{z==="input"&&T.type==="radio"&&T.name!=null&&kr(x,T),xi(z,O);var ie=xi(z,T);for(O=0;O<H.length;O+=2){var ye=H[O],xe=H[O+1];ye==="style"?rn(x,xe):ye==="dangerouslySetInnerHTML"?yt(x,xe):ye==="children"?At(x,xe):j(x,ye,xe,ie)}switch(z){case"input":Ir(x,T);break;case"textarea":ce(x,T);break;case"select":var me=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!T.multiple;var De=T.value;De!=null?Cr(x,!!T.multiple,De,!1):me!==!!T.multiple&&(T.defaultValue!=null?Cr(x,!!T.multiple,T.defaultValue,!0):Cr(x,!!T.multiple,T.multiple?[]:"",!1))}x[Hh]=T}catch(We){pr(a,a.return,We)}}break;case 6:if(ri(l,a),Vi(a),y&4){if(a.stateNode===null)throw Error(t(162));x=a.stateNode,T=a.memoizedProps;try{x.nodeValue=T}catch(We){pr(a,a.return,We)}}break;case 3:if(ri(l,a),Vi(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{da(l.containerInfo)}catch(We){pr(a,a.return,We)}break;case 4:ri(l,a),Vi(a);break;case 13:ri(l,a),Vi(a),x=a.child,x.flags&8192&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(Fw=tr())),y&4&&Bk(a);break;case 22:if(ye=f!==null&&f.memoizedState!==null,a.mode&1?(En=(ie=En)||ye,ri(l,a),En=ie):ri(l,a),Vi(a),y&8192){if(ie=a.memoizedState!==null,(a.stateNode.isHidden=ie)&&!ye&&(a.mode&1)!==0)for(Fe=a,ye=a.child;ye!==null;){for(xe=Fe=ye;Fe!==null;){switch(me=Fe,De=me.child,me.tag){case 0:case 11:case 14:case 15:nf(4,me,me.return);break;case 1:Ou(me,me.return);var Ue=me.stateNode;if(typeof Ue.componentWillUnmount=="function"){y=me,f=me.return;try{l=y,Ue.props=l.memoizedProps,Ue.state=l.memoizedState,Ue.componentWillUnmount()}catch(We){pr(y,f,We)}}break;case 5:Ou(me,me.return);break;case 22:if(me.memoizedState!==null){Hk(xe);continue}}De!==null?(De.return=me,Fe=De):Hk(xe)}ye=ye.sibling}e:for(ye=null,xe=a;;){if(xe.tag===5){if(ye===null){ye=xe;try{x=xe.stateNode,ie?(T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(z=xe.stateNode,H=xe.memoizedProps.style,O=H!=null&&H.hasOwnProperty("display")?H.display:null,z.style.display=mn("display",O))}catch(We){pr(a,a.return,We)}}}else if(xe.tag===6){if(ye===null)try{xe.stateNode.nodeValue=ie?"":xe.memoizedProps}catch(We){pr(a,a.return,We)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===a)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===a)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===a)break e;ye===xe&&(ye=null),xe=xe.return}ye===xe&&(ye=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:ri(l,a),Vi(a),y&4&&Bk(a);break;case 21:break;default:ri(l,a),Vi(a)}}function Vi(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(Fk(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var x=y.stateNode;y.flags&32&&(At(x,""),y.flags&=-33);var T=Uk(a);Mw(a,T,x);break;case 3:case 4:var O=y.stateNode.containerInfo,z=Uk(a);Dw(a,z,O);break;default:throw Error(t(161))}}catch(H){pr(a,a.return,H)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function rF(a,l,f){Fe=a,Wk(a)}function Wk(a,l,f){for(var y=(a.mode&1)!==0;Fe!==null;){var x=Fe,T=x.child;if(x.tag===22&&y){var O=x.memoizedState!==null||Ym;if(!O){var z=x.alternate,H=z!==null&&z.memoizedState!==null||En;z=Ym;var ie=En;if(Ym=O,(En=H)&&!ie)for(Fe=x;Fe!==null;)O=Fe,H=O.child,O.tag===22&&O.memoizedState!==null?Gk(x):H!==null?(H.return=O,Fe=H):Gk(x);for(;T!==null;)Fe=T,Wk(T),T=T.sibling;Fe=x,Ym=z,En=ie}qk(a)}else(x.subtreeFlags&8772)!==0&&T!==null?(T.return=x,Fe=T):qk(a)}}function qk(a){for(;Fe!==null;){var l=Fe;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:En||Qm(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!En)if(f===null)y.componentDidMount();else{var x=l.elementType===l.type?f.memoizedProps:ei(l.type,f.memoizedProps);y.componentDidUpdate(x,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&HS(l,T,y);break;case 3:var O=l.updateQueue;if(O!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}HS(l,O,f)}break;case 5:var z=l.stateNode;if(f===null&&l.flags&4){f=z;var H=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&f.focus();break;case"img":H.src&&(f.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ie=l.alternate;if(ie!==null){var ye=ie.memoizedState;if(ye!==null){var xe=ye.dehydrated;xe!==null&&da(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}En||l.flags&512&&Ow(l)}catch(me){pr(l,l.return,me)}}if(l===a){Fe=null;break}if(f=l.sibling,f!==null){f.return=l.return,Fe=f;break}Fe=l.return}}function Hk(a){for(;Fe!==null;){var l=Fe;if(l===a){Fe=null;break}var f=l.sibling;if(f!==null){f.return=l.return,Fe=f;break}Fe=l.return}}function Gk(a){for(;Fe!==null;){var l=Fe;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Qm(4,l)}catch(H){pr(l,f,H)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var x=l.return;try{y.componentDidMount()}catch(H){pr(l,x,H)}}var T=l.return;try{Ow(l)}catch(H){pr(l,T,H)}break;case 5:var O=l.return;try{Ow(l)}catch(H){pr(l,O,H)}}}catch(H){pr(l,l.return,H)}if(l===a){Fe=null;break}var z=l.sibling;if(z!==null){z.return=l.return,Fe=z;break}Fe=l.return}}var nF=Math.ceil,Jm=M.ReactCurrentDispatcher,Lw=M.ReactCurrentOwner,Ds=M.ReactCurrentBatchConfig,Nt=0,Jr=null,Rr=null,an=0,xs=0,Du=ga(0),Br=0,sf=null,Jl=0,Xm=0,Vw=0,of=null,Xn=null,Fw=0,Mu=1/0,Ao=null,Zm=!1,Uw=null,ba=null,eg=!1,Ea=null,tg=0,af=0,$w=null,rg=-1,ng=0;function Mn(){return(Nt&6)!==0?tr():rg!==-1?rg:rg=tr()}function Ta(a){return(a.mode&1)===0?1:(Nt&2)!==0&&an!==0?an&-an:UV.transition!==null?(ng===0&&(ng=Ih()),ng):(a=kt,a!==0||(a=window.event,a=a===void 0?16:du(a.type)),a)}function ni(a,l,f,y){if(50<af)throw af=0,$w=null,Error(t(185));Fl(a,f,y),((Nt&2)===0||a!==Jr)&&(a===Jr&&((Nt&2)===0&&(Xm|=f),Br===4&&Sa(a,an)),Zn(a,y),f===1&&Nt===0&&(l.mode&1)===0&&(Mu=tr()+500,Rm&&va()))}function Zn(a,l){var f=a.callbackNode;Vl(a,l);var y=yo(a,a===Jr?an:0);if(y===0)f!==null&&su(f),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(f!=null&&su(f),l===1)a.tag===0?FV(Yk.bind(null,a)):OS(Yk.bind(null,a)),DV(function(){(Nt&6)===0&&va()}),f=null;else{switch(Si(y)){case 1:f=iu;break;case 4:f=Th;break;case 16:f=Ol;break;case 536870912:f=ou;break;default:f=Ol}f=nI(f,Kk.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function Kk(a,l){if(rg=-1,ng=0,(Nt&6)!==0)throw Error(t(327));var f=a.callbackNode;if(Lu()&&a.callbackNode!==f)return null;var y=yo(a,a===Jr?an:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=sg(a,y);else{l=y;var x=Nt;Nt|=2;var T=Jk();(Jr!==a||an!==l)&&(Ao=null,Mu=tr()+500,Zl(a,l));do try{oF();break}catch(z){Qk(a,z)}while(!0);iw(),Jm.current=T,Nt=x,Rr!==null?l=0:(Jr=null,an=0,l=Br)}if(l!==0){if(l===2&&(x=kh(a),x!==0&&(y=x,l=Bw(a,x))),l===1)throw f=sf,Zl(a,0),Sa(a,y),Zn(a,tr()),f;if(l===6)Sa(a,y);else{if(x=a.current.alternate,(y&30)===0&&!sF(x)&&(l=sg(a,y),l===2&&(T=kh(a),T!==0&&(y=T,l=Bw(a,T))),l===1))throw f=sf,Zl(a,0),Sa(a,y),Zn(a,tr()),f;switch(a.finishedWork=x,a.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:ec(a,Xn,Ao);break;case 3:if(Sa(a,y),(y&130023424)===y&&(l=Fw+500-tr(),10<l)){if(yo(a,0)!==0)break;if(x=a.suspendedLanes,(x&y)!==y){Mn(),a.pingedLanes|=a.suspendedLanes&x;break}a.timeoutHandle=K0(ec.bind(null,a,Xn,Ao),l);break}ec(a,Xn,Ao);break;case 4:if(Sa(a,y),(y&4194240)===y)break;for(l=a.eventTimes,x=-1;0<y;){var O=31-fs(y);T=1<<O,O=l[O],O>x&&(x=O),y&=~T}if(y=x,y=tr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*nF(y/1960))-y,10<y){a.timeoutHandle=K0(ec.bind(null,a,Xn,Ao),y);break}ec(a,Xn,Ao);break;case 5:ec(a,Xn,Ao);break;default:throw Error(t(329))}}}return Zn(a,tr()),a.callbackNode===f?Kk.bind(null,a):null}function Bw(a,l){var f=of;return a.current.memoizedState.isDehydrated&&(Zl(a,l).flags|=256),a=sg(a,l),a!==2&&(l=Xn,Xn=f,l!==null&&zw(l)),a}function zw(a){Xn===null?Xn=a:Xn.push.apply(Xn,a)}function sF(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var x=f[y],T=x.getSnapshot;x=x.value;try{if(!Xs(T(),x))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Sa(a,l){for(l&=~Vw,l&=~Xm,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-fs(l),y=1<<f;a[f]=-1,l&=~y}}function Yk(a){if((Nt&6)!==0)throw Error(t(327));Lu();var l=yo(a,0);if((l&1)===0)return Zn(a,tr()),null;var f=sg(a,l);if(a.tag!==0&&f===2){var y=kh(a);y!==0&&(l=y,f=Bw(a,y))}if(f===1)throw f=sf,Zl(a,0),Sa(a,l),Zn(a,tr()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,ec(a,Xn,Ao),Zn(a,tr()),null}function Ww(a,l){var f=Nt;Nt|=1;try{return a(l)}finally{Nt=f,Nt===0&&(Mu=tr()+500,Rm&&va())}}function Xl(a){Ea!==null&&Ea.tag===0&&(Nt&6)===0&&Lu();var l=Nt;Nt|=1;var f=Ds.transition,y=kt;try{if(Ds.transition=null,kt=1,a)return a()}finally{kt=y,Ds.transition=f,Nt=l,(Nt&6)===0&&va()}}function qw(){xs=Du.current,nr(Du)}function Zl(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,OV(f)),Rr!==null)for(f=Rr.return;f!==null;){var y=f;switch(ew(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Pm();break;case 3:Nu(),nr(Yn),nr(xn),fw();break;case 5:dw(y);break;case 4:Nu();break;case 13:nr(lr);break;case 19:nr(lr);break;case 10:ow(y.type._context);break;case 22:case 23:qw()}f=f.return}if(Jr=a,Rr=a=ka(a.current,null),an=xs=l,Br=0,sf=null,Vw=Xm=Jl=0,Xn=of=null,Kl!==null){for(l=0;l<Kl.length;l++)if(f=Kl[l],y=f.interleaved,y!==null){f.interleaved=null;var x=y.next,T=f.pending;if(T!==null){var O=T.next;T.next=x,y.next=O}f.pending=y}Kl=null}return a}function Qk(a,l){do{var f=Rr;try{if(iw(),$m.current=qm,Bm){for(var y=cr.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}Bm=!1}if(Ql=0,Qr=$r=cr=null,Xh=!1,Zh=0,Lw.current=null,f===null||f.return===null){Br=1,sf=l,Rr=null;break}e:{var T=a,O=f.return,z=f,H=l;if(l=an,z.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ie=H,ye=z,xe=ye.tag;if((ye.mode&1)===0&&(xe===0||xe===11||xe===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var De=_k(O);if(De!==null){De.flags&=-257,bk(De,O,z,T,l),De.mode&1&&xk(T,ie,l),l=De,H=ie;var Ue=l.updateQueue;if(Ue===null){var We=new Set;We.add(H),l.updateQueue=We}else Ue.add(H);break e}else{if((l&1)===0){xk(T,ie,l),Hw();break e}H=Error(t(426))}}else if(ir&&z.mode&1){var Er=_k(O);if(Er!==null){(Er.flags&65536)===0&&(Er.flags|=256),bk(Er,O,z,T,l),nw(ju(H,z));break e}}T=H=ju(H,z),Br!==4&&(Br=2),of===null?of=[T]:of.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var te=vk(T,H,l);qS(T,te);break e;case 1:z=H;var Q=T.type,se=T.stateNode;if((T.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(ba===null||!ba.has(se)))){T.flags|=65536,l&=-l,T.lanes|=l;var Te=wk(T,z,l);qS(T,Te);break e}}T=T.return}while(T!==null)}Zk(f)}catch(He){l=He,Rr===f&&f!==null&&(Rr=f=f.return);continue}break}while(!0)}function Jk(){var a=Jm.current;return Jm.current=qm,a===null?qm:a}function Hw(){(Br===0||Br===3||Br===2)&&(Br=4),Jr===null||(Jl&268435455)===0&&(Xm&268435455)===0||Sa(Jr,an)}function sg(a,l){var f=Nt;Nt|=2;var y=Jk();(Jr!==a||an!==l)&&(Ao=null,Zl(a,l));do try{iF();break}catch(x){Qk(a,x)}while(!0);if(iw(),Nt=f,Jm.current=y,Rr!==null)throw Error(t(261));return Jr=null,an=0,Br}function iF(){for(;Rr!==null;)Xk(Rr)}function oF(){for(;Rr!==null&&!jl();)Xk(Rr)}function Xk(a){var l=rI(a.alternate,a,xs);a.memoizedProps=a.pendingProps,l===null?Zk(a):Rr=l,Lw.current=null}function Zk(a){var l=a;do{var f=l.alternate;if(a=l.return,(l.flags&32768)===0){if(f=XV(f,l,xs),f!==null){Rr=f;return}}else{if(f=ZV(f,l),f!==null){f.flags&=32767,Rr=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Br=6,Rr=null;return}}if(l=l.sibling,l!==null){Rr=l;return}Rr=l=a}while(l!==null);Br===0&&(Br=5)}function ec(a,l,f){var y=kt,x=Ds.transition;try{Ds.transition=null,kt=1,aF(a,l,f,y)}finally{Ds.transition=x,kt=y}return null}function aF(a,l,f,y){do Lu();while(Ea!==null);if((Nt&6)!==0)throw Error(t(327));f=a.finishedWork;var x=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var T=f.lanes|f.childLanes;if(N0(a,T),a===Jr&&(Rr=Jr=null,an=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||eg||(eg=!0,nI(Ol,function(){return Lu(),null})),T=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||T){T=Ds.transition,Ds.transition=null;var O=kt;kt=1;var z=Nt;Nt|=4,Lw.current=null,tF(a,f),zk(f,a),IV(H0),xo=!!q0,H0=q0=null,a.current=f,rF(f),go(),Nt=z,kt=O,Ds.transition=T}else a.current=f;if(eg&&(eg=!1,Ea=a,tg=x),T=a.pendingLanes,T===0&&(ba=null),dm(f.stateNode),Zn(a,tr()),l!==null)for(y=a.onRecoverableError,f=0;f<l.length;f++)x=l[f],y(x.value,{componentStack:x.stack,digest:x.digest});if(Zm)throw Zm=!1,a=Uw,Uw=null,a;return(tg&1)!==0&&a.tag!==0&&Lu(),T=a.pendingLanes,(T&1)!==0?a===$w?af++:(af=0,$w=a):af=0,va(),null}function Lu(){if(Ea!==null){var a=Si(tg),l=Ds.transition,f=kt;try{if(Ds.transition=null,kt=16>a?16:a,Ea===null)var y=!1;else{if(a=Ea,Ea=null,tg=0,(Nt&6)!==0)throw Error(t(331));var x=Nt;for(Nt|=4,Fe=a.current;Fe!==null;){var T=Fe,O=T.child;if((Fe.flags&16)!==0){var z=T.deletions;if(z!==null){for(var H=0;H<z.length;H++){var ie=z[H];for(Fe=ie;Fe!==null;){var ye=Fe;switch(ye.tag){case 0:case 11:case 15:nf(8,ye,T)}var xe=ye.child;if(xe!==null)xe.return=ye,Fe=xe;else for(;Fe!==null;){ye=Fe;var me=ye.sibling,De=ye.return;if(Vk(ye),ye===ie){Fe=null;break}if(me!==null){me.return=De,Fe=me;break}Fe=De}}}var Ue=T.alternate;if(Ue!==null){var We=Ue.child;if(We!==null){Ue.child=null;do{var Er=We.sibling;We.sibling=null,We=Er}while(We!==null)}}Fe=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,Fe=O;else e:for(;Fe!==null;){if(T=Fe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:nf(9,T,T.return)}var te=T.sibling;if(te!==null){te.return=T.return,Fe=te;break e}Fe=T.return}}var Q=a.current;for(Fe=Q;Fe!==null;){O=Fe;var se=O.child;if((O.subtreeFlags&2064)!==0&&se!==null)se.return=O,Fe=se;else e:for(O=Q;Fe!==null;){if(z=Fe,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Qm(9,z)}}catch(He){pr(z,z.return,He)}if(z===O){Fe=null;break e}var Te=z.sibling;if(Te!==null){Te.return=z.return,Fe=Te;break e}Fe=z.return}}if(Nt=x,va(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Dl,a)}catch{}y=!0}return y}finally{kt=f,Ds.transition=l}}return!1}function eI(a,l,f){l=ju(f,l),l=vk(a,l,1),a=xa(a,l,1),l=Mn(),a!==null&&(Fl(a,1,l),Zn(a,l))}function pr(a,l,f){if(a.tag===3)eI(a,a,f);else for(;l!==null;){if(l.tag===3){eI(l,a,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ba===null||!ba.has(y))){a=ju(f,a),a=wk(l,a,1),l=xa(l,a,1),a=Mn(),l!==null&&(Fl(l,1,a),Zn(l,a));break}}l=l.return}}function lF(a,l,f){var y=a.pingCache;y!==null&&y.delete(l),l=Mn(),a.pingedLanes|=a.suspendedLanes&f,Jr===a&&(an&f)===f&&(Br===4||Br===3&&(an&130023424)===an&&500>tr()-Fw?Zl(a,0):Vw|=f),Zn(a,l)}function tI(a,l){l===0&&((a.mode&1)===0?l=1:(l=la,la<<=1,(la&130023424)===0&&(la=4194304)));var f=Mn();a=Io(a,l),a!==null&&(Fl(a,l,f),Zn(a,f))}function cF(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),tI(a,f)}function uF(a,l){var f=0;switch(a.tag){case 13:var y=a.stateNode,x=a.memoizedState;x!==null&&(f=x.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),tI(a,f)}var rI;rI=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||Yn.current)Jn=!0;else{if((a.lanes&f)===0&&(l.flags&128)===0)return Jn=!1,JV(a,l,f);Jn=(a.flags&131072)!==0}else Jn=!1,ir&&(l.flags&1048576)!==0&&DS(l,jm,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Km(a,l),a=l.pendingProps;var x=Su(l,xn.current);Ru(l,f),x=gw(null,l,y,a,x,f);var T=yw();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Qn(y)?(T=!0,Am(l)):T=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,cw(l),x.updater=Hm,l.stateNode=x,x._reactInternals=l,Ew(l,y,a,f),l=Iw(null,l,y,!0,T,f)):(l.tag=0,ir&&T&&Z0(l),Dn(null,l,x,f),l=l.child),l;case 16:y=l.elementType;e:{switch(Km(a,l),a=l.pendingProps,x=y._init,y=x(y._payload),l.type=y,x=l.tag=hF(y),a=ei(y,a),x){case 0:l=kw(null,l,y,a,f);break e;case 1:l=Ck(null,l,y,a,f);break e;case 11:l=Ek(null,l,y,a,f);break e;case 14:l=Tk(null,l,y,ei(y.type,a),f);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:ei(y,x),kw(a,l,y,x,f);case 1:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:ei(y,x),Ck(a,l,y,x,f);case 3:e:{if(Pk(l),a===null)throw Error(t(387));y=l.pendingProps,T=l.memoizedState,x=T.element,WS(a,l),Fm(l,y,null,f);var O=l.memoizedState;if(y=O.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){x=ju(Error(t(423)),l),l=Ak(a,l,y,f,x);break e}else if(y!==x){x=ju(Error(t(424)),l),l=Ak(a,l,y,f,x);break e}else for(ws=ma(l.stateNode.containerInfo.firstChild),vs=l,ir=!0,Zs=null,f=BS(l,null,y,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Cu(),y===x){l=Po(a,l,f);break e}Dn(a,l,y,f)}l=l.child}return l;case 5:return GS(l),a===null&&rw(l),y=l.type,x=l.pendingProps,T=a!==null?a.memoizedProps:null,O=x.children,G0(y,x)?O=null:T!==null&&G0(y,T)&&(l.flags|=32),Ik(a,l),Dn(a,l,O,f),l.child;case 6:return a===null&&rw(l),null;case 13:return Rk(a,l,f);case 4:return uw(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Pu(l,null,y,f):Dn(a,l,y,f),l.child;case 11:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:ei(y,x),Ek(a,l,y,x,f);case 7:return Dn(a,l,l.pendingProps,f),l.child;case 8:return Dn(a,l,l.pendingProps.children,f),l.child;case 12:return Dn(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(y=l.type._context,x=l.pendingProps,T=l.memoizedProps,O=x.value,Jt(Mm,y._currentValue),y._currentValue=O,T!==null)if(Xs(T.value,O)){if(T.children===x.children&&!Yn.current){l=Po(a,l,f);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var z=T.dependencies;if(z!==null){O=T.child;for(var H=z.firstContext;H!==null;){if(H.context===y){if(T.tag===1){H=Co(-1,f&-f),H.tag=2;var ie=T.updateQueue;if(ie!==null){ie=ie.shared;var ye=ie.pending;ye===null?H.next=H:(H.next=ye.next,ye.next=H),ie.pending=H}}T.lanes|=f,H=T.alternate,H!==null&&(H.lanes|=f),aw(T.return,f,l),z.lanes|=f;break}H=H.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(t(341));O.lanes|=f,z=O.alternate,z!==null&&(z.lanes|=f),aw(O,f,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}Dn(a,l,x.children,f),l=l.child}return l;case 9:return x=l.type,y=l.pendingProps.children,Ru(l,f),x=js(x),y=y(x),l.flags|=1,Dn(a,l,y,f),l.child;case 14:return y=l.type,x=ei(y,l.pendingProps),x=ei(y.type,x),Tk(a,l,y,x,f);case 15:return Sk(a,l,l.type,l.pendingProps,f);case 17:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:ei(y,x),Km(a,l),l.tag=1,Qn(y)?(a=!0,Am(l)):a=!1,Ru(l,f),gk(l,y,x),Ew(l,y,x,f),Iw(null,l,y,!0,a,f);case 19:return jk(a,l,f);case 22:return kk(a,l,f)}throw Error(t(156,l.tag))};function nI(a,l){return Eh(a,l)}function dF(a,l,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(a,l,f,y){return new dF(a,l,f,y)}function Gw(a){return a=a.prototype,!(!a||!a.isReactComponent)}function hF(a){if(typeof a=="function")return Gw(a)?1:0;if(a!=null){if(a=a.$$typeof,a===L)return 11;if(a===ae)return 14}return 2}function ka(a,l){var f=a.alternate;return f===null?(f=Ms(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function ig(a,l,f,y,x,T){var O=2;if(y=a,typeof a=="function")Gw(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case A:return tc(f.children,x,T,l);case R:O=8,x|=8;break;case D:return a=Ms(12,f,l,x|2),a.elementType=D,a.lanes=T,a;case N:return a=Ms(13,f,l,x),a.elementType=N,a.lanes=T,a;case Y:return a=Ms(19,f,l,x),a.elementType=Y,a.lanes=T,a;case he:return og(f,x,T,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:O=10;break e;case U:O=9;break e;case L:O=11;break e;case ae:O=14;break e;case de:O=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=Ms(O,f,l,x),l.elementType=a,l.type=y,l.lanes=T,l}function tc(a,l,f,y){return a=Ms(7,a,y,l),a.lanes=f,a}function og(a,l,f,y){return a=Ms(22,a,y,l),a.elementType=he,a.lanes=f,a.stateNode={isHidden:!1},a}function Kw(a,l,f){return a=Ms(6,a,null,l),a.lanes=f,a}function Yw(a,l,f){return l=Ms(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function fF(a,l,f,y,x){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=y,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Qw(a,l,f,y,x,T,O,z,H){return a=new fF(a,l,f,z,H),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Ms(3,null,null,l),a.current=T,T.stateNode=a,T.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},cw(T),a}function pF(a,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:y==null?null:""+y,children:a,containerInfo:l,implementation:f}}function sI(a){if(!a)return ya;a=a._reactInternals;e:{if(Qs(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Qn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(Qn(f))return NS(a,f,l)}return l}function iI(a,l,f,y,x,T,O,z,H){return a=Qw(f,y,!0,a,x,T,O,z,H),a.context=sI(null),f=a.current,y=Mn(),x=Ta(f),T=Co(y,x),T.callback=l??null,xa(f,T,x),a.current.lanes=x,Fl(a,x,y),Zn(a,y),a}function ag(a,l,f,y){var x=l.current,T=Mn(),O=Ta(x);return f=sI(f),l.context===null?l.context=f:l.pendingContext=f,l=Co(T,O),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=xa(x,l,O),a!==null&&(ni(a,x,O,T),Vm(a,x,O)),O}function lg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function oI(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function Jw(a,l){oI(a,l),(a=a.alternate)&&oI(a,l)}function mF(){return null}var aI=typeof reportError=="function"?reportError:function(a){console.error(a)};function Xw(a){this._internalRoot=a}cg.prototype.render=Xw.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));ag(a,l,null,null)},cg.prototype.unmount=Xw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Xl(function(){ag(null,a,null,null)}),l[Eo]=null}};function cg(a){this._internalRoot=a}cg.prototype.unstable_scheduleHydration=function(a){if(a){var l=Nh();a={blockedOn:null,target:a,priority:l};for(var f=0;f<ps.length&&l!==0&&l<ps[f].priority;f++);ps.splice(f,0,a),f===0&&cu(a)}};function Zw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ug(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function lI(){}function gF(a,l,f,y,x){if(x){if(typeof y=="function"){var T=y;y=function(){var ie=lg(O);T.call(ie)}}var O=iI(l,y,a,0,null,!1,!1,"",lI);return a._reactRootContainer=O,a[Eo]=O.current,Wh(a.nodeType===8?a.parentNode:a),Xl(),O}for(;x=a.lastChild;)a.removeChild(x);if(typeof y=="function"){var z=y;y=function(){var ie=lg(H);z.call(ie)}}var H=Qw(a,0,!1,null,null,!1,!1,"",lI);return a._reactRootContainer=H,a[Eo]=H.current,Wh(a.nodeType===8?a.parentNode:a),Xl(function(){ag(l,H,f,y)}),H}function dg(a,l,f,y,x){var T=f._reactRootContainer;if(T){var O=T;if(typeof x=="function"){var z=x;x=function(){var H=lg(O);z.call(H)}}ag(l,O,a,x)}else O=gF(f,l,a,x,y);return lg(O)}Ah=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=Mt(l.pendingLanes);f!==0&&(Ph(l,f|1),Zn(l,tr()),(Nt&6)===0&&(Mu=tr()+500,va()))}break;case 13:Xl(function(){var y=Io(a,1);if(y!==null){var x=Mn();ni(y,a,1,x)}}),Jw(a,1)}},au=function(a){if(a.tag===13){var l=Io(a,134217728);if(l!==null){var f=Mn();ni(l,a,134217728,f)}Jw(a,134217728)}},Rh=function(a){if(a.tag===13){var l=Ta(a),f=Io(a,l);if(f!==null){var y=Mn();ni(f,a,l,y)}Jw(a,l)}},Nh=function(){return kt},jh=function(a,l){var f=kt;try{return kt=a,l()}finally{kt=f}},Cs=function(a,l,f){switch(l){case"input":if(Ir(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var y=f[l];if(y!==a&&y.form===a.form){var x=Cm(y);if(!x)throw Error(t(90));at(y),Ir(y,x)}}}break;case"textarea":ce(a,f);break;case"select":l=f.value,l!=null&&Cr(a,!!f.multiple,l,!1)}},Rt=Ww,Ut=Xl;var yF={usingClientEntryPoint:!1,Events:[Gh,Eu,Cm,_i,Xe,Ww]},lf={findFiberByHostInstance:Wl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vF={bundleType:lf.bundleType,version:lf.version,rendererPackageName:lf.rendererPackageName,rendererConfig:lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=um(a),a===null?null:a.stateNode},findFiberByHostInstance:lf.findFiberByHostInstance||mF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hg.isDisabled&&hg.supportsFiber)try{Dl=hg.inject(vF),hs=hg}catch{}}return es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yF,es.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zw(l))throw Error(t(200));return pF(a,l,null,f)},es.createRoot=function(a,l){if(!Zw(a))throw Error(t(299));var f=!1,y="",x=aI;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Qw(a,1,!1,null,null,f,!1,y,x),a[Eo]=l.current,Wh(a.nodeType===8?a.parentNode:a),new Xw(l)},es.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=um(l),a=a===null?null:a.stateNode,a},es.flushSync=function(a){return Xl(a)},es.hydrate=function(a,l,f){if(!ug(l))throw Error(t(200));return dg(null,a,l,!0,f)},es.hydrateRoot=function(a,l,f){if(!Zw(a))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,x=!1,T="",O=aI;if(f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),l=iI(l,null,a,1,f??null,x,!1,T,O),a[Eo]=l.current,Wh(a),y)for(a=0;a<y.length;a++)f=y[a],x=f._getVersion,x=x(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,x]:l.mutableSourceEagerHydrationData.push(f,x);return new cg(l)},es.render=function(a,l,f){if(!ug(l))throw Error(t(200));return dg(null,a,l,!1,f)},es.unmountComponentAtNode=function(a){if(!ug(a))throw Error(t(40));return a._reactRootContainer?(Xl(function(){dg(null,null,a,!1,function(){a._reactRootContainer=null,a[Eo]=null})}),!0):!1},es.unstable_batchedUpdates=Ww,es.unstable_renderSubtreeIntoContainer=function(a,l,f,y){if(!ug(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return dg(a,l,f,!1,y)},es.version="18.3.1-next-f1338f8080-20240426",es}var vI;function PA(){if(vI)return nx.exports;vI=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),nx.exports=PF(),nx.exports}var wI;function AF(){if(wI)return pg;wI=1;var r=PA();return pg.createRoot=r.createRoot,pg.hydrateRoot=r.hydrateRoot,pg}var RF=AF(),b=Ab();const G=Pb(b),AA=bF({__proto__:null,default:G},[b]);function Mo(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r==null||r(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xI(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Mp(...r){return e=>{let t=!1;const n=r.map(s=>{const i=xI(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():xI(r[s],null)}}}}function ft(...r){return b.useCallback(Mp(...r),r)}function NF(r,e){const t=b.createContext(e),n=i=>{const{children:o,...c}=i,d=b.useMemo(()=>c,Object.values(c));return u.jsx(t.Provider,{value:d,children:o})};n.displayName=r+"Provider";function s(i){const o=b.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${r}\``)}return[n,s]}function Hs(r,e=[]){let t=[];function n(i,o){const c=b.createContext(o),d=t.length;t=[...t,o];const h=g=>{var C;const{scope:v,children:w,...k}=g,_=((C=v==null?void 0:v[r])==null?void 0:C[d])||c,E=b.useMemo(()=>k,Object.values(k));return u.jsx(_.Provider,{value:E,children:w})};h.displayName=i+"Provider";function p(g,v){var _;const w=((_=v==null?void 0:v[r])==null?void 0:_[d])||c,k=b.useContext(w);if(k)return k;if(o!==void 0)return o;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,p]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(c){const d=(c==null?void 0:c[r])||i;return b.useMemo(()=>({[`__scope${r}`]:{...c,[r]:d}}),[c,d])}};return s.scopeName=r,[n,jF(s,...e)]}function jF(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((c,{useScope:d,scopeName:h})=>{const g=d(i)[`__scope${h}`];return{...c,...g}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var rh=PA();const RA=Pb(rh);function OF(r){const e=DF(r),t=b.forwardRef((n,s)=>{const{children:i,...o}=n,c=b.Children.toArray(i),d=c.find(LF);if(d){const h=d.props.children,p=c.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return u.jsx(e,{...o,ref:s,children:b.isValidElement(h)?b.cloneElement(h,void 0,p):null})}return u.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${r}.Slot`,t}function DF(r){const e=b.forwardRef((t,n)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const o=FF(s),c=VF(i,s.props);return s.type!==b.Fragment&&(c.ref=n?Mp(n,o):o),b.cloneElement(s,c)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var NA=Symbol("radix.slottable");function MF(r){const e=({children:t})=>u.jsx(u.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=NA,e}function LF(r){return b.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===NA}function VF(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...c)=>{const d=i(...c);return s(...c),d}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function FF(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var UF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kc=UF.reduce((r,e)=>{const t=OF(`Primitive.${e}`),n=b.forwardRef((s,i)=>{const{asChild:o,...c}=s,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(d,{...c,ref:i})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{});function $F(r,e){r&&rh.flushSync(()=>r.dispatchEvent(e))}function ur(r){const e=b.useRef(r);return b.useEffect(()=>{e.current=r}),b.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function jA(r,e=globalThis==null?void 0:globalThis.document){const t=ur(r);b.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var BF="DismissableLayer",Qx="dismissableLayer.update",zF="dismissableLayer.pointerDownOutside",WF="dismissableLayer.focusOutside",_I,OA=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DA=b.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...d}=r,h=b.useContext(OA),[p,g]=b.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=b.useState({}),k=ft(e,A=>g(A)),_=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(E),P=p?_.indexOf(p):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,M=P>=C,$=GF(A=>{const R=A.target,D=[...h.branches].some(V=>V.contains(R));!M||D||(s==null||s(A),o==null||o(A),A.defaultPrevented||c==null||c())},v),B=KF(A=>{const R=A.target;[...h.branches].some(V=>V.contains(R))||(i==null||i(A),o==null||o(A),A.defaultPrevented||c==null||c())},v);return jA(A=>{P===h.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&c&&(A.preventDefault(),c()))},v),b.useEffect(()=>{if(p)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(_I=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),bI(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=_I)}},[p,v,t,h]),b.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),bI())},[p,h]),b.useEffect(()=>{const A=()=>w({});return document.addEventListener(Qx,A),()=>document.removeEventListener(Qx,A)},[]),u.jsx(Kc.div,{...d,ref:k,style:{pointerEvents:j?M?"auto":"none":void 0,...r.style},onFocusCapture:Mo(r.onFocusCapture,B.onFocusCapture),onBlurCapture:Mo(r.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Mo(r.onPointerDownCapture,$.onPointerDownCapture)})});DA.displayName=BF;var qF="DismissableLayerBranch",HF=b.forwardRef((r,e)=>{const t=b.useContext(OA),n=b.useRef(null),s=ft(e,n);return b.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),u.jsx(Kc.div,{...r,ref:s})});HF.displayName=qF;function GF(r,e=globalThis==null?void 0:globalThis.document){const t=ur(r),n=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=c=>{if(c.target&&!n.current){let d=function(){MA(zF,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function KF(r,e=globalThis==null?void 0:globalThis.document){const t=ur(r),n=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!n.current&&MA(WF,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function bI(){const r=new CustomEvent(Qx);document.dispatchEvent(r)}function MA(r,e,t,{discrete:n}){const s=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?$F(s,i):s.dispatchEvent(i)}var hr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},YF=AA[" useId ".trim().toString()]||(()=>{}),QF=0;function zo(r){const[e,t]=b.useState(YF());return hr(()=>{t(n=>n??String(QF++))},[r]),e?`radix-${e}`:""}const JF=["top","right","bottom","left"],ll=Math.min,bs=Math.max,ly=Math.round,mg=Math.floor,Ji=r=>({x:r,y:r}),XF={left:"right",right:"left",bottom:"top",top:"bottom"},ZF={start:"end",end:"start"};function Jx(r,e,t){return bs(r,ll(e,t))}function Ho(r,e){return typeof r=="function"?r(e):r}function Go(r){return r.split("-")[0]}function nh(r){return r.split("-")[1]}function Rb(r){return r==="x"?"y":"x"}function Nb(r){return r==="y"?"height":"width"}function cl(r){return["top","bottom"].includes(Go(r))?"y":"x"}function jb(r){return Rb(cl(r))}function eU(r,e,t){t===void 0&&(t=!1);const n=nh(r),s=jb(r),i=Nb(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=cy(o)),[o,cy(o)]}function tU(r){const e=cy(r);return[Xx(r),e,Xx(e)]}function Xx(r){return r.replace(/start|end/g,e=>ZF[e])}function rU(r,e,t){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function nU(r,e,t,n){const s=nh(r);let i=rU(Go(r),t==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Xx)))),i}function cy(r){return r.replace(/left|right|bottom|top/g,e=>XF[e])}function sU(r){return{top:0,right:0,bottom:0,left:0,...r}}function LA(r){return typeof r!="number"?sU(r):{top:r,right:r,bottom:r,left:r}}function uy(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function EI(r,e,t){let{reference:n,floating:s}=r;const i=cl(e),o=jb(e),c=Nb(o),d=Go(e),h=i==="y",p=n.x+n.width/2-s.width/2,g=n.y+n.height/2-s.height/2,v=n[c]/2-s[c]/2;let w;switch(d){case"top":w={x:p,y:n.y-s.height};break;case"bottom":w={x:p,y:n.y+n.height};break;case"right":w={x:n.x+n.width,y:g};break;case"left":w={x:n.x-s.width,y:g};break;default:w={x:n.x,y:n.y}}switch(nh(e)){case"start":w[o]-=v*(t&&h?-1:1);break;case"end":w[o]+=v*(t&&h?-1:1);break}return w}const iU=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,c=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:r,floating:e,strategy:s}),{x:p,y:g}=EI(h,n,d),v=n,w={},k=0;for(let _=0;_<c.length;_++){const{name:E,fn:C}=c[_],{x:P,y:j,data:M,reset:$}=await C({x:p,y:g,initialPlacement:n,placement:v,strategy:s,middlewareData:w,rects:h,platform:o,elements:{reference:r,floating:e}});p=P??p,g=j??g,w={...w,[E]:{...w[E],...M}},$&&k<=50&&(k++,typeof $=="object"&&($.placement&&(v=$.placement),$.rects&&(h=$.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:s}):$.rects),{x:p,y:g}=EI(h,v,d)),_=-1)}return{x:p,y:g,placement:v,strategy:s,middlewareData:w}};async function rp(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:c,strategy:d}=r,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:v=!1,padding:w=0}=Ho(e,r),k=LA(w),E=c[v?g==="floating"?"reference":"floating":g],C=uy(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(E)))==null||t?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:p,strategy:d})),P=g==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),M=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},$=uy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:P,offsetParent:j,strategy:d}):P);return{top:(C.top-$.top+k.top)/M.y,bottom:($.bottom-C.bottom+k.bottom)/M.y,left:(C.left-$.left+k.left)/M.x,right:($.right-C.right+k.right)/M.x}}const oU=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:i,platform:o,elements:c,middlewareData:d}=e,{element:h,padding:p=0}=Ho(r,e)||{};if(h==null)return{};const g=LA(p),v={x:t,y:n},w=jb(s),k=Nb(w),_=await o.getDimensions(h),E=w==="y",C=E?"top":"left",P=E?"bottom":"right",j=E?"clientHeight":"clientWidth",M=i.reference[k]+i.reference[w]-v[w]-i.floating[k],$=v[w]-i.reference[w],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let A=B?B[j]:0;(!A||!await(o.isElement==null?void 0:o.isElement(B)))&&(A=c.floating[j]||i.floating[k]);const R=M/2-$/2,D=A/2-_[k]/2-1,V=ll(g[C],D),U=ll(g[P],D),L=V,N=A-_[k]-U,Y=A/2-_[k]/2+R,ae=Jx(L,Y,N),de=!d.arrow&&nh(s)!=null&&Y!==ae&&i.reference[k]/2-(Y<L?V:U)-_[k]/2<0,he=de?Y<L?Y-L:Y-N:0;return{[w]:v[w]+he,data:{[w]:ae,centerOffset:Y-ae-he,...de&&{alignmentOffset:he}},reset:de}}}),aU=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:_=!0,...E}=Ho(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const C=Go(s),P=cl(c),j=Go(c)===c,M=await(d.isRTL==null?void 0:d.isRTL(h.floating)),$=v||(j||!_?[cy(c)]:tU(c)),B=k!=="none";!v&&B&&$.push(...nU(c,_,k,M));const A=[c,...$],R=await rp(e,E),D=[];let V=((n=i.flip)==null?void 0:n.overflows)||[];if(p&&D.push(R[C]),g){const Y=eU(s,o,M);D.push(R[Y[0]],R[Y[1]])}if(V=[...V,{placement:s,overflows:D}],!D.every(Y=>Y<=0)){var U,L;const Y=(((U=i.flip)==null?void 0:U.index)||0)+1,ae=A[Y];if(ae)return{data:{index:Y,overflows:V},reset:{placement:ae}};let de=(L=V.filter(he=>he.overflows[0]<=0).sort((he,X)=>he.overflows[1]-X.overflows[1])[0])==null?void 0:L.placement;if(!de)switch(w){case"bestFit":{var N;const he=(N=V.filter(X=>{if(B){const J=cl(X.placement);return J===P||J==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(J=>J>0).reduce((J,K)=>J+K,0)]).sort((X,J)=>X[1]-J[1])[0])==null?void 0:N[0];he&&(de=he);break}case"initialPlacement":de=c;break}if(s!==de)return{reset:{placement:de}}}return{}}}};function TI(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function SI(r){return JF.some(e=>r[e]>=0)}const lU=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=Ho(r,e);switch(n){case"referenceHidden":{const i=await rp(e,{...s,elementContext:"reference"}),o=TI(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SI(o)}}}case"escaped":{const i=await rp(e,{...s,altBoundary:!0}),o=TI(i,t.floating);return{data:{escapedOffsets:o,escaped:SI(o)}}}default:return{}}}}};async function cU(r,e){const{placement:t,platform:n,elements:s}=r,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Go(t),c=nh(t),d=cl(t)==="y",h=["left","top"].includes(o)?-1:1,p=i&&d?-1:1,g=Ho(e,r);let{mainAxis:v,crossAxis:w,alignmentAxis:k}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof k=="number"&&(w=c==="end"?k*-1:k),d?{x:w*p,y:v*h}:{x:v*h,y:w*p}}const uU=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:i,placement:o,middlewareData:c}=e,d=await cU(e,r);return o===((t=c.offset)==null?void 0:t.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:o}}}}},dU=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:E=>{let{x:C,y:P}=E;return{x:C,y:P}}},...d}=Ho(r,e),h={x:t,y:n},p=await rp(e,d),g=cl(Go(s)),v=Rb(g);let w=h[v],k=h[g];if(i){const E=v==="y"?"top":"left",C=v==="y"?"bottom":"right",P=w+p[E],j=w-p[C];w=Jx(P,w,j)}if(o){const E=g==="y"?"top":"left",C=g==="y"?"bottom":"right",P=k+p[E],j=k-p[C];k=Jx(P,k,j)}const _=c.fn({...e,[v]:w,[g]:k});return{..._,data:{x:_.x-t,y:_.y-n,enabled:{[v]:i,[g]:o}}}}}},hU=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=Ho(r,e),p={x:t,y:n},g=cl(s),v=Rb(g);let w=p[v],k=p[g];const _=Ho(c,e),E=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const j=v==="y"?"height":"width",M=i.reference[v]-i.floating[j]+E.mainAxis,$=i.reference[v]+i.reference[j]-E.mainAxis;w<M?w=M:w>$&&(w=$)}if(h){var C,P;const j=v==="y"?"width":"height",M=["top","left"].includes(Go(s)),$=i.reference[g]-i.floating[j]+(M&&((C=o.offset)==null?void 0:C[g])||0)+(M?0:E.crossAxis),B=i.reference[g]+i.reference[j]+(M?0:((P=o.offset)==null?void 0:P[g])||0)-(M?E.crossAxis:0);k<$?k=$:k>B&&(k=B)}return{[v]:w,[g]:k}}}},fU=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:s,rects:i,platform:o,elements:c}=e,{apply:d=()=>{},...h}=Ho(r,e),p=await rp(e,h),g=Go(s),v=nh(s),w=cl(s)==="y",{width:k,height:_}=i.floating;let E,C;g==="top"||g==="bottom"?(E=g,C=v===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(C=g,E=v==="end"?"top":"bottom");const P=_-p.top-p.bottom,j=k-p.left-p.right,M=ll(_-p[E],P),$=ll(k-p[C],j),B=!e.middlewareData.shift;let A=M,R=$;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=j),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(A=P),B&&!v){const V=bs(p.left,0),U=bs(p.right,0),L=bs(p.top,0),N=bs(p.bottom,0);w?R=k-2*(V!==0||U!==0?V+U:bs(p.left,p.right)):A=_-2*(L!==0||N!==0?L+N:bs(p.top,p.bottom))}await d({...e,availableWidth:R,availableHeight:A});const D=await o.getDimensions(c.floating);return k!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function hv(){return typeof window<"u"}function sh(r){return VA(r)?(r.nodeName||"").toLowerCase():"#document"}function Ss(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function lo(r){var e;return(e=(VA(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function VA(r){return hv()?r instanceof Node||r instanceof Ss(r).Node:!1}function mi(r){return hv()?r instanceof Element||r instanceof Ss(r).Element:!1}function no(r){return hv()?r instanceof HTMLElement||r instanceof Ss(r).HTMLElement:!1}function kI(r){return!hv()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Ss(r).ShadowRoot}function Lp(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=gi(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(s)}function pU(r){return["table","td","th"].includes(sh(r))}function fv(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function Ob(r){const e=Db(),t=mi(r)?gi(r):r;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function mU(r){let e=ul(r);for(;no(e)&&!Nd(e);){if(Ob(e))return e;if(fv(e))return null;e=ul(e)}return null}function Db(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Nd(r){return["html","body","#document"].includes(sh(r))}function gi(r){return Ss(r).getComputedStyle(r)}function pv(r){return mi(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function ul(r){if(sh(r)==="html")return r;const e=r.assignedSlot||r.parentNode||kI(r)&&r.host||lo(r);return kI(e)?e.host:e}function FA(r){const e=ul(r);return Nd(e)?r.ownerDocument?r.ownerDocument.body:r.body:no(e)&&Lp(e)?e:FA(e)}function np(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=FA(r),i=s===((n=r.ownerDocument)==null?void 0:n.body),o=Ss(s);if(i){const c=Zx(o);return e.concat(o,o.visualViewport||[],Lp(s)?s:[],c&&t?np(c):[])}return e.concat(s,np(s,[],t))}function Zx(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function UA(r){const e=gi(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=no(r),i=s?r.offsetWidth:t,o=s?r.offsetHeight:n,c=ly(t)!==i||ly(n)!==o;return c&&(t=i,n=o),{width:t,height:n,$:c}}function Mb(r){return mi(r)?r:r.contextElement}function hd(r){const e=Mb(r);if(!no(e))return Ji(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:i}=UA(e);let o=(i?ly(t.width):t.width)/n,c=(i?ly(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const gU=Ji(0);function $A(r){const e=Ss(r);return!Db()||!e.visualViewport?gU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yU(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ss(r)?!1:e}function Pc(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),i=Mb(r);let o=Ji(1);e&&(n?mi(n)&&(o=hd(n)):o=hd(r));const c=yU(i,t,n)?$A(i):Ji(0);let d=(s.left+c.x)/o.x,h=(s.top+c.y)/o.y,p=s.width/o.x,g=s.height/o.y;if(i){const v=Ss(i),w=n&&mi(n)?Ss(n):n;let k=v,_=Zx(k);for(;_&&n&&w!==k;){const E=hd(_),C=_.getBoundingClientRect(),P=gi(_),j=C.left+(_.clientLeft+parseFloat(P.paddingLeft))*E.x,M=C.top+(_.clientTop+parseFloat(P.paddingTop))*E.y;d*=E.x,h*=E.y,p*=E.x,g*=E.y,d+=j,h+=M,k=Ss(_),_=Zx(k)}}return uy({width:p,height:g,x:d,y:h})}function Lb(r,e){const t=pv(r).scrollLeft;return e?e.left+t:Pc(lo(r)).left+t}function BA(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),s=n.left+e.scrollLeft-(t?0:Lb(r,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function vU(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const i=s==="fixed",o=lo(n),c=e?fv(e.floating):!1;if(n===o||c&&i)return t;let d={scrollLeft:0,scrollTop:0},h=Ji(1);const p=Ji(0),g=no(n);if((g||!g&&!i)&&((sh(n)!=="body"||Lp(o))&&(d=pv(n)),no(n))){const w=Pc(n);h=hd(n),p.x=w.x+n.clientLeft,p.y=w.y+n.clientTop}const v=o&&!g&&!i?BA(o,d,!0):Ji(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+p.x+v.x,y:t.y*h.y-d.scrollTop*h.y+p.y+v.y}}function wU(r){return Array.from(r.getClientRects())}function xU(r){const e=lo(r),t=pv(r),n=r.ownerDocument.body,s=bs(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=bs(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Lb(r);const c=-t.scrollTop;return gi(n).direction==="rtl"&&(o+=bs(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:c}}function _U(r,e){const t=Ss(r),n=lo(r),s=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,c=0,d=0;if(s){i=s.width,o=s.height;const h=Db();(!h||h&&e==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}return{width:i,height:o,x:c,y:d}}function bU(r,e){const t=Pc(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,i=no(r)?hd(r):Ji(1),o=r.clientWidth*i.x,c=r.clientHeight*i.y,d=s*i.x,h=n*i.y;return{width:o,height:c,x:d,y:h}}function II(r,e,t){let n;if(e==="viewport")n=_U(r,t);else if(e==="document")n=xU(lo(r));else if(mi(e))n=bU(e,t);else{const s=$A(r);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return uy(n)}function zA(r,e){const t=ul(r);return t===e||!mi(t)||Nd(t)?!1:gi(t).position==="fixed"||zA(t,e)}function EU(r,e){const t=e.get(r);if(t)return t;let n=np(r,[],!1).filter(c=>mi(c)&&sh(c)!=="body"),s=null;const i=gi(r).position==="fixed";let o=i?ul(r):r;for(;mi(o)&&!Nd(o);){const c=gi(o),d=Ob(o);!d&&c.position==="fixed"&&(s=null),(i?!d&&!s:!d&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Lp(o)&&!d&&zA(r,o))?n=n.filter(p=>p!==o):s=c,o=ul(o)}return e.set(r,n),n}function TU(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const o=[...t==="clippingAncestors"?fv(e)?[]:EU(e,this._c):[].concat(t),n],c=o[0],d=o.reduce((h,p)=>{const g=II(e,p,s);return h.top=bs(g.top,h.top),h.right=ll(g.right,h.right),h.bottom=ll(g.bottom,h.bottom),h.left=bs(g.left,h.left),h},II(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function SU(r){const{width:e,height:t}=UA(r);return{width:e,height:t}}function kU(r,e,t){const n=no(e),s=lo(e),i=t==="fixed",o=Pc(r,!0,i,e);let c={scrollLeft:0,scrollTop:0};const d=Ji(0);if(n||!n&&!i)if((sh(e)!=="body"||Lp(s))&&(c=pv(e)),n){const v=Pc(e,!0,i,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else s&&(d.x=Lb(s));const h=s&&!n&&!i?BA(s,c):Ji(0),p=o.left+c.scrollLeft-d.x-h.x,g=o.top+c.scrollTop-d.y-h.y;return{x:p,y:g,width:o.width,height:o.height}}function ox(r){return gi(r).position==="static"}function CI(r,e){if(!no(r)||gi(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return lo(r)===t&&(t=t.ownerDocument.body),t}function WA(r,e){const t=Ss(r);if(fv(r))return t;if(!no(r)){let s=ul(r);for(;s&&!Nd(s);){if(mi(s)&&!ox(s))return s;s=ul(s)}return t}let n=CI(r,e);for(;n&&pU(n)&&ox(n);)n=CI(n,e);return n&&Nd(n)&&ox(n)&&!Ob(n)?t:n||mU(r)||t}const IU=async function(r){const e=this.getOffsetParent||WA,t=this.getDimensions,n=await t(r.floating);return{reference:kU(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function CU(r){return gi(r).direction==="rtl"}const PU={convertOffsetParentRelativeRectToViewportRelativeRect:vU,getDocumentElement:lo,getClippingRect:TU,getOffsetParent:WA,getElementRects:IU,getClientRects:wU,getDimensions:SU,getScale:hd,isElement:mi,isRTL:CU};function qA(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function AU(r,e){let t=null,n;const s=lo(r);function i(){var c;clearTimeout(n),(c=t)==null||c.disconnect(),t=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const h=r.getBoundingClientRect(),{left:p,top:g,width:v,height:w}=h;if(c||e(),!v||!w)return;const k=mg(g),_=mg(s.clientWidth-(p+v)),E=mg(s.clientHeight-(g+w)),C=mg(p),j={rootMargin:-k+"px "+-_+"px "+-E+"px "+-C+"px",threshold:bs(0,ll(1,d))||1};let M=!0;function $(B){const A=B[0].intersectionRatio;if(A!==d){if(!M)return o();A?o(!1,A):n=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!qA(h,r.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver($,{...j,root:s.ownerDocument})}catch{t=new IntersectionObserver($,j)}t.observe(r)}return o(!0),i}function HA(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=Mb(r),p=s||i?[...h?np(h):[],...np(e)]:[];p.forEach(C=>{s&&C.addEventListener("scroll",t,{passive:!0}),i&&C.addEventListener("resize",t)});const g=h&&c?AU(h,t):null;let v=-1,w=null;o&&(w=new ResizeObserver(C=>{let[P]=C;P&&P.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=w)==null||j.observe(e)})),t()}),h&&!d&&w.observe(h),w.observe(e));let k,_=d?Pc(r):null;d&&E();function E(){const C=Pc(r);_&&!qA(_,C)&&t(),_=C,k=requestAnimationFrame(E)}return t(),()=>{var C;p.forEach(P=>{s&&P.removeEventListener("scroll",t),i&&P.removeEventListener("resize",t)}),g==null||g(),(C=w)==null||C.disconnect(),w=null,d&&cancelAnimationFrame(k)}}const RU=uU,NU=dU,jU=aU,OU=fU,DU=lU,PI=oU,MU=hU,LU=(r,e,t)=>{const n=new Map,s={platform:PU,...t},i={...s.platform,_c:n};return iU(r,e,{...s,platform:i})};var Ug=typeof document<"u"?b.useLayoutEffect:b.useEffect;function dy(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!dy(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const i=s[n];if(!(i==="_owner"&&r.$$typeof)&&!dy(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function GA(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function AI(r,e){const t=GA(r);return Math.round(e*t)/t}function ax(r){const e=b.useRef(r);return Ug(()=>{e.current=r}),e}function KA(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:d,open:h}=r,[p,g]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=b.useState(n);dy(v,n)||w(n);const[k,_]=b.useState(null),[E,C]=b.useState(null),P=b.useCallback(X=>{X!==B.current&&(B.current=X,_(X))},[]),j=b.useCallback(X=>{X!==A.current&&(A.current=X,C(X))},[]),M=i||k,$=o||E,B=b.useRef(null),A=b.useRef(null),R=b.useRef(p),D=d!=null,V=ax(d),U=ax(s),L=ax(h),N=b.useCallback(()=>{if(!B.current||!A.current)return;const X={placement:e,strategy:t,middleware:v};U.current&&(X.platform=U.current),LU(B.current,A.current,X).then(J=>{const K={...J,isPositioned:L.current!==!1};Y.current&&!dy(R.current,K)&&(R.current=K,rh.flushSync(()=>{g(K)}))})},[v,e,t,U,L]);Ug(()=>{h===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,g(X=>({...X,isPositioned:!1})))},[h]);const Y=b.useRef(!1);Ug(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Ug(()=>{if(M&&(B.current=M),$&&(A.current=$),M&&$){if(V.current)return V.current(M,$,N);N()}},[M,$,N,V,D]);const ae=b.useMemo(()=>({reference:B,floating:A,setReference:P,setFloating:j}),[P,j]),de=b.useMemo(()=>({reference:M,floating:$}),[M,$]),he=b.useMemo(()=>{const X={position:t,left:0,top:0};if(!de.floating)return X;const J=AI(de.floating,p.x),K=AI(de.floating,p.y);return c?{...X,transform:"translate("+J+"px, "+K+"px)",...GA(de.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:K}},[t,c,de.floating,p.x,p.y]);return b.useMemo(()=>({...p,update:N,refs:ae,elements:de,floatingStyles:he}),[p,N,ae,de,he])}const VU=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?PI({element:n.current,padding:s}).fn(t):{}:n?PI({element:n,padding:s}).fn(t):{}}}},YA=(r,e)=>({...RU(r),options:[r,e]}),QA=(r,e)=>({...NU(r),options:[r,e]}),JA=(r,e)=>({...MU(r),options:[r,e]}),XA=(r,e)=>({...jU(r),options:[r,e]}),ZA=(r,e)=>({...OU(r),options:[r,e]}),eR=(r,e)=>({...DU(r),options:[r,e]}),tR=(r,e)=>({...VU(r),options:[r,e]});var FU="Arrow",rR=b.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...i}=r;return u.jsx(Kc.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});rR.displayName=FU;var UU=rR;function nR(r){const[e,t]=b.useState(void 0);return hr(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,c;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,c=h.blockSize}else o=r.offsetWidth,c=r.offsetHeight;t({width:o,height:c})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var sR="Popper",[iR,oR]=Hs(sR),[fne,aR]=iR(sR),lR="PopperAnchor",cR=b.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,i=aR(lR,t),o=b.useRef(null),c=ft(e,o),d=b.useRef(null);return b.useEffect(()=>{const h=d.current;d.current=(n==null?void 0:n.current)||o.current,h!==d.current&&i.onAnchorChange(d.current)}),n?null:u.jsx(Kc.div,{...s,ref:c})});cR.displayName=lR;var Vb="PopperContent",[$U,BU]=iR(Vb),uR=b.forwardRef((r,e)=>{var pe,je,Ve,Qe,tt,at;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:k,..._}=r,E=aR(Vb,t),[C,P]=b.useState(null),j=ft(e,Pt=>P(Pt)),[M,$]=b.useState(null),B=nR(M),A=(B==null?void 0:B.width)??0,R=(B==null?void 0:B.height)??0,D=n+(i!=="center"?"-"+i:""),V=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},U=Array.isArray(h)?h:[h],L=U.length>0,N={padding:V,boundary:U.filter(WU),altBoundary:L},{refs:Y,floatingStyles:ae,placement:de,isPositioned:he,middlewareData:X}=KA({strategy:"fixed",placement:D,whileElementsMounted:(...Pt)=>HA(...Pt,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[YA({mainAxis:s+R,alignmentAxis:o}),d&&QA({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?JA():void 0,...N}),d&&XA({...N}),ZA({...N,apply:({elements:Pt,rects:Zt,availableWidth:pn,availableHeight:kr})=>{const{width:Ir,height:On}=Zt.reference,It=Pt.floating.style;It.setProperty("--radix-popper-available-width",`${pn}px`),It.setProperty("--radix-popper-available-height",`${kr}px`),It.setProperty("--radix-popper-anchor-width",`${Ir}px`),It.setProperty("--radix-popper-anchor-height",`${On}px`)}}),M&&tR({element:M,padding:c}),qU({arrowWidth:A,arrowHeight:R}),v&&eR({strategy:"referenceHidden",...N})]}),[J,K]=fR(de),W=ur(k);hr(()=>{he&&(W==null||W())},[he,W]);const Z=(pe=X.arrow)==null?void 0:pe.x,Se=(je=X.arrow)==null?void 0:je.y,ge=((Ve=X.arrow)==null?void 0:Ve.centerOffset)!==0,[Me,qe]=b.useState();return hr(()=>{C&&qe(window.getComputedStyle(C).zIndex)},[C]),u.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:he?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(Qe=X.transformOrigin)==null?void 0:Qe.x,(tt=X.transformOrigin)==null?void 0:tt.y].join(" "),...((at=X.hide)==null?void 0:at.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:u.jsx($U,{scope:t,placedSide:J,onArrowChange:$,arrowX:Z,arrowY:Se,shouldHideArrow:ge,children:u.jsx(Kc.div,{"data-side":J,"data-align":K,..._,ref:j,style:{..._.style,animation:he?void 0:"none"}})})})});uR.displayName=Vb;var dR="PopperArrow",zU={top:"bottom",right:"left",bottom:"top",left:"right"},hR=b.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,i=BU(dR,n),o=zU[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(UU,{...s,ref:t,style:{...s.style,display:"block"}})})});hR.displayName=dR;function WU(r){return r!==null}var qU=r=>({name:"transformOrigin",options:r,fn(e){var E,C,P;const{placement:t,rects:n,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,c=o?0:r.arrowWidth,d=o?0:r.arrowHeight,[h,p]=fR(t),g={start:"0%",center:"50%",end:"100%"}[p],v=(((C=s.arrow)==null?void 0:C.x)??0)+c/2,w=(((P=s.arrow)==null?void 0:P.y)??0)+d/2;let k="",_="";return h==="bottom"?(k=o?g:`${v}px`,_=`${-d}px`):h==="top"?(k=o?g:`${v}px`,_=`${n.floating.height+d}px`):h==="right"?(k=`${-d}px`,_=o?g:`${w}px`):h==="left"&&(k=`${n.floating.width+d}px`,_=o?g:`${w}px`),{data:{x:k,y:_}}}});function fR(r){const[e,t="center"]=r.split("-");return[e,t]}var HU=cR,GU=uR,KU=hR;function YU(r,e){return b.useReducer((t,n)=>e[t][n]??t,r)}var pR=r=>{const{present:e,children:t}=r,n=QU(e),s=typeof t=="function"?t({present:n.isPresent}):b.Children.only(t),i=ft(n.ref,JU(s));return typeof t=="function"||n.isPresent?b.cloneElement(s,{ref:i}):null};pR.displayName="Presence";function QU(r){const[e,t]=b.useState(),n=b.useRef(null),s=b.useRef(r),i=b.useRef("none"),o=r?"mounted":"unmounted",[c,d]=YU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=gg(n.current);i.current=c==="mounted"?h:"none"},[c]),hr(()=>{const h=n.current,p=s.current;if(p!==r){const v=i.current,w=gg(h);r?d("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(p&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,d]),hr(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=w=>{const _=gg(n.current).includes(CSS.escape(w.animationName));if(w.target===e&&_&&(d("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=w=>{w.target===e&&(i.current=gg(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:b.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function gg(r){return(r==null?void 0:r.animationName)||"none"}function JU(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var XU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZU="VisuallyHidden",mR=b.forwardRef((r,e)=>u.jsx(Kc.span,{...r,ref:e,style:{...XU,...r.style}}));mR.displayName=ZU;var e6=mR,[mv,pne]=Hs("Tooltip",[oR]),Fb=oR(),gR="TooltipProvider",t6=700,RI="tooltip.open",[r6,yR]=mv(gR),vR=r=>{const{__scopeTooltip:e,delayDuration:t=t6,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,o=b.useRef(!0),c=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),u.jsx(r6,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:b.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};vR.displayName=gR;var wR="Tooltip",[mne,gv]=mv(wR),e_="TooltipTrigger",n6=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=gv(e_,t),i=yR(e_,t),o=Fb(t),c=b.useRef(null),d=ft(e,c,s.onTriggerChange),h=b.useRef(!1),p=b.useRef(!1),g=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),u.jsx(HU,{asChild:!0,...o,children:u.jsx(Kc.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:d,onPointerMove:Mo(r.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Mo(r.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Mo(r.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Mo(r.onFocus,()=>{h.current||s.onOpen()}),onBlur:Mo(r.onBlur,s.onClose),onClick:Mo(r.onClick,s.onClose)})})});n6.displayName=e_;var s6="TooltipPortal",[gne,i6]=mv(s6,{forceMount:void 0}),jd="TooltipContent",xR=b.forwardRef((r,e)=>{const t=i6(jd,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,o=gv(jd,r.__scopeTooltip);return u.jsx(pR,{present:n||o.open,children:o.disableHoverableContent?u.jsx(_R,{side:s,...i,ref:e}):u.jsx(o6,{side:s,...i,ref:e})})}),o6=b.forwardRef((r,e)=>{const t=gv(jd,r.__scopeTooltip),n=yR(jd,r.__scopeTooltip),s=b.useRef(null),i=ft(e,s),[o,c]=b.useState(null),{trigger:d,onClose:h}=t,p=s.current,{onPointerInTransitChange:g}=n,v=b.useCallback(()=>{c(null),g(!1)},[g]),w=b.useCallback((k,_)=>{const E=k.currentTarget,C={x:k.clientX,y:k.clientY},P=d6(C,E.getBoundingClientRect()),j=h6(C,P),M=f6(_.getBoundingClientRect()),$=m6([...j,...M]);c($),g(!0)},[g]);return b.useEffect(()=>()=>v(),[v]),b.useEffect(()=>{if(d&&p){const k=E=>w(E,p),_=E=>w(E,d);return d.addEventListener("pointerleave",k),p.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",k),p.removeEventListener("pointerleave",_)}}},[d,p,w,v]),b.useEffect(()=>{if(o){const k=_=>{const E=_.target,C={x:_.clientX,y:_.clientY},P=(d==null?void 0:d.contains(E))||(p==null?void 0:p.contains(E)),j=!p6(C,o);P?v():j&&(v(),h())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[d,p,o,h,v]),u.jsx(_R,{...r,ref:i})}),[a6,l6]=mv(wR,{isInside:!1}),c6=MF("TooltipContent"),_R=b.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...c}=r,d=gv(jd,t),h=Fb(t),{onClose:p}=d;return b.useEffect(()=>(document.addEventListener(RI,p),()=>document.removeEventListener(RI,p)),[p]),b.useEffect(()=>{if(d.trigger){const g=v=>{const w=v.target;w!=null&&w.contains(d.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[d.trigger,p]),u.jsx(DA,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:u.jsxs(GU,{"data-state":d.stateAttribute,...h,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(c6,{children:n}),u.jsx(a6,{scope:t,isInside:!0,children:u.jsx(e6,{id:d.contentId,role:"tooltip",children:s||n})})]})})});xR.displayName=jd;var bR="TooltipArrow",u6=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=Fb(t);return l6(bR,t).isInside?null:u.jsx(KU,{...s,...n,ref:e})});u6.displayName=bR;function d6(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function h6(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function f6(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function p6(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const c=e[i],d=e[o],h=c.x,p=c.y,g=d.x,v=d.y;p>n!=v>n&&t<(g-h)*(n-p)/(v-p)+h&&(s=!s)}return s}function m6(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),g6(e)}function g6(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var y6=vR,ER=xR;function TR(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=TR(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function SR(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=TR(r))&&(n&&(n+=" "),n+=e);return n}const Ub="-",v6=r=>{const e=x6(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const c=o.split(Ub);return c[0]===""&&c.length!==1&&c.shift(),kR(c,e)||w6(o)},getConflictingClassGroupIds:(o,c)=>{const d=t[o]||[];return c&&n[o]?[...d,...n[o]]:d}}},kR=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?kR(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Ub);return(o=e.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},NI=/^\[(.+)\]$/,w6=r=>{if(NI.test(r)){const e=NI.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},x6=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return b6(Object.entries(r.classGroups),t).forEach(([i,o])=>{t_(o,n,i,e)}),n},t_=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:jI(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(_6(s)){t_(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{t_(o,jI(e,i),t,n)})})},jI=(r,e)=>{let t=r;return e.split(Ub).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},_6=r=>r.isThemeGetter,b6=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[e+o,c])):i);return[t,s]}):r,E6=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},IR="!",T6=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,o=c=>{const d=[];let h=0,p=0,g;for(let E=0;E<c.length;E++){let C=c[E];if(h===0){if(C===s&&(n||c.slice(E,E+i)===e)){d.push(c.slice(p,E)),p=E+i;continue}if(C==="/"){g=E;continue}}C==="["?h++:C==="]"&&h--}const v=d.length===0?c:c.substring(p),w=v.startsWith(IR),k=w?v.substring(1):v,_=g&&g>p?g-p:void 0;return{modifiers:d,hasImportantModifier:w,baseClassName:k,maybePostfixModifierPosition:_}};return t?c=>t({className:c,parseClassName:o}):o},S6=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},k6=r=>({cache:E6(r.cacheSize),parseClassName:T6(r),...v6(r)}),I6=/\s+/,C6=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=r.trim().split(I6);let c="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=t(h);let k=!!w,_=n(k?v.substring(0,w):v);if(!_){if(!k){c=h+(c.length>0?" "+c:c);continue}if(_=n(v),!_){c=h+(c.length>0?" "+c:c);continue}k=!1}const E=S6(p).join(":"),C=g?E+IR:E,P=C+_;if(i.includes(P))continue;i.push(P);const j=s(_,k);for(let M=0;M<j.length;++M){const $=j[M];i.push(C+$)}c=h+(c.length>0?" "+c:c)}return c};function P6(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=CR(e))&&(n&&(n+=" "),n+=t);return n}const CR=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=CR(r[n]))&&(t&&(t+=" "),t+=e);return t};function A6(r,...e){let t,n,s,i=o;function o(d){const h=e.reduce((p,g)=>g(p),r());return t=k6(h),n=t.cache.get,s=t.cache.set,i=c,c(d)}function c(d){const h=n(d);if(h)return h;const p=C6(d,t);return s(d,p),p}return function(){return i(P6.apply(null,arguments))}}const sr=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},PR=/^\[(?:([a-z-]+):)?(.+)\]$/i,R6=/^\d+\/\d+$/,N6=new Set(["px","full","screen"]),j6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,O6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,M6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,L6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ro=r=>fd(r)||N6.has(r)||R6.test(r),Ca=r=>ih(r,"length",q6),fd=r=>!!r&&!Number.isNaN(Number(r)),lx=r=>ih(r,"number",fd),uf=r=>!!r&&Number.isInteger(Number(r)),V6=r=>r.endsWith("%")&&fd(r.slice(0,-1)),mt=r=>PR.test(r),Pa=r=>j6.test(r),F6=new Set(["length","size","percentage"]),U6=r=>ih(r,F6,AR),$6=r=>ih(r,"position",AR),B6=new Set(["image","url"]),z6=r=>ih(r,B6,G6),W6=r=>ih(r,"",H6),df=()=>!0,ih=(r,e,t)=>{const n=PR.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},q6=r=>O6.test(r)&&!D6.test(r),AR=()=>!1,H6=r=>M6.test(r),G6=r=>L6.test(r),K6=()=>{const r=sr("colors"),e=sr("spacing"),t=sr("blur"),n=sr("brightness"),s=sr("borderColor"),i=sr("borderRadius"),o=sr("borderSpacing"),c=sr("borderWidth"),d=sr("contrast"),h=sr("grayscale"),p=sr("hueRotate"),g=sr("invert"),v=sr("gap"),w=sr("gradientColorStops"),k=sr("gradientColorStopPositions"),_=sr("inset"),E=sr("margin"),C=sr("opacity"),P=sr("padding"),j=sr("saturate"),M=sr("scale"),$=sr("sepia"),B=sr("skew"),A=sr("space"),R=sr("translate"),D=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",mt,e],L=()=>[mt,e],N=()=>["",Ro,Ca],Y=()=>["auto",fd,mt],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",mt],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[fd,mt];return{cacheSize:500,separator:":",theme:{colors:[df],spacing:[Ro,Ca],blur:["none","",Pa,mt],brightness:W(),borderColor:[r],borderRadius:["none","","full",Pa,mt],borderSpacing:L(),borderWidth:N(),contrast:W(),grayscale:J(),hueRotate:W(),invert:J(),gap:L(),gradientColorStops:[r],gradientColorStopPositions:[V6,Ca],inset:U(),margin:U(),opacity:W(),padding:L(),saturate:W(),scale:W(),sepia:J(),skew:W(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[Pa]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),mt]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uf,mt]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",uf,mt]}],"grid-cols":[{"grid-cols":[df]}],"col-start-end":[{col:["auto",{span:["full",uf,mt]},mt]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[df]}],"row-start-end":[{row:["auto",{span:[uf,mt]},mt]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,e]}],"min-w":[{"min-w":[mt,e,"min","max","fit"]}],"max-w":[{"max-w":[mt,e,"none","full","min","max","fit","prose",{screen:[Pa]},Pa]}],h:[{h:[mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Pa,Ca]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lx]}],"font-family":[{font:[df]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",fd,lx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ro,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ro,Ca]}],"underline-offset":[{"underline-offset":["auto",Ro,mt]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),$6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",U6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z6]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:de()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[Ro,mt]}],"outline-w":[{outline:[Ro,Ca]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Ro,Ca]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Pa,W6]}],"shadow-color":[{shadow:[df]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Pa,mt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[j]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[uf,mt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Ro,Ca,lx]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Y6=A6(K6);function Oe(...r){return Y6(SR(r))}const Q6=y6,J6=b.forwardRef(({className:r,sideOffset:e=4,...t},n)=>u.jsx(ER,{ref:n,sideOffset:e,className:Oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));J6.displayName=ER.displayName;var yv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vv=typeof window>"u"||"Deno"in globalThis;function oi(){}function X6(r,e){return typeof r=="function"?r(e):r}function Z6(r){return typeof r=="number"&&r>=0&&r!==1/0}function e3(r,e){return Math.max(r+(e||0)-Date.now(),0)}function OI(r,e){return typeof r=="function"?r(e):r}function t3(r,e){return typeof r=="function"?r(e):r}function DI(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:c}=r;if(o){if(n){if(e.queryHash!==$b(o,e.options))return!1}else if(!ip(e.queryKey,o))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||i&&!i(e))}function MI(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(sp(e.options.mutationKey)!==sp(i))return!1}else if(!ip(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function $b(r,e){return((e==null?void 0:e.queryKeyHashFn)||sp)(r)}function sp(r){return JSON.stringify(r,(e,t)=>r_(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function ip(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ip(r[t],e[t])):!1}function RR(r,e){if(r===e)return r;const t=LI(r)&&LI(e);if(t||r_(r)&&r_(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),o=i.length,c=t?[]:{};let d=0;for(let h=0;h<o;h++){const p=t?h:i[h];(!t&&n.includes(p)||t)&&r[p]===void 0&&e[p]===void 0?(c[p]=void 0,d++):(c[p]=RR(r[p],e[p]),c[p]===r[p]&&r[p]!==void 0&&d++)}return s===o&&d===s?r:c}return e}function LI(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function r_(r){if(!VI(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!VI(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function VI(r){return Object.prototype.toString.call(r)==="[object Object]"}function r3(r){return new Promise(e=>{setTimeout(e,r)})}function n3(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?RR(r,e):e}function s3(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function i3(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var Bb=Symbol();function NR(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Bb?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var gc,Ga,Ed,_A,o3=(_A=class extends yv{constructor(){super();Dt(this,gc);Dt(this,Ga);Dt(this,Ed);dt(this,Ed,e=>{if(!vv&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){fe(this,Ga)||this.setEventListener(fe(this,Ed))}onUnsubscribe(){var e;this.hasListeners()||((e=fe(this,Ga))==null||e.call(this),dt(this,Ga,void 0))}setEventListener(e){var t;dt(this,Ed,e),(t=fe(this,Ga))==null||t.call(this),dt(this,Ga,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){fe(this,gc)!==e&&(dt(this,gc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof fe(this,gc)=="boolean"?fe(this,gc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gc=new WeakMap,Ga=new WeakMap,Ed=new WeakMap,_A),jR=new o3,Td,Ka,Sd,bA,a3=(bA=class extends yv{constructor(){super();Dt(this,Td,!0);Dt(this,Ka);Dt(this,Sd);dt(this,Sd,e=>{if(!vv&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){fe(this,Ka)||this.setEventListener(fe(this,Sd))}onUnsubscribe(){var e;this.hasListeners()||((e=fe(this,Ka))==null||e.call(this),dt(this,Ka,void 0))}setEventListener(e){var t;dt(this,Sd,e),(t=fe(this,Ka))==null||t.call(this),dt(this,Ka,e(this.setOnline.bind(this)))}setOnline(e){fe(this,Td)!==e&&(dt(this,Td,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return fe(this,Td)}},Td=new WeakMap,Ka=new WeakMap,Sd=new WeakMap,bA),hy=new a3;function l3(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function c3(r){return Math.min(1e3*2**r,3e4)}function OR(r){return(r??"online")==="online"?hy.isOnline():!0}var DR=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function cx(r){return r instanceof DR}function MR(r){let e=!1,t=0,n=!1,s;const i=l3(),o=_=>{var E;n||(v(new DR(_)),(E=r.abort)==null||E.call(r))},c=()=>{e=!0},d=()=>{e=!1},h=()=>jR.isFocused()&&(r.networkMode==="always"||hy.isOnline())&&r.canRun(),p=()=>OR(r.networkMode)&&r.canRun(),g=_=>{var E;n||(n=!0,(E=r.onSuccess)==null||E.call(r,_),s==null||s(),i.resolve(_))},v=_=>{var E;n||(n=!0,(E=r.onError)==null||E.call(r,_),s==null||s(),i.reject(_))},w=()=>new Promise(_=>{var E;s=C=>{(n||h())&&_(C)},(E=r.onPause)==null||E.call(r)}).then(()=>{var _;s=void 0,n||(_=r.onContinue)==null||_.call(r)}),k=()=>{if(n)return;let _;const E=t===0?r.initialPromise:void 0;try{_=E??r.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(g).catch(C=>{var B;if(n)return;const P=r.retry??(vv?0:3),j=r.retryDelay??c3,M=typeof j=="function"?j(t,C):j,$=P===!0||typeof P=="number"&&t<P||typeof P=="function"&&P(t,C);if(e||!$){v(C);return}t++,(B=r.onFail)==null||B.call(r,t,C),r3(M).then(()=>h()?void 0:w()).then(()=>{e?v(C):k()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:c,continueRetry:d,canStart:p,start:()=>(p()?k():w().then(k),i)}}var u3=r=>setTimeout(r,0);function d3(){let r=[],e=0,t=c=>{c()},n=c=>{c()},s=u3;const i=c=>{e?r.push(c):s(()=>{t(c)})},o=()=>{const c=r;r=[],c.length&&s(()=>{n(()=>{c.forEach(d=>{t(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||o()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{s=c}}}var $n=d3(),yc,EA,LR=(EA=class{constructor(){Dt(this,yc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Z6(this.gcTime)&&dt(this,yc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(vv?1/0:5*60*1e3))}clearGcTimeout(){fe(this,yc)&&(clearTimeout(fe(this,yc)),dt(this,yc,void 0))}},yc=new WeakMap,EA),kd,Id,Vs,vc,In,Op,wc,ai,jo,TA,h3=(TA=class extends LR{constructor(t){super();Dt(this,ai);Dt(this,kd);Dt(this,Id);Dt(this,Vs);Dt(this,vc);Dt(this,In);Dt(this,Op);Dt(this,wc);dt(this,wc,!1),dt(this,Op,t.defaultOptions),this.setOptions(t.options),this.observers=[],dt(this,vc,t.client),dt(this,Vs,fe(this,vc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,dt(this,kd,p3(this.options)),this.state=t.state??fe(this,kd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=fe(this,In))==null?void 0:t.promise}setOptions(t){this.options={...fe(this,Op),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&fe(this,Vs).remove(this)}setData(t,n){const s=n3(this.state.data,t,this.options);return Tn(this,ai,jo).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Tn(this,ai,jo).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=fe(this,In))==null?void 0:s.promise;return(i=fe(this,In))==null||i.cancel(t),n?n.then(oi).catch(oi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(fe(this,kd))}isActive(){return this.observers.some(t=>t3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!e3(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,In))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,In))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),fe(this,Vs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(fe(this,In)&&(fe(this,wc)?fe(this,In).cancel({revert:!0}):fe(this,In).cancelRetry()),this.scheduleGc()),fe(this,Vs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Tn(this,ai,jo).call(this,{type:"invalidate"})}fetch(t,n){var h,p,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(fe(this,In))return fe(this,In).continueRetry(),fe(this,In).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const s=new AbortController,i=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(dt(this,wc,!0),s.signal)})},o=()=>{const v=NR(this.options,n),w={client:fe(this,vc),queryKey:this.queryKey,meta:this.meta};return i(w),dt(this,wc,!1),this.options.persister?this.options.persister(v,w,this):v(w)},c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:fe(this,vc),state:this.state,fetchFn:o};i(c),(h=this.options.behavior)==null||h.onFetch(c,this),dt(this,Id,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&Tn(this,ai,jo).call(this,{type:"fetch",meta:(g=c.fetchOptions)==null?void 0:g.meta});const d=v=>{var w,k,_,E;cx(v)&&v.silent||Tn(this,ai,jo).call(this,{type:"error",error:v}),cx(v)||((k=(w=fe(this,Vs).config).onError)==null||k.call(w,v,this),(E=(_=fe(this,Vs).config).onSettled)==null||E.call(_,this.state.data,v,this)),this.scheduleGc()};return dt(this,In,MR({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:v=>{var w,k,_,E;if(v===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(C){d(C);return}(k=(w=fe(this,Vs).config).onSuccess)==null||k.call(w,v,this),(E=(_=fe(this,Vs).config).onSettled)==null||E.call(_,v,this.state.error,this),this.scheduleGc()},onError:d,onFail:(v,w)=>{Tn(this,ai,jo).call(this,{type:"failed",failureCount:v,error:w})},onPause:()=>{Tn(this,ai,jo).call(this,{type:"pause"})},onContinue:()=>{Tn(this,ai,jo).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),fe(this,In).start()}},kd=new WeakMap,Id=new WeakMap,Vs=new WeakMap,vc=new WeakMap,In=new WeakMap,Op=new WeakMap,wc=new WeakMap,ai=new WeakSet,jo=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...f3(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return cx(i)&&i.revert&&fe(this,Id)?{...fe(this,Id),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),$n.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),fe(this,Vs).notify({query:this,type:"updated",action:t})})},TA);function f3(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OR(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function p3(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var zi,SA,m3=(SA=class extends yv{constructor(e={}){super();Dt(this,zi);this.config=e,dt(this,zi,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??$b(s,t);let o=this.get(i);return o||(o=new h3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){fe(this,zi).has(e.queryHash)||(fe(this,zi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=fe(this,zi).get(e.queryHash);t&&(e.destroy(),t===e&&fe(this,zi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$n.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return fe(this,zi).get(e)}getAll(){return[...fe(this,zi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>DI(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>DI(e,n)):t}notify(e){$n.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},zi=new WeakMap,SA),Wi,Vn,xc,qi,Da,kA,g3=(kA=class extends LR{constructor(t){super();Dt(this,qi);Dt(this,Wi);Dt(this,Vn);Dt(this,xc);this.mutationId=t.mutationId,dt(this,Vn,t.mutationCache),dt(this,Wi,[]),this.state=t.state||y3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){fe(this,Wi).includes(t)||(fe(this,Wi).push(t),this.clearGcTimeout(),fe(this,Vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){dt(this,Wi,fe(this,Wi).filter(n=>n!==t)),this.scheduleGc(),fe(this,Vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){fe(this,Wi).length||(this.state.status==="pending"?this.scheduleGc():fe(this,Vn).remove(this))}continue(){var t;return((t=fe(this,xc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,c,d,h,p,g,v,w,k,_,E,C,P,j,M,$,B,A,R,D;const n=()=>{Tn(this,qi,Da).call(this,{type:"continue"})};dt(this,xc,MR({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(V,U)=>{Tn(this,qi,Da).call(this,{type:"failed",failureCount:V,error:U})},onPause:()=>{Tn(this,qi,Da).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>fe(this,Vn).canRun(this)}));const s=this.state.status==="pending",i=!fe(this,xc).canStart();try{if(s)n();else{Tn(this,qi,Da).call(this,{type:"pending",variables:t,isPaused:i}),await((c=(o=fe(this,Vn).config).onMutate)==null?void 0:c.call(o,t,this));const U=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,t));U!==this.state.context&&Tn(this,qi,Da).call(this,{type:"pending",context:U,variables:t,isPaused:i})}const V=await fe(this,xc).start();return await((g=(p=fe(this,Vn).config).onSuccess)==null?void 0:g.call(p,V,t,this.state.context,this)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,V,t,this.state.context)),await((_=(k=fe(this,Vn).config).onSettled)==null?void 0:_.call(k,V,null,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,V,null,t,this.state.context)),Tn(this,qi,Da).call(this,{type:"success",data:V}),V}catch(V){try{throw await((j=(P=fe(this,Vn).config).onError)==null?void 0:j.call(P,V,t,this.state.context,this)),await(($=(M=this.options).onError)==null?void 0:$.call(M,V,t,this.state.context)),await((A=(B=fe(this,Vn).config).onSettled)==null?void 0:A.call(B,void 0,V,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,V,t,this.state.context)),V}finally{Tn(this,qi,Da).call(this,{type:"error",error:V})}}finally{fe(this,Vn).runNext(this)}}},Wi=new WeakMap,Vn=new WeakMap,xc=new WeakMap,qi=new WeakSet,Da=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$n.batch(()=>{fe(this,Wi).forEach(s=>{s.onMutationUpdate(t)}),fe(this,Vn).notify({mutation:this,type:"updated",action:t})})},kA);function y3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lo,li,Dp,IA,v3=(IA=class extends yv{constructor(e={}){super();Dt(this,Lo);Dt(this,li);Dt(this,Dp);this.config=e,dt(this,Lo,new Set),dt(this,li,new Map),dt(this,Dp,0)}build(e,t,n){const s=new g3({mutationCache:this,mutationId:++fg(this,Dp)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){fe(this,Lo).add(e);const t=yg(e);if(typeof t=="string"){const n=fe(this,li).get(t);n?n.push(e):fe(this,li).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(fe(this,Lo).delete(e)){const t=yg(e);if(typeof t=="string"){const n=fe(this,li).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&fe(this,li).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=yg(e);if(typeof t=="string"){const n=fe(this,li).get(t),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=yg(e);if(typeof t=="string"){const s=(n=fe(this,li).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{fe(this,Lo).forEach(e=>{this.notify({type:"removed",mutation:e})}),fe(this,Lo).clear(),fe(this,li).clear()})}getAll(){return Array.from(fe(this,Lo))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>MI(t,n))}findAll(e={}){return this.getAll().filter(t=>MI(e,t))}notify(e){$n.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return $n.batch(()=>Promise.all(e.map(t=>t.continue().catch(oi))))}},Lo=new WeakMap,li=new WeakMap,Dp=new WeakMap,IA);function yg(r){var e;return(e=r.options.scope)==null?void 0:e.id}function FI(r){return{onFetch:(e,t)=>{var p,g,v,w,k;const n=e.options,s=(v=(g=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:v.direction,i=((w=e.state.data)==null?void 0:w.pages)||[],o=((k=e.state.data)==null?void 0:k.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let _=!1;const E=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},C=NR(e.options,e.fetchOptions),P=async(j,M,$)=>{if(_)return Promise.reject();if(M==null&&j.pages.length)return Promise.resolve(j);const B={client:e.client,queryKey:e.queryKey,pageParam:M,direction:$?"backward":"forward",meta:e.options.meta};E(B);const A=await C(B),{maxPages:R}=e.options,D=$?i3:s3;return{pages:D(j.pages,A,R),pageParams:D(j.pageParams,M,R)}};if(s&&i.length){const j=s==="backward",M=j?w3:UI,$={pages:i,pageParams:o},B=M(n,$);c=await P($,B,j)}else{const j=r??i.length;do{const M=d===0?o[0]??n.initialPageParam:UI(n,c);if(d>0&&M==null)break;c=await P(c,M),d++}while(d<j)}return c};e.options.persister?e.fetchFn=()=>{var _,E;return(E=(_=e.options).persister)==null?void 0:E.call(_,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function UI(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function w3(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var mr,Ya,Qa,Cd,Pd,Ja,Ad,Rd,CA,x3=(CA=class{constructor(r={}){Dt(this,mr);Dt(this,Ya);Dt(this,Qa);Dt(this,Cd);Dt(this,Pd);Dt(this,Ja);Dt(this,Ad);Dt(this,Rd);dt(this,mr,r.queryCache||new m3),dt(this,Ya,r.mutationCache||new v3),dt(this,Qa,r.defaultOptions||{}),dt(this,Cd,new Map),dt(this,Pd,new Map),dt(this,Ja,0)}mount(){fg(this,Ja)._++,fe(this,Ja)===1&&(dt(this,Ad,jR.subscribe(async r=>{r&&(await this.resumePausedMutations(),fe(this,mr).onFocus())})),dt(this,Rd,hy.subscribe(async r=>{r&&(await this.resumePausedMutations(),fe(this,mr).onOnline())})))}unmount(){var r,e;fg(this,Ja)._--,fe(this,Ja)===0&&((r=fe(this,Ad))==null||r.call(this),dt(this,Ad,void 0),(e=fe(this,Rd))==null||e.call(this),dt(this,Rd,void 0))}isFetching(r){return fe(this,mr).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return fe(this,Ya).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=fe(this,mr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=fe(this,mr).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(OI(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return fe(this,mr).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=fe(this,mr).get(n.queryHash),i=s==null?void 0:s.state.data,o=X6(e,i);if(o!==void 0)return fe(this,mr).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return $n.batch(()=>fe(this,mr).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=fe(this,mr).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=fe(this,mr);$n.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=fe(this,mr);return $n.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=$n.batch(()=>fe(this,mr).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(oi).catch(oi)}invalidateQueries(r,e={}){return $n.batch(()=>(fe(this,mr).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=$n.batch(()=>fe(this,mr).findAll(r).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(oi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(oi)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=fe(this,mr).build(this,e);return t.isStaleByTime(OI(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(oi).catch(oi)}fetchInfiniteQuery(r){return r.behavior=FI(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(oi).catch(oi)}ensureInfiniteQueryData(r){return r.behavior=FI(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return hy.isOnline()?fe(this,Ya).resumePausedMutations():Promise.resolve()}getQueryCache(){return fe(this,mr)}getMutationCache(){return fe(this,Ya)}getDefaultOptions(){return fe(this,Qa)}setDefaultOptions(r){dt(this,Qa,r)}setQueryDefaults(r,e){fe(this,Cd).set(sp(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...fe(this,Cd).values()],t={};return e.forEach(n=>{ip(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){fe(this,Pd).set(sp(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...fe(this,Pd).values()],t={};return e.forEach(n=>{ip(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...fe(this,Qa).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=$b(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Bb&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...fe(this,Qa).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){fe(this,mr).clear(),fe(this,Ya).clear()}},mr=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,Cd=new WeakMap,Pd=new WeakMap,Ja=new WeakMap,Ad=new WeakMap,Rd=new WeakMap,CA),_3=b.createContext(void 0),b3=({client:r,children:e})=>(b.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),u.jsx(_3.Provider,{value:r,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},op.apply(this,arguments)}var Xa;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Xa||(Xa={}));const $I="popstate";function E3(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:o,hash:c}=n.location;return n_("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:fy(s)}return S3(e,t,null,r)}function wr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function VR(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T3(){return Math.random().toString(36).substr(2,8)}function BI(r,e){return{usr:r.state,key:r.key,idx:e}}function n_(r,e,t,n){return t===void 0&&(t=null),op({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?oh(e):e,{state:t,key:e&&e.key||n||T3()})}function fy(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function oh(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function S3(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,c=Xa.Pop,d=null,h=p();h==null&&(h=0,o.replaceState(op({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function g(){c=Xa.Pop;let E=p(),C=E==null?null:E-h;h=E,d&&d({action:c,location:_.location,delta:C})}function v(E,C){c=Xa.Push;let P=n_(_.location,E,C);h=p()+1;let j=BI(P,h),M=_.createHref(P);try{o.pushState(j,"",M)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(M)}i&&d&&d({action:c,location:_.location,delta:1})}function w(E,C){c=Xa.Replace;let P=n_(_.location,E,C);h=p();let j=BI(P,h),M=_.createHref(P);o.replaceState(j,"",M),i&&d&&d({action:c,location:_.location,delta:0})}function k(E){let C=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof E=="string"?E:fy(E);return P=P.replace(/ $/,"%20"),wr(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let _={get action(){return c},get location(){return r(s,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener($I,g),d=E,()=>{s.removeEventListener($I,g),d=null}},createHref(E){return e(s,E)},createURL:k,encodeLocation(E){let C=k(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:w,go(E){return o.go(E)}};return _}var zI;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(zI||(zI={}));function k3(r,e,t){return t===void 0&&(t="/"),I3(r,e,t)}function I3(r,e,t,n){let s=typeof e=="string"?oh(e):e,i=Od(s.pathname||"/",t);if(i==null)return null;let o=FR(r);C3(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=F3(i);c=L3(o[d],h)}return c}function FR(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(wr(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=tl([n,d.relativePath]),p=t.concat(d);i.children&&i.children.length>0&&(wr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),FR(i.children,e,p,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:D3(h,i.index),routesMeta:p})};return r.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let d of UR(i.path))s(i,o,d)}),e}function UR(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=UR(n.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...o),c.map(d=>r.startsWith("/")&&d===""?"/":d)}function C3(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:M3(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const P3=/^:[\w-]+$/,A3=3,R3=2,N3=1,j3=10,O3=-2,WI=r=>r==="*";function D3(r,e){let t=r.split("/"),n=t.length;return t.some(WI)&&(n+=O3),e&&(n+=R3),t.filter(s=>!WI(s)).reduce((s,i)=>s+(P3.test(i)?A3:i===""?N3:j3),n)}function M3(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function L3(r,e,t){let{routesMeta:n}=r,s={},i="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",g=s_({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),v=d.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:tl([i,g.pathname]),pathnameBase:z3(tl([i,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(i=tl([i,g.pathnameBase]))}return o}function s_(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=V3(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((h,p,g)=>{let{paramName:v,isOptional:w}=p;if(v==="*"){let _=c[g]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const k=c[g];return w&&!k?h[v]=void 0:h[v]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:r}}function V3(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),VR(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function F3(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VR(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Od(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function U3(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?oh(r):r;return{pathname:t?t.startsWith("/")?t:$3(t,e):e,search:W3(n),hash:q3(s)}}function $3(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ux(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B3(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $R(r,e){let t=B3(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function BR(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=oh(r):(s=op({},r),wr(!s.pathname||!s.pathname.includes("?"),ux("?","pathname","search",s)),wr(!s.pathname||!s.pathname.includes("#"),ux("#","pathname","hash",s)),wr(!s.search||!s.search.includes("#"),ux("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}c=g>=0?e[g]:"/"}let d=U3(s,c),h=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}const tl=r=>r.join("/").replace(/\/\/+/g,"/"),z3=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),W3=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,q3=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function H3(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const zR=["post","put","patch","delete"];new Set(zR);const G3=["get",...zR];new Set(G3);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ap.apply(this,arguments)}const wv=b.createContext(null),WR=b.createContext(null),yl=b.createContext(null),xv=b.createContext(null),vl=b.createContext({outlet:null,matches:[],isDataRoute:!1}),qR=b.createContext(null);function K3(r,e){let{relative:t}=e===void 0?{}:e;Vp()||wr(!1);let{basename:n,navigator:s}=b.useContext(yl),{hash:i,pathname:o,search:c}=_v(r,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:tl([n,o])),s.createHref({pathname:d,search:c,hash:i})}function Vp(){return b.useContext(xv)!=null}function ah(){return Vp()||wr(!1),b.useContext(xv).location}function HR(r){b.useContext(yl).static||b.useLayoutEffect(r)}function Fr(){let{isDataRoute:r}=b.useContext(vl);return r?a5():Y3()}function Y3(){Vp()||wr(!1);let r=b.useContext(wv),{basename:e,future:t,navigator:n}=b.useContext(yl),{matches:s}=b.useContext(vl),{pathname:i}=ah(),o=JSON.stringify($R(s,t.v7_relativeSplatPath)),c=b.useRef(!1);return HR(()=>{c.current=!0}),b.useCallback(function(h,p){if(p===void 0&&(p={}),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=BR(h,JSON.parse(o),i,p.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:tl([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,o,i,r])}function GR(){let{matches:r}=b.useContext(vl),e=r[r.length-1];return e?e.params:{}}function _v(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=b.useContext(yl),{matches:s}=b.useContext(vl),{pathname:i}=ah(),o=JSON.stringify($R(s,n.v7_relativeSplatPath));return b.useMemo(()=>BR(r,JSON.parse(o),i,t==="path"),[r,o,i,t])}function Q3(r,e){return J3(r,e)}function J3(r,e,t,n){Vp()||wr(!1);let{navigator:s,static:i}=b.useContext(yl),{matches:o}=b.useContext(vl),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let p=ah(),g;if(e){var v;let C=typeof e=="string"?oh(e):e;h==="/"||(v=C.pathname)!=null&&v.startsWith(h)||wr(!1),g=C}else g=p;let w=g.pathname||"/",k=w;if(h!=="/"){let C=h.replace(/^\//,"").split("/");k="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=k3(r,{pathname:k}),E=r5(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:tl([h,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:tl([h,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,n);return e&&E?b.createElement(xv.Provider,{value:{location:ap({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Xa.Pop}},E):E}function X3(){let r=o5(),e=H3(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const Z3=b.createElement(X3,null);class e5 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(vl.Provider,{value:this.props.routeContext},b.createElement(qR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t5(r){let{routeContext:e,match:t,children:n}=r,s=b.useContext(wv);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(vl.Provider,{value:e},n)}function r5(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=(s=t)==null?void 0:s.errors;if(c!=null){let p=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);p>=0||wr(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:w}=t,k=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||k){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,g,v)=>{let w,k=!1,_=null,E=null;t&&(w=c&&g.route.id?c[g.route.id]:void 0,_=g.route.errorElement||Z3,d&&(h<0&&v===0?(l5("route-fallback"),k=!0,E=null):h===v&&(k=!0,E=g.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,v+1)),P=()=>{let j;return w?j=_:k?j=E:g.route.Component?j=b.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,b.createElement(t5,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:j})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?b.createElement(e5,{location:t.location,revalidation:t.revalidation,component:_,error:w,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}var KR=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(KR||{}),YR=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(YR||{});function n5(r){let e=b.useContext(wv);return e||wr(!1),e}function s5(r){let e=b.useContext(WR);return e||wr(!1),e}function i5(r){let e=b.useContext(vl);return e||wr(!1),e}function QR(r){let e=i5(),t=e.matches[e.matches.length-1];return t.route.id||wr(!1),t.route.id}function o5(){var r;let e=b.useContext(qR),t=s5(),n=QR();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function a5(){let{router:r}=n5(KR.UseNavigateStable),e=QR(YR.UseNavigateStable),t=b.useRef(!1);return HR(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,ap({fromRouteId:e},i)))},[r,e])}const qI={};function l5(r,e,t){qI[r]||(qI[r]=!0)}function c5(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function zr(r){wr(!1)}function u5(r){let{basename:e="/",children:t=null,location:n,navigationType:s=Xa.Pop,navigator:i,static:o=!1,future:c}=r;Vp()&&wr(!1);let d=e.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:d,navigator:i,static:o,future:ap({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof n=="string"&&(n=oh(n));let{pathname:p="/",search:g="",hash:v="",state:w=null,key:k="default"}=n,_=b.useMemo(()=>{let E=Od(p,d);return E==null?null:{location:{pathname:E,search:g,hash:v,state:w,key:k},navigationType:s}},[d,p,g,v,w,k,s]);return _==null?null:b.createElement(yl.Provider,{value:h},b.createElement(xv.Provider,{children:t,value:_}))}function d5(r){let{children:e,location:t}=r;return Q3(i_(e),t)}new Promise(()=>{});function i_(r,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(r,(n,s)=>{if(!b.isValidElement(n))return;let i=[...e,s];if(n.type===b.Fragment){t.push.apply(t,i_(n.props.children,i));return}n.type!==zr&&wr(!1),!n.props.index||!n.props.children||wr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=i_(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function py(){return py=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},py.apply(this,arguments)}function JR(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function h5(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function f5(r,e){return r.button===0&&(!e||e==="_self")&&!h5(r)}const p5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g5="6";try{window.__reactRouterVersion=g5}catch{}const y5=b.createContext({isTransitioning:!1}),v5="startTransition",HI=AA[v5];function w5(r){let{basename:e,children:t,future:n,window:s}=r,i=b.useRef();i.current==null&&(i.current=E3({window:s,v5Compat:!0}));let o=i.current,[c,d]=b.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},p=b.useCallback(g=>{h&&HI?HI(()=>d(g)):d(g)},[d,h]);return b.useLayoutEffect(()=>o.listen(p),[o,p]),b.useEffect(()=>c5(n),[n]),b.createElement(u5,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o,future:n})}const x5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=b.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:c,target:d,to:h,preventScrollReset:p,viewTransition:g}=e,v=JR(e,p5),{basename:w}=b.useContext(yl),k,_=!1;if(typeof h=="string"&&_5.test(h)&&(k=h,x5))try{let j=new URL(window.location.href),M=h.startsWith("//")?new URL(j.protocol+h):new URL(h),$=Od(M.pathname,w);M.origin===j.origin&&$!=null?h=$+M.search+M.hash:_=!0}catch{}let E=K3(h,{relative:s}),C=E5(h,{replace:o,state:c,target:d,preventScrollReset:p,relative:s,viewTransition:g});function P(j){n&&n(j),j.defaultPrevented||C(j)}return b.createElement("a",py({},v,{href:k||E,onClick:_||i?n:P,ref:t,target:d}))}),vg=b.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:h,children:p}=e,g=JR(e,m5),v=_v(d,{relative:g.relative}),w=ah(),k=b.useContext(WR),{navigator:_,basename:E}=b.useContext(yl),C=k!=null&&T5(v)&&h===!0,P=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,j=w.pathname,M=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;s||(j=j.toLowerCase(),M=M?M.toLowerCase():null,P=P.toLowerCase()),M&&E&&(M=Od(M,E)||M);const $=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let B=j===P||!o&&j.startsWith(P)&&j.charAt($)==="/",A=M!=null&&(M===P||!o&&M.startsWith(P)&&M.charAt(P.length)==="/"),R={isActive:B,isPending:A,isTransitioning:C},D=B?n:void 0,V;typeof i=="function"?V=i(R):V=[i,B?"active":null,A?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof c=="function"?c(R):c;return b.createElement(dn,py({},g,{"aria-current":D,className:V,ref:t,style:U,to:d,viewTransition:h}),typeof p=="function"?p(R):p)});var o_;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(o_||(o_={}));var GI;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(GI||(GI={}));function b5(r){let e=b.useContext(wv);return e||wr(!1),e}function E5(r,e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,d=Fr(),h=ah(),p=_v(r,{relative:o});return b.useCallback(g=>{if(f5(g,t)){g.preventDefault();let v=n!==void 0?n:fy(h)===fy(p);d(r,{replace:v,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[h,d,p,n,s,t,r,i,o,c])}function T5(r,e){e===void 0&&(e={});let t=b.useContext(y5);t==null&&wr(!1);let{basename:n}=b5(o_.useViewTransitionState),s=_v(r,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Od(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Od(t.nextLocation.pathname,n)||t.nextLocation.pathname;return s_(s.pathname,o)!=null||s_(s.pathname,i)!=null}function Ac(r){const e=k5(r),t=b.forwardRef((n,s)=>{const{children:i,...o}=n,c=b.Children.toArray(i),d=c.find(C5);if(d){const h=d.props.children,p=c.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return u.jsx(e,{...o,ref:s,children:b.isValidElement(h)?b.cloneElement(h,void 0,p):null})}return u.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${r}.Slot`,t}var S5=Ac("Slot");function k5(r){const e=b.forwardRef((t,n)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const o=A5(s),c=P5(i,s.props);return s.type!==b.Fragment&&(c.ref=n?Mp(n,o):o),b.cloneElement(s,c)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var XR=Symbol("radix.slottable");function I5(r){const e=({children:t})=>u.jsx(u.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=XR,e}function C5(r){return b.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===XR}function P5(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...c)=>{i(...c),s(...c)}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function A5(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const KI=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,YI=SR,zb=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return YI(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(h=>{const p=t==null?void 0:t[h],g=i==null?void 0:i[h];if(p===null)return null;const v=KI(p)||KI(g);return s[h][v]}),c=t&&Object.entries(t).reduce((h,p)=>{let[g,v]=p;return v===void 0||(h[g]=v),h},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,p)=>{let{class:g,className:v,...w}=p;return Object.entries(w).every(k=>{let[_,E]=k;return Array.isArray(E)?E.includes({...i,...c}[_]):{...i,...c}[_]===E})?[...h,g,v]:h},[]);return YI(r,o,d,t==null?void 0:t.class,t==null?void 0:t.className)},Wb=zb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ve=b.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const o=n?S5:"button";return u.jsx(o,{className:Oe(Wb({variant:e,size:t,className:r})),ref:i,...s})});ve.displayName="Button";/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=()=>{};var QI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},N5=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],o=r[t++],c=r[t++],d=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=r[t++],o=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],o=s+1<r.length,c=o?r[s+1]:0,d=s+2<r.length,h=d?r[s+2]:0,p=i>>2,g=(i&3)<<4|c>>4;let v=(c&15)<<2|h>>6,w=h&63;d||(w=64,o||(v=64)),n.push(t[p],t[g],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ZR(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):N5(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],c=s<r.length?t[r.charAt(s)]:0;++s;const h=s<r.length?t[r.charAt(s)]:64;++s;const g=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||c==null||h==null||g==null)throw new j5;const v=i<<2|c>>4;if(n.push(v),h!==64){const w=c<<4&240|h>>2;if(n.push(w),g!==64){const k=h<<6&192|g;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class j5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O5=function(r){const e=ZR(r);return eN.encodeByteArray(e,!0)},my=function(r){return O5(r).replace(/\./g,"")},tN=function(r){try{return eN.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=()=>rN().__FIREBASE_DEFAULTS__,M5=()=>{if(typeof process>"u"||typeof QI>"u")return;const r=QI.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},L5=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&tN(r[1]);return e&&JSON.parse(e)},bv=()=>{try{return R5()||D5()||M5()||L5()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},nN=r=>{var e,t;return(t=(e=bv())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},sN=r=>{const e=nN(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},iN=()=>{var r;return(r=bv())==null?void 0:r.config},oN=r=>{var e;return(e=bv())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V5=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qb(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...r};return[my(JSON.stringify(t)),my(JSON.stringify(o)),""].join(".")}const Mf={};function F5(){const r={prod:[],emulator:[]};for(const e of Object.keys(Mf))Mf[e]?r.emulator.push(e):r.prod.push(e);return r}function U5(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let JI=!1;function Hb(r,e){if(typeof window>"u"||typeof document>"u"||!wl(window.location.host)||Mf[r]===e||Mf[r]||JI)return;Mf[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",i=F5().prod.length>0;function o(){const v=document.getElementById(n);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{JI=!0,o()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=U5(n),w=t("text"),k=document.getElementById(w)||document.createElement("span"),_=t("learnmore"),E=document.getElementById(_)||document.createElement("a"),C=t("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const j=v.element;c(j),p(E,_);const M=h();d(P,C),j.append(P,k,E,M),document.body.appendChild(j)}i?(k.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hr())}function lN(){var e;const r=(e=bv())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z5(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function W5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q5(){const r=Hr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function cN(){return!lN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uN(){return!lN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dN(){try{return typeof indexedDB=="object"}catch{return!1}}function H5(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="FirebaseError";class co extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=G5,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fp.prototype.create)}}class Fp{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?K5(i,n):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new co(s,c,n)}}function K5(r,e){return r.replace(Y5,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Y5=/\{\$([^}]+)}/g;function Q5(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Rc(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],o=e[s];if(XI(i)&&XI(o)){if(!Rc(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function XI(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function bf(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ef(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function J5(r,e){const t=new X5(r,e);return t.subscribe.bind(t)}class X5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Z5(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=dx),s.error===void 0&&(s.error=dx),s.complete===void 0&&(s.complete=dx);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z5(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function dx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r){return r&&r._delegate?r._delegate:r}class dl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new V5;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r$(e))try{this.getOrInitializeService({instanceIdentifier:ic})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ic){return this.instances.has(e)}getOptions(e=ic){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t$(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ic){return this.component?this.component.multipleInstances?e:ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t$(r){return r===ic?void 0:r}function r$(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new e$(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Tt||(Tt={}));const s$={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},i$=Tt.INFO,o$={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},a$=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=o$[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gb{constructor(e){this.name=e,this._logLevel=i$,this._logHandler=a$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const l$=(r,e)=>e.some(t=>r instanceof t);let ZI,e1;function c$(){return ZI||(ZI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u$(){return e1||(e1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hN=new WeakMap,a_=new WeakMap,fN=new WeakMap,hx=new WeakMap,Kb=new WeakMap;function d$(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",o)},i=()=>{t(rl(r.result)),s()},o=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&hN.set(t,r)}).catch(()=>{}),Kb.set(e,r),e}function h$(r){if(a_.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",o),r.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",o),r.addEventListener("abort",o)});a_.set(r,e)}let l_={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return a_.get(r);if(e==="objectStoreNames")return r.objectStoreNames||fN.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function f$(r){l_=r(l_)}function p$(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(fx(this),e,...t);return fN.set(n,e.sort?e.sort():[e]),rl(n)}:u$().includes(r)?function(...e){return r.apply(fx(this),e),rl(hN.get(this))}:function(...e){return rl(r.apply(fx(this),e))}}function m$(r){return typeof r=="function"?p$(r):(r instanceof IDBTransaction&&h$(r),l$(r,c$())?new Proxy(r,l_):r)}function rl(r){if(r instanceof IDBRequest)return d$(r);if(hx.has(r))return hx.get(r);const e=m$(r);return e!==r&&(hx.set(r,e),Kb.set(e,r)),e}const fx=r=>Kb.get(r);function g$(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(r,e),c=rl(o);return n&&o.addEventListener("upgradeneeded",d=>{n(rl(o.result),d.oldVersion,d.newVersion,rl(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const y$=["get","getKey","getAll","getAllKeys","count"],v$=["put","add","delete","clear"],px=new Map;function t1(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(px.get(e))return px.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=v$.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||y$.includes(t)))return;const i=async function(o,...c){const d=this.transaction(o,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&d.done]))[0]};return px.set(e,i),i}f$(r=>({...r,get:(e,t,n)=>t1(e,t)||r.get(e,t,n),has:(e,t)=>!!t1(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x$(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function x$(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const c_="@firebase/app",r1="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Gb("@firebase/app"),_$="@firebase/app-compat",b$="@firebase/analytics-compat",E$="@firebase/analytics",T$="@firebase/app-check-compat",S$="@firebase/app-check",k$="@firebase/auth",I$="@firebase/auth-compat",C$="@firebase/database",P$="@firebase/data-connect",A$="@firebase/database-compat",R$="@firebase/functions",N$="@firebase/functions-compat",j$="@firebase/installations",O$="@firebase/installations-compat",D$="@firebase/messaging",M$="@firebase/messaging-compat",L$="@firebase/performance",V$="@firebase/performance-compat",F$="@firebase/remote-config",U$="@firebase/remote-config-compat",$$="@firebase/storage",B$="@firebase/storage-compat",z$="@firebase/firestore",W$="@firebase/ai",q$="@firebase/firestore-compat",H$="firebase",G$="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="[DEFAULT]",K$={[c_]:"fire-core",[_$]:"fire-core-compat",[E$]:"fire-analytics",[b$]:"fire-analytics-compat",[S$]:"fire-app-check",[T$]:"fire-app-check-compat",[k$]:"fire-auth",[I$]:"fire-auth-compat",[C$]:"fire-rtdb",[P$]:"fire-data-connect",[A$]:"fire-rtdb-compat",[R$]:"fire-fn",[N$]:"fire-fn-compat",[j$]:"fire-iid",[O$]:"fire-iid-compat",[D$]:"fire-fcm",[M$]:"fire-fcm-compat",[L$]:"fire-perf",[V$]:"fire-perf-compat",[F$]:"fire-rc",[U$]:"fire-rc-compat",[$$]:"fire-gcs",[B$]:"fire-gcs-compat",[z$]:"fire-fst",[q$]:"fire-fst-compat",[W$]:"fire-vertex","fire-js":"fire-js",[H$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map,Y$=new Map,d_=new Map;function n1(r,e){try{r.container.addComponent(e)}catch(t){Ko.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Nc(r){const e=r.name;if(d_.has(e))return Ko.debug(`There were multiple attempts to register component ${e}.`),!1;d_.set(e,r);for(const t of gy.values())n1(t,r);for(const t of Y$.values())n1(t,r);return!0}function Ev(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Mr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nl=new Fp("app","Firebase",Q$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=G$;function pN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:u_,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw nl.create("bad-app-name",{appName:String(s)});if(t||(t=iN()),!t)throw nl.create("no-options");const i=gy.get(s);if(i){if(Rc(t,i.options)&&Rc(n,i.config))return i;throw nl.create("duplicate-app",{appName:s})}const o=new n$(s);for(const d of d_.values())o.addComponent(d);const c=new J$(t,n,o);return gy.set(s,c),c}function Yb(r=u_){const e=gy.get(r);if(!e&&r===u_&&iN())return pN();if(!e)throw nl.create("no-app",{appName:r});return e}function Xi(r,e,t){let n=K$[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ko.warn(o.join(" "));return}Nc(new dl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$="firebase-heartbeat-database",Z$=1,lp="firebase-heartbeat-store";let mx=null;function mN(){return mx||(mx=g$(X$,Z$,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(lp)}catch(t){console.warn(t)}}}}).catch(r=>{throw nl.create("idb-open",{originalErrorMessage:r.message})})),mx}async function eB(r){try{const t=(await mN()).transaction(lp),n=await t.objectStore(lp).get(gN(r));return await t.done,n}catch(e){if(e instanceof co)Ko.warn(e.message);else{const t=nl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ko.warn(t.message)}}}async function s1(r,e){try{const n=(await mN()).transaction(lp,"readwrite");await n.objectStore(lp).put(e,gN(r)),await n.done}catch(t){if(t instanceof co)Ko.warn(t.message);else{const n=nl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ko.warn(n.message)}}}function gN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=1024,rB=30;class nB{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iB(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=i1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>rB){const o=oB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ko.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=i1(),{heartbeatsToSend:n,unsentEntries:s}=sB(this._heartbeatsCache.heartbeats),i=my(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ko.warn(t),""}}}function i1(){return new Date().toISOString().substring(0,10)}function sB(r,e=tB){const t=[];let n=r.slice();for(const s of r){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),o1(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),o1(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class iB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dN()?H5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eB(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return s1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return s1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function o1(r){return my(JSON.stringify({version:2,heartbeats:r})).length}function oB(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(r){Nc(new dl("platform-logger",e=>new w$(e),"PRIVATE")),Nc(new dl("heartbeat",e=>new nB(e),"PRIVATE")),Xi(c_,r1,r),Xi(c_,r1,"esm2020"),Xi("fire-js","")}aB("");function yN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lB=yN,vN=new Fp("auth","Firebase",yN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=new Gb("@firebase/auth");function cB(r,...e){yy.logLevel<=Tt.WARN&&yy.warn(`Auth (${Yc}): ${r}`,...e)}function $g(r,...e){yy.logLevel<=Tt.ERROR&&yy.error(`Auth (${Yc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(r,...e){throw Jb(r,...e)}function ls(r,...e){return Jb(r,...e)}function Qb(r,e,t){const n={...lB(),[e]:t};return new Fp("auth","Firebase",n).create(e,{appName:r.name})}function zn(r){return Qb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tv(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&qs(r,"argument-error"),Qb(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jb(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return vN.create(r,...e)}function Pe(r,e,...t){if(!r)throw Jb(e,...t)}function Fo(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $g(e),new Error(e)}function Yo(r,e){r||Fo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function Xb(){return a1()==="http:"||a1()==="https:"}function a1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xb()||z5()||"connection"in navigator)?navigator.onLine:!0}function dB(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yo(t>e,"Short delay should be less than long delay!"),this.isMobile=$5()||W5()}get(){return uB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r,e){Yo(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pB=new Up(3e4,6e4);function Gr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Kr(r,e,t,n,s={}){return xN(r,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=lh({key:r.config.apiKey,...o}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const h={method:e,headers:d,...i};return B5()||(h.referrerPolicy="no-referrer"),r.emulatorConfig&&wl(r.emulatorConfig.host)&&(h.credentials="include"),wN.fetch()(await _N(r,r.config.apiHost,t,c),h)})}async function xN(r,e,t){r._canInitEmulator=!1;const n={...hB,...e};try{const s=new gB(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tf(r,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(r,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Tf(r,"email-already-in-use",o);if(d==="USER_DISABLED")throw Tf(r,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Qb(r,p,h);qs(r,p)}}catch(s){if(s instanceof co)throw s;qs(r,"network-request-failed",{message:String(s)})}}async function ra(r,e,t,n,s={}){const i=await Kr(r,e,t,n,s);return"mfaPendingCredential"in i&&qs(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function _N(r,e,t,n){const s=`${e}${t}?${n}`,i=r,o=i.config.emulator?Zb(r.config,s):`${r.config.apiScheme}://${s}`;return fB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function mB(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ls(this.auth,"network-request-failed")),pB.get())})}}function Tf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=ls(r,e,n);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(r){return r!==void 0&&r.getResponse!==void 0}function c1(r){return r!==void 0&&r.enterprise!==void 0}class bN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(r){return(await Kr(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function EN(r,e){return Kr(r,"GET","/v2/recaptchaConfig",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(r,e){return Kr(r,"POST","/v1/accounts:delete",e)}async function wB(r,e){return Kr(r,"POST","/v1/accounts:update",e)}async function vy(r,e){return Kr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xB(r,e=!1){const t=gt(r),n=await t.getIdToken(e),s=Sv(n);Pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Lf(gx(s.auth_time)),issuedAtTime:Lf(gx(s.iat)),expirationTime:Lf(gx(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gx(r){return Number(r)*1e3}function Sv(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return $g("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(t);return s?JSON.parse(s):($g("Failed to decode base64 JWT payload"),null)}catch(s){return $g("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function u1(r){const e=Sv(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof co&&_B(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function _B({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lf(this.lastLoginAt),this.creationTime=Lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(r){var g;const e=r.auth,t=await r.getIdToken(),n=await jc(r,vy(e,{idToken:t}));Pe(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const i=(g=s.providerUserInfo)!=null&&g.length?TN(s.providerUserInfo):[],o=TB(r.providerData,i),c=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new h_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(r,p)}async function EB(r){const e=gt(r);await up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TB(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function TN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(r,e){const t=await xN(r,{},async()=>{const n=lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,o=await _N(r,s,"/v1/token",`key=${i}`),c=await r._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:n};return r.emulatorConfig&&wl(r.emulatorConfig.host)&&(d.credentials="include"),wN.fetch()(o,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kB(r,e){return Kr(r,"POST","/v2/accounts:revokeToken",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=u1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await SB(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,o=new pd;return n&&(Pe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pd,this.toJSON())}_performRefresh(){return Fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new bB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new h_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await jc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xB(this,e)}reload(){return EB(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await up(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await jc(this,vB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:w,providerData:k,stsTokenManager:_}=t;Pe(g&&_,e,"internal-error");const E=pd.fromJSON(this.name,_);Pe(typeof g=="string",e,"internal-error"),Aa(n,e.name),Aa(s,e.name),Pe(typeof v=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),Aa(i,e.name),Aa(o,e.name),Aa(c,e.name),Aa(d,e.name),Aa(h,e.name),Aa(p,e.name);const C=new pi({uid:g,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:E,createdAt:h,lastLoginAt:p});return k&&Array.isArray(k)&&(C.providerData=k.map(P=>({...P}))),d&&(C._redirectEventId=d),C}static async _fromIdTokenResponse(e,t,n=!1){const s=new pd;s.updateFromServerResponse(t);const i=new pi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await up(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?TN(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new pd;c.updateFromIdToken(n);const d=new pi({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new h_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map;function Uo(r){Yo(r instanceof Function,"Expected a class definition");let e=d1.get(r);return e?(Yo(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,d1.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SN.type="NONE";const h1=SN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(r,e,t){return`firebase:${r}:${e}:${t}`}class md{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Bg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bg("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vy(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new md(Uo(h1),e,n);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Uo(h1);const o=Bg(n,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const v=await vy(e,{idToken:p}).catch(()=>{});if(!v)break;g=await pi._fromGetAccountInfoResponse(e,v,p)}else g=pi._fromJSON(e,p);h!==i&&(c=g),i=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new md(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new md(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RN(e))return"Blackberry";if(NN(e))return"Webos";if(IN(e))return"Safari";if((e.includes("chrome/")||CN(e))&&!e.includes("edge/"))return"Chrome";if(AN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kN(r=Hr()){return/firefox\//i.test(r)}function IN(r=Hr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CN(r=Hr()){return/crios\//i.test(r)}function PN(r=Hr()){return/iemobile/i.test(r)}function AN(r=Hr()){return/android/i.test(r)}function RN(r=Hr()){return/blackberry/i.test(r)}function NN(r=Hr()){return/webos/i.test(r)}function eE(r=Hr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IB(r=Hr()){var e;return eE(r)&&!!((e=window.navigator)!=null&&e.standalone)}function CB(){return q5()&&document.documentMode===10}function jN(r=Hr()){return eE(r)||AN(r)||NN(r)||RN(r)||/windows phone/i.test(r)||PN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(r,e=[]){let t;switch(r){case"Browser":t=f1(Hr());break;case"Worker":t=`${f1(Hr())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(r,e={}){return Kr(r,"GET","/v2/passwordPolicy",Gr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=6;class NB{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p1(this),this.idTokenSubscription=new p1(this),this.beforeStateQueue=new PB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Uo(t)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await md.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vy(this,{idToken:e}),n=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(n=d.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await up(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(zn(this));const t=e?gt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Uo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AB(this),t=new NB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fp("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await kB(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Uo(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await md.create(this,[Uo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ON(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&cB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tn(r){return gt(r)}class p1{constructor(e){this.auth=e,this.observer=null,this.addObserver=J5(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $p={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OB(r){$p=r}function tE(r){return $p.loadJS(r)}function DB(){return $p.recaptchaV2Script}function MB(){return $p.recaptchaEnterpriseScript}function LB(){return $p.gapiScript}function DN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=500,FB=6e4,wg=1e12;class UB{constructor(e){this.auth=e,this.counter=wg,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new zB(e,this.auth.name,t||{})),this.counter++,n}reset(e){var n;const t=e||wg;(n=this._widgets.get(t))==null||n.delete(),this._widgets.delete(t)}getResponse(e){var n;const t=e||wg;return((n=this._widgets.get(t))==null?void 0:n.getResponse())||""}async execute(e){var n;const t=e||wg;return(n=this._widgets.get(t))==null||n.execute(),""}}class $B{constructor(){this.enterprise=new BB}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BB{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zB{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Pe(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=WB(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},FB)},VB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function WB(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<r;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const qB="recaptcha-enterprise",Vf="NO_RECAPTCHA";class MN{constructor(e){this.type=qB,this.auth=tn(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{EN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new bN(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(d=>{c(d)})})}function s(i,o,c){const d=window.grecaptcha;c1(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(Vf)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $B().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(c=>{if(!t&&c1(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=MB();d.length!==0&&(d+=c),tE(d).then(()=>{s(c,i,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function hf(r,e,t,n=!1,s=!1){const i=new MN(r);let o;if(s)o=Vf;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function sl(r,e,t,n,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=r._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await hf(r,e,t,t==="getOobCode");return n(r,c)}else return n(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await hf(r,e,t,t==="getOobCode");return n(r,d)}else return Promise.reject(c)});else if(s==="PHONE_PROVIDER")if((o=r._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await hf(r,e,t);return n(r,c).catch(async d=>{var h;if(((h=r._getRecaptchaConfig())==null?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await hf(r,e,t,!1,!0);return n(r,p)}return Promise.reject(d)})}else{const c=await hf(r,e,t,!1,!0);return n(r,c)}else return Promise.reject(s+" provider is not supported.")}async function HB(r){const e=tn(r),t=await EN(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new bN(t);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new MN(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(r,e){const t=Ev(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Rc(i,e??{}))return s;qs(s,"already-initialized")}return t.initialize({options:e})}function KB(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Uo);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function YB(r,e,t){const n=tn(r);Pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=LN(e),{host:o,port:c}=QB(e),d=c===null?"":`:${c}`,h={url:`${i}//${o}${d}/`},p=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Pe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Pe(Rc(h,n.config.emulator)&&Rc(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,wl(o)?(qb(`${i}//${o}${d}`),Hb("Auth",!0)):JB()}function LN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function QB(r){const e=LN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:m1(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:m1(o)}}}function m1(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function JB(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fo("not implemented")}_getIdTokenResponse(e){return Fo("not implemented")}_linkToIdToken(e,t){return Fo("not implemented")}_getReauthenticationResolver(e){return Fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(r,e){return Kr(r,"POST","/v1/accounts:resetPassword",Gr(r,e))}async function ZB(r,e){return Kr(r,"POST","/v1/accounts:update",e)}async function e8(r,e){return Kr(r,"POST","/v1/accounts:signUp",e)}async function t8(r,e){return Kr(r,"POST","/v1/accounts:update",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(r,e){return ra(r,"POST","/v1/accounts:signInWithPassword",Gr(r,e))}async function Iv(r,e){return Kr(r,"POST","/v1/accounts:sendOobCode",Gr(r,e))}async function n8(r,e){return Iv(r,e)}async function s8(r,e){return Iv(r,e)}async function i8(r,e){return Iv(r,e)}async function o8(r,e){return Iv(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(r,e){return ra(r,"POST","/v1/accounts:signInWithEmailLink",Gr(r,e))}async function l8(r,e){return ra(r,"POST","/v1/accounts:signInWithEmailLink",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends kv{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new dp(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new dp(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,t,"signInWithPassword",r8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a8(e,{email:this._email,oobCode:this._password});default:qs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,n,"signUpPassword",e8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return l8(e,{idToken:t,email:this._email,oobCode:this._password});default:qs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(r,e){return ra(r,"POST","/v1/accounts:signInWithIdp",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="http://localhost";class Qo extends kv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...i}=t;if(!n||!s)return null;const o=new Qo(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return gd(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gd(e,t)}buildRequest(){const e={requestUri:c8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,e){return Kr(r,"POST","/v1/accounts:sendVerificationCode",Gr(r,e))}async function u8(r,e){return ra(r,"POST","/v1/accounts:signInWithPhoneNumber",Gr(r,e))}async function d8(r,e){const t=await ra(r,"POST","/v1/accounts:signInWithPhoneNumber",Gr(r,e));if(t.temporaryProof)throw Tf(r,"account-exists-with-different-credential",t);return t}const h8={USER_NOT_FOUND:"user-not-found"};async function f8(r,e){const t={...e,operation:"REAUTH"};return ra(r,"POST","/v1/accounts:signInWithPhoneNumber",Gr(r,t),h8)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends kv{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ff({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ff({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return u8(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return d8(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return f8(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:i}=e;return!n&&!t&&!s&&!i?null:new Ff({verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m8(r){const e=bf(Ef(r)).link,t=e?bf(Ef(e)).deep_link_id:null,n=bf(Ef(r)).deep_link_id;return(n?bf(Ef(n)).link:null)||n||t||e||r}class Cv{constructor(e){const t=bf(Ef(e)),n=t.apiKey??null,s=t.oobCode??null,i=p8(t.mode??null);Pe(n&&s&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=m8(e);try{return new Cv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.providerId=Qc.PROVIDER_ID}static credential(e,t){return dp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cv.parseLink(t);return Pe(n,"argument-error"),dp._fromEmailAndCode(e,n.code,n.tenantId)}}Qc.PROVIDER_ID="password";Qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zg extends uh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Pe("providerId"in t&&"signInMethod"in t,"argument-error"),Qo._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Pe(e.idToken||e.accessToken,"argument-error"),Qo._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return zg.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return zg.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:c}=e;if(!n&&!s&&!t&&!i||!c)return null;try{return new zg(c)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends uh{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ua.credential(e.oauthAccessToken)}catch{return null}}}Ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qo._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Vo.credential(t,n)}catch{return null}}}Vo.GOOGLE_SIGN_IN_METHOD="google.com";Vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends uh{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $a.credential(e.oauthAccessToken)}catch{return null}}}$a.GITHUB_SIGN_IN_METHOD="github.com";$a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends uh{constructor(){super("twitter.com")}static credential(e,t){return Qo._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ba.credential(t,n)}catch{return null}}}Ba.TWITTER_SIGN_IN_METHOD="twitter.com";Ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(r,e){return ra(r,"POST","/v1/accounts:signUp",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await pi._fromIdTokenResponse(e,n,s),o=y1(n);return new so({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=y1(n);return new so({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function y1(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xne(r){var s;if(Mr(r.app))return Promise.reject(zn(r));const e=tn(r);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new so({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await VN(e,{returnSecureToken:!0}),n=await so._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy extends co{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,wy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new wy(e,t,n,s)}}function FN(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wy._fromErrorAndOperation(r,i,e,n):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ne(r,e){const t=gt(r);await Pv(!0,t,e);const{providerUserInfo:n}=await wB(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=UN(n||[]);return t.providerData=t.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function $N(r,e,t=!1){const n=await jc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return so._forOperation(r,"link",n)}async function Pv(r,e,t){await up(e);const n=UN(e.providerData),s=r===!1?"provider-already-linked":"no-such-provider";Pe(n.has(t)===r,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(r,e,t=!1){const{auth:n}=r;if(Mr(n.app))return Promise.reject(zn(n));const s="reauthenticate";try{const i=await jc(r,FN(n,s,e,r),t);Pe(i.idToken,n,"internal-error");const o=Sv(i.idToken);Pe(o,n,"internal-error");const{sub:c}=o;return Pe(r.uid===c,n,"user-mismatch"),so._forOperation(r,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&qs(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(r,e,t=!1){if(Mr(r.app))return Promise.reject(zn(r));const n="signIn",s=await FN(r,n,e),i=await so._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function Av(r,e){return BN(tn(r),e)}async function y8(r,e){const t=gt(r);return await Pv(!1,t,e.providerId),$N(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8(r,e){return ra(r,"POST","/v1/accounts:signInWithCustomToken",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bne(r,e){if(Mr(r.app))return Promise.reject(zn(r));const t=tn(r),n=await v8(t,{token:e,returnSecureToken:!0}),s=await so._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r,e,t){var n;Pe(((n=t.url)==null?void 0:n.length)>0,r,"invalid-continue-uri"),Pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),Pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,r,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Pe(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Pe(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(r){const e=tn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ene(r,e,t){const n=tn(r),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Rv(n,s,t),await sl(n,s,"getOobCode",s8,"EMAIL_PASSWORD_PROVIDER")}async function Tne(r,e,t){await XB(gt(r),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&rE(r),n})}async function Sne(r,e){await t8(gt(r),{oobCode:e})}async function w8(r,e,t){if(Mr(r.app))return Promise.reject(zn(r));const n=tn(r),o=await sl(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VN,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&rE(r),d}),c=await so._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function x8(r,e,t){return Mr(r.app)?Promise.reject(zn(r)):Av(gt(r),Qc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&rE(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kne(r,e,t){const n=tn(r),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,c){Pe(c.handleCodeInApp,n,"argument-error"),c&&Rv(n,o,c)}i(s,t),await sl(n,s,"getOobCode",i8,"EMAIL_PASSWORD_PROVIDER")}function _8(r,e){const t=Cv.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function b8(r,e,t){if(Mr(r.app))return Promise.reject(zn(r));const n=gt(r),s=Qc.credentialWithLink(e,t||cp());return Pe(s._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Av(n,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(r,e){return Kr(r,"POST","/v1/accounts:createAuthUri",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ine(r,e){const t=Xb()?cp():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:s}=await E8(gt(r),n);return s||[]}async function v1(r,e){const t=gt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()};e&&Rv(t.auth,s,e);const{email:i}=await n8(t.auth,s);i!==r.email&&await r.reload()}async function Cne(r,e,t){const n=gt(r),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await r.getIdToken(),newEmail:e};t&&Rv(n.auth,i,t);const{email:o}=await o8(n.auth,i);o!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(r,e){return Kr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=gt(r),i={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await jc(n,T8(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const c=n.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=n.displayName,c.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function Pne(r,e){const t=gt(r);return Mr(t.auth.app)?Promise.reject(zn(t.auth)):zN(t,e,null)}function Ane(r,e){return zN(gt(r),null,e)}async function zN(r,e,t){const{auth:n}=r,i={idToken:await r.getIdToken(),returnSecureToken:!0};e&&(i.email=e),t&&(i.password=t);const o=await jc(r,ZB(n,i));await r._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(r){var s,i;if(!r)return null;const{providerId:e}=r,t=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},n=r.isNewUser||r.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(r!=null&&r.idToken)){const o=(i=(s=Sv(r.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(o){const c=o!=="anonymous"&&o!=="custom"?o:null;return new yd(n,c)}}if(!e)return null;switch(e){case"facebook.com":return new k8(n,t);case"github.com":return new I8(n,t);case"google.com":return new C8(n,t);case"twitter.com":return new P8(n,t,r.screenName||null);case"custom":case"anonymous":return new yd(n,null);default:return new yd(n,e,t)}}class yd{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class WN extends yd{constructor(e,t,n,s){super(e,t,n),this.username=s}}class k8 extends yd{constructor(e,t){super(e,"facebook.com",t)}}class I8 extends WN{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class C8 extends yd{constructor(e,t){super(e,"google.com",t)}}class P8 extends WN{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Rne(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:S8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(r,e){return gt(r).setPersistence(e)}function A8(r,e,t,n){return gt(r).onIdTokenChanged(e,t,n)}function R8(r,e,t){return gt(r).beforeAuthStateChanged(e,t)}function N8(r){return gt(r).signOut()}function jne(r,e){return tn(r).revokeAccessToken(e)}async function One(r){return gt(r).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r,e){return Kr(r,"POST","/v2/accounts/mfaEnrollment:start",Gr(r,e))}const xy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xy,"1"),this.storage.removeItem(xy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=1e3,O8=10;class HN extends qN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);CB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,O8):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},j8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HN.type="LOCAL";const D8=HN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN extends qN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GN.type="SESSION";const KN=GN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Nv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const c=Array.from(o).map(async h=>h(t.origin,i)),d=await M8(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=jv("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(v.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function V8(r){Or().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function F8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U8(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function $8(){return nE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firebaseLocalStorageDb",B8=1,_y="firebaseLocalStorage",QN="fbase_key";class Bp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ov(r,e){return r.transaction([_y],e?"readwrite":"readonly").objectStore(_y)}function z8(){const r=indexedDB.deleteDatabase(YN);return new Bp(r).toPromise()}function f_(){const r=indexedDB.open(YN,B8);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(_y,{keyPath:QN})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(_y)?e(n):(n.close(),await z8(),e(await f_()))})})}async function _1(r,e,t){const n=Ov(r,!0).put({[QN]:e,value:t});return new Bp(n).toPromise()}async function W8(r,e){const t=Ov(r,!1).get(e),n=await new Bp(t).toPromise();return n===void 0?null:n.value}function b1(r,e){const t=Ov(r,!0).delete(e);return new Bp(t).toPromise()}const q8=800,H8=3;class JN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await f_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>H8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nv._getInstance($8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await F8(),!this.activeServiceWorker)return;this.sender=new L8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await f_();return await _1(e,xy,"1"),await b1(e,xy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_1(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>W8(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>b1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ov(s,!1).getAll();return new Bp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JN.type="LOCAL";const G8=JN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r,e){return Kr(r,"POST","/v2/accounts/mfaSignIn:start",Gr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=DN("rcb"),K8=new Up(3e4,6e4);class Y8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Or().grecaptcha)!=null&&e.render)}load(e,t=""){return Pe(Q8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&l1(Or().grecaptcha)?Promise.resolve(Or().grecaptcha):new Promise((n,s)=>{const i=Or().setTimeout(()=>{s(ls(e,"network-request-failed"))},K8.get());Or()[yx]=()=>{Or().clearTimeout(i),delete Or()[yx];const c=Or().grecaptcha;if(!c||!l1(c)){s(ls(e,"internal-error"));return}const d=c.render;c.render=(h,p)=>{const g=d(h,p);return this.counter++,g},this.hostLanguage=t,n(c)};const o=`${DB()}?${lh({onload:yx,render:"explicit",hl:t})}`;tE(o).catch(()=>{clearTimeout(i),s(ls(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Or().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Q8(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class J8{async load(e){return new UB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="recaptcha",X8={theme:"light",type:"image"};class Dne{constructor(e,t,n={...X8}){this.parameters=n,this.type=Uf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tn(e),this.isInvisible=this.parameters.size==="invisible",Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;Pe(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new J8:new Y8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=Or()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Pe(Xb()&&!nE(),this.auth,"internal-error"),await Z8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await yB(this.auth);Pe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Z8(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ff._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Mne(r,e,t){if(Mr(r.app))return Promise.reject(zn(r));const n=tn(r),s=await ZN(n,e,gt(t));return new XN(s,i=>Av(n,i))}async function Lne(r,e,t){const n=gt(r);await Pv(!1,n,"phone");const s=await ZN(n.auth,e,gt(t));return new XN(s,i=>y8(n,i))}async function ZN(r,e,t){var n;if(!r._getRecaptchaConfig())try{await HB(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){Pe(i.type==="enroll",r,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await sl(r,o,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Vf){Pe((t==null?void 0:t.type)===Uf,p,"argument-error");const v=await vx(p,g,t);return x1(p,v)}return x1(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{Pe(i.type==="signin",r,"internal-error");const o=((n=s.multiFactorHint)==null?void 0:n.uid)||s.multiFactorUid;Pe(o,r,"missing-multi-factor-info");const c={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await sl(r,c,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===Vf){Pe((t==null?void 0:t.type)===Uf,g,"argument-error");const w=await vx(g,v,t);return E1(g,w)}return E1(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await sl(r,i,"sendVerificationCode",async(h,p)=>{if(p.captchaResponse===Vf){Pe((t==null?void 0:t.type)===Uf,h,"argument-error");const g=await vx(h,p,t);return g1(h,g)}return g1(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t==null||t._reset()}}async function vx(r,e,t){Pe(t.type===Uf,r,"argument-error");const n=await t.verify();Pe(typeof n=="string",r,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,c=s.phoneEnrollmentInfo.clientType,d=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:n,captchaResponse:o,clientType:c,recaptchaVersion:d}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,c=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:i,clientType:o,recaptchaVersion:c}}),s}else return Object.assign(s,{recaptchaToken:n}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r,e){return e?Uo(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends kv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e9(r){return BN(r.auth,new sE(r),r.bypassAuthState)}function t9(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),g8(t,new sE(r),r.bypassAuthState)}async function r9(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),$N(t,new sE(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e9;case"linkViaPopup":case"linkViaRedirect":return r9;case"reauthViaPopup":case"reauthViaRedirect":return t9;default:qs(this.auth,"internal-error")}}resolve(e){Yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Up(2e3,1e4);async function Vne(r,e,t){if(Mr(r.app))return Promise.reject(ls(r,"operation-not-supported-in-this-environment"));const n=tn(r);Tv(r,e,ch);const s=zp(n,t);return new Za(n,"signInViaPopup",e,s).executeNotNull()}async function Fne(r,e,t){const n=gt(r);Tv(n.auth,e,ch);const s=zp(n.auth,t);return new Za(n.auth,"linkViaPopup",e,s,n).executeNotNull()}class Za extends ej{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Yo(this.filter.length===1,"Popup operations only handle one event");const e=jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n9.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="pendingRedirect",Wg=new Map;class i9 extends ej{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Wg.get(this.auth._key());if(!e){try{const n=await o9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Wg.set(this.auth._key(),e)}return this.bypassAuthState||Wg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o9(r,e){const t=nj(e),n=rj(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}async function tj(r,e){return rj(r)._set(nj(e),"true")}function a9(r,e){Wg.set(r._key(),e)}function rj(r){return Uo(r._redirectPersistence)}function nj(r){return Bg(s9,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Une(r,e,t){return l9(r,e,t)}async function l9(r,e,t){if(Mr(r.app))return Promise.reject(zn(r));const n=tn(r);Tv(r,e,ch),await n._initializationPromise;const s=zp(n,t);return await tj(s,n),s._openRedirect(n,e,"signInViaRedirect")}function $ne(r,e,t){return c9(r,e,t)}async function c9(r,e,t){const n=gt(r);Tv(n.auth,e,ch),await n.auth._initializationPromise;const s=zp(n.auth,t);await Pv(!1,n,e.providerId),await tj(s,n.auth);const i=await u9(n);return s._openRedirect(n.auth,e,"linkViaRedirect",i)}async function Bne(r,e){return await tn(r)._initializationPromise,sj(r,e,!1)}async function sj(r,e,t=!1){if(Mr(r.app))return Promise.reject(zn(r));const n=tn(r),s=zp(n,e),o=await new i9(n,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}async function u9(r){const e=jv(`${r.uid}:::`);return r._redirectEventId=e,await r.auth._setRedirectUser(r),await r.auth._persistUserIfCurrent(r),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=10*60*1e3;class h9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ij(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(ls(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d9&&this.cachedEventUids.clear(),this.cachedEventUids.has(T1(e))}saveEventToCache(e){this.cachedEventUids.add(T1(e)),this.lastProcessedEventTime=Date.now()}}function T1(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ij({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f9(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ij(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(r,e={}){return Kr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g9=/^https?/;async function y9(r){if(r.config.emulator)return;const{authorizedDomains:e}=await p9(r);for(const t of e)try{if(v9(t))return}catch{}qs(r,"unauthorized-domain")}function v9(r){const e=cp(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!g9.test(t))return!1;if(m9.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=new Up(3e4,6e4);function S1(){const r=Or().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function x9(r){return new Promise((e,t)=>{var s,i,o;function n(){S1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S1(),t(ls(r,"network-request-failed"))},timeout:w9.get()})}if((i=(s=Or().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Or().gapi)!=null&&o.load)n();else{const c=DN("iframefcb");return Or()[c]=()=>{gapi.load?n():t(ls(r,"network-request-failed"))},tE(`${LB()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw qg=null,e})}let qg=null;function _9(r){return qg=qg||x9(r),qg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=new Up(5e3,15e3),E9="__/auth/iframe",T9="emulator/auth/iframe",S9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I9(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zb(e,T9):`https://${r.config.authDomain}/${E9}`,n={apiKey:e.apiKey,appName:r.name,v:Yc},s=k9.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${lh(n).slice(1)}`}async function C9(r){const e=await _9(r),t=Or().gapi;return Pe(t,r,"internal-error"),e.open({where:document.body,url:I9(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S9,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=ls(r,"network-request-failed"),c=Or().setTimeout(()=>{i(o)},b9.get());function d(){Or().clearTimeout(c),s(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A9=500,R9=600,N9="_blank",j9="http://localhost";class k1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O9(r,e,t,n=A9,s=R9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d={...P9,width:n.toString(),height:s.toString(),top:i,left:o},h=Hr().toLowerCase();t&&(c=CN(h)?N9:t),kN(h)&&(e=e||j9,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[w,k])=>`${v}${w}=${k},`,"");if(IB(h)&&c!=="_self")return D9(e||"",c),new k1(null);const g=window.open(e||"",c,p);Pe(g,r,"popup-blocked");try{g.focus()}catch{}return new k1(g)}function D9(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="__/auth/handler",L9="emulator/auth/handler",V9=encodeURIComponent("fac");async function I1(r,e,t,n,s,i){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Yc,eventId:s};if(e instanceof ch){e.setDefaultLanguage(r.languageCode),o.providerId=e.providerId||"",Q5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof uh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}r.tenantId&&(o.tid=r.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await r._getAppCheckToken(),h=d?`#${V9}=${encodeURIComponent(d)}`:"";return`${F9(r)}?${lh(c).slice(1)}${h}`}function F9({config:r}){return r.emulator?Zb(r,L9):`https://${r.authDomain}/${M9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="webStorageSupport";class U9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KN,this._completeRedirectFn=sj,this._overrideRedirectResult=a9}async _openPopup(e,t,n,s){var o;Yo((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await I1(e,t,n,cp(),s);return O9(e,i,jv())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await I1(e,t,n,cp(),s);return V8(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Yo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await C9(e),n=new h9(e);return t.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wx,{type:wx},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[wx];i!==void 0&&t(!!i),qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jN()||IN()||eE()}}const $9=U9;var C1="@firebase/auth",P1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W9(r){Nc(new dl("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ON(r)},h=new jB(n,s,i,d);return KB(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nc(new dl("auth-internal",e=>{const t=tn(e.getProvider("auth").getImmediate());return(n=>new B9(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(C1,P1,z9(r)),Xi(C1,P1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=5*60,H9=oN("authIdTokenMaxAge")||q9;let A1=null;const G9=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>H9)return;const s=t==null?void 0:t.token;A1!==s&&(A1=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K9(r=Yb()){const e=Ev(r,"auth");if(e.isInitialized())return e.getImmediate();const t=GB(r,{popupRedirectResolver:$9,persistence:[G8,D8,KN]}),n=oN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=G9(i.toString());R8(t,o,()=>o(t.currentUser)),A8(t,c=>o(c))}}const s=nN("auth");return s&&YB(t,`http://${s}`),t}function Y9(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}OB({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=ls("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",Y9().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W9("Browser");var Q9=r=>{switch(r){case"success":return Z9;case"info":return tz;case"warning":return ez;case"error":return rz;default:return null}},J9=Array(12).fill(0),X9=({visible:r,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},G.createElement("div",{className:"sonner-spinner"},J9.map((t,n)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Z9=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ez=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tz=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rz=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),nz=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),sz=()=>{let[r,e]=G.useState(document.hidden);return G.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},p_=1,iz=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:p_++,o=this.toasts.find(d=>d.id===i),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...e,id:i,title:n}),{...d,...e,id:i,dismissible:c,title:n}):d):this.addToast({title:n,...s,dismissible:c,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),i=n!==void 0,o,c=s.then(async h=>{if(o=["resolve",h],G.isValidElement(h))i=!1,this.create({id:n,type:"default",message:h});else if(az(h)&&!h.ok){i=!1;let p=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description;this.create({id:n,type:"error",message:p,description:g})}else if(t.success!==void 0){i=!1;let p=typeof t.success=="function"?await t.success(h):t.success,g=typeof t.description=="function"?await t.description(h):t.description;this.create({id:n,type:"success",message:p,description:g})}}).catch(async h=>{if(o=["reject",h],t.error!==void 0){i=!1;let p=typeof t.error=="function"?await t.error(h):t.error,g=typeof t.description=="function"?await t.description(h):t.description;this.create({id:n,type:"error",message:p,description:g})}}).finally(()=>{var h;i&&(this.dismiss(n),n=void 0),(h=t.finally)==null||h.call(t)}),d=()=>new Promise((h,p)=>c.then(()=>o[0]==="reject"?p(o[1]):h(o[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||p_++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},rs=new iz,oz=(r,e)=>{let t=(e==null?void 0:e.id)||p_++;return rs.addToast({title:r,...e,id:t}),t},az=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",lz=oz,cz=()=>rs.toasts,uz=()=>rs.getActiveToasts(),ue=Object.assign(lz,{success:rs.success,info:rs.info,warning:rs.warning,error:rs.error,custom:rs.custom,message:rs.message,promise:rs.promise,dismiss:rs.dismiss,loading:rs.loading},{getHistory:cz,getToasts:uz});function dz(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}dz(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xg(r){return r.label!==void 0}var hz=3,fz="32px",pz="16px",R1=4e3,mz=356,gz=14,yz=20,vz=200;function si(...r){return r.filter(Boolean).join(" ")}function wz(r){let[e,t]=r.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}var xz=r=>{var e,t,n,s,i,o,c,d,h,p,g;let{invert:v,toast:w,unstyled:k,interacting:_,setHeights:E,visibleToasts:C,heights:P,index:j,toasts:M,expanded:$,removeToast:B,defaultRichColors:A,closeButton:R,style:D,cancelButtonStyle:V,actionButtonStyle:U,className:L="",descriptionClassName:N="",duration:Y,position:ae,gap:de,loadingIcon:he,expandByDefault:X,classNames:J,icons:K,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:Z}=r,[Se,ge]=G.useState(null),[Me,qe]=G.useState(null),[pe,je]=G.useState(!1),[Ve,Qe]=G.useState(!1),[tt,at]=G.useState(!1),[Pt,Zt]=G.useState(!1),[pn,kr]=G.useState(!1),[Ir,On]=G.useState(0),[It,er]=G.useState(0),Cr=G.useRef(w.duration||Y||R1),q=G.useRef(null),ne=G.useRef(null),ce=j===0,Ce=j+1<=C,_e=w.type,we=w.dismissible!==!1,Ne=w.className||"",yt=w.descriptionClassName||"",At=G.useMemo(()=>P.findIndex(Xe=>Xe.toastId===w.id)||0,[P,w.id]),Kt=G.useMemo(()=>{var Xe;return(Xe=w.closeButton)!=null?Xe:R},[w.closeButton,R]),fo=G.useMemo(()=>w.duration||Y||R1,[w.duration,Y]),mn=G.useRef(0),rn=G.useRef(0),wi=G.useRef(0),_r=G.useRef(null),[xi,us]=ae.split("-"),po=G.useMemo(()=>P.reduce((Xe,Rt,Ut)=>Ut>=At?Xe:Xe+Rt.height,0),[P,At]),Cs=sz(),Ys=w.invert||v,Qt=_e==="loading";rn.current=G.useMemo(()=>At*de+po,[At,po]),G.useEffect(()=>{Cr.current=fo},[fo]),G.useEffect(()=>{je(!0)},[]),G.useEffect(()=>{let Xe=ne.current;if(Xe){let Rt=Xe.getBoundingClientRect().height;return er(Rt),E(Ut=>[{toastId:w.id,height:Rt,position:w.position},...Ut]),()=>E(Ut=>Ut.filter(fr=>fr.toastId!==w.id))}},[E,w.id]),G.useLayoutEffect(()=>{if(!pe)return;let Xe=ne.current,Rt=Xe.style.height;Xe.style.height="auto";let Ut=Xe.getBoundingClientRect().height;Xe.style.height=Rt,er(Ut),E(fr=>fr.find(gn=>gn.toastId===w.id)?fr.map(gn=>gn.toastId===w.id?{...gn,height:Ut}:gn):[{toastId:w.id,height:Ut,position:w.position},...fr])},[pe,w.title,w.description,E,w.id]);let Kn=G.useCallback(()=>{Qe(!0),On(rn.current),E(Xe=>Xe.filter(Rt=>Rt.toastId!==w.id)),setTimeout(()=>{B(w)},vz)},[w,B,E,rn]);G.useEffect(()=>{if(w.promise&&_e==="loading"||w.duration===1/0||w.type==="loading")return;let Xe;return $||_||Z&&Cs?(()=>{if(wi.current<mn.current){let Rt=new Date().getTime()-mn.current;Cr.current=Cr.current-Rt}wi.current=new Date().getTime()})():Cr.current!==1/0&&(mn.current=new Date().getTime(),Xe=setTimeout(()=>{var Rt;(Rt=w.onAutoClose)==null||Rt.call(w,w),Kn()},Cr.current)),()=>clearTimeout(Xe)},[$,_,w,_e,Z,Cs,Kn]),G.useEffect(()=>{w.delete&&Kn()},[Kn,w.delete]);function _i(){var Xe,Rt,Ut;return K!=null&&K.loading?G.createElement("div",{className:si(J==null?void 0:J.loader,(Xe=w==null?void 0:w.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":_e==="loading"},K.loading):he?G.createElement("div",{className:si(J==null?void 0:J.loader,(Rt=w==null?void 0:w.classNames)==null?void 0:Rt.loader,"sonner-loader"),"data-visible":_e==="loading"},he):G.createElement(X9,{className:si(J==null?void 0:J.loader,(Ut=w==null?void 0:w.classNames)==null?void 0:Ut.loader),visible:_e==="loading"})}return G.createElement("li",{tabIndex:0,ref:ne,className:si(L,Ne,J==null?void 0:J.toast,(e=w==null?void 0:w.classNames)==null?void 0:e.toast,J==null?void 0:J.default,J==null?void 0:J[_e],(t=w==null?void 0:w.classNames)==null?void 0:t[_e]),"data-sonner-toast":"","data-rich-colors":(n=w.richColors)!=null?n:A,"data-styled":!(w.jsx||w.unstyled||k),"data-mounted":pe,"data-promise":!!w.promise,"data-swiped":pn,"data-removed":Ve,"data-visible":Ce,"data-y-position":xi,"data-x-position":us,"data-index":j,"data-front":ce,"data-swiping":tt,"data-dismissible":we,"data-type":_e,"data-invert":Ys,"data-swipe-out":Pt,"data-swipe-direction":Me,"data-expanded":!!($||X&&pe),style:{"--index":j,"--toasts-before":j,"--z-index":M.length-j,"--offset":`${Ve?Ir:rn.current}px`,"--initial-height":X?"auto":`${It}px`,...D,...w.style},onDragEnd:()=>{at(!1),ge(null),_r.current=null},onPointerDown:Xe=>{Qt||!we||(q.current=new Date,On(rn.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(at(!0),_r.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Rt,Ut,fr;if(Pt||!we)return;_r.current=null;let gn=Number(((Xe=ne.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yn=Number(((Rt=ne.current)==null?void 0:Rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vn=new Date().getTime()-((Ut=q.current)==null?void 0:Ut.getTime()),Pr=Se==="x"?gn:yn,ds=Math.abs(Pr)/vn;if(Math.abs(Pr)>=yz||ds>.11){On(rn.current),(fr=w.onDismiss)==null||fr.call(w,w),qe(Se==="x"?gn>0?"right":"left":yn>0?"down":"up"),Kn(),Zt(!0),kr(!1);return}at(!1),ge(null)},onPointerMove:Xe=>{var Rt,Ut,fr,gn;if(!_r.current||!we||((Rt=window.getSelection())==null?void 0:Rt.toString().length)>0)return;let yn=Xe.clientY-_r.current.y,vn=Xe.clientX-_r.current.x,Pr=(Ut=r.swipeDirections)!=null?Ut:wz(ae);!Se&&(Math.abs(vn)>1||Math.abs(yn)>1)&&ge(Math.abs(vn)>Math.abs(yn)?"x":"y");let ds={x:0,y:0};Se==="y"?(Pr.includes("top")||Pr.includes("bottom"))&&(Pr.includes("top")&&yn<0||Pr.includes("bottom")&&yn>0)&&(ds.y=yn):Se==="x"&&(Pr.includes("left")||Pr.includes("right"))&&(Pr.includes("left")&&vn<0||Pr.includes("right")&&vn>0)&&(ds.x=vn),(Math.abs(ds.x)>0||Math.abs(ds.y)>0)&&kr(!0),(fr=ne.current)==null||fr.style.setProperty("--swipe-amount-x",`${ds.x}px`),(gn=ne.current)==null||gn.style.setProperty("--swipe-amount-y",`${ds.y}px`)}},Kt&&!w.jsx?G.createElement("button",{"aria-label":W,"data-disabled":Qt,"data-close-button":!0,onClick:Qt||!we?()=>{}:()=>{var Xe;Kn(),(Xe=w.onDismiss)==null||Xe.call(w,w)},className:si(J==null?void 0:J.closeButton,(s=w==null?void 0:w.classNames)==null?void 0:s.closeButton)},(i=K==null?void 0:K.close)!=null?i:nz):null,w.jsx||b.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:G.createElement(G.Fragment,null,_e||w.icon||w.promise?G.createElement("div",{"data-icon":"",className:si(J==null?void 0:J.icon,(o=w==null?void 0:w.classNames)==null?void 0:o.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||_i():null,w.type!=="loading"?w.icon||(K==null?void 0:K[_e])||Q9(_e):null):null,G.createElement("div",{"data-content":"",className:si(J==null?void 0:J.content,(c=w==null?void 0:w.classNames)==null?void 0:c.content)},G.createElement("div",{"data-title":"",className:si(J==null?void 0:J.title,(d=w==null?void 0:w.classNames)==null?void 0:d.title)},typeof w.title=="function"?w.title():w.title),w.description?G.createElement("div",{"data-description":"",className:si(N,yt,J==null?void 0:J.description,(h=w==null?void 0:w.classNames)==null?void 0:h.description)},typeof w.description=="function"?w.description():w.description):null),b.isValidElement(w.cancel)?w.cancel:w.cancel&&xg(w.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||V,onClick:Xe=>{var Rt,Ut;xg(w.cancel)&&we&&((Ut=(Rt=w.cancel).onClick)==null||Ut.call(Rt,Xe),Kn())},className:si(J==null?void 0:J.cancelButton,(p=w==null?void 0:w.classNames)==null?void 0:p.cancelButton)},w.cancel.label):null,b.isValidElement(w.action)?w.action:w.action&&xg(w.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||U,onClick:Xe=>{var Rt,Ut;xg(w.action)&&((Ut=(Rt=w.action).onClick)==null||Ut.call(Rt,Xe),!Xe.defaultPrevented&&Kn())},className:si(J==null?void 0:J.actionButton,(g=w==null?void 0:w.classNames)==null?void 0:g.actionButton)},w.action.label):null))};function N1(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function _z(r,e){let t={};return[r,e].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",c=i?pz:fz;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${o}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(h=>{n[h]===void 0?t[`${o}-${h}`]=c:t[`${o}-${h}`]=typeof n[h]=="number"?`${n[h]}px`:n[h]}):d(c)}),t}var bz=b.forwardRef(function(r,e){let{invert:t,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:c,offset:d,mobileOffset:h,theme:p="light",richColors:g,duration:v,style:w,visibleToasts:k=hz,toastOptions:_,dir:E=N1(),gap:C=gz,loadingIcon:P,icons:j,containerAriaLabel:M="Notifications",pauseWhenPageIsHidden:$}=r,[B,A]=G.useState([]),R=G.useMemo(()=>Array.from(new Set([n].concat(B.filter(Z=>Z.position).map(Z=>Z.position)))),[B,n]),[D,V]=G.useState([]),[U,L]=G.useState(!1),[N,Y]=G.useState(!1),[ae,de]=G.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),he=G.useRef(null),X=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=G.useRef(null),K=G.useRef(!1),W=G.useCallback(Z=>{A(Se=>{var ge;return(ge=Se.find(Me=>Me.id===Z.id))!=null&&ge.delete||rs.dismiss(Z.id),Se.filter(({id:Me})=>Me!==Z.id)})},[]);return G.useEffect(()=>rs.subscribe(Z=>{if(Z.dismiss){A(Se=>Se.map(ge=>ge.id===Z.id?{...ge,delete:!0}:ge));return}setTimeout(()=>{RA.flushSync(()=>{A(Se=>{let ge=Se.findIndex(Me=>Me.id===Z.id);return ge!==-1?[...Se.slice(0,ge),{...Se[ge],...Z},...Se.slice(ge+1)]:[Z,...Se]})})})}),[]),G.useEffect(()=>{if(p!=="system"){de(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:Se})=>{de(Se?"dark":"light")})}catch{Z.addListener(({matches:ge})=>{try{de(ge?"dark":"light")}catch(Me){console.error(Me)}})}},[p]),G.useEffect(()=>{B.length<=1&&L(!1)},[B]),G.useEffect(()=>{let Z=Se=>{var ge,Me;s.every(qe=>Se[qe]||Se.code===qe)&&(L(!0),(ge=he.current)==null||ge.focus()),Se.code==="Escape"&&(document.activeElement===he.current||(Me=he.current)!=null&&Me.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[s]),G.useEffect(()=>{if(he.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,K.current=!1)}},[he.current]),G.createElement("section",{ref:e,"aria-label":`${M} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((Z,Se)=>{var ge;let[Me,qe]=Z.split("-");return B.length?G.createElement("ol",{key:Z,dir:E==="auto"?N1():E,tabIndex:-1,ref:he,className:c,"data-sonner-toaster":!0,"data-theme":ae,"data-y-position":Me,"data-lifted":U&&B.length>1&&!i,"data-x-position":qe,style:{"--front-toast-height":`${((ge=D[0])==null?void 0:ge.height)||0}px`,"--width":`${mz}px`,"--gap":`${C}px`,...w,..._z(d,h)},onBlur:pe=>{K.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(K.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||K.current||(K.current=!0,J.current=pe.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{N||L(!1)},onDragEnd:()=>L(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||Y(!0)},onPointerUp:()=>Y(!1)},B.filter(pe=>!pe.position&&Se===0||pe.position===Z).map((pe,je)=>{var Ve,Qe;return G.createElement(xz,{key:pe.id,icons:j,index:je,toast:pe,defaultRichColors:g,duration:(Ve=_==null?void 0:_.duration)!=null?Ve:v,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:t,visibleToasts:k,closeButton:(Qe=_==null?void 0:_.closeButton)!=null?Qe:o,interacting:N,position:Z,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:W,toasts:B.filter(tt=>tt.position==pe.position),heights:D.filter(tt=>tt.position==pe.position),setHeights:V,expandByDefault:i,gap:C,loadingIcon:P,expanded:U,pauseWhenPageIsHidden:$,swipeDirections:r.swipeDirections})})):null}))});const Ez="modulepreload",Tz=function(r){return"/"+r},j1={},dh=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let o=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(t.map(h=>{if(h=Tz(h),h in j1)return;j1[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":Ez,p||(v.as="script"),v.crossOrigin="",v.href=h,d&&v.setAttribute("nonce",d),document.head.appendChild(v),p)return new Promise((w,k)=>{v.addEventListener("load",w),v.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Dd;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(Dd||(Dd={}));class xx extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Sz=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},kz=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},n=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:Sz(r),i=()=>s()!=="web",o=g=>{const v=h.get(g);return!!(v!=null&&v.platforms.has(s())||c(g))},c=g=>{var v;return(v=t.PluginHeaders)===null||v===void 0?void 0:v.find(w=>w.name===g)},d=g=>r.console.error(g),h=new Map,p=(g,v={})=>{const w=h.get(g);if(w)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),w.proxy;const k=s(),_=c(g);let E;const C=async()=>(!E&&k in v?E=typeof v[k]=="function"?E=await v[k]():E=v[k]:e!==null&&!E&&"web"in v&&(E=typeof v.web=="function"?E=await v.web():E=v.web),E),P=(R,D)=>{var V,U;if(_){const L=_==null?void 0:_.methods.find(N=>D===N.name);if(L)return L.rtype==="promise"?N=>t.nativePromise(g,D.toString(),N):(N,Y)=>t.nativeCallback(g,D.toString(),N,Y);if(R)return(V=R[D])===null||V===void 0?void 0:V.bind(R)}else{if(R)return(U=R[D])===null||U===void 0?void 0:U.bind(R);throw new xx(`"${g}" plugin is not implemented on ${k}`,Dd.Unimplemented)}},j=R=>{let D;const V=(...U)=>{const L=C().then(N=>{const Y=P(N,R);if(Y){const ae=Y(...U);return D=ae==null?void 0:ae.remove,ae}else throw new xx(`"${g}.${R}()" is not implemented on ${k}`,Dd.Unimplemented)});return R==="addListener"&&(L.remove=async()=>D()),L};return V.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(V,"name",{value:R,writable:!1,configurable:!1}),V},M=j("addListener"),$=j("removeListener"),B=(R,D)=>{const V=M({eventName:R},D),U=async()=>{const N=await V;$({eventName:R,callbackId:N},D)},L=new Promise(N=>V.then(()=>N({remove:U})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},L},A=new Proxy({},{get(R,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _?B:M;case"removeListener":return $;default:return j(D)}}});return n[g]=A,h.set(g,{name:g,proxy:A,platforms:new Set([...Object.keys(v),..._?[k]:[]])}),A};return t.convertFileSrc||(t.convertFileSrc=g=>g),t.getPlatform=s,t.handleError=d,t.isNativePlatform=i,t.isPluginAvailable=o,t.registerPlugin=p,t.Exception=xx,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Iz=r=>r.Capacitor=kz(r),m_=Iz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),iE=m_.registerPlugin;class oj{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const s=this.listeners[e];if(!s){if(n){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new m_.Exception(e,Dd.Unimplemented)}unavailable(e="not available"){return new m_.Exception(e,Dd.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const s=n.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const O1=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D1=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Cz extends oj{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[s,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=D1(s).trim(),i=D1(i).trim(),t[s]=i}),t}async setCookie(e){try{const t=O1(e.key),n=O1(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${s}; path=${i}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}iE("CapacitorCookies",{web:()=>new Cz});const Pz=async r=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const s=n.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},n.onerror=s=>t(s),n.readAsDataURL(r)}),Az=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=r[e[o]],s),{})},Rz=(r,e=!0)=>r?Object.entries(r).reduce((n,s)=>{const[i,o]=s;let c,d;return Array.isArray(o)?(d="",o.forEach(h=>{c=e?encodeURIComponent(h):h,d+=`${i}=${c}&`}),d.slice(0,-1)):(c=e?encodeURIComponent(o):o,d=`${i}=${c}`),`${n}&${d}`},"").substr(1):null,Nz=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),s=Az(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,c]of Object.entries(r.data||{}))i.set(o,c);t.body=i.toString()}else if(s.includes("multipart/form-data")||r.data instanceof FormData){const i=new FormData;if(r.data instanceof FormData)r.data.forEach((c,d)=>{i.append(d,c)});else for(const c of Object.keys(r.data))i.append(c,r.data[c]);t.body=i;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(s.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class jz extends oj{async request(e){const t=Nz(e,e.webFetchExtra),n=Rz(e.params,e.shouldEncodeUrlParams),s=n?`${e.url}?${n}`:e.url,i=await fetch(s,t),o=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?e:{};o.includes("application/json")&&(c="json");let d,h;switch(c){case"arraybuffer":case"blob":h=await i.blob(),d=await Pz(h);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const p={};return i.headers.forEach((g,v)=>{p[v]=g}),{data:d,headers:p,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}iE("CapacitorHttp",{web:()=>new jz});var M1;(function(r){r.IndexedDbLocal="INDEXED_DB_LOCAL",r.InMemory="IN_MEMORY",r.BrowserLocal="BROWSER_LOCAL",r.BrowserSession="BROWSER_SESSION"})(M1||(M1={}));var L1;(function(r){r.APPLE="apple.com",r.FACEBOOK="facebook.com",r.GAME_CENTER="gc.apple.com",r.GITHUB="github.com",r.GOOGLE="google.com",r.MICROSOFT="microsoft.com",r.PLAY_GAMES="playgames.google.com",r.TWITTER="twitter.com",r.YAHOO="yahoo.com",r.PASSWORD="password",r.PHONE="phone"})(L1||(L1={}));const Oz=iE("FirebaseAuthentication",{web:()=>dh(()=>import("./web-Dinc6a_N.js"),[]).then(r=>new r.FirebaseAuthenticationWeb)});var Dz="firebase",Mz="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(Dz,Mz,"app");var V1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var il,aj;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function D(){}D.prototype=R.prototype,A.F=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(V,U,L){for(var N=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)N[Y-2]=arguments[Y];return R.prototype[U].apply(V,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,R,D){D||(D=0);const V=Array(16);if(typeof R=="string")for(var U=0;U<16;++U)V[U]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(U=0;U<16;++U)V[U]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],U=A.g[2];let L=A.g[3],N;N=R+(L^D&(U^L))+V[0]+3614090360&4294967295,R=D+(N<<7&4294967295|N>>>25),N=L+(U^R&(D^U))+V[1]+3905402710&4294967295,L=R+(N<<12&4294967295|N>>>20),N=U+(D^L&(R^D))+V[2]+606105819&4294967295,U=L+(N<<17&4294967295|N>>>15),N=D+(R^U&(L^R))+V[3]+3250441966&4294967295,D=U+(N<<22&4294967295|N>>>10),N=R+(L^D&(U^L))+V[4]+4118548399&4294967295,R=D+(N<<7&4294967295|N>>>25),N=L+(U^R&(D^U))+V[5]+1200080426&4294967295,L=R+(N<<12&4294967295|N>>>20),N=U+(D^L&(R^D))+V[6]+2821735955&4294967295,U=L+(N<<17&4294967295|N>>>15),N=D+(R^U&(L^R))+V[7]+4249261313&4294967295,D=U+(N<<22&4294967295|N>>>10),N=R+(L^D&(U^L))+V[8]+1770035416&4294967295,R=D+(N<<7&4294967295|N>>>25),N=L+(U^R&(D^U))+V[9]+2336552879&4294967295,L=R+(N<<12&4294967295|N>>>20),N=U+(D^L&(R^D))+V[10]+4294925233&4294967295,U=L+(N<<17&4294967295|N>>>15),N=D+(R^U&(L^R))+V[11]+2304563134&4294967295,D=U+(N<<22&4294967295|N>>>10),N=R+(L^D&(U^L))+V[12]+1804603682&4294967295,R=D+(N<<7&4294967295|N>>>25),N=L+(U^R&(D^U))+V[13]+4254626195&4294967295,L=R+(N<<12&4294967295|N>>>20),N=U+(D^L&(R^D))+V[14]+2792965006&4294967295,U=L+(N<<17&4294967295|N>>>15),N=D+(R^U&(L^R))+V[15]+1236535329&4294967295,D=U+(N<<22&4294967295|N>>>10),N=R+(U^L&(D^U))+V[1]+4129170786&4294967295,R=D+(N<<5&4294967295|N>>>27),N=L+(D^U&(R^D))+V[6]+3225465664&4294967295,L=R+(N<<9&4294967295|N>>>23),N=U+(R^D&(L^R))+V[11]+643717713&4294967295,U=L+(N<<14&4294967295|N>>>18),N=D+(L^R&(U^L))+V[0]+3921069994&4294967295,D=U+(N<<20&4294967295|N>>>12),N=R+(U^L&(D^U))+V[5]+3593408605&4294967295,R=D+(N<<5&4294967295|N>>>27),N=L+(D^U&(R^D))+V[10]+38016083&4294967295,L=R+(N<<9&4294967295|N>>>23),N=U+(R^D&(L^R))+V[15]+3634488961&4294967295,U=L+(N<<14&4294967295|N>>>18),N=D+(L^R&(U^L))+V[4]+3889429448&4294967295,D=U+(N<<20&4294967295|N>>>12),N=R+(U^L&(D^U))+V[9]+568446438&4294967295,R=D+(N<<5&4294967295|N>>>27),N=L+(D^U&(R^D))+V[14]+3275163606&4294967295,L=R+(N<<9&4294967295|N>>>23),N=U+(R^D&(L^R))+V[3]+4107603335&4294967295,U=L+(N<<14&4294967295|N>>>18),N=D+(L^R&(U^L))+V[8]+1163531501&4294967295,D=U+(N<<20&4294967295|N>>>12),N=R+(U^L&(D^U))+V[13]+2850285829&4294967295,R=D+(N<<5&4294967295|N>>>27),N=L+(D^U&(R^D))+V[2]+4243563512&4294967295,L=R+(N<<9&4294967295|N>>>23),N=U+(R^D&(L^R))+V[7]+1735328473&4294967295,U=L+(N<<14&4294967295|N>>>18),N=D+(L^R&(U^L))+V[12]+2368359562&4294967295,D=U+(N<<20&4294967295|N>>>12),N=R+(D^U^L)+V[5]+4294588738&4294967295,R=D+(N<<4&4294967295|N>>>28),N=L+(R^D^U)+V[8]+2272392833&4294967295,L=R+(N<<11&4294967295|N>>>21),N=U+(L^R^D)+V[11]+1839030562&4294967295,U=L+(N<<16&4294967295|N>>>16),N=D+(U^L^R)+V[14]+4259657740&4294967295,D=U+(N<<23&4294967295|N>>>9),N=R+(D^U^L)+V[1]+2763975236&4294967295,R=D+(N<<4&4294967295|N>>>28),N=L+(R^D^U)+V[4]+1272893353&4294967295,L=R+(N<<11&4294967295|N>>>21),N=U+(L^R^D)+V[7]+4139469664&4294967295,U=L+(N<<16&4294967295|N>>>16),N=D+(U^L^R)+V[10]+3200236656&4294967295,D=U+(N<<23&4294967295|N>>>9),N=R+(D^U^L)+V[13]+681279174&4294967295,R=D+(N<<4&4294967295|N>>>28),N=L+(R^D^U)+V[0]+3936430074&4294967295,L=R+(N<<11&4294967295|N>>>21),N=U+(L^R^D)+V[3]+3572445317&4294967295,U=L+(N<<16&4294967295|N>>>16),N=D+(U^L^R)+V[6]+76029189&4294967295,D=U+(N<<23&4294967295|N>>>9),N=R+(D^U^L)+V[9]+3654602809&4294967295,R=D+(N<<4&4294967295|N>>>28),N=L+(R^D^U)+V[12]+3873151461&4294967295,L=R+(N<<11&4294967295|N>>>21),N=U+(L^R^D)+V[15]+530742520&4294967295,U=L+(N<<16&4294967295|N>>>16),N=D+(U^L^R)+V[2]+3299628645&4294967295,D=U+(N<<23&4294967295|N>>>9),N=R+(U^(D|~L))+V[0]+4096336452&4294967295,R=D+(N<<6&4294967295|N>>>26),N=L+(D^(R|~U))+V[7]+1126891415&4294967295,L=R+(N<<10&4294967295|N>>>22),N=U+(R^(L|~D))+V[14]+2878612391&4294967295,U=L+(N<<15&4294967295|N>>>17),N=D+(L^(U|~R))+V[5]+4237533241&4294967295,D=U+(N<<21&4294967295|N>>>11),N=R+(U^(D|~L))+V[12]+1700485571&4294967295,R=D+(N<<6&4294967295|N>>>26),N=L+(D^(R|~U))+V[3]+2399980690&4294967295,L=R+(N<<10&4294967295|N>>>22),N=U+(R^(L|~D))+V[10]+4293915773&4294967295,U=L+(N<<15&4294967295|N>>>17),N=D+(L^(U|~R))+V[1]+2240044497&4294967295,D=U+(N<<21&4294967295|N>>>11),N=R+(U^(D|~L))+V[8]+1873313359&4294967295,R=D+(N<<6&4294967295|N>>>26),N=L+(D^(R|~U))+V[15]+4264355552&4294967295,L=R+(N<<10&4294967295|N>>>22),N=U+(R^(L|~D))+V[6]+2734768916&4294967295,U=L+(N<<15&4294967295|N>>>17),N=D+(L^(U|~R))+V[13]+1309151649&4294967295,D=U+(N<<21&4294967295|N>>>11),N=R+(U^(D|~L))+V[4]+4149444226&4294967295,R=D+(N<<6&4294967295|N>>>26),N=L+(D^(R|~U))+V[11]+3174756917&4294967295,L=R+(N<<10&4294967295|N>>>22),N=U+(R^(L|~D))+V[2]+718787259&4294967295,U=L+(N<<15&4294967295|N>>>17),N=D+(L^(U|~R))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+U&4294967295,A.g[3]=A.g[3]+L&4294967295}n.prototype.v=function(A,R){R===void 0&&(R=A.length);const D=R-this.blockSize,V=this.C;let U=this.h,L=0;for(;L<R;){if(U==0)for(;L<=D;)s(this,A,L),L+=this.blockSize;if(typeof A=="string"){for(;L<R;)if(V[U++]=A.charCodeAt(L++),U==this.blockSize){s(this,V),U=0;break}}else for(;L<R;)if(V[U++]=A[L++],U==this.blockSize){s(this,V),U=0;break}}this.h=U,this.o+=R},n.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,D=0;D<4;++D)for(let V=0;V<32;V+=8)A[R++]=this.g[D]>>>V&255;return A};function i(A,R){var D=c;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function o(A,R){this.h=R;const D=[];let V=!0;for(let U=A.length-1;U>=0;U--){const L=A[U]|0;V&&L==R||(D[U]=L,V=!1)}this.g=D}var c={};function d(A){return-128<=A&&A<128?i(A,function(R){return new o([R|0],R<0?-1:0)}):new o([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return E(h(-A));const R=[];let D=1;for(let V=0;A>=D;V++)R[V]=A/D|0,D*=4294967296;return new o(R,0)}function p(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return E(p(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=h(Math.pow(R,8));let V=g;for(let L=0;L<A.length;L+=8){var U=Math.min(8,A.length-L);const N=parseInt(A.substring(L,L+U),R);U<8?(U=h(Math.pow(R,U)),V=V.j(U).add(h(N))):(V=V.j(D),V=V.add(h(N)))}return V}var g=d(0),v=d(1),w=d(16777216);r=o.prototype,r.m=function(){if(_(this))return-E(this).m();let A=0,R=1;for(let D=0;D<this.g.length;D++){const V=this.i(D);A+=(V>=0?V:4294967296+V)*R,R*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(_(this))return"-"+E(this).toString(A);const R=h(Math.pow(A,6));var D=this;let V="";for(;;){const U=M(D,R).g;D=C(D,U.j(R));let L=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=U,k(D))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function _(A){return A.h==-1}r.l=function(A){return A=C(this,A),_(A)?-1:k(A)?0:1};function E(A){const R=A.g.length,D=[];for(let V=0;V<R;V++)D[V]=~A.g[V];return new o(D,~A.h).add(v)}r.abs=function(){return _(this)?E(this):this},r.add=function(A){const R=Math.max(this.g.length,A.g.length),D=[];let V=0;for(let U=0;U<=R;U++){let L=V+(this.i(U)&65535)+(A.i(U)&65535),N=(L>>>16)+(this.i(U)>>>16)+(A.i(U)>>>16);V=N>>>16,L&=65535,N&=65535,D[U]=N<<16|L}return new o(D,D[D.length-1]&-2147483648?-1:0)};function C(A,R){return A.add(E(R))}r.j=function(A){if(k(this)||k(A))return g;if(_(this))return _(A)?E(this).j(E(A)):E(E(this).j(A));if(_(A))return E(this.j(E(A)));if(this.l(w)<0&&A.l(w)<0)return h(this.m()*A.m());const R=this.g.length+A.g.length,D=[];for(var V=0;V<2*R;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<A.g.length;U++){const L=this.i(V)>>>16,N=this.i(V)&65535,Y=A.i(U)>>>16,ae=A.i(U)&65535;D[2*V+2*U]+=N*ae,P(D,2*V+2*U),D[2*V+2*U+1]+=L*ae,P(D,2*V+2*U+1),D[2*V+2*U+1]+=N*Y,P(D,2*V+2*U+1),D[2*V+2*U+2]+=L*Y,P(D,2*V+2*U+2)}for(A=0;A<R;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=R;A<2*R;A++)D[A]=0;return new o(D,0)};function P(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function j(A,R){this.g=A,this.h=R}function M(A,R){if(k(R))throw Error("division by zero");if(k(A))return new j(g,g);if(_(A))return R=M(E(A),R),new j(E(R.g),E(R.h));if(_(R))return R=M(A,E(R)),new j(E(R.g),R.h);if(A.g.length>30){if(_(A)||_(R))throw Error("slowDivide_ only works with positive integers.");for(var D=v,V=R;V.l(A)<=0;)D=$(D),V=$(V);var U=B(D,1),L=B(V,1);for(V=B(V,2),D=B(D,2);!k(V);){var N=L.add(V);N.l(A)<=0&&(U=U.add(D),L=N),V=B(V,1),D=B(D,1)}return R=C(A,U.j(R)),new j(U,R)}for(U=g;A.l(R)>=0;){for(D=Math.max(1,Math.floor(A.m()/R.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=h(D),N=L.j(R);_(N)||N.l(A)>0;)D-=V,L=h(D),N=L.j(R);k(L)&&(L=v),U=U.add(L),A=C(A,N)}return new j(U,A)}r.B=function(A){return M(this,A).h},r.and=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)&A.i(V);return new o(D,this.h&A.h)},r.or=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)|A.i(V);return new o(D,this.h|A.h)},r.xor=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)^A.i(V);return new o(D,this.h^A.h)};function $(A){const R=A.g.length+1,D=[];for(let V=0;V<R;V++)D[V]=A.i(V)<<1|A.i(V-1)>>>31;return new o(D,A.h)}function B(A,R){const D=R>>5;R%=32;const V=A.g.length-D,U=[];for(let L=0;L<V;L++)U[L]=R>0?A.i(L+D)>>>R|A.i(L+D+1)<<32-R:A.i(L+D);return new o(U,A.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,aj=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,il=o}).apply(typeof V1<"u"?V1:typeof self<"u"?self:typeof window<"u"?window:{});var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lj,Sf,cj,Hg,g_,uj,dj,hj;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof _g=="object"&&_g];for(var S=0;S<m.length;++S){var I=m[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=t(this);function s(m,S){if(S)e:{var I=n;m=m.split(".");for(var F=0;F<m.length-1;F++){var re=m[F];if(!(re in I))break e;I=I[re]}m=m[m.length-1],F=I[m],S=S(F),S!=F&&S!=null&&e(I,m,{configurable:!0,writable:!0,value:S})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(S){var I=[],F;for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&I.push([F,S[F]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function d(m,S,I){return m.call.apply(m.bind,arguments)}function h(m,S,I){return h=d,h.apply(null,arguments)}function p(m,S){var I=Array.prototype.slice.call(arguments,1);return function(){var F=I.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function g(m,S){function I(){}I.prototype=S.prototype,m.Z=S.prototype,m.prototype=new I,m.prototype.constructor=m,m.Ob=function(F,re,oe){for(var Ie=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Ie[lt-2]=arguments[lt];return S.prototype[re].apply(F,Ie)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const S=m.length;if(S>0){const I=Array(S);for(let F=0;F<S;F++)I[F]=m[F];return I}return[]}function k(m,S){for(let F=1;F<arguments.length;F++){const re=arguments[F];var I=typeof re;if(I=I!="object"?I:re?Array.isArray(re)?"array":I:"null",I=="array"||I=="object"&&typeof re.length=="number"){I=m.length||0;const oe=re.length||0;m.length=I+oe;for(let Ie=0;Ie<oe;Ie++)m[I+Ie]=re[Ie]}else m.push(re)}}class _{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function E(m){o.setTimeout(()=>{throw m},0)}function C(){var m=A;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class P{constructor(){this.h=this.g=null}add(S,I){const F=j.get();F.set(S,I),this.h?this.h.next=F:this.g=F,this.h=F}}var j=new _(()=>new M,m=>m.reset());class M{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let $,B=!1,A=new P,R=()=>{const m=Promise.resolve(void 0);$=()=>{m.then(D)}};function D(){for(var m;m=C();){try{m.h.call(m.g)}catch(I){E(I)}var S=j;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}B=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};o.addEventListener("test",I,S),o.removeEventListener("test",I,S)}catch{}return m}();function N(m){return/^[\s\xa0]*$/.test(m)}function Y(m,S){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}g(Y,U),Y.prototype.init=function(m,S){const I=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(I=="mouseover"?S=m.fromElement:I=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),de=0;function he(m,S,I,F,re){this.listener=m,this.proxy=null,this.src=S,this.type=I,this.capture=!!F,this.ha=re,this.key=++de,this.da=this.fa=!1}function X(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function J(m,S,I){for(const F in m)S.call(I,m[F],F,m)}function K(m,S){for(const I in m)S.call(void 0,m[I],I,m)}function W(m){const S={};for(const I in m)S[I]=m[I];return S}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(m,S){let I,F;for(let re=1;re<arguments.length;re++){F=arguments[re];for(I in F)m[I]=F[I];for(let oe=0;oe<Z.length;oe++)I=Z[oe],Object.prototype.hasOwnProperty.call(F,I)&&(m[I]=F[I])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,S,I,F,re){const oe=m.toString();m=this.g[oe],m||(m=this.g[oe]=[],this.h++);const Ie=qe(m,S,F,re);return Ie>-1?(S=m[Ie],I||(S.fa=!1)):(S=new he(S,this.src,oe,!!F,re),S.fa=I,m.push(S)),S};function Me(m,S){const I=S.type;if(I in m.g){var F=m.g[I],re=Array.prototype.indexOf.call(F,S,void 0),oe;(oe=re>=0)&&Array.prototype.splice.call(F,re,1),oe&&(X(S),m.g[I].length==0&&(delete m.g[I],m.h--))}}function qe(m,S,I,F){for(let re=0;re<m.length;++re){const oe=m[re];if(!oe.da&&oe.listener==S&&oe.capture==!!I&&oe.ha==F)return re}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),je={};function Ve(m,S,I,F,re){if(Array.isArray(S)){for(let oe=0;oe<S.length;oe++)Ve(m,S[oe],I,F,re);return null}return I=On(I),m&&m[ae]?m.J(S,I,c(F)?!!F.capture:!1,re):Qe(m,S,I,!1,F,re)}function Qe(m,S,I,F,re,oe){if(!S)throw Error("Invalid event type");const Ie=c(re)?!!re.capture:!!re;let lt=kr(m);if(lt||(m[pe]=lt=new ge(m)),I=lt.add(S,I,F,Ie,oe),I.proxy)return I;if(F=tt(),I.proxy=F,F.src=m,F.listener=I,m.addEventListener)L||(re=Ie),re===void 0&&(re=!1),m.addEventListener(S.toString(),F,re);else if(m.attachEvent)m.attachEvent(Zt(S.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return I}function tt(){function m(I){return S.call(m.src,m.listener,I)}const S=pn;return m}function at(m,S,I,F,re){if(Array.isArray(S))for(var oe=0;oe<S.length;oe++)at(m,S[oe],I,F,re);else F=c(F)?!!F.capture:!!F,I=On(I),m&&m[ae]?(m=m.i,oe=String(S).toString(),oe in m.g&&(S=m.g[oe],I=qe(S,I,F,re),I>-1&&(X(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete m.g[oe],m.h--)))):m&&(m=kr(m))&&(S=m.g[S.toString()],m=-1,S&&(m=qe(S,I,F,re)),(I=m>-1?S[m]:null)&&Pt(I))}function Pt(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[ae])Me(S.i,m);else{var I=m.type,F=m.proxy;S.removeEventListener?S.removeEventListener(I,F,m.capture):S.detachEvent?S.detachEvent(Zt(I),F):S.addListener&&S.removeListener&&S.removeListener(F),(I=kr(S))?(Me(I,m),I.h==0&&(I.src=null,S[pe]=null)):X(m)}}}function Zt(m){return m in je?je[m]:je[m]="on"+m}function pn(m,S){if(m.da)m=!0;else{S=new Y(S,this);const I=m.listener,F=m.ha||m.src;m.fa&&Pt(m),m=I.call(F,S)}return m}function kr(m){return m=m[pe],m instanceof ge?m:null}var Ir="__closure_events_fn_"+(Math.random()*1e9>>>0);function On(m){return typeof m=="function"?m:(m[Ir]||(m[Ir]=function(S){return m.handleEvent(S)}),m[Ir])}function It(){V.call(this),this.i=new ge(this),this.M=this,this.G=null}g(It,V),It.prototype[ae]=!0,It.prototype.removeEventListener=function(m,S,I,F){at(this,m,S,I,F)};function er(m,S){var I,F=m.G;if(F)for(I=[];F;F=F.G)I.push(F);if(m=m.M,F=S.type||S,typeof S=="string")S=new U(S,m);else if(S instanceof U)S.target=S.target||m;else{var re=S;S=new U(F,m),Se(S,re)}re=!0;let oe,Ie;if(I)for(Ie=I.length-1;Ie>=0;Ie--)oe=S.g=I[Ie],re=Cr(oe,F,!0,S)&&re;if(oe=S.g=m,re=Cr(oe,F,!0,S)&&re,re=Cr(oe,F,!1,S)&&re,I)for(Ie=0;Ie<I.length;Ie++)oe=S.g=I[Ie],re=Cr(oe,F,!1,S)&&re}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const I=m.g[S];for(let F=0;F<I.length;F++)X(I[F]);delete m.g[S],m.h--}}this.G=null},It.prototype.J=function(m,S,I,F){return this.i.add(String(m),S,!1,I,F)},It.prototype.K=function(m,S,I,F){return this.i.add(String(m),S,!0,I,F)};function Cr(m,S,I,F){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let oe=0;oe<S.length;++oe){const Ie=S[oe];if(Ie&&!Ie.da&&Ie.capture==I){const lt=Ie.listener,br=Ie.ha||Ie.src;Ie.fa&&Me(m.i,Ie),re=lt.call(br,F)!==!1&&re}}return re&&!F.defaultPrevented}function q(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:o.setTimeout(m,S||0)}function ne(m){m.g=q(()=>{m.g=null,m.i&&(m.i=!1,ne(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class ce extends V{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(m){V.call(this),this.h=m,this.g={}}g(Ce,V);var _e=[];function we(m){J(m.g,function(S,I){this.g.hasOwnProperty(I)&&Pt(S)},m),m.g={}}Ce.prototype.N=function(){Ce.Z.N.call(this),we(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=o.JSON.stringify,yt=o.JSON.parse,At=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Kt(){}function fo(){}var mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){U.call(this,"d")}g(rn,U);function wi(){U.call(this,"c")}g(wi,U);var _r={},xi=null;function us(){return xi=xi||new It}_r.Ia="serverreachability";function po(m){U.call(this,_r.Ia,m)}g(po,U);function Cs(m){const S=us();er(S,new po(S))}_r.STAT_EVENT="statevent";function Ys(m,S){U.call(this,_r.STAT_EVENT,m),this.stat=S}g(Ys,U);function Qt(m){const S=us();er(S,new Ys(S,m))}_r.Ja="timingevent";function Kn(m,S){U.call(this,_r.Ja,m),this.size=S}g(Kn,U);function _i(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},S)}function Xe(){this.g=!0}Xe.prototype.ua=function(){this.g=!1};function Rt(m,S,I,F,re,oe){m.info(function(){if(m.g)if(oe){var Ie="",lt=oe.split("&");for(let $t=0;$t<lt.length;$t++){var br=lt[$t].split("=");if(br.length>1){const Ar=br[0];br=br[1];const ys=Ar.split("_");Ie=ys.length>=2&&ys[1]=="type"?Ie+(Ar+"="+br+"&"):Ie+(Ar+"=redacted&")}}}else Ie=null;else Ie=oe;return"XMLHTTP REQ ("+F+") [attempt "+re+"]: "+S+`
`+I+`
`+Ie})}function Ut(m,S,I,F,re,oe,Ie){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+re+"]: "+S+`
`+I+`
`+oe+" "+Ie})}function fr(m,S,I,F){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+yn(m,I)+(F?" "+F:"")})}function gn(m,S){m.info(function(){return"TIMEOUT: "+S})}Xe.prototype.info=function(){};function yn(m,S){if(!m.g)return S;if(!S)return null;try{const oe=JSON.parse(S);if(oe){for(m=0;m<oe.length;m++)if(Array.isArray(oe[m])){var I=oe[m];if(!(I.length<2)){var F=I[1];if(Array.isArray(F)&&!(F.length<1)){var re=F[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Ie=1;Ie<F.length;Ie++)F[Ie]=""}}}}return Ne(oe)}catch{return S}}var vn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ds;function mo(){}g(mo,Kt),mo.prototype.g=function(){return new XMLHttpRequest},ds=new mo;function bi(m){return encodeURIComponent(String(m))}function nu(m){var S=1;m=m.split(":");const I=[];for(;S>0&&m.length;)I.push(m.shift()),S--;return m.length&&I.push(m.join(":")),I}function Ps(m,S,I,F){this.j=m,this.i=S,this.l=I,this.S=F||1,this.V=new Ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},_h={};function Qs(m,S,I){m.M=1,m.A=yo(As(S)),m.u=I,m.R=!0,bh(m,null)}function bh(m,S){m.F=Date.now(),Nl(m),m.B=As(m.A);var I=m.B,F=m.S;Array.isArray(F)||(F=[String(F)]),Nh(I.i,"t",F),m.C=0,I=m.j.L,m.h=new om,m.g=ym(m.j,I?S:null,!m.u),m.P>0&&(m.O=new ce(h(m.Y,m,m.g),m.P)),S=m.V,I=m.g,F=m.ba;var re="readystatechange";Array.isArray(re)||(re&&(_e[0]=re.toString()),re=_e);for(let oe=0;oe<re.length;oe++){const Ie=Ve(I,re[oe],F||S.handleEvent,!1,S.h||S);if(!Ie)break;S.g[Ie.key]=Ie}S=m.J?W(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),Cs(),Rt(m.i,m.v,m.B,m.l,m.S,m.u)}Ps.prototype.ba=function(m){m=m.target;const S=this.O;S&&Pi(m)==3?S.j():this.Y(m)},Ps.prototype.Y=function(m){try{if(m==this.g)e:{const lt=Pi(this.g),br=this.g.ya(),$t=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||mm(this.g)))){this.K||lt!=4||br==7||(br==8||$t<=0?Cs(3):Cs(2)),su(this);var S=this.g.ca();this.X=S;var I=lm(this);if(this.o=S==200,Ut(this.i,this.v,this.B,this.l,this.S,lt,S),this.o){if(this.U&&!this.L){t:{if(this.g){var F,re=this.g;if((F=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(F)){var oe=F;break t}}oe=null}if(m=oe)fr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tr(this,m);else{this.o=!1,this.m=3,Qt(12),go(this),jl(this);break e}}if(this.R){m=!0;let Ar;for(;!this.K&&this.C<I.length;)if(Ar=um(this,I),Ar==_h){lt==4&&(this.m=4,Qt(14),m=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ar==am){this.m=4,Qt(15),fr(this.i,this.l,I,"[Invalid Chunk]"),m=!1;break}else fr(this.i,this.l,Ar,null),tr(this,Ar);if(cm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||I.length!=0||this.h.h||(this.m=1,Qt(16),m=!1),this.o=this.o&&m,!m)fr(this.i,this.l,I,"[Invalid Chunked Response]"),go(this),jl(this);else if(I.length>0&&!this.W){this.W=!0;var Ie=this.j;Ie.g==this&&Ie.aa&&!Ie.P&&(Ie.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Bl(Ie),Ie.P=!0,Qt(11))}}else fr(this.i,this.l,I,null),tr(this,I);lt==4&&go(this),this.o&&!this.K&&(lt==4?pu(this.j,this):(this.o=!1,Nl(this)))}else Oh(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),go(this),jl(this)}}}catch{}finally{}};function lm(m){if(!cm(m))return m.g.la();const S=mm(m.g);if(S==="")return"";let I="";const F=S.length,re=Pi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return go(m),jl(m),"";m.h.i=new o.TextDecoder}for(let oe=0;oe<F;oe++)m.h.h=!0,I+=m.h.i.decode(S[oe],{stream:!(re&&oe==F-1)});return S.length=0,m.h.g+=I,m.C=0,m.h.g}function cm(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function um(m,S){var I=m.C,F=S.indexOf(`
`,I);return F==-1?_h:(I=Number(S.substring(I,F)),isNaN(I)?am:(F+=1,F+I>S.length?_h:(S=S.slice(F,F+I),m.C=F+I,S)))}Ps.prototype.cancel=function(){this.K=!0,go(this)};function Nl(m){m.T=Date.now()+m.H,Eh(m,m.H)}function Eh(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=_i(h(m.aa,m),S)}function su(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Ps.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(gn(this.i,this.B),this.M!=2&&(Cs(),Qt(17)),go(this),this.m=2,jl(this)):Eh(this,this.T-m)};function jl(m){m.j.I==0||m.K||pu(m.j,m)}function go(m){su(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,we(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function tr(m,S){try{var I=m.j;if(I.I!=0&&(I.g==m||Sh(I.h,m))){if(!m.L&&Sh(I.h,m)&&I.I==3){try{var F=I.Ba.g.parse(S)}catch{F=null}if(Array.isArray(F)&&F.length==3){var re=F;if(re[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<m.F)fu(I),ms(I);else break e;Ni(I),Qt(18)}}else I.xa=re[1],0<I.xa-I.K&&re[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=_i(h(I.Va,I),6e3));Ol(I.h)<=1&&I.ta&&(I.ta=void 0)}else gs(I,11)}else if((m.L||I.g==m)&&fu(I),!N(S))for(re=I.Ba.g.parse(S),S=0;S<re.length;S++){let $t=re[S];const Ar=$t[0];if(!(Ar<=I.K))if(I.K=Ar,$t=$t[1],I.I==2)if($t[0]=="c"){I.M=$t[1],I.ba=$t[2];const ys=$t[3];ys!=null&&(I.ka=ys,I.j.info("VER="+I.ka));const bo=$t[4];bo!=null&&(I.za=bo,I.j.info("SVER="+I.za));const ji=$t[5];ji!=null&&typeof ji=="number"&&ji>0&&(F=1.5*ji,I.O=F,I.j.info("backChannelRequestTimeoutMs_="+F)),F=I;const Oi=m.g;if(Oi){const yu=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yu){var oe=F.h;oe.g||yu.indexOf("spdy")==-1&&yu.indexOf("quic")==-1&&yu.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(ou(oe,oe.h),oe.h=null))}if(F.G){const Lh=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(F.wa=Lh,Mt(F.J,F.G,Lh))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-m.F,I.j.info("Handshake RTT: "+I.T+"ms")),F=I;var Ie=m;if(F.na=Mh(F,F.L?F.ba:null,F.W),Ie.L){Dl(F.h,Ie);var lt=Ie,br=F.O;br&&(lt.H=br),lt.D&&(su(lt),Nl(lt)),F.g=Ie}else wn(F);I.i.length>0&&_o(I)}else $t[0]!="stop"&&$t[0]!="close"||gs(I,7);else I.I==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?gs(I,7):du(I):$t[0]!="noop"&&I.l&&I.l.qa($t),I.A=0)}}Cs(4)}catch{}}var R0=class{constructor(m,S){this.g=m,this.map=S}};function iu(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Th(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ol(m){return m.h?1:m.g?m.g.size:0}function Sh(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function ou(m,S){m.g?m.g.add(S):m.h=S}function Dl(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}iu.prototype.cancel=function(){if(this.i=hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function hs(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const I of m.g.values())S=S.concat(I.G);return S}return w(m.i)}var dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fs(m,S){if(m){m=m.split("&");for(let I=0;I<m.length;I++){const F=m[I].indexOf("=");let re,oe=null;F>=0?(re=m[I].substring(0,F),oe=m[I].substring(F+1)):re=m[I],S(re,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Ei(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof Ei?(this.l=m.l,Ml(this,m.j),this.o=m.o,this.g=m.g,Ti(this,m.u),this.h=m.h,la(this,jh(m.i)),this.m=m.m):m&&(S=String(m).match(dm))?(this.l=!1,Ml(this,S[1]||"",!0),this.o=Ll(S[2]||""),this.g=Ll(S[3]||"",!0),Ti(this,S[4]),this.h=Ll(S[5]||"",!0),la(this,S[6]||"",!0),this.m=Ll(S[7]||"")):(this.l=!1,this.i=new kt(null,this.l))}Ei.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(Vl(S,Ih,!0),":");var I=this.g;return(I||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Vl(S,Ih,!0),"@"),m.push(bi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&m.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(Vl(I,I.charAt(0)=="/"?Fl:Ch,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",Vl(I,Ph)),m.join("")},Ei.prototype.resolve=function(m){const S=As(this);let I=!!m.j;I?Ml(S,m.j):I=!!m.o,I?S.o=m.o:I=!!m.g,I?S.g=m.g:I=m.u!=null;var F=m.h;if(I)Ti(S,m.u);else if(I=!!m.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var re=S.h.lastIndexOf("/");re!=-1&&(F=S.h.slice(0,re+1)+F)}if(re=F,re==".."||re==".")F="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){F=re.lastIndexOf("/",0)==0,re=re.split("/");const oe=[];for(let Ie=0;Ie<re.length;){const lt=re[Ie++];lt=="."?F&&Ie==re.length&&oe.push(""):lt==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),F&&Ie==re.length&&oe.push("")):(oe.push(lt),F=!0)}F=oe.join("/")}else F=re}return I?S.h=F:I=m.i.toString()!=="",I?la(S,jh(m.i)):I=!!m.m,I&&(S.m=m.m),S};function As(m){return new Ei(m)}function Ml(m,S,I){m.j=I?Ll(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Ti(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function la(m,S,I){S instanceof kt?(m.i=S,lu(m.i,m.l)):(I||(S=Vl(S,N0)),m.i=new kt(S,m.l))}function Mt(m,S,I){m.i.set(S,I)}function yo(m){return Mt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ll(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Vl(m,S,I){return typeof m=="string"?(m=encodeURI(m).replace(S,kh),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ih=/[#\/\?@]/g,Ch=/[#\?:]/g,Fl=/[#\?]/g,N0=/[#\?@]/g,Ph=/#/g;function kt(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Si(m){m.g||(m.g=new Map,m.h=0,m.i&&fs(m.i,function(S,I){m.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}r=kt.prototype,r.add=function(m,S){Si(this),this.i=null,m=ki(this,m);let I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(S),this.h+=1,this};function Ah(m,S){Si(m),S=ki(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function au(m,S){return Si(m),S=ki(m,S),m.g.has(S)}r.forEach=function(m,S){Si(this),this.g.forEach(function(I,F){I.forEach(function(re){m.call(S,re,F,this)},this)},this)};function Rh(m,S){Si(m);let I=[];if(typeof S=="string")au(m,S)&&(I=I.concat(m.g.get(ki(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)I=I.concat(m[S]);return I}r.set=function(m,S){return Si(this),this.i=null,m=ki(this,m),au(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},r.get=function(m,S){return m?(m=Rh(this,m),m.length>0?String(m[0]):S):S};function Nh(m,S,I){Ah(m,S),I.length>0&&(m.i=null,m.g.set(ki(m,S),w(I)),m.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let F=0;F<S.length;F++){var I=S[F];const re=bi(I);I=Rh(this,I);for(let oe=0;oe<I.length;oe++){let Ie=re;I[oe]!==""&&(Ie+="="+bi(I[oe])),m.push(Ie)}}return this.i=m.join("&")};function jh(m){const S=new kt;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function ki(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function lu(m,S){S&&!m.j&&(Si(m),m.i=null,m.g.forEach(function(I,F){const re=F.toLowerCase();F!=re&&(Ah(this,F),Nh(this,re,I))},m)),m.j=S}function Ii(m,S){const I=new Xe;if(o.Image){const F=new Image;F.onload=p(nn,I,"TestLoadImage: loaded",!0,S,F),F.onerror=p(nn,I,"TestLoadImage: error",!1,S,F),F.onabort=p(nn,I,"TestLoadImage: abort",!1,S,F),F.ontimeout=p(nn,I,"TestLoadImage: timeout",!1,S,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else S(!1)}function Ci(m,S){const I=new Xe,F=new AbortController,re=setTimeout(()=>{F.abort(),nn(I,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:F.signal}).then(oe=>{clearTimeout(re),oe.ok?nn(I,"TestPingServer: ok",!0,S):nn(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),nn(I,"TestPingServer: error",!1,S)})}function nn(m,S,I,F,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),F(I)}catch{}}function Ul(){this.g=new At}function vo(m){this.i=m.Sb||null,this.h=m.ab||!1}g(vo,Kt),vo.prototype.g=function(){return new ps(this.i,this.h)};function ps(m,S){It.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ps,It),r=ps.prototype,r.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,Js(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||o).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ca(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hm(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function hm(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?ca(this):Js(this),this.readyState==3&&hm(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,ca(this))},r.Na=function(m){this.g&&(this.response=m,ca(this))},r.ga=function(){this.g&&ca(this)};function ca(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Js(m)}r.setRequestHeader=function(m,S){this.A.append(m,S)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=S.next();return m.join(`\r
`)};function Js(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function fm(m){let S="";return J(m,function(I,F){S+=F,S+=":",S+=I,S+=`\r
`}),S}function cu(m,S,I){e:{for(F in I){var F=!1;break e}F=!0}F||(I=fm(I),typeof m=="string"?I!=null&&bi(I):Mt(m,S,I))}function Yt(m){It.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Yt,It);var pm=/^https?$/i,j0=["POST","PUT"];r=Yt.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,S,I,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ds.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(oe){ua(this,oe);return}if(m=I||"",I=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var re in F)I.set(re,F[re]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const oe of F.keys())I.set(oe,F.get(oe));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(I.keys()).find(oe=>oe.toLowerCase()=="content-type"),re=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(j0,S,void 0)>=0)||F||re||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ie]of I)this.g.setRequestHeader(oe,Ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(oe){ua(this,oe)}};function ua(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,da(m),xo(m)}function da(m){m.A||(m.A=!0,er(m,"complete"),er(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,er(this,"complete"),er(this,"abort"),xo(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),Yt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wo(this):this.Xa())},r.Xa=function(){wo(this)};function wo(m){if(m.h&&typeof i<"u"){if(m.v&&Pi(m)==4)setTimeout(m.Ca.bind(m),0);else if(er(m,"readystatechange"),Pi(m)==4){m.h=!1;try{const oe=m.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var F;if(F=oe===0){let Ie=String(m.D).match(dm)[1]||null;!Ie&&o.self&&o.self.location&&(Ie=o.self.location.protocol.slice(0,-1)),F=!pm.test(Ie?Ie.toLowerCase():"")}I=F}if(I)er(m,"complete"),er(m,"success");else{m.o=6;try{var re=Pi(m)>2?m.g.statusText:""}catch{re=""}m.l=re+" ["+m.ca()+"]",da(m)}}finally{xo(m)}}}}function xo(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const I=m.g;m.g=null,S||er(m,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Pi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Pi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),yt(S)}};function mm(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Oh(m){const S={};m=(m.g&&Pi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(N(m[F]))continue;var I=nu(m[F]);const re=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const oe=S[re]||[];S[re]=oe,oe.push(I)}K(S,function(F){return F.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(m,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||S}function uu(m){this.za=0,this.i=[],this.j=new Xe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,m),this.Za=Ai("retryDelaySeedMs",1e4,m),this.Ta=Ai("forwardChannelMaxRetries",2,m),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new iu(m&&m.concurrentRequestLimit),this.Ba=new Ul,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=uu.prototype,r.ka=8,r.I=1,r.connect=function(m,S,I,F){Qt(0),this.W=m,this.H=S||{},I&&F!==void 0&&(this.H.OSID=I,this.H.OAID=F),this.F=this.X,this.J=Mh(this,null,this.W),_o(this)};function du(m){if(hu(m),m.I==3){var S=m.V++,I=As(m.J);if(Mt(I,"SID",m.M),Mt(I,"RID",S),Mt(I,"TYPE","terminate"),Ri(m,I),S=new Ps(m,m.j,S),S.M=2,S.A=yo(As(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=S.A,I=!0),I||(S.g=ym(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Nl(S)}zl(m)}function ms(m){m.g&&(Bl(m),m.g.cancel(),m.g=null)}function hu(m){ms(m),m.v&&(o.clearTimeout(m.v),m.v=null),fu(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function _o(m){if(!Th(m.h)&&!m.m){m.m=!0;var S=m.Ea;$||R(),B||($(),B=!0),A.add(S,m),m.D=0}}function gm(m,S){return Ol(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=_i(h(m.Ea,m,S),mu(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const re=new Ps(this,this.j,m);let oe=this.o;if(this.U&&(oe?(oe=W(oe),Se(oe,this.U)):oe=this.U),this.u!==null||this.R||(re.J=oe,oe=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var F=this.i[I];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(S+=F,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=Dh(this,re,S),I=As(this.J),Mt(I,"RID",m),Mt(I,"CVER",22),this.G&&Mt(I,"X-HTTP-Session-Id",this.G),Ri(this,I),oe&&(this.R?S="headers="+bi(fm(oe))+"&"+S:this.u&&cu(I,this.u,oe)),ou(this.h,re),this.Ra&&Mt(I,"TYPE","init"),this.S?(Mt(I,"$req",S),Mt(I,"SID","null"),re.U=!0,Qs(re,I,null)):Qs(re,I,S),this.I=2}}else this.I==3&&(m?$l(this,m):this.i.length==0||Th(this.h)||$l(this))};function $l(m,S){var I;S?I=S.l:I=m.V++;const F=As(m.J);Mt(F,"SID",m.M),Mt(F,"RID",I),Mt(F,"AID",m.K),Ri(m,F),m.u&&m.o&&cu(F,m.u,m.o),I=new Ps(m,m.j,I,m.D+1),m.u===null&&(I.J=m.o),S&&(m.i=S.G.concat(m.i)),S=Dh(m,I,1e3),I.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ou(m.h,I),Qs(I,F,S)}function Ri(m,S){m.H&&J(m.H,function(I,F){Mt(S,F,I)}),m.l&&J({},function(I,F){Mt(S,F,I)})}function Dh(m,S,I){I=Math.min(m.i.length,I);const F=m.l?h(m.l.Ka,m.l,m):null;e:{var re=m.i;let lt=-1;for(;;){const br=["count="+I];lt==-1?I>0?(lt=re[0].g,br.push("ofs="+lt)):lt=0:br.push("ofs="+lt);let $t=!0;for(let Ar=0;Ar<I;Ar++){var oe=re[Ar].g;const ys=re[Ar].map;if(oe-=lt,oe<0)lt=Math.max(0,re[Ar].g-100),$t=!1;else try{oe="req"+oe+"_"||"";try{var Ie=ys instanceof Map?ys:Object.entries(ys);for(const[bo,ji]of Ie){let Oi=ji;c(ji)&&(Oi=Ne(ji)),br.push(oe+bo+"="+encodeURIComponent(Oi))}}catch(bo){throw br.push(oe+"type="+encodeURIComponent("_badmap")),bo}}catch{F&&F(ys)}}if($t){Ie=br.join("&");break e}}Ie=void 0}return m=m.i.splice(0,I),S.G=m,Ie}function wn(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;$||R(),B||($(),B=!0),A.add(S,m),m.A=0}}function Ni(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=_i(h(m.Da,m),mu(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,ha(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=_i(h(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),ms(this),ha(this))};function Bl(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function ha(m){m.g=new Ps(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=As(m.na);Mt(S,"RID","rpc"),Mt(S,"SID",m.M),Mt(S,"AID",m.K),Mt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&Mt(S,"TO",m.ia),Mt(S,"TYPE","xmlhttp"),Ri(m,S),m.u&&m.o&&cu(S,m.u,m.o),m.O&&(m.g.H=m.O);var I=m.g;m=m.ba,I.M=1,I.A=yo(As(S)),I.u=null,I.R=!0,bh(I,m)}r.Va=function(){this.C!=null&&(this.C=null,ms(this),Ni(this),Qt(19))};function fu(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function pu(m,S){var I=null;if(m.g==S){fu(m),Bl(m),m.g=null;var F=2}else if(Sh(m.h,S))I=S.G,Dl(m.h,S),F=1;else return;if(m.I!=0){if(S.o)if(F==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var re=m.D;F=us(),er(F,new Kn(F,I)),_o(m)}else wn(m);else if(re=S.m,re==3||re==0&&S.X>0||!(F==1&&gm(m,S)||F==2&&Ni(m)))switch(I&&I.length>0&&(S=m.h,S.i=S.i.concat(I)),re){case 1:gs(m,5);break;case 4:gs(m,10);break;case 3:gs(m,6);break;default:gs(m,2)}}}function mu(m,S){let I=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(I*=2),I*S}function gs(m,S){if(m.j.info("Error code "+S),S==2){var I=h(m.bb,m),F=m.Ua;const re=!F;F=new Ei(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ml(F,"https"),yo(F),re?Ii(F.toString(),I):Ci(F.toString(),I)}else Qt(2);m.I=0,m.l&&m.l.pa(S),zl(m),hu(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function zl(m){if(m.I=0,m.ja=[],m.l){const S=hs(m.h);(S.length!=0||m.i.length!=0)&&(k(m.ja,S),k(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Mh(m,S,I){var F=I instanceof Ei?As(I):new Ei(I);if(F.g!="")S&&(F.g=S+"."+F.g),Ti(F,F.u);else{var re=o.location;F=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const oe=new Ei(null);F&&Ml(oe,F),S&&(oe.g=S),re&&Ti(oe,re),I&&(oe.h=I),F=oe}return I=m.G,S=m.wa,I&&S&&Mt(F,I,S),Mt(F,"VER",m.ka),Ri(m,F),F}function ym(m,S,I){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new Yt(new vo({ab:I})):new Yt(m.ma),S.Fa(m.L),S}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vm(){}r=vm.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function gu(){}gu.prototype.g=function(m,S){return new sn(m,S)};function sn(m,S){It.call(this),this.g=new uu(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!N(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!N(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new fa(this)}g(sn,It),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){du(this.g)},sn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.v&&(I={},I.__data__=Ne(m),m=I);S.i.push(new R0(S.Ya++,m)),S.I==3&&_o(S)},sn.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,sn.Z.N.call(this)};function wm(m){rn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const I in S){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}g(wm,rn);function xm(){wi.call(this),this.status=1}g(xm,wi);function fa(m){this.g=m}g(fa,vm),fa.prototype.ra=function(){er(this.g,"a")},fa.prototype.qa=function(m){er(this.g,new wm(m))},fa.prototype.pa=function(m){er(this.g,new xm)},fa.prototype.oa=function(){er(this.g,"b")},gu.prototype.createWebChannel=gu.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,hj=function(){return new gu},dj=function(){return us()},uj=_r,g_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,Hg=vn,Pr.COMPLETE="complete",cj=Pr,fo.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",It.prototype.listen=It.prototype.J,Sf=fo,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,lj=Yt}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});const F1="@firebase/firestore",U1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Gb("@firebase/firestore");function sd(){return Oc.logLevel}function Ee(r,...e){if(Oc.logLevel<=Tt.DEBUG){const t=e.map(oE);Oc.debug(`Firestore (${hh}): ${r}`,...t)}}function Bn(r,...e){if(Oc.logLevel<=Tt.ERROR){const t=e.map(oE);Oc.error(`Firestore (${hh}): ${r}`,...t)}}function Dc(r,...e){if(Oc.logLevel<=Tt.WARN){const t=e.map(oE);Oc.warn(`Firestore (${hh}): ${r}`,...t)}}function oE(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,fj(r,n,t)}function fj(r,e,t){let n=`FIRESTORE (${hh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Bn(n),new Error(n)}function Ke(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||fj(e,s,n)}function ot(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends co{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class Vz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fz{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const d=i;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zi)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ke(typeof n.accessToken=="string",31837,{l:n}),new pj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class Uz{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $z{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Uz(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bz{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const n=i=>{i.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=zz(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%62))}return n}}function it(r,e){return r<e?-1:r>e?1:0}function y_(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),i=e.charAt(n);if(s!==i)return _x(s)===_x(i)?it(s,i):_x(s)?1:-1}return it(r.length,e.length)}const Wz=55296,qz=57343;function _x(r){const e=r.charCodeAt(0);return e>=Wz&&e<=qz}function Md(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}function mj(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__name__";class $i{constructor(e,t,n){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ze(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return $i.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=$i.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return it(e.length,t.length)}static compareSegments(e,t){const n=$i.isNumericId(e),s=$i.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?$i.extractNumericId(e).compare($i.extractNumericId(t)):y_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}}class Vt extends $i{construct(e,t,n){return new Vt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ke(le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const Hz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends $i{construct(e,t,n){return new dr(e,t,n)}static isValidIdentifier(e){return Hz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B1}static keyField(){return new dr([B1])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ke(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ke(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(n+=c,s++):(i(),s++)}if(i(),o)throw new ke(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Vt.fromString(e))}static fromName(e){return new Ae(Vt.fromString(e).popFirst(5))}static empty(){return new Ae(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(r,e,t){if(!t)throw new ke(le.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Gz(r,e,t,n){if(e===!0&&n===!0)throw new ke(le.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function z1(r){if(!Ae.isDocumentKey(r))throw new ke(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function W1(r){if(Ae.isDocumentKey(r))throw new ke(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function yj(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dv(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ze(12329,{type:typeof r})}function Wn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ke(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dv(r);throw new ke(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(r,e){const t={typeString:r};return e&&(t.value=e),t}function Wp(r,e){if(!yj(r))throw new ke(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const o=r[n];if(s&&typeof o!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new ke(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=-62135596800,H1=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*H1);return new Ft(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q1)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H1}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wp(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:Lr("string",Ft._jsonSchemaVersion),seconds:Lr("number"),nanoseconds:Lr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Ft(0,0))}static max(){return new Je(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=-1;class by{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function v_(r){return r.fields.find(e=>e.kind===2)}function oc(r){return r.fields.filter(e=>e.kind!==2)}by.UNKNOWN_ID=-1;class Gg{constructor(e,t){this.fieldPath=e,this.kind=t}}class fp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fp(0,ks.min())}}function Kz(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Je.fromTimestamp(n===1e9?new Ft(t+1,0):new Ft(t,n));return new ks(s,Ae.empty(),e)}function vj(r){return new ks(r.readTime,r.key,hp)}class ks{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ks(Je.min(),Ae.empty(),hp)}static max(){return new ks(Je.max(),Ae.empty(),hp)}}function lE(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(r.documentKey,e.documentKey),t!==0?t:it(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(r){if(r.code!==le.FAILED_PRECONDITION||r.message!==wj)throw r;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,n)=>{t(e)})}static reject(e){return new ee((t,n)=>{n(e)})}static waitFor(e){return new ee((t,n)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&t()},d=>n(d))}),o=!0,i===s&&t()})}static or(e){let t=ee.resolve(!1);for(const n of e)t=t.next(s=>s?ee.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,i)=>{n.push(t.call(this,s,i))}),this.waitFor(n)}static mapArray(e,t){return new ee((n,s)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next(p=>{o[h]=p,++c,c===i&&n(o)},p=>s(p))}})}static doWhile(e,t){return new ee((n,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="SimpleDb";class Mv{static open(e,t,n,s){try{return new Mv(t,e.transaction(s,n))}catch(i){throw new $f(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new $f(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=cE(n.target.error);this.S.reject(new $f(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ee(_s,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qz(t)}}class ol{static delete(e){return Ee(_s,"Removing database:",e),cc(rN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!dN())return!1;if(ol.F())return!0;const e=Hr(),t=ol.M(e),n=0<t&&t<10,s=_j(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,ol.M(Hr())===12.2&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ee(_s,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{n(new $f(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new ke(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new ke(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new $f(e,o))},s.onupgradeneeded=i=>{Ee(_s,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{Ee(_s,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=Mv.open(this.db,e,i?"readonly":"readwrite",n),d=s(c).next(h=>(c.C(),h)).catch(h=>(c.abort(h),ee.reject(h))).toPromise();return d.catch(()=>{}),await c.D,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(Ee(_s,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _j(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Yz{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return cc(this.U.delete())}}class $f extends ke{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xl(r){return r.name==="IndexedDbTransactionError"}class Qz{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Ee(_s,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ee(_s,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cc(n)}add(e){return Ee(_s,"ADD",this.store.name,e,e),cc(this.store.add(e))}get(e){return cc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ee(_s,"GET",this.store.name,e,t),t))}delete(e){return Ee(_s,"DELETE",this.store.name,e),cc(this.store.delete(e))}count(){return Ee(_s,"COUNT",this.store.name),cc(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new ee((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}{const i=this.cursor(n),o=[];return this.H(i,(c,d)=>{o.push(d)}).next(()=>o)}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new ee((s,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{s(o.target.result)}})}Z(e,t){Ee(_s,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,(i,o,c)=>c.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new ee((n,s)=>{t.onerror=i=>{const o=cE(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():n()}):n()}})}H(e,t){const n=[];return new ee((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void s();const d=new Yz(c),h=t(c.primaryKey,c.value,d);if(h instanceof ee){const p=h.catch(g=>(d.done(),ee.reject(g)));n.push(p)}d.isDone?s():d.G===null?c.continue():c.continue(d.G)}}).next(()=>ee.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cc(r){return new ee((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=cE(n.target.error);t(s)}})}let G1=!1;function cE(r){const e=ol.M(Hr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return G1||(G1=!0,setTimeout(()=>{throw n},0)),n}}return r}const Bf="IndexBackfiller";class Jz{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ee(Bf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();Ee(Bf,`Documents written: ${t}`)}catch(t){xl(t)?Ee(Bf,"Ignoring IndexedDB error during index backfill: ",t):await Jc(t)}await this.re(6e4)})}}class Xz{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let s=t,i=!0;return ee.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return Ee(Bf,`Processing collection: ${o}`),this.oe(e,o,s).next(c=>{s-=c,n.add(o)});i=!1})).next(()=>t-s)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(c=>(Ee(Bf,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>o.size)}))}_e(e,t){let n=e;return t.changes.forEach((s,i)=>{const o=vj(i);lE(o,n)>0&&(n=o)}),new ks(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Us.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function Lv(r){return r==null}function pp(r){return r===0&&1/r==-1/0}function Zz(r){return typeof r=="number"&&Number.isInteger(r)&&!pp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="";function Rn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=K1(e)),e=e7(r.get(t),e);return K1(e)}function e7(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const i=r.charAt(s);switch(i){case"\0":t+="";break;case Ey:t+="";break;default:t+=i}}return t}function K1(r){return r+Ey+""}function Gi(r){const e=r.length;if(Ke(e>=2,64408,{path:r}),e===2)return Ke(r.charAt(0)===Ey&&r.charAt(1)==="",56145,{path:r}),Vt.emptyPath();const t=e-2,n=[];let s="";for(let i=0;i<e;){const o=r.indexOf(Ey,i);switch((o<0||o>t)&&ze(50515,{path:r}),r.charAt(o+1)){case"":const c=r.substring(i,o);let d;s.length===0?d=c:(s+=c,d=s,s=""),n.push(d);break;case"":s+=r.substring(i,o),s+="\0";break;case"":s+=r.substring(i,o+1);break;default:ze(61167,{path:r})}i=o+2}return new Vt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="remoteDocuments",qp="owner",Vu="owner",mp="mutationQueues",t7="userId",ci="mutations",Y1="batchId",pc="userMutationsIndex",Q1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(r,e){return[r,Rn(e)]}function bj(r,e,t){return[r,Rn(e),t]}const r7={},Ld="documentMutations",Ty="remoteDocumentsV14",n7=["prefixPath","collectionGroup","readTime","documentId"],Yg="documentKeyIndex",s7=["prefixPath","collectionGroup","documentId"],Ej="collectionGroupIndex",i7=["collectionGroup","readTime","prefixPath","documentId"],gp="remoteDocumentGlobal",w_="remoteDocumentGlobalKey",Vd="targets",Tj="queryTargetsIndex",o7=["canonicalId","targetId"],Fd="targetDocuments",a7=["targetId","path"],uE="documentTargetsIndex",l7=["path","targetId"],Sy="targetGlobalKey",bc="targetGlobal",yp="collectionParents",c7=["collectionId","parent"],Ud="clientMetadata",u7="clientId",Vv="bundles",d7="bundleId",Fv="namedQueries",h7="name",dE="indexConfiguration",f7="indexId",x_="collectionGroupIndex",p7="collectionGroup",zf="indexState",m7=["indexId","uid"],Sj="sequenceNumberIndex",g7=["uid","sequenceNumber"],Wf="indexEntries",y7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kj="documentKeyIndex",v7=["indexId","uid","orderedDocumentKey"],Uv="documentOverlays",w7=["userId","collectionPath","documentId"],__="collectionPathOverlayIndex",x7=["userId","collectionPath","largestBatchId"],Ij="collectionGroupOverlayIndex",_7=["userId","collectionGroup","largestBatchId"],hE="globals",b7="name",Cj=[mp,ci,Ld,ac,Vd,qp,bc,Fd,Ud,gp,yp,Vv,Fv],E7=[...Cj,Uv],Pj=[mp,ci,Ld,Ty,Vd,qp,bc,Fd,Ud,gp,yp,Vv,Fv,Uv],Aj=Pj,fE=[...Aj,dE,zf,Wf],T7=fE,Rj=[...fE,hE],S7=Rj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends xj{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Yr(r,e){const t=ot(r);return ol.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _l(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Nj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bg(this.root,e,this.comparator,!1)}getReverseIterator(){return new bg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bg(this.root,e,this.comparator,!0)}}class bg{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??cn.RED,this.left=s??cn.EMPTY,this.right=i??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new cn(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,n,s,i){return this}insert(e,t,n){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X1(this.data.getIterator())}getIteratorFrom(e){return new X1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class X1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fu(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new ss([])}unionWith(e){let t=new qt(dr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ss(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Md(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jj("Invalid base64 string: "+i):i}}(e);return new Vr(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const k7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const t=k7.exec(r);if(Ke(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:or(r.seconds),nanos:or(r.nanos)}}function or(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Xo(r){return typeof r=="string"?Vr.fromBase64String(r):Vr.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="server_timestamp",Dj="__type__",Mj="__previous_value__",Lj="__local_write_time__";function pE(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Dj])==null?void 0:n.stringValue)===Oj}function $v(r){const e=r.mapValue.fields[Mj];return pE(e)?$v(e):e}function vp(r){const e=Jo(r.mapValue.fields[Lj].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,t,n,s,i,o,c,d,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=p}}const ky="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||ky}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===ky}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="__type__",Vj="__max__",el={mapValue:{fields:{__type__:{stringValue:Vj}}}},gE="__vector__",$d="value",Qg={nullValue:"NULL_VALUE"};function hl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pE(r)?4:Fj(r)?9007199254740991:Bv(r)?10:11:ze(28295,{value:r})}function io(r,e){if(r===e)return!0;const t=hl(r);if(t!==hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return vp(r).isEqual(vp(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Jo(s.timestampValue),c=Jo(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,i){return Xo(s.bytesValue).isEqual(Xo(i.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,i){return or(s.geoPointValue.latitude)===or(i.geoPointValue.latitude)&&or(s.geoPointValue.longitude)===or(i.geoPointValue.longitude)}(r,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return or(s.integerValue)===or(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=or(s.doubleValue),c=or(i.doubleValue);return o===c?pp(o)===pp(c):isNaN(o)&&isNaN(c)}return!1}(r,e);case 9:return Md(r.arrayValue.values||[],e.arrayValue.values||[],io);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(J1(o)!==J1(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!io(o[d],c[d])))return!1;return!0}(r,e);default:return ze(52216,{left:r})}}function wp(r,e){return(r.values||[]).find(t=>io(t,e))!==void 0}function fl(r,e){if(r===e)return 0;const t=hl(r),n=hl(e);if(t!==n)return it(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(r.booleanValue,e.booleanValue);case 2:return function(i,o){const c=or(i.integerValue||i.doubleValue),d=or(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(r,e);case 3:return Z1(r.timestampValue,e.timestampValue);case 4:return Z1(vp(r),vp(e));case 5:return y_(r.stringValue,e.stringValue);case 6:return function(i,o){const c=Xo(i),d=Xo(o);return c.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=it(c[h],d[h]);if(p!==0)return p}return it(c.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,o){const c=it(or(i.latitude),or(o.latitude));return c!==0?c:it(or(i.longitude),or(o.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return eC(r.arrayValue,e.arrayValue);case 10:return function(i,o){var v,w,k,_;const c=i.fields||{},d=o.fields||{},h=(v=c[$d])==null?void 0:v.arrayValue,p=(w=d[$d])==null?void 0:w.arrayValue,g=it(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((_=p==null?void 0:p.values)==null?void 0:_.length)||0);return g!==0?g:eC(h,p)}(r.mapValue,e.mapValue);case 11:return function(i,o){if(i===el.mapValue&&o===el.mapValue)return 0;if(i===el.mapValue)return 1;if(o===el.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let g=0;g<d.length&&g<p.length;++g){const v=y_(d[g],p[g]);if(v!==0)return v;const w=fl(c[d[g]],h[p[g]]);if(w!==0)return w}return it(d.length,p.length)}(r.mapValue,e.mapValue);default:throw ze(23264,{he:t})}}function Z1(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return it(r,e);const t=Jo(r),n=Jo(e),s=it(t.seconds,n.seconds);return s!==0?s:it(t.nanos,n.nanos)}function eC(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=fl(t[s],n[s]);if(i)return i}return it(t.length,n.length)}function Bd(r){return E_(r)}function E_(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Jo(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Xo(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ae.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=E_(i);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${E_(t.fields[o])}`;return s+"}"}(r.mapValue):ze(61005,{value:r})}function Jg(r){switch(hl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$v(r);return e?16+Jg(e):16;case 5:return 2*r.stringValue.length;case 6:return Xo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Jg(i),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return _l(n.fields,(i,o)=>{s+=i.length+Jg(o)}),s}(r.mapValue);default:throw ze(13486,{value:r})}}function xp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function T_(r){return!!r&&"integerValue"in r}function _p(r){return!!r&&"arrayValue"in r}function tC(r){return!!r&&"nullValue"in r}function rC(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Xg(r){return!!r&&"mapValue"in r}function Bv(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[mE])==null?void 0:n.stringValue)===gE}function qf(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return _l(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=qf(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qf(r.arrayValue.values[t]);return e}return{...r}}function Fj(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Vj}const Uj={mapValue:{fields:{[mE]:{stringValue:gE},[$d]:{arrayValue:{}}}}};function C7(r){return"nullValue"in r?Qg:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?xp(Mc.empty(),Ae.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Bv(r)?Uj:{mapValue:{}}:ze(35942,{value:r})}function P7(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?xp(Mc.empty(),Ae.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Uj:"mapValue"in r?Bv(r)?{mapValue:{}}:el:ze(61959,{value:r})}function nC(r,e){const t=fl(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function sC(r,e){const t=fl(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qf(t)}setAll(e){let t=dr.emptyPath(),n={},s=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=c.popLast()}o?n[c.lastSegment()]=qf(o):s.push(c.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());Xg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Xg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){_l(t,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Pn(qf(this.value))}}function $j(r){const e=[];return _l(r.fields,(t,n)=>{const s=new dr([t]);if(Xg(n)){const i=$j(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,n,s,i,o,c){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new yr(e,0,Je.min(),Je.min(),Je.min(),Pn.empty(),0)}static newFoundDocument(e,t,n,s){return new yr(e,1,t,Je.min(),n,s,0)}static newNoDocument(e,t){return new yr(e,2,t,Je.min(),Je.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,Je.min(),Je.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.position=e,this.inclusive=t}}function iC(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],o=r.position[s];if(i.field.isKeyField()?n=Ae.comparator(Ae.fromName(o.referenceValue),t.key):n=fl(o,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function oC(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!io(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t="asc"){this.field=e,this.dir=t}}function A7(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bj=class{};class St extends Bj{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new R7(e,t,n):t==="array-contains"?new O7(e,n):t==="in"?new Kj(e,n):t==="not-in"?new D7(e,n):t==="array-contains-any"?new M7(e,n):new St(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new N7(e,n):new j7(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fl(t,this.value)):t!==null&&hl(this.value)===hl(t)&&this.matchesComparison(fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends Bj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wt(e,t)}matches(e){return Wd(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wd(r){return r.op==="and"}function S_(r){return r.op==="or"}function yE(r){return zj(r)&&Wd(r)}function zj(r){for(const e of r.filters)if(e instanceof Wt)return!1;return!0}function k_(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+Bd(r.value);if(yE(r))return r.filters.map(e=>k_(e)).join(",");{const e=r.filters.map(t=>k_(t)).join(",");return`${r.op}(${e})`}}function Wj(r,e){return r instanceof St?function(n,s){return s instanceof St&&n.op===s.op&&n.field.isEqual(s.field)&&io(n.value,s.value)}(r,e):r instanceof Wt?function(n,s){return s instanceof Wt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,c)=>i&&Wj(o,s.filters[c]),!0):!1}(r,e):void ze(19439)}function qj(r,e){const t=r.filters.concat(e);return Wt.create(t,r.op)}function Hj(r){return r instanceof St?function(t){return`${t.field.canonicalString()} ${t.op} ${Bd(t.value)}`}(r):r instanceof Wt?function(t){return t.op.toString()+" {"+t.getFilters().map(Hj).join(" ,")+"}"}(r):"Filter"}class R7 extends St{constructor(e,t,n){super(e,t,n),this.key=Ae.fromName(n.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class N7 extends St{constructor(e,t){super(e,"in",t),this.keys=Gj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class j7 extends St{constructor(e,t){super(e,"not-in",t),this.keys=Gj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gj(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>Ae.fromName(n.referenceValue))}class O7 extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _p(t)&&wp(t.arrayValue,this.value)}}class Kj extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wp(this.value.arrayValue,t)}}class D7 extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wp(this.value.arrayValue,t)}}class M7 extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_p(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>wp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,t=null,n=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function I_(r,e=null,t=[],n=[],s=null,i=null,o=null){return new L7(r,e,t,n,s,i,o)}function Lc(r){const e=ot(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>k_(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Lv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Bd(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Bd(n)).join(",")),e.Te=t}return e.Te}function Hp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!A7(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wj(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oC(r.startAt,e.startAt)&&oC(r.endAt,e.endAt)}function Iy(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Cy(r,e){return r.filters.filter(t=>t instanceof St&&t.field.isEqual(e))}function aC(r,e,t){let n=Qg,s=!0;for(const i of Cy(r,e)){let o=Qg,c=!0;switch(i.op){case"<":case"<=":o=C7(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=Qg}nC({value:n,inclusive:s},{value:o,inclusive:c})<0&&(n=o,s=c)}if(t!==null){for(let i=0;i<r.orderBy.length;++i)if(r.orderBy[i].field.isEqual(e)){const o=t.position[i];nC({value:n,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(n=o,s=t.inclusive);break}}return{value:n,inclusive:s}}function lC(r,e,t){let n=el,s=!0;for(const i of Cy(r,e)){let o=el,c=!0;switch(i.op){case">=":case">":o=P7(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=el}sC({value:n,inclusive:s},{value:o,inclusive:c})>0&&(n=o,s=c)}if(t!==null){for(let i=0;i<r.orderBy.length;++i)if(r.orderBy[i].field.isEqual(e)){const o=t.position[i];sC({value:n,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(n=o,s=t.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t=null,n=[],s=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V7(r,e,t,n,s,i,o,c){return new fh(r,e,t,n,s,i,o,c)}function Gp(r){return new fh(r)}function cC(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Yj(r){return r.collectionGroup!==null}function Hf(r){const e=ot(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qt(dr.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new bp(i,n))}),t.has(dr.keyField().canonicalString())||e.Ie.push(new bp(dr.keyField(),n))}return e.Ie}function $s(r){const e=ot(r);return e.Ee||(e.Ee=F7(e,Hf(r))),e.Ee}function F7(r,e){if(r.limitType==="F")return I_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new bp(s.field,i)});const t=r.endAt?new zd(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new zd(r.startAt.position,r.startAt.inclusive):null;return I_(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function C_(r,e){const t=r.filters.concat([e]);return new fh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Py(r,e,t){return new fh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function zv(r,e){return Hp($s(r),$s(e))&&r.limitType===e.limitType}function Qj(r){return`${Lc($s(r))}|lt:${r.limitType}`}function id(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>Hj(s)).join(", ")}]`),Lv(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Bd(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Bd(s)).join(",")),`Target(${n})`}($s(r))}; limitType=${r.limitType})`}function Kp(r,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ae.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(r,e)&&function(n,s){for(const i of Hf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(o,c,d){const h=iC(o,c,d);return o.inclusive?h<=0:h<0}(n.startAt,Hf(n),s)||n.endAt&&!function(o,c,d){const h=iC(o,c,d);return o.inclusive?h>=0:h>0}(n.endAt,Hf(n),s))}(r,e)}function U7(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Jj(r){return(e,t)=>{let n=!1;for(const s of Hf(r)){const i=$7(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function $7(r,e,t){const n=r.field.isKeyField()?Ae.comparator(e.key,t.key):function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?fl(d,h):ze(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ze(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,(t,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return Nj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new ar(Ae.comparator);function Es(){return B7}const Xj=new ar(Ae.comparator);function kf(...r){let e=Xj;for(const t of r)e=e.insert(t.key,t);return e}function Zj(r){let e=Xj;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Ki(){return Gf()}function e2(){return Gf()}function Gf(){return new na(r=>r.toString(),(r,e)=>r.isEqual(e))}const z7=new ar(Ae.comparator),W7=new qt(Ae.comparator);function vt(...r){let e=W7;for(const t of r)e=e.add(t);return e}const q7=new qt(it);function H7(){return q7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function t2(r){return{integerValue:""+r}}function G7(r,e){return Zz(e)?t2(e):vE(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this._=void 0}}function K7(r,e,t){return r instanceof qd?function(s,i){const o={fields:{[Dj]:{stringValue:Oj},[Lj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pE(i)&&(i=$v(i)),i&&(o.fields[Mj]=i),{mapValue:o}}(t,e):r instanceof Hd?n2(r,e):r instanceof Gd?s2(r,e):function(s,i){const o=r2(s,i),c=uC(o)+uC(s.Ae);return T_(o)&&T_(s.Ae)?t2(c):vE(s.serializer,c)}(r,e)}function Y7(r,e,t){return r instanceof Hd?n2(r,e):r instanceof Gd?s2(r,e):t}function r2(r,e){return r instanceof Ep?function(n){return T_(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class qd extends Wv{}class Hd extends Wv{constructor(e){super(),this.elements=e}}function n2(r,e){const t=i2(e);for(const n of r.elements)t.some(s=>io(s,n))||t.push(n);return{arrayValue:{values:t}}}class Gd extends Wv{constructor(e){super(),this.elements=e}}function s2(r,e){let t=i2(e);for(const n of r.elements)t=t.filter(s=>!io(s,n));return{arrayValue:{values:t}}}class Ep extends Wv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function uC(r){return or(r.integerValue||r.doubleValue)}function i2(r){return _p(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t){this.field=e,this.transform=t}}function Q7(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof Hd&&s instanceof Hd||n instanceof Gd&&s instanceof Gd?Md(n.elements,s.elements,io):n instanceof Ep&&s instanceof Ep?io(n.Ae,s.Ae):n instanceof qd&&s instanceof qd}(r.transform,e.transform)}class J7{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zg(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class qv{}function a2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Hv(r.key,An.none()):new ph(r.key,r.data,An.none());{const t=r.data,n=Pn.empty();let s=new qt(dr.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new sa(r.key,n,new ss(s.toArray()),An.none())}}function X7(r,e,t){r instanceof ph?function(s,i,o){const c=s.value.clone(),d=hC(s.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(r,e,t):r instanceof sa?function(s,i,o){if(!Zg(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=hC(s.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(l2(s)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(r,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Kf(r,e,t,n){return r instanceof ph?function(i,o,c,d){if(!Zg(i.precondition,o))return c;const h=i.value.clone(),p=fC(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(r,e,t,n):r instanceof sa?function(i,o,c,d){if(!Zg(i.precondition,o))return c;const h=fC(i.fieldTransforms,d,o),p=o.data;return p.setAll(l2(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(r,e,t,n):function(i,o,c){return Zg(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(r,e,t)}function Z7(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=r2(n.transform,s||null);i!=null&&(t===null&&(t=Pn.empty()),t.set(n.field,i))}return t||null}function dC(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Md(n,s,(i,o)=>Q7(i,o))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ph extends qv{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sa extends qv{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function l2(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function hC(r,e,t){const n=new Map;Ke(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const i=r[s],o=i.transform,c=e.data.field(i.field);n.set(i.field,Y7(o,c,t[s]))}return n}function fC(r,e,t){const n=new Map;for(const s of r){const i=s.transform,o=t.data.field(s.field);n.set(s.field,K7(i,o,e))}return n}class Hv extends qv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c2 extends qv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&X7(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=e2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=t.has(s.key)?null:c;const d=a2(o,c);d!==null&&n.set(s.key,d),o.isValidDocument()||o.convertToNoDocument(Je.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vt())}isEqual(e){return this.batchId===e.batchId&&Md(this.mutations,e.mutations,(t,n)=>dC(t,n))&&Md(this.baseMutations,e.baseMutations,(t,n)=>dC(t,n))}}class xE{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ke(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return z7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new xE(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _E=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr,Ct;function tW(r){switch(r){case le.OK:return ze(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return ze(15467,{code:r})}}function u2(r){if(r===void 0)return Bn("GRPC error has no .code"),le.UNKNOWN;switch(r){case Nr.OK:return le.OK;case Nr.CANCELLED:return le.CANCELLED;case Nr.UNKNOWN:return le.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return le.INTERNAL;case Nr.UNAVAILABLE:return le.UNAVAILABLE;case Nr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Nr.NOT_FOUND:return le.NOT_FOUND;case Nr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Nr.ABORTED:return le.ABORTED;case Nr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Nr.DATA_LOSS:return le.DATA_LOSS;default:return ze(39323,{code:r})}}(Ct=Nr||(Nr={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=new il([4294967295,4294967295],0);function pC(r){const e=rW().encode(r),t=new aj;return t.update(e),new Uint8Array(t.digest())}function mC(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new il([t,n],0),new il([s,i],0)]}class bE{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new If(`Invalid padding: ${t}`);if(n<0)throw new If(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new If(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new If(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=il.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(il.fromNumber(n)));return s.compare(nW)===1&&(s=new il([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pC(e),[n,s]=mC(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);if(!this.we(o))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new bE(i,s,t);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const t=pC(e),[n,s]=mC(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class If extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Yp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gv(Je.min(),s,new ar(it),Es(),vt())}}class Yp{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Yp(n,t,vt(),vt(),vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class d2{constructor(e,t){this.targetId=e,this.Ce=t}}class h2{constructor(e,t,n=Vr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class gC{constructor(){this.ve=0,this.Fe=yC(),this.Me=Vr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vt(),t=vt(),n=vt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:ze(38017,{changeType:i})}}),new Yp(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=yC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sW{constructor(e){this.Ge=e,this.ze=new Map,this.je=Es(),this.Je=Eg(),this.He=Eg(),this.Ye=new ar(it)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(Iy(i))if(n===0){const o=new Ae(i.path);this.et(t,o,yr.newNoDocument(o,Je.min()))}else Ke(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const c=this.ut(e),d=c?this.ct(c,e,o):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let o,c;try{o=Xo(n).toUint8Array()}catch(d){if(d instanceof jj)return Dc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new bE(o,s,i)}catch(d){return Dc(d instanceof If?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Iy(c.target)){const d=new Ae(c.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,yr.newNoDocument(d,e))}i.Be&&(t.set(o,i.ke()),i.qe())}});let n=vt();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Gv(e,t,this.Ye,this.je,n);return this.je=Es(),this.Je=Eg(),this.He=Eg(),this.Ye=new ar(it),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gC,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qt(it),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qt(it),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gC),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eg(){return new ar(Ae.comparator)}function yC(){return new ar(Ae.comparator)}const iW={asc:"ASCENDING",desc:"DESCENDING"},oW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aW={and:"AND",or:"OR"};class lW{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function P_(r,e){return r.useProto3Json||Lv(e)?e:{value:e}}function Kd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cW(r,e){return Kd(r,e.toTimestamp())}function qn(r){return Ke(!!r,49232),Je.fromTimestamp(function(t){const n=Jo(t);return new Ft(n.seconds,n.nanos)}(r))}function EE(r,e){return A_(r,e).canonicalString()}function A_(r,e){const t=function(s){return new Vt(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function p2(r){const e=Vt.fromString(r);return Ke(E2(e),10190,{key:e.toString()}),e}function Ay(r,e){return EE(r.databaseId,e.path)}function Ec(r,e){const t=p2(e);if(t.get(1)!==r.databaseId.projectId)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ae(y2(t))}function m2(r,e){return EE(r.databaseId,e)}function g2(r){const e=p2(r);return e.length===4?Vt.emptyPath():y2(e)}function R_(r){return new Vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function y2(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function vC(r,e,t){return{name:Ay(r,e),fields:t.value.mapValue.fields}}function uW(r,e,t){const n=Ec(r,e.name),s=qn(e.updateTime),i=e.createTime?qn(e.createTime):Je.min(),o=new Pn({mapValue:{fields:e.fields}}),c=yr.newFoundDocument(n,s,i,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function dW(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ze(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Ke(p===void 0||typeof p=="string",58123),Vr.fromBase64String(p||"")):(Ke(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Vr.fromUint8Array(p||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?le.UNKNOWN:u2(h.code);return new ke(p,h.message||"")}(o);t=new h2(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Ec(r,n.document.name),i=qn(n.document.updateTime),o=n.document.createTime?qn(n.document.createTime):Je.min(),c=new Pn({mapValue:{fields:n.document.fields}}),d=yr.newFoundDocument(s,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];t=new ey(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Ec(r,n.document),i=n.readTime?qn(n.readTime):Je.min(),o=yr.newNoDocument(s,i),c=n.removedTargetIds||[];t=new ey([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Ec(r,n.document),i=n.removedTargetIds||[];t=new ey([],i,s,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new eW(s,i),c=n.targetId;t=new d2(c,o)}}return t}function Ry(r,e){let t;if(e instanceof ph)t={update:vC(r,e.key,e.value)};else if(e instanceof Hv)t={delete:Ay(r,e.key)};else if(e instanceof sa)t={update:vC(r,e.key,e.data),updateMask:yW(e.fieldMask)};else{if(!(e instanceof c2))return ze(16599,{Vt:e.type});t={verify:Ay(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const c=o.transform;if(c instanceof qd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ep)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ze(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:cW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ze(27497)}(r,e.precondition)),t}function N_(r,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?An.updateTime(qn(i.updateTime)):i.exists!==void 0?An.exists(i.exists):An.none()}(e.currentDocument):An.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(o,c){let d=null;if("setToServerValue"in c)Ke(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),d=new qd;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Hd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Gd(p)}else"increment"in c?d=new Ep(o,c.increment):ze(16584,{proto:c});const h=dr.fromServerFormat(c.fieldPath);return new o2(h,d)}(r,s)):[];if(e.update){e.update.name;const s=Ec(r,e.update.name),i=new Pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(d){const h=d.fieldPaths||[];return new ss(h.map(p=>dr.fromServerFormat(p)))}(e.updateMask);return new sa(s,i,o,t,n)}return new ph(s,i,t,n)}if(e.delete){const s=Ec(r,e.delete);return new Hv(s,t)}if(e.verify){const s=Ec(r,e.verify);return new c2(s,t)}return ze(1463,{proto:e})}function hW(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map(t=>function(s,i){let o=s.updateTime?qn(s.updateTime):qn(i);return o.isEqual(Je.min())&&(o=qn(i)),new J7(o,s.transformResults||[])}(t,e))):[]}function v2(r,e){return{documents:[m2(r,e.path)]}}function w2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=m2(r,s);const i=function(h){if(h.length!==0)return b2(Wt.create(h,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:od(v.field),direction:pW(v.dir)}}(p))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=P_(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:t,parent:s}}function x2(r){let e=g2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ke(n===1,65062);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];t.where&&(i=function(g){const v=_2(g);return v instanceof Wt&&yE(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(v=>function(k){return new bp(ad(k.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(g){let v;return v=typeof g=="object"?g.value:g,Lv(v)?null:v}(t.limit));let d=null;t.startAt&&(d=function(g){const v=!!g.before,w=g.values||[];return new zd(w,v)}(t.startAt));let h=null;return t.endAt&&(h=function(g){const v=!g.before,w=g.values||[];return new zd(w,v)}(t.endAt)),V7(e,s,o,i,c,"F",d,h)}function fW(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _2(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=ad(t.unaryFilter.field);return St.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ad(t.unaryFilter.field);return St.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ad(t.unaryFilter.field);return St.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ad(t.unaryFilter.field);return St.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}}(r):r.fieldFilter!==void 0?function(t){return St.create(ad(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Wt.create(t.compositeFilter.filters.map(n=>_2(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze(1026)}}(t.compositeFilter.op))}(r):ze(30097,{filter:r})}function pW(r){return iW[r]}function mW(r){return oW[r]}function gW(r){return aW[r]}function od(r){return{fieldPath:r.canonicalString()}}function ad(r){return dr.fromServerFormat(r.fieldPath)}function b2(r){return r instanceof St?function(t){if(t.op==="=="){if(rC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NAN"}};if(tC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NOT_NAN"}};if(tC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(t.field),op:mW(t.op),value:t.value}}}(r):r instanceof Wt?function(t){const n=t.getFilters().map(s=>b2(s));return n.length===1?n[0]:{compositeFilter:{op:gW(t.op),filters:n}}}(r):ze(54877,{filter:r})}function yW(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function E2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t,n,s,i=Je.min(),o=Je.min(),c=Vr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new $o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.yt=e}}function vW(r,e){let t;if(e.document)t=uW(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ae.fromSegments(e.noDocument.path),s=Fc(e.noDocument.readTime);t=yr.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ze(56709);{const n=Ae.fromSegments(e.unknownDocument.path),s=Fc(e.unknownDocument.version);t=yr.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime(function(s){const i=new Ft(s[0],s[1]);return Je.fromTimestamp(i)}(e.readTime)),t}function wC(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ny(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,o){return{name:Ay(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Kd(i,o.version.toTimestamp()),createTime:Kd(i,o.createTime.toTimestamp())}}(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Vc(e.version)};else{if(!e.isUnknownDocument())return ze(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Vc(e.version)}}return n}function Ny(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Vc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fc(r){const e=new Ft(r.seconds,r.nanoseconds);return Je.fromTimestamp(e)}function uc(r,e){const t=(e.baseMutations||[]).map(i=>N_(r.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>N_(r.yt,i)),s=Ft.fromMillis(e.localWriteTimeMs);return new wE(e.batchId,s,t,n)}function Cf(r){const e=Fc(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Fc(r.lastLimboFreeSnapshotVersion):Je.min();let n;return n=function(i){return i.documents!==void 0}(r.query)?function(i){const o=i.documents.length;return Ke(o===1,1966,{count:o}),$s(Gp(g2(i.documents[0])))}(r.query):function(i){return $s(x2(i))}(r.query),new $o(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Vr.fromBase64String(r.resumeToken))}function S2(r,e){const t=Vc(e.snapshotVersion),n=Vc(e.lastLimboFreeSnapshotVersion);let s;s=Iy(e.target)?v2(r.yt,e.target):w2(r.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lc(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function k2(r){const e=x2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Py(e,e.limit,"L"):e}function bx(r,e){return new _E(e.largestBatchId,N_(r.yt,e.overlayMutation))}function xC(r,e){const t=e.path.lastSegment();return[r,Rn(e.path.popLast()),t]}function _C(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Vc(n.readTime),documentKey:Rn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{getBundleMetadata(e,t){return bC(e).get(t).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Fc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,t){return bC(e).put(function(s){return{bundleId:s.id,createTime:Vc(qn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return EC(e).get(t).next(n=>{if(n)return function(i){return{name:i.name,query:k2(i.bundledQuery),readTime:Fc(i.readTime)}}(n)})}saveNamedQuery(e,t){return EC(e).put(function(s){return{name:s.name,readTime:Vc(qn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function bC(r){return Yr(r,Vv)}function EC(r){return Yr(r,Fv)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Kv(e,n)}getOverlay(e,t){return ff(e).get(xC(this.userId,t)).next(n=>n?bx(this.serializer,n):null)}getOverlays(e,t){const n=Ki();return ee.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,t,n){const s=[];return n.forEach((i,o)=>{const c=new _E(t,o);s.push(this.St(e,c))}),ee.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach(o=>s.add(Rn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(ff(e).Z(__,c))}),ee.waitFor(i)}getOverlaysForCollection(e,t,n){const s=Ki(),i=Rn(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ff(e).J(__,o).next(c=>{for(const d of c){const h=bx(this.serializer,d);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,t,n,s){const i=Ki();let o;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ff(e).ee({index:Ij,range:c},(d,h,p)=>{const g=bx(this.serializer,h);i.size()<s||g.largestBatchId===o?(i.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>i)}St(e,t){return ff(e).put(function(s,i,o){const[c,d,h]=xC(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ry(s.yt,o.mutation)}}(this.serializer,this.userId,t))}}function ff(r){return Yr(r,Uv)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{bt(e){return Yr(e,hE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?Vr.fromUint8Array(n):Vr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(or(e.integerValue));else if("doubleValue"in e){const n=or(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),pp(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=Jo(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Xo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Fj(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Bv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ze(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){var o,c;const n=e.fields||{};this.Ft(t,53);const s=$d,i=((c=(o=n[s].arrayValue)==null?void 0:o.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(or(i)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),Ae.fromName(e).path.forEach(n=>{this.Ft(t,60),this.Ut(n,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}dc.Kt=new dc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=255;function _W(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function TC(r){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const o=_W(255&n[i]);if(s+=o,o!==8)break}return s}(r);return Math.ceil(e/8)}class bW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=TC(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=TC(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Uu),this.sn(255)}_n(){this.an(Uu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Uu?(this.sn(Uu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Uu?(this.an(Uu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class EW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class TW{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class pf{constructor(){this.cn=new bW,this.ln=new EW(this.cn),this.hn=new TW(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new hc(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:ty(this.En),directionalValue:ty(this.dn),orderedDocumentKey:ty(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ra(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=SC(r.En,e.En),t!==0?t:(t=SC(r.dn,e.dn),t!==0?t:Ae.comparator(r.In,e.In)))}function SC(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function ty(r){return uN()?function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n}(r):r}function kC(r){return typeof r!="string"?r:function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(r)}class IC{constructor(e){this.mn=new qt((t,n)=>dr.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=v_(e);if(t!==void 0&&!this.wn(t))return!1;const n=oc(e);let s=new Set,i=0,o=0;for(;i<n.length&&this.wn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const d=n[i];if(!this.Sn(c,d)||!this.bn(this.fn[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new qt(dr.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Gg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Gg(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Gg(n.field,n.dir==="asc"?0:1)));return new by(by.UNKNOWN_ID,this.collectionId,t,fp.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(r){var t,n;if(Ke(r instanceof St||r instanceof Wt,20012),r instanceof St){if(r instanceof Kj){const s=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map(i=>St.create(r.field,"==",i)))||[];return Wt.create(s,"or")}return r}const e=r.filters.map(s=>I2(s));return Wt.create(e,r.op)}function SW(r){if(r.getFilters().length===0)return[];const e=D_(I2(r));return Ke(C2(e),7391),j_(e)||O_(e)?[e]:e.getFilters()}function j_(r){return r instanceof St}function O_(r){return r instanceof Wt&&yE(r)}function C2(r){return j_(r)||O_(r)||function(t){if(t instanceof Wt&&S_(t)){for(const n of t.getFilters())if(!j_(n)&&!O_(n))return!1;return!0}return!1}(r)}function D_(r){if(Ke(r instanceof St||r instanceof Wt,34018),r instanceof St)return r;if(r.filters.length===1)return D_(r.filters[0]);const e=r.filters.map(n=>D_(n));let t=Wt.create(e,r.op);return t=jy(t),C2(t)?t:(Ke(t instanceof Wt,64498),Ke(Wd(t),40251),Ke(t.filters.length>1,57927),t.filters.reduce((n,s)=>TE(n,s)))}function TE(r,e){let t;return Ke(r instanceof St||r instanceof Wt,38388),Ke(e instanceof St||e instanceof Wt,25473),t=r instanceof St?e instanceof St?function(s,i){return Wt.create([s,i],"and")}(r,e):CC(r,e):e instanceof St?CC(e,r):function(s,i){if(Ke(s.filters.length>0&&i.filters.length>0,48005),Wd(s)&&Wd(i))return qj(s,i.getFilters());const o=S_(s)?s:i,c=S_(s)?i:s,d=o.filters.map(h=>TE(h,c));return Wt.create(d,"or")}(r,e),jy(t)}function CC(r,e){if(Wd(e))return qj(e,r.getFilters());{const t=e.filters.map(n=>TE(r,n));return Wt.create(t,"or")}}function jy(r){if(Ke(r instanceof St||r instanceof Wt,11850),r instanceof St)return r;const e=r.getFilters();if(e.length===1)return jy(e[0]);if(zj(r))return r;const t=e.map(s=>jy(s)),n=[];return t.forEach(s=>{s instanceof St?n.push(s):s instanceof Wt&&(s.op===r.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Wt.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(){this.Cn=new SE}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ks.min())}updateCollectionGroup(e,t,n){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class SE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new qt(Vt.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new qt(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="IndexedDbIndexManager",Tg=new Uint8Array(0);class IW{constructor(e,t){this.databaseId=t,this.vn=new SE,this.Fn=new na(n=>Lc(n),(n,s)=>Hp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:Rn(s)};return AC(e).put(i)}return ee.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[mj(t),""],!1,!0);return AC(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==t)break;n.push(Gi(o.parent))}return n})}addFieldIndex(e,t){const n=mf(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const i=n.add(s);if(t.indexState){const o=Bu(e);return i.next(c=>{o.put(_C(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=mf(e),s=Bu(e),i=$u(e);return n.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=mf(e),n=$u(e),s=Bu(e);return t.Z().next(()=>n.Z()).next(()=>s.Z())}createTargetIndexes(e,t){return ee.forEach(this.Mn(t),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new IC(n).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const n=$u(e);let s=!0;const i=new Map;return ee.forEach(this.Mn(t),o=>this.xn(e,o).next(c=>{s&&(s=!!c),i.set(o,c)})).next(()=>{if(s){let o=vt();const c=[];return ee.forEach(i,(d,h)=>{Ee(PC,`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(d)} to execute ${Lc(t)}`);const p=function(j,M){const $=v_(M);if($===void 0)return null;for(const B of Cy(j,$.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(h,d),g=function(j,M){const $=new Map;for(const B of oc(M))for(const A of Cy(j,B.fieldPath))switch(A.op){case"==":case"in":$.set(B.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return $.set(B.fieldPath.canonicalString(),A.value),Array.from($.values())}return null}(h,d),v=function(j,M){const $=[];let B=!0;for(const A of oc(M)){const R=A.kind===0?aC(j,A.fieldPath,j.startAt):lC(j,A.fieldPath,j.startAt);$.push(R.value),B&&(B=R.inclusive)}return new zd($,B)}(h,d),w=function(j,M){const $=[];let B=!0;for(const A of oc(M)){const R=A.kind===0?lC(j,A.fieldPath,j.endAt):aC(j,A.fieldPath,j.endAt);$.push(R.value),B&&(B=R.inclusive)}return new zd($,B)}(h,d),k=this.On(d,h,v),_=this.On(d,h,w),E=this.Nn(d,h,g),C=this.Bn(d.indexId,p,k,v.inclusive,_,w.inclusive,E);return ee.forEach(C,P=>n.Y(P,t.limit).next(j=>{j.forEach(M=>{const $=Ae.fromSegments(M.documentKey);o.has($)||(o=o.add($),c.push($))})}))}).next(()=>c)}return ee.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=SW(Wt.create(e.filters,"and")).map(n=>I_(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,s,i,o,c){const d=(t!=null?t.length:1)*Math.max(n.length,i.length),h=d/(t!=null?t.length:1),p=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/h]):Tg,w=this.kn(e,v,n[g%h],s),k=this.qn(e,v,i[g%h],o),_=c.map(E=>this.kn(e,v,E,!0));p.push(...this.createRange(w,k,_))}return p}kn(e,t,n,s){const i=new hc(e,Ae.empty(),t,n);return s?i:i.An()}qn(e,t,n,s){const i=new hc(e,Ae.empty(),t,n);return s?i.An():i}xn(e,t){const n=new IC(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const c of i)n.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(e,t){let n=2;const s=this.Mn(t);return ee.forEach(s,i=>this.xn(e,i).next(o=>{o?n!==0&&o.fields.length<function(d){let h=new qt(dr.comparator),p=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:h=h.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(p?1:0)}(i)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&n===2?1:n)}Qn(e,t){const n=new pf;for(const s of oc(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=n.Pn(s.kind);dc.Kt.Dt(i,o)}return n.un()}Ln(e){const t=new pf;return dc.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new pf;return dc.Kt.Dt(xp(this.databaseId,t),n.Pn(function(i){const o=oc(i);return o.length===0?0:o[o.length-1].kind}(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new pf);let i=0;for(const o of oc(e)){const c=n[i++];for(const d of s)if(this.Un(t,o.fieldPath)&&_p(c))s=this.Kn(s,o,c);else{const h=d.Pn(o.kind);dc.Kt.Dt(c,h)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of s){const d=new pf;d.seed(c.un()),dc.Kt.Dt(o,d.Pn(t.kind)),i.push(d)}return i}Un(e,t){return!!e.filters.find(n=>n instanceof St&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=mf(e),s=Bu(e);return(t?n.J(x_,IDBKeyRange.bound(t,t)):n.J()).next(i=>{const o=[];return ee.forEach(i,c=>s.get([c.indexId,this.uid]).next(d=>{o.push(function(p,g){const v=g?new fp(g.sequenceNumber,new ks(Fc(g.readTime),new Ae(Gi(g.documentKey)),g.largestBatchId)):fp.empty(),w=p.fields.map(([k,_])=>new Gg(dr.fromServerFormat(k),_));return new by(p.indexId,p.collectionGroup,w,v)}(c,d))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:it(n.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const s=mf(e),i=Bu(e);return this.Gn(e).next(o=>s.J(x_,IDBKeyRange.bound(t,t)).next(c=>ee.forEach(c,d=>i.put(_C(d.indexId,this.uid,o,n)))))}updateIndexEntries(e,t){const n=new Map;return ee.forEach(t,(s,i)=>{const o=n.get(s.collectionGroup);return(o?ee.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(c=>(n.set(s.collectionGroup,c),ee.forEach(c,d=>this.zn(e,s,d).next(h=>{const p=this.jn(i,d);return h.isEqual(p)?ee.resolve():this.Jn(e,i,d,h,p)}))))})}Hn(e,t,n,s){return $u(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return $u(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=$u(e);let i=new qt(Ra);return s.ee({index:kj,range:IDBKeyRange.only([n.indexId,this.uid,ty(this.$n(n,t))])},(o,c)=>{i=i.add(new hc(n.indexId,t,kC(c.arrayValue),kC(c.directionalValue)))}).next(()=>i)}jn(e,t){let n=new qt(Ra);const s=this.Qn(t,e);if(s==null)return n;const i=v_(t);if(i!=null){const o=e.data.field(i.fieldPath);if(_p(o))for(const c of o.arrayValue.values||[])n=n.add(new hc(t.indexId,e.key,this.Ln(c),s))}else n=n.add(new hc(t.indexId,e.key,Tg,s));return n}Jn(e,t,n,s,i){Ee(PC,"Updating index entries for document '%s'",t.key);const o=[];return function(d,h,p,g,v){const w=d.getIterator(),k=h.getIterator();let _=Fu(w),E=Fu(k);for(;_||E;){let C=!1,P=!1;if(_&&E){const j=p(_,E);j<0?P=!0:j>0&&(C=!0)}else _!=null?P=!0:C=!0;C?(g(E),E=Fu(k)):P?(v(_),_=Fu(w)):(_=Fu(w),E=Fu(k))}}(s,i,Ra,c=>{o.push(this.Hn(e,t,n,c))},c=>{o.push(this.Yn(e,t,n,c))}),ee.waitFor(o)}Gn(e){let t=1;return Bu(e).ee({index:Sj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((o,c)=>Ra(o,c)).filter((o,c,d)=>!c||Ra(o,d[c-1])!==0);const s=[];s.push(e);for(const o of n){const c=Ra(o,e),d=Ra(o,t);if(c===0)s[0]=e.An();else if(c>0&&d<0)s.push(o),s.push(o.An());else if(d>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const c=s[o].Vn(this.uid,Tg,Ae.empty()),d=s[o+1].Vn(this.uid,Tg,Ae.empty());i.push(IDBKeyRange.bound(c,d))}return i}Zn(e,t){return Ra(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RC)}getMinOffset(e,t){return ee.mapArray(this.Mn(t),n=>this.xn(e,n).next(s=>s||ze(44426))).next(RC)}}function AC(r){return Yr(r,yp)}function $u(r){return Yr(r,Wf)}function mf(r){return Yr(r,dE)}function Bu(r){return Yr(r,zf)}function RC(r){Ke(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;lE(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ks(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P2=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(r,e,t){const n=r.store(ci),s=r.store(Ld),i=[],o=IDBKeyRange.only(t.batchId);let c=0;const d=n.ee({range:o},(p,g,v)=>(c++,v.delete()));i.push(d.next(()=>{Ke(c===1,47070,{batchId:t.batchId})}));const h=[];for(const p of t.mutations){const g=bj(e,p.key.path,t.batchId);i.push(s.delete(g)),h.push(p.key)}return ee.waitFor(i).next(()=>h)}function Oy(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ze(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(P2,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class Yv{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Ke(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Yv(i,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).ee({index:pc,range:n},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,n,s){const i=ld(e),o=Na(e);return o.add({}).next(c=>{Ke(typeof c=="number",49019);const d=new wE(c,t,n,s),h=function(w,k,_){const E=_.baseMutations.map(P=>Ry(w.yt,P)),C=_.mutations.map(P=>Ry(w.yt,P));return{userId:k,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:E,mutations:C}}(this.serializer,this.userId,d),p=[];let g=new qt((v,w)=>it(v.canonicalString(),w.canonicalString()));for(const v of s){const w=bj(this.userId,v.key.path,c);g=g.add(v.key.path.popLast()),p.push(o.put(h)),p.push(i.put(w,r7))}return g.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Xn[c]=d.keys()}),ee.waitFor(p).next(()=>d)})}lookupMutationBatch(e,t){return Na(e).get(t).next(n=>n?(Ke(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),uc(this.serializer,n)):null)}er(e,t){return this.Xn[t]?ee.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Na(e).ee({index:pc,range:s},(o,c,d)=>{c.userId===this.userId&&(Ke(c.batchId>=n,47524,{tr:n}),i=uc(this.serializer,c)),d.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=_c;return Na(e).ee({index:pc,range:t,reverse:!0},(s,i,o)=>{n=i.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,_c],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).J(pc,t).next(n=>n.map(s=>uc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Kg(this.userId,t.path),s=IDBKeyRange.lowerBound(n),i=[];return ld(e).ee({range:s},(o,c,d)=>{const[h,p,g]=o,v=Gi(p);if(h===this.userId&&t.path.isEqual(v))return Na(e).get(g).next(w=>{if(!w)throw ze(61480,{nr:o,batchId:g});Ke(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:g}),i.push(uc(this.serializer,w))});d.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qt(it);const s=[];return t.forEach(i=>{const o=Kg(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=ld(e).ee({range:c},(h,p,g)=>{const[v,w,k]=h,_=Gi(w);v===this.userId&&i.path.isEqual(_)?n=n.add(k):g.done()});s.push(d)}),ee.waitFor(s).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,i=Kg(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new qt(it);return ld(e).ee({range:o},(d,h,p)=>{const[g,v,w]=d,k=Gi(v);g===this.userId&&n.isPrefixOf(k)?k.length===s&&(c=c.add(w)):p.done()}).next(()=>this.rr(e,c))}rr(e,t){const n=[],s=[];return t.forEach(i=>{s.push(Na(e).get(i).next(o=>{if(o===null)throw ze(35274,{batchId:i});Ke(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),n.push(uc(this.serializer,o))}))}),ee.waitFor(s).next(()=>n)}removeMutationBatch(e,t){return A2(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ee.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ld(e).ee({range:n},(i,o,c)=>{if(i[0]===this.userId){const d=Gi(i[1]);s.push(d)}else c.done()}).next(()=>{Ke(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return R2(e,this.userId,t)}_r(e){return N2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:_c,lastStreamToken:""})}}function R2(r,e,t){const n=Kg(e,t.path),s=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return ld(r).ee({range:i,X:!0},(c,d,h)=>{const[p,g,v]=c;p===e&&g===s&&(o=!0),h.done()}).next(()=>o)}function Na(r){return Yr(r,ci)}function ld(r){return Yr(r,Ld)}function N2(r){return Yr(r,mp)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uc(0)}static cr(){return new Uc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new Uc(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>Je.fromTimestamp(new Ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zu(e).delete(t.targetId)).next(()=>this.lr(e)).next(n=>(Ke(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n)))}removeTargets(e,t,n){let s=0;const i=[];return zu(e).ee((o,c)=>{const d=Cf(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,i.push(this.removeTargetData(e,d)))}).next(()=>ee.waitFor(i)).next(()=>s)}forEachTarget(e,t){return zu(e).ee((n,s)=>{const i=Cf(s);t(i)})}lr(e){return jC(e).get(Sy).next(t=>(Ke(t!==null,2888),t))}hr(e,t){return jC(e).put(Sy,t)}Pr(e,t){return zu(e).put(S2(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const n=Lc(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return zu(e).ee({range:s,index:Tj},(o,c,d)=>{const h=Cf(c);Hp(t,h.target)&&(i=h,d.done())}).next(()=>i)}addMatchingKeys(e,t,n){const s=[],i=za(e);return t.forEach(o=>{const c=Rn(o.path);s.push(i.put({targetId:n,path:c})),s.push(this.referenceDelegate.addReference(e,n,o))}),ee.waitFor(s)}removeMatchingKeys(e,t,n){const s=za(e);return ee.forEach(t,i=>{const o=Rn(i.path);return ee.waitFor([s.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,t){const n=za(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=za(e);let i=vt();return s.ee({range:n,X:!0},(o,c,d)=>{const h=Gi(o[1]),p=new Ae(h);i=i.add(p)}).next(()=>i)}containsKey(e,t){const n=Rn(t.path),s=IDBKeyRange.bound([n],[mj(n)],!1,!0);let i=0;return za(e).ee({index:uE,X:!0,range:s},([o,c],d,h)=>{o!==0&&(i++,h.done())}).next(()=>i>0)}At(e,t){return zu(e).get(t).next(n=>n?Cf(n):null)}}function zu(r){return Yr(r,Vd)}function jC(r){return Yr(r,bc)}function za(r){return Yr(r,Fd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="LruGarbageCollector",PW=1048576;function DC([r,e],[t,n]){const s=it(r,t);return s===0?it(e,n):s}class AW{constructor(e){this.Ir=e,this.buffer=new qt(DC),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();DC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(OC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?Ee(OC,"Ignoring IndexedDB error during garbage collection: ",t):await Jc(t)}await this.Vr(3e5)})}}class RW{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Us.ce);const n=new AW(t);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(NC)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NC):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,o=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(n=g,c=Date.now(),this.removeTargets(e,n,t))).next(g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(g=>(h=Date.now(),sd()<=Tt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g})))}}function O2(r,e){return new RW(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,t){this.db=e,this.garbageCollector=O2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(n,s)=>t(s))}addReference(e,t,n){return Sg(e,n)}removeReference(e,t,n){return Sg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Sg(e,t)}br(e,t){return function(s,i){let o=!1;return N2(s).te(c=>R2(s,c,i).next(d=>(d&&(o=!0),ee.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,c)=>{if(c<=t){const d=this.br(e,o).next(h=>{if(!h)return i++,n.getEntry(e,o).next(()=>(n.removeEntry(o,Je.min()),za(e).delete(function(g){return[0,Rn(g.path)]}(o))))});s.push(d)}}).next(()=>ee.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Sg(e,t)}Sr(e,t){const n=za(e);let s,i=Us.ce;return n.ee({index:uE},([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==Us.ce&&t(new Ae(Gi(s)),i),i=h,s=d):i=Us.ce}).next(()=>{i!==Us.ce&&t(new Ae(Gi(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sg(r,e){return za(r).put(function(n,s){return{targetId:0,path:Rn(n.path),sequenceNumber:s}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ee.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return rc(e).put(n)}removeEntry(e,t,n){return rc(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ny(o),c[c.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=yr.newInvalidDocument(t);return rc(e).ee({index:Yg,range:IDBKeyRange.only(gf(t))},(s,i)=>{n=this.Cr(t,i)}).next(()=>n)}vr(e,t){let n={size:0,document:yr.newInvalidDocument(t)};return rc(e).ee({index:Yg,range:IDBKeyRange.only(gf(t))},(s,i)=>{n={document:this.Cr(t,i),size:Oy(i)}}).next(()=>n)}getEntries(e,t){let n=Es();return this.Fr(e,t,(s,i)=>{const o=this.Cr(s,i);n=n.insert(s,o)}).next(()=>n)}Mr(e,t){let n=Es(),s=new ar(Ae.comparator);return this.Fr(e,t,(i,o)=>{const c=this.Cr(i,o);n=n.insert(i,c),s=s.insert(i,Oy(o))}).next(()=>({documents:n,Or:s}))}Fr(e,t,n){if(t.isEmpty())return ee.resolve();let s=new qt(VC);t.forEach(d=>s=s.add(d));const i=IDBKeyRange.bound(gf(s.first()),gf(s.last())),o=s.getIterator();let c=o.getNext();return rc(e).ee({index:Yg,range:i},(d,h,p)=>{const g=Ae.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&VC(c,g)<0;)n(c,null),c=o.getNext();c&&c.isEqual(g)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.j(gf(c)):p.done()}).next(()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,n,s,i){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),Ny(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rc(e).J(IDBKeyRange.bound(c,d,!0)).next(h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Es();for(const g of h){const v=this.Cr(Ae.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Kp(t,v)||s.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,n,s){let i=Es();const o=LC(t,n),c=LC(t,ks.max());return rc(e).ee({index:Ej,range:IDBKeyRange.bound(o,c,!0)},(d,h,p)=>{const g=this.Cr(Ae.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(g.key,g),i.size===s&&p.done()}).next(()=>i)}newChangeBuffer(e){return new OW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return MC(e).get(w_).next(t=>(Ke(!!t,20021),t))}Dr(e,t){return MC(e).put(w_,t)}Cr(e,t){if(t){const n=vW(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Je.min())))return n}return yr.newInvalidDocument(e)}}function M2(r){return new jW(r)}class OW extends D2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new na(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const t=[];let n=0,s=new qt((i,o)=>it(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const c=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=wC(this.Nr.serializer,o);s=s.add(i.path.popLast());const h=Oy(d);n+=h-c.size,t.push(this.Nr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=wC(this.Nr.serializer,o.convertToNoDocument(Je.min()));t.push(this.Nr.addEntry(e,i,d))}}),s.forEach(i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Nr.updateMetadata(e,n)),ee.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:n,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:n.get(i).readTime})}),n))}}function MC(r){return Yr(r,gp)}function rc(r){return Yr(r,Ty)}function gf(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LC(r,e){const t=e.documentKey.path.toArray();return[r,Ny(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VC(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<n.length-2;++i)if(s=it(t[i],n[i]),s)return s;return s=it(t.length,n.length),s||(s=it(t[t.length-2],n[n.length-2]),s||it(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&Kf(n.mutation,s,ss.empty(),Ft.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,vt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=vt()){const s=Ki();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(i=>{let o=kf();return i.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=Ki();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,vt()))}populateOverlays(e,t,n){const s=[];return n.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,n,s){let i=Es();const o=Gf(),c=function(){return Gf()}();return t.forEach((d,h)=>{const p=n.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof sa)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Kf(p.mutation,h,p.mutation.getFieldMask(),Ft.now())):o.set(h.key,ss.empty())}),this.recalculateAndSaveOverlays(e,i).next(d=>(d.forEach((h,p)=>o.set(h,p)),t.forEach((h,p)=>c.set(h,new DW(p,o.get(h)??null))),c))}recalculateAndSaveOverlays(e,t){const n=Gf();let s=new ar((o,c)=>o-c),i=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(d=>{const h=t.get(d);if(h===null)return;let p=n.get(d)||ss.empty();p=c.applyToLocalView(h,p),n.set(d,p);const g=(s.get(c.batchId)||vt()).add(d);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,g=e2();p.forEach(v=>{if(!i.has(v)){const w=a2(t.get(v),n.get(v));w!==null&&g.set(v,w),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ee.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):ee.resolve(Ki());let c=hp,d=i;return o.next(h=>ee.forEach(h,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(p)?ee.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{d=d.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,d,h,vt())).next(p=>({batchId:c,changes:Zj(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(n=>{let s=kf();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let o=kf();return this.indexManager.getCollectionParents(e,i).next(c=>ee.forEach(c,d=>{const h=function(g,v){return new fh(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(p=>{p.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s))).next(o=>{i.forEach((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,yr.newInvalidDocument(p)))});let c=kf();return o.forEach((d,h)=>{const p=i.get(d);p!==void 0&&Kf(p.mutation,h,ss.empty(),Ft.now()),Kp(t,h)&&(c=c.insert(d,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:qn(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(s){return{name:s.name,query:k2(s.bundledQuery),readTime:qn(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.overlays=new ar(Ae.comparator),this.qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ki();return ee.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,i)=>{this.St(e,t,i)}),ee.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),ee.resolve()}getOverlaysForCollection(e,t,n){const s=Ki(),i=t.length+1,o=new Ae(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&s.set(d.getKey(),d)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new ar((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Ki(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Ki(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return ee.resolve(c)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new _E(t,n));let i=this.qr.get(t);i===void 0&&(i=vt(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(){this.sessionToken=Vr.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.Qr=new qt(en.$r),this.Ur=new qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new en(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new Ae(new Vt([])),n=new en(t,e),s=new en(t,e+1),i=[];return this.Ur.forEachInRange([n,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new Vt([])),n=new en(t,e),s=new en(t,e+1);let i=vt();return this.Ur.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new en(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||it(e.Yr,t.Yr)}static Kr(e,t){return it(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qt(en.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wE(i,t,n,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new en(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,t){return ee.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),i=s<0?0:s;return ee.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?_c:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new en(t,0),s=new en(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),ee.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qt(it);return t.forEach(s=>{const i=new en(s,0),o=new en(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{n=n.add(c.Yr)})}),ee.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;Ae.isDocumentKey(i)||(i=i.child(""));const o=new en(new Ae(i),0);let c=new qt(it);return this.Zr.forEachWhile(d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Yr)),!0)},o),ee.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ee.forEach(t.mutations,s=>{const i=new en(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new en(t,0),s=this.Zr.firstAfterOrEqual(n);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.ri=e,this.docs=function(){return new ar(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ee.resolve(n?n.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let n=Es();return t.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():yr.newInvalidDocument(s))}),ee.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Es();const o=t.path,c=new Ae(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||lE(vj(p),n)<=0||(s.has(p.key)||Kp(t,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ee.resolve(i)}getAllFromCollectionGroup(e,t,n,s){ze(9500)}ii(e,t){return ee.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new $W(this)}getSize(e){return ee.resolve(this.size)}}class $W extends D2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),ee.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.persistence=e,this.si=new na(t=>Lc(t),Hp),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new kE,this.targetCount=0,this.ai=Uc.ur()}forEachTarget(e,t){return this.si.forEach((n,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ee.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Pr(t),ee.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(i).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ee.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ee.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ee.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ee.resolve(n)}containsKey(e,t){return ee.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t){this.ui={},this.overlays={},this.ci=new Us(0),this.li=!1,this.li=!0,this.hi=new VW,this.referenceDelegate=e(this),this.Pi=new BW(this),this.indexManager=new kW,this.remoteDocumentCache=function(s){return new UW(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new T2(t),this.Ii=new MW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new FW(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ee("MemoryPersistence","Starting transaction:",e);const s=new zW(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,t){return ee.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class zW extends xj{constructor(e){super(),this.currentSequenceNumber=e}}class Qv{constructor(e){this.persistence=e,this.Ri=new kE,this.Vi=null}static mi(e){return new Qv(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ee.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,n=>{const s=Ae.fromPath(n);return this.gi(e,s).next(i=>{i||t.removeEntry(s,Je.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dy{constructor(e,t){this.persistence=e,this.pi=new na(n=>Rn(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=O2(this,t)}static mi(e,t){return new Dy(e,t)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return ee.forEach(this.pi,(n,s)=>this.br(e,n,s).next(i=>i?ee.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,t).next(c=>{c||(n++,i.removeEntry(o,Je.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jg(e.data.value)),t}br(e,t,n){return ee.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ee.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e){this.serializer=e}k(e,t,n,s){const i=new Mv("createOrUpgrade",t);n<1&&s>=1&&(function(d){d.createObjectStore(qp)}(e),function(d){d.createObjectStore(mp,{keyPath:t7}),d.createObjectStore(ci,{keyPath:Y1,autoIncrement:!0}).createIndex(pc,Q1,{unique:!0}),d.createObjectStore(Ld)}(e),FC(e),function(d){d.createObjectStore(ac)}(e));let o=ee.resolve();return n<3&&s>=3&&(n!==0&&(function(d){d.deleteObjectStore(Fd),d.deleteObjectStore(Vd),d.deleteObjectStore(bc)}(e),FC(e)),o=o.next(()=>function(d){const h=d.store(bc),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Je.min().toTimestamp(),targetCount:0};return h.put(Sy,p)}(i))),n<4&&s>=4&&(n!==0&&(o=o.next(()=>function(d,h){return h.store(ci).J().next(g=>{d.deleteObjectStore(ci),d.createObjectStore(ci,{keyPath:Y1,autoIncrement:!0}).createIndex(pc,Q1,{unique:!0});const v=h.store(ci),w=g.map(k=>v.put(k));return ee.waitFor(w)})}(e,i))),o=o.next(()=>{(function(d){d.createObjectStore(Ud,{keyPath:u7})})(e)})),n<5&&s>=5&&(o=o.next(()=>this.yi(i))),n<6&&s>=6&&(o=o.next(()=>(function(d){d.createObjectStore(gp)}(e),this.wi(i)))),n<7&&s>=7&&(o=o.next(()=>this.Si(i))),n<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),n<9&&s>=9&&(o=o.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(o=o.next(()=>this.Di(i))),n<11&&s>=11&&(o=o.next(()=>{(function(d){d.createObjectStore(Vv,{keyPath:d7})})(e),function(d){d.createObjectStore(Fv,{keyPath:h7})}(e)})),n<12&&s>=12&&(o=o.next(()=>{(function(d){const h=d.createObjectStore(Uv,{keyPath:w7});h.createIndex(__,x7,{unique:!1}),h.createIndex(Ij,_7,{unique:!1})})(e)})),n<13&&s>=13&&(o=o.next(()=>function(d){const h=d.createObjectStore(Ty,{keyPath:n7});h.createIndex(Yg,s7),h.createIndex(Ej,i7)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ac))),n<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),n<15&&s>=15&&(o=o.next(()=>function(d){d.createObjectStore(dE,{keyPath:f7,autoIncrement:!0}).createIndex(x_,p7,{unique:!1}),d.createObjectStore(zf,{keyPath:m7}).createIndex(Sj,g7,{unique:!1}),d.createObjectStore(Wf,{keyPath:y7}).createIndex(kj,v7,{unique:!1})}(e))),n<16&&s>=16&&(o=o.next(()=>{t.objectStore(zf).clear()}).next(()=>{t.objectStore(Wf).clear()})),n<17&&s>=17&&(o=o.next(()=>{(function(d){d.createObjectStore(hE,{keyPath:b7})})(e)})),n<18&&s>=18&&uN()&&(o=o.next(()=>{t.objectStore(zf).clear()}).next(()=>{t.objectStore(Wf).clear()})),o}wi(e){let t=0;return e.store(ac).ee((n,s)=>{t+=Oy(s)}).next(()=>{const n={byteSize:t};return e.store(gp).put(w_,n)})}yi(e){const t=e.store(mp),n=e.store(ci);return t.J().next(s=>ee.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,_c],[i.userId,i.lastAcknowledgedBatchId]);return n.J(pc,o).next(c=>ee.forEach(c,d=>{Ke(d.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=uc(this.serializer,d);return A2(e,i.userId,h).next(()=>{})}))}))}Si(e){const t=e.store(Fd),n=e.store(ac);return e.store(bc).get(Sy).next(s=>{const i=[];return n.ee((o,c)=>{const d=new Vt(o),h=function(g){return[0,Rn(g)]}(d);i.push(t.get(h).next(p=>p?ee.resolve():(g=>t.put({targetId:0,path:Rn(g),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>ee.waitFor(i))})}bi(e,t){e.createObjectStore(yp,{keyPath:c7});const n=t.store(yp),s=new SE,i=o=>{if(s.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Rn(d)})}};return t.store(ac).ee({X:!0},(o,c)=>{const d=new Vt(o);return i(d.popLast())}).next(()=>t.store(Ld).ee({X:!0},([o,c,d],h)=>{const p=Gi(c);return i(p.popLast())}))}Di(e){const t=e.store(Vd);return t.ee((n,s)=>{const i=Cf(s),o=S2(this.serializer,i);return t.put(o)})}Ci(e,t){const n=t.store(ac),s=[];return n.ee((i,o)=>{const c=t.store(Ty),d=function(g){return g.document?new Ae(Vt.fromString(g.document.name).popFirst(5)):g.noDocument?Ae.fromSegments(g.noDocument.path):g.unknownDocument?Ae.fromSegments(g.unknownDocument.path):ze(36783)}(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(c.put(h))}).next(()=>ee.waitFor(s))}Fi(e,t){const n=t.store(ci),s=M2(this.serializer),i=new IE(Qv.mi,this.serializer.yt);return n.J().next(o=>{const c=new Map;return o.forEach(d=>{let h=c.get(d.userId)??vt();uc(this.serializer,d).keys().forEach(p=>h=h.add(p)),c.set(d.userId,h)}),ee.forEach(c,(d,h)=>{const p=new ln(h),g=Kv.wt(this.serializer,p),v=i.getIndexManager(p),w=Yv.wt(p,this.serializer,v,i.referenceDelegate);return new L2(s,w,g,v).recalculateAndSaveOverlaysForDocumentKeys(new b_(t,Us.ce),d).next()})})}}function FC(r){r.createObjectStore(Fd,{keyPath:a7}).createIndex(uE,l7,{unique:!0}),r.createObjectStore(Vd,{keyPath:"targetId"}).createIndex(Tj,o7,{unique:!0}),r.createObjectStore(bc)}const ja="IndexedDbPersistence",Ex=18e5,Tx=5e3,Sx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qW="main";class CE{constructor(e,t,n,s,i,o,c,d,h,p,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=i,this.window=o,this.document=c,this.xi=h,this.Oi=p,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!CE.v())throw new ke(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NW(this,s),this.$i=t+qW,this.serializer=new T2(d),this.Ui=new ol(this.$i,this.Ni,new WW(this.serializer)),this.hi=new xW,this.Pi=new CW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M2(this.serializer),this.Ii=new wW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Bn(ja,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(le.FAILED_PRECONDITION,Sx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Us(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(xl(e))return Ee(ja,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee(ja,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return yf(e).get(Vu).next(t=>ee.resolve(this.es(t)))}ts(e){return kg(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ex)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Yr(t,Ud);return n.J().next(s=>{const i=this.ss(s,Ex),o=s.filter(c=>i.indexOf(c)===-1);return ee.forEach(o,c=>n.delete(c.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ee.resolve(!0):yf(e).get(Vu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Tx)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ke(le.FAILED_PRECONDITION,Sx);return!1}}return!(!this.networkEnabled||!this.inForeground)||kg(e).J().next(n=>this.ss(n,Tx).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(i||o&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ee(ja,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[qp,Ud],e=>{const t=new b_(e,Us.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>kg(e).J().next(t=>this.ss(t,Ex).map(n=>n.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Yv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IW(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ee(ja,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(d){return d===18?S7:d===17?Rj:d===16?T7:d===15?fE:d===14?Aj:d===13?Pj:d===12?E7:d===11?Cj:void ze(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,c=>(o=new b_(c,this.ci?this.ci.next():Us.ce),t==="readwrite-primary"?this.Hi(o).next(d=>!!d||this.Yi(o)).next(d=>{if(!d)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ke(le.FAILED_PRECONDITION,wj);return n(o)}).next(d=>this.Xi(o).next(()=>d)):this.Is(o).next(()=>n(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}Is(e){return yf(e).get(Vu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Tx)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(le.FAILED_PRECONDITION,Sx)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yf(e).put(Vu,t)}static v(){return ol.v()}Zi(e){const t=yf(e);return t.get(Vu).next(n=>this.es(n)?(Ee(ja,"Releasing primary lease."),t.delete(Vu)):ee.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Bn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;cN()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Ee(ja,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Bn(ja,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yf(r){return Yr(r,qp)}function kg(r){return Yr(r,Ud)}function HW(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=vt(),s=vt();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new PE(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cN()?8:_j(Hr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.ys(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,t,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new GW;return this.Ss(e,t,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,t,o,c.size)})}).next(()=>i.result)}bs(e,t,n,s){return n.documentReadCount<this.fs?(sd()<=Tt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",id(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(sd()<=Tt.DEBUG&&Ee("QueryEngine","Query:",id(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(sd()<=Tt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",id(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(t))):ee.resolve())}ys(e,t){if(cC(t))return ee.resolve(null);let n=$s(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Py(t,null,"F"),n=$s(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=vt(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const h=this.Ds(t,c);return this.Cs(t,h,o,d.readTime)?this.ys(e,Py(t,null,"F")):this.vs(e,h,t,d)}))})))}ws(e,t,n,s){return cC(t)||s.isEqual(Je.min())?ee.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,s)?ee.resolve(null):(sd()<=Tt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),id(t)),this.vs(e,o,t,Kz(s,hp)).next(c=>c))})}Ds(e,t){let n=new qt(Jj(e));return t.forEach((s,i)=>{Kp(e,i)&&(n=n.add(i))}),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,n){return sd()<=Tt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",id(t)),this.ps.getDocumentsMatchingQuery(e,t,ks.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="LocalStore",KW=3e8;class YW{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new ar(it),this.xs=new na(i=>Lc(i),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new L2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function F2(r,e,t,n){return new YW(r,e,t,n)}async function U2(r,e){const t=ot(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],c=[];let d=vt();for(const h of s){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(n,d).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:c}))})})}function QW(r,e){const t=ot(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,h,p){const g=h.batch,v=g.keys();let w=ee.resolve();return v.forEach(k=>{w=w.next(()=>p.getEntry(d,k)).next(_=>{const E=h.docVersions.get(k);Ke(E!==null,48541),_.version.compareTo(E)<0&&(g.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),p.addEntry(_)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(d,g))}(t,n,e,i).next(()=>i.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=vt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function $2(r){const e=ot(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function JW(r,e){const t=ot(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach((p,g)=>{const v=s.get(g);if(!v)return;c.push(t.Pi.removeMatchingKeys(i,p.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(i,p.addedDocuments,g)));let w=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(Vr.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,n)),s=s.insert(g,w),function(_,E,C){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=KW?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,w,p)&&c.push(t.Pi.updateTargetData(i,w))});let d=Es(),h=vt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(XW(i,o,e.documentUpdates).next(p=>{d=p.ks,h=p.qs})),!n.isEqual(Je.min())){const p=t.Pi.getLastRemoteSnapshotVersion(i).next(g=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));c.push(p)}return ee.waitFor(c).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,d,h)).next(()=>d)}).then(i=>(t.Ms=s,i))}function XW(r,e,t){let n=vt(),s=vt();return t.forEach(i=>n=n.add(i)),e.getEntries(r,n).next(i=>{let o=Es();return t.forEach((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Je.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):Ee(AE,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)}),{ks:o,qs:s}})}function ZW(r,e){const t=ot(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=_c),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function eq(r,e){const t=ot(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Pi.getTargetData(n,e).next(i=>i?(s=i,ee.resolve(s)):t.Pi.allocateTargetId(n).next(o=>(s=new $o(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function M_(r,e,t){const n=ot(r),s=n.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xl(o))throw o;Ee(AE,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function UC(r,e,t){const n=ot(r);let s=Je.min(),i=vt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(d,h,p){const g=ot(d),v=g.xs.get(p);return v!==void 0?ee.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,p)}(n,o,$s(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,c.targetId).next(d=>{i=d})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,t?s:Je.min(),t?i:vt())).next(c=>(tq(n,U7(e),c),{documents:c,Qs:i})))}function tq(r,e,t){let n=r.Os.get(e)||Je.min();t.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),r.Os.set(e,n)}class $C{constructor(){this.activeTargetIds=H7()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(){this.Mo=new $C,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $C,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="ConnectivityMonitor";class zC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(BC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(BC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig=null;function L_(){return Ig===null?Ig=function(){return 268435456+Math.round(2147483648*Math.random())}():Ig++,"0x"+Ig.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="RestConnection",nq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===ky?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,i){const o=L_(),c=this.zo(e,t.toUriEncodedString());Ee(kx,`Sending RPC '${e}' ${o}:`,c,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,i);const{host:h}=new URL(c),p=wl(h);return this.Jo(e,c,d,n,p).then(g=>(Ee(kx,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Dc(kx,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",n),g})}Ho(e,t,n,s,i,o){return this.Go(e,t,n,s,i)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}zo(e,t){const n=nq[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class oq extends sq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,i){const o=L_();return new Promise((c,d)=>{const h=new lj;h.setWithCredentials(!0),h.listenOnce(cj.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Hg.NO_ERROR:const g=h.getResponseJson();Ee(Sn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Hg.TIMEOUT:Ee(Sn,`RPC '${e}' ${o} timed out`),d(new ke(le.DEADLINE_EXCEEDED,"Request time out"));break;case Hg.HTTP_ERROR:const v=h.getStatus();if(Ee(Sn,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const _=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(P)>=0?P:le.UNKNOWN}(k.status);d(new ke(_,k.message))}else d(new ke(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ke(le.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ee(Sn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Ee(Sn,`RPC '${e}' ${o} sending request:`,s),h.send(t,"POST",p,n,15)})}T_(e,t,n){const s=L_(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hj(),c=dj(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const p=i.join("");Ee(Sn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const g=o.createWebChannel(p,d);this.I_(g);let v=!1,w=!1;const k=new iq({Yo:E=>{w?Ee(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(v||(Ee(Sn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),Ee(Sn,`RPC '${e}' stream ${s} sending:`,E),g.send(E))},Zo:()=>g.close()}),_=(E,C,P)=>{E.listen(C,j=>{try{P(j)}catch(M){setTimeout(()=>{throw M},0)}})};return _(g,Sf.EventType.OPEN,()=>{w||(Ee(Sn,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),_(g,Sf.EventType.CLOSE,()=>{w||(w=!0,Ee(Sn,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(g))}),_(g,Sf.EventType.ERROR,E=>{w||(w=!0,Dc(Sn,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),k.a_(new ke(le.UNAVAILABLE,"The operation could not be completed")))}),_(g,Sf.EventType.MESSAGE,E=>{var C;if(!w){const P=E.data[0];Ke(!!P,16349);const j=P,M=(j==null?void 0:j.error)||((C=j[0])==null?void 0:C.error);if(M){Ee(Sn,`RPC '${e}' stream ${s} received error:`,M);const $=M.status;let B=function(D){const V=Nr[D];if(V!==void 0)return u2(V)}($),A=M.message;B===void 0&&(B=le.INTERNAL,A="Unknown error status: "+$+" with message "+M.message),w=!0,k.a_(new ke(B,A)),g.close()}else Ee(Sn,`RPC '${e}' stream ${s} received:`,P),k.u_(P)}}),_(c,uj.STAT_EVENT,E=>{E.stat===g_.PROXY?Ee(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===g_.NOPROXY&&Ee(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(){return typeof window<"u"?window:null}function ry(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(r){return new lW(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="PersistentStream";class W2{constructor(e,t,n,s,i,o,c,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===t&&this.G_(n,s)},n=>{e(()=>{const s=new ke(le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ee(WC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ee(WC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lq extends W2{constructor(e,t,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dW(this.serializer,e),n=function(i){if(!("targetChange"in i))return Je.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Je.min():o.readTime?qn(o.readTime):Je.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=R_(this.serializer),t.addTarget=function(i,o){let c;const d=o.target;if(c=Iy(d)?{documents:v2(i,d)}:{query:w2(i,d).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=f2(i,o.resumeToken);const h=P_(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Je.min())>0){c.readTime=Kd(i,o.snapshotVersion.toTimestamp());const h=P_(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const n=fW(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=R_(this.serializer),t.removeTarget=e,this.q_(t)}}class cq extends W2{constructor(e,t,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hW(e.writeResults,e.commitTime),n=qn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=R_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>Ry(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{}class dq extends uq{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,A_(t,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(le.UNKNOWN,i.toString())})}Ho(e,t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,A_(t,n),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(le.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class hq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(t),this.aa=!1):Ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="RemoteStore";class fq{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{Xc(this)&&(Ee($c,"Restarting streams for network reachability change."),await async function(d){const h=ot(d);h.Ea.add(4),await Qp(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Xv(h)}(this))})}),this.Ra=new hq(n,s)}}async function Xv(r){if(Xc(r))for(const e of r.da)await e(!0)}async function Qp(r){for(const e of r.da)await e(!1)}function q2(r,e){const t=ot(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),OE(t)?jE(t):mh(t).O_()&&NE(t,e))}function RE(r,e){const t=ot(r),n=mh(t);t.Ia.delete(e),n.O_()&&H2(t,e),t.Ia.size===0&&(n.O_()?n.L_():Xc(t)&&t.Ra.set("Unknown"))}function NE(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mh(r).Y_(e)}function H2(r,e){r.Va.Ue(e),mh(r).Z_(e)}function jE(r){r.Va=new sW({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),mh(r).start(),r.Ra.ua()}function OE(r){return Xc(r)&&!mh(r).x_()&&r.Ia.size>0}function Xc(r){return ot(r).Ea.size===0}function G2(r){r.Va=void 0}async function pq(r){r.Ra.set("Online")}async function mq(r){r.Ia.forEach((e,t)=>{NE(r,e)})}async function gq(r,e){G2(r),OE(r)?(r.Ra.ha(e),jE(r)):r.Ra.set("Unknown")}async function yq(r,e,t){if(r.Ra.set("Online"),e instanceof h2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(r,e)}catch(n){Ee($c,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await My(r,n)}else if(e instanceof ey?r.Va.Ze(e):e instanceof d2?r.Va.st(e):r.Va.tt(e),!t.isEqual(Je.min()))try{const n=await $2(r.localStore);t.compareTo(n)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.Ia.get(h);p&&i.Ia.set(h,p.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,h)=>{const p=i.Ia.get(d);if(!p)return;i.Ia.set(d,p.withResumeToken(Vr.EMPTY_BYTE_STRING,p.snapshotVersion)),H2(i,d);const g=new $o(p.target,d,h,p.sequenceNumber);NE(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){Ee($c,"Failed to raise snapshot:",n),await My(r,n)}}async function My(r,e,t){if(!xl(e))throw e;r.Ea.add(1),await Qp(r),r.Ra.set("Offline"),t||(t=()=>$2(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Ee($c,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Xv(r)})}function K2(r,e){return e().catch(t=>My(r,t,e))}async function Jp(r){const e=ot(r),t=pl(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_c;for(;vq(e);)try{const s=await ZW(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,wq(e,s)}catch(s){await My(e,s)}Y2(e)&&Q2(e)}function vq(r){return Xc(r)&&r.Ta.length<10}function wq(r,e){r.Ta.push(e);const t=pl(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Y2(r){return Xc(r)&&!pl(r).x_()&&r.Ta.length>0}function Q2(r){pl(r).start()}async function xq(r){pl(r).ra()}async function _q(r){const e=pl(r);for(const t of r.Ta)e.ea(t.mutations)}async function bq(r,e,t){const n=r.Ta.shift(),s=xE.from(n,e,t);await K2(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await Jp(r)}async function Eq(r,e){e&&pl(r).X_&&await async function(n,s){if(function(o){return tW(o)&&o!==le.ABORTED}(s.code)){const i=n.Ta.shift();pl(n).B_(),await K2(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Jp(n)}}(r,e),Y2(r)&&Q2(r)}async function qC(r,e){const t=ot(r);t.asyncQueue.verifyOperationInProgress(),Ee($c,"RemoteStore received new credentials");const n=Xc(t);t.Ea.add(3),await Qp(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xv(t)}async function Tq(r,e){const t=ot(r);e?(t.Ea.delete(2),await Xv(t)):e||(t.Ea.add(2),await Qp(t),t.Ra.set("Unknown"))}function mh(r){return r.ma||(r.ma=function(t,n,s){const i=ot(t);return i.sa(),new lq(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Xo:pq.bind(null,r),t_:mq.bind(null,r),r_:gq.bind(null,r),H_:yq.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),OE(r)?jE(r):r.Ra.set("Unknown")):(await r.ma.stop(),G2(r))})),r.ma}function pl(r){return r.fa||(r.fa=function(t,n,s){const i=ot(t);return i.sa(),new cq(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:xq.bind(null,r),r_:Eq.bind(null,r),ta:_q.bind(null,r),na:bq.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await Jp(r)):(await r.fa.stop(),r.Ta.length>0&&(Ee($c,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const o=Date.now()+n,c=new DE(e,t,o,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ME(r,e){if(Bn("AsyncQueue",`${e}: ${r}`),xl(r))return new ke(le.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{static emptySet(e){return new vd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ae.comparator(t.key,n.key):(t,n)=>Ae.comparator(t.key,n.key),this.keyedMap=kf(),this.sortedSet=new ar(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new vd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.ga=new ar(Ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Yd{constructor(e,t,n,s,i,o,c,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,s,i){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new Yd(e,t,vd.emptySet(t),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kq{constructor(){this.queries=GC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=ot(t),i=s.queries;s.queries=GC(),i.forEach((o,c)=>{for(const d of c.Sa)d.onError(n)})})(this,new ke(le.ABORTED,"Firestore shutting down"))}}function GC(){return new na(r=>Qj(r),zv)}async function LE(r,e){const t=ot(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(n=2):(i=new Sq,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const c=ME(o,`Initialization of query '${id(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&FE(t)}async function VE(r,e){const t=ot(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Iq(r,e){const t=ot(r);let n=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(n=!0);o.wa=s}}n&&FE(t)}function Cq(r,e,t){const n=ot(r),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);n.queries.delete(e)}function FE(r){r.Ca.forEach(e=>{e.next()})}var V_,KC;(KC=V_||(V_={})).Ma="default",KC.Cache="cache";class UE{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Yd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==V_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.key=e}}class X2{constructor(e){this.key=e}}class Pq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=vt(),this.mutatedKeys=vt(),this.eu=Jj(e),this.tu=new vd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new HC,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const v=s.get(p),w=Kp(this.query,g)?g:null,k=!!v&&this.mutatedKeys.has(v.key),_=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let E=!1;v&&w?v.data.isEqual(w.data)?k!==_&&(n.track({type:3,doc:w}),E=!0):this.su(v,w)||(n.track({type:2,doc:w}),E=!0,(d&&this.eu(w,d)>0||h&&this.eu(w,h)<0)&&(c=!0)):!v&&w?(n.track({type:0,doc:w}),E=!0):v&&!w&&(n.track({type:1,doc:v}),E=!0,(d||h)&&(c=!0)),E&&(w?(o=o.add(w),i=_?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{tu:o,iu:n,Cs:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,g)=>function(w,k){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:E})}};return _(w)-_(k)}(p.type,g.type)||this.eu(p.doc,g.doc)),this.ou(n),s=s??!1;const c=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,h=d!==this.Za;return this.Za=d,o.length!==0||h?{snapshot:new Yd(this.query,e.tu,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=vt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new X2(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new J2(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=vt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $E="SyncEngine";class Aq{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Rq{constructor(e){this.key=e,this.hu=!1}}class Nq{constructor(e,t,n,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new na(c=>Qj(c),zv),this.Iu=new Map,this.Eu=new Set,this.du=new ar(Ae.comparator),this.Au=new Map,this.Ru=new kE,this.Vu={},this.mu=new Map,this.fu=Uc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jq(r,e,t=!0){const n=sO(r);let s;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Z2(n,e,t,!0),s}async function Oq(r,e){const t=sO(r);await Z2(t,e,!0,!1)}async function Z2(r,e,t,n){const s=await eq(r.localStore,$s(e)),i=s.targetId,o=r.sharedClientState.addLocalQueryTarget(i,t);let c;return n&&(c=await Dq(r,e,i,o==="current",s.resumeToken)),r.isPrimaryClient&&t&&q2(r.remoteStore,s),c}async function Dq(r,e,t,n,s){r.pu=(g,v,w)=>async function(_,E,C,P){let j=E.view.ru(C);j.Cs&&(j=await UC(_.localStore,E.query,!1).then(({documents:A})=>E.view.ru(A,j)));const M=P&&P.targetChanges.get(E.targetId),$=P&&P.targetMismatches.get(E.targetId)!=null,B=E.view.applyChanges(j,_.isPrimaryClient,M,$);return QC(_,E.targetId,B.au),B.snapshot}(r,g,v,w);const i=await UC(r.localStore,e,!0),o=new Pq(e,i.Qs),c=o.ru(i.documents),d=Yp.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),h=o.applyChanges(c,r.isPrimaryClient,d);QC(r,t,h.au);const p=new Aq(e,t,o);return r.Tu.set(e,p),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),h.snapshot}async function Mq(r,e,t){const n=ot(r),s=n.Tu.get(e),i=n.Iu.get(s.targetId);if(i.length>1)return n.Iu.set(s.targetId,i.filter(o=>!zv(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await M_(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&RE(n.remoteStore,s.targetId),F_(n,s.targetId)}).catch(Jc)):(F_(n,s.targetId),await M_(n.localStore,s.targetId,!0))}async function Lq(r,e){const t=ot(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),RE(t.remoteStore,n.targetId))}async function Vq(r,e,t){const n=iO(r);try{const s=await function(o,c){const d=ot(o),h=Ft.now(),p=c.reduce((w,k)=>w.add(k.key),vt());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let k=Es(),_=vt();return d.Ns.getEntries(w,p).next(E=>{k=E,k.forEach((C,P)=>{P.isValidDocument()||(_=_.add(C))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,k)).next(E=>{g=E;const C=[];for(const P of c){const j=Z7(P,g.get(P.key).overlayedDocument);j!=null&&C.push(new sa(P.key,j,$j(j.value.mapValue),An.exists(!0)))}return d.mutationQueue.addMutationBatch(w,h,C,c)}).next(E=>{v=E;const C=E.applyToLocalDocumentSet(g,_);return d.documentOverlayCache.saveOverlays(w,E.batchId,C)})}).then(()=>({batchId:v.batchId,changes:Zj(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,c,d){let h=o.Vu[o.currentUser.toKey()];h||(h=new ar(it)),h=h.insert(c,d),o.Vu[o.currentUser.toKey()]=h}(n,s.batchId,t),await Xp(n,s.changes),await Jp(n.remoteStore)}catch(s){const i=ME(s,"Failed to persist write");t.reject(i)}}async function eO(r,e){const t=ot(r);try{const n=await JW(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Au.get(i);o&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ke(o.hu,14607):s.removedDocuments.size>0&&(Ke(o.hu,42227),o.hu=!1))}),await Xp(t,n,e)}catch(n){await Jc(n)}}function YC(r,e,t){const n=ot(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const d=ot(o);d.onlineState=c;let h=!1;d.queries.forEach((p,g)=>{for(const v of g.Sa)v.va(c)&&(h=!0)}),h&&FE(d)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Fq(r,e,t){const n=ot(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),i=s&&s.key;if(i){let o=new ar(Ae.comparator);o=o.insert(i,yr.newNoDocument(i,Je.min()));const c=vt().add(i),d=new Gv(Je.min(),new Map,new ar(it),o,c);await eO(n,d),n.du=n.du.remove(i),n.Au.delete(e),BE(n)}else await M_(n.localStore,e,!1).then(()=>F_(n,e,t)).catch(Jc)}async function Uq(r,e){const t=ot(r),n=e.batch.batchId;try{const s=await QW(t.localStore,e);rO(t,n,null),tO(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Xp(t,s)}catch(s){await Jc(s)}}async function $q(r,e,t){const n=ot(r);try{const s=await function(o,c){const d=ot(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next(g=>(Ke(g!==null,37113),p=g.keys(),d.mutationQueue.removeMutationBatch(h,g))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>d.localDocuments.getDocuments(h,p))})}(n.localStore,e);rO(n,e,t),tO(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Xp(n,s)}catch(s){await Jc(s)}}function tO(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function rO(r,e,t){const n=ot(r);let s=n.Vu[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function F_(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(n=>{r.Ru.containsKey(n)||nO(r,n)})}function nO(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(RE(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),BE(r))}function QC(r,e,t){for(const n of t)n instanceof J2?(r.Ru.addReference(n.key,e),Bq(r,n)):n instanceof X2?(Ee($E,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||nO(r,n.key)):ze(19791,{wu:n})}function Bq(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Ee($E,"New document in limbo: "+t),r.Eu.add(n),BE(r))}function BE(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ae(Vt.fromString(e)),n=r.fu.next();r.Au.set(n,new Rq(t)),r.du=r.du.insert(t,n),q2(r.remoteStore,new $o($s(Gp(t.path)),n,"TargetPurposeLimboResolution",Us.ce))}}async function Xp(r,e,t){const n=ot(r),s=[],i=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((c,d)=>{o.push(n.pu(d,e,t).then(h=>{var p;if((h||t)&&n.isPrimaryClient){const g=h?!h.fromCache:(p=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){s.push(h);const g=PE.As(d.targetId,h);i.push(g)}}))}),await Promise.all(o),n.Pu.H_(s),await async function(d,h){const p=ot(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ee.forEach(h,v=>ee.forEach(v.Es,w=>p.persistence.referenceDelegate.addReference(g,v.targetId,w)).next(()=>ee.forEach(v.ds,w=>p.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))}catch(g){if(!xl(g))throw g;Ee(AE,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const w=p.Ms.get(v),k=w.snapshotVersion,_=w.withLastLimboFreeSnapshotVersion(k);p.Ms=p.Ms.insert(v,_)}}}(n.localStore,i))}async function zq(r,e){const t=ot(r);if(!t.currentUser.isEqual(e)){Ee($E,"User change. New user:",e.toKey());const n=await U2(t.localStore,e);t.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(d=>{d.reject(new ke(le.CANCELLED,o))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Xp(t,n.Ls)}}function Wq(r,e){const t=ot(r),n=t.Au.get(e);if(n&&n.hu)return vt().add(n.key);{let s=vt();const i=t.Iu.get(e);if(!i)return s;for(const o of i){const c=t.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function sO(r){const e=ot(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=eO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fq.bind(null,e),e.Pu.H_=Iq.bind(null,e.eventManager),e.Pu.yu=Cq.bind(null,e.eventManager),e}function iO(r){const e=ot(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$q.bind(null,e),e}class Tp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return F2(this.persistence,new V2,e.initialUser,this.serializer)}Cu(e){return new IE(Qv.mi,this.serializer)}Du(e){return new B2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tp.provider={build:()=>new Tp};class qq extends Tp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Dy,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new j2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new IE(n=>Dy.mi(n,t),this.serializer)}}class Hq extends Tp{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await iO(this.xu.syncEngine),await Jp(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return F2(this.persistence,new V2,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new j2(n,e.asyncQueue,t)}Mu(e,t){const n=new Xz(t,this.persistence);return new Jz(e.asyncQueue,n)}Cu(e){const t=HW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new CE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,aq(),ry(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new B2}}class Ly{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>YC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=zq.bind(null,this.syncEngine),await Tq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kq}()}createDatastore(e){const t=Jv(e.databaseInfo.databaseId),n=function(i){return new oq(i)}(e.databaseInfo);return function(i,o,c,d){return new dq(i,o,c,d)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,i,o,c){return new fq(n,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>YC(this.syncEngine,t,0),function(){return zC.v()?new zC:new rq}())}createSyncEngine(e,t){return function(s,i,o,c,d,h,p){const g=new Nq(s,i,o,c,d,h);return p&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=ot(s);Ee($c,"RemoteStore shutting down."),i.Ea.add(5),await Qp(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="FirestoreClient";class Gq{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=aE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{Ee(ml,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Ee(ml,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ME(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ix(r,e){r.asyncQueue.verifyOperationInProgress(),Ee(ml,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await U2(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function JC(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Kq(r);Ee(ml,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>qC(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>qC(e.remoteStore,s)),r._onlineComponents=e}async function Kq(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ee(ml,"Using user provided OfflineComponentProvider");try{await Ix(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Dc("Error using user provided cache. Falling back to memory cache: "+t),await Ix(r,new Tp)}}else Ee(ml,"Using default OfflineComponentProvider"),await Ix(r,new qq(void 0));return r._offlineComponents}async function oO(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ee(ml,"Using user provided OnlineComponentProvider"),await JC(r,r._uninitializedComponentsProvider._online)):(Ee(ml,"Using default OnlineComponentProvider"),await JC(r,new Ly))),r._onlineComponents}function Yq(r){return oO(r).then(e=>e.syncEngine)}async function Vy(r){const e=await oO(r),t=e.eventManager;return t.onListen=jq.bind(null,e.syncEngine),t.onUnlisten=Mq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lq.bind(null,e.syncEngine),t}function Qq(r,e,t={}){const n=new Zi;return r.asyncQueue.enqueueAndForget(async()=>function(i,o,c,d,h){const p=new zE({next:v=>{p.Nu(),o.enqueueAndForget(()=>VE(i,g));const w=v.docs.has(c);!w&&v.fromCache?h.reject(new ke(le.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?h.reject(new ke(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new UE(Gp(c.path),p,{includeMetadataChanges:!0,qa:!0});return LE(i,g)}(await Vy(r),r.asyncQueue,e,t,n)),n.promise}function Jq(r,e,t={}){const n=new Zi;return r.asyncQueue.enqueueAndForget(async()=>function(i,o,c,d,h){const p=new zE({next:v=>{p.Nu(),o.enqueueAndForget(()=>VE(i,g)),v.fromCache&&d.source==="server"?h.reject(new ke(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new UE(c,p,{includeMetadataChanges:!0,qa:!0});return LE(i,g)}(await Vy(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firestore.googleapis.com",ZC=!0;class eP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lO,this.ssl=ZC}else this.host=e.host,this.ssl=e.ssl??ZC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PW)throw new ke(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aO(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zv{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Lz;switch(n.type){case"firstParty":return new $z(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ke(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=XC.get(t);n&&(Ee("ComponentProvider","Removing Datastore"),XC.delete(t),n.terminate())}(this),Promise.resolve()}}function Xq(r,e,t,n={}){var h;r=Wn(r,Zv);const s=wl(e),i=r._getSettings(),o={...i,emulatorOptions:r._getEmulatorOptions()},c=`${e}:${t}`;s&&(qb(`https://${c}`),Hb("Firestore",!0)),i.host!==lO&&i.host!==c&&Dc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:c,ssl:s,emulatorOptions:n};if(!Rc(d,o)&&(r._setSettings(d),n.mockUserToken)){let p,g;if(typeof n.mockUserToken=="string")p=n.mockUserToken,g=ln.MOCK_USER;else{p=aN(n.mockUserToken,(h=r._app)==null?void 0:h.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new ke(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ln(v)}r._authCredentials=new Vz(new pj(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class vr{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}toJSON(){return{type:vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Wp(t,vr._jsonSchema))return new vr(e,n||null,new Ae(Vt.fromString(t.referencePath)))}}vr._jsonSchemaVersion="firestore/documentReference/1.0",vr._jsonSchema={type:Lr("string",vr._jsonSchemaVersion),referencePath:Lr("string")};class al extends ia{constructor(e,t,n){super(e,t,Gp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Ae(e))}withConverter(e){return new al(this.firestore,e,this._path)}}function ns(r,e,...t){if(r=gt(r),gj("collection","path",e),r instanceof Zv){const n=Vt.fromString(e,...t);return W1(n),new al(r,null,n)}{if(!(r instanceof vr||r instanceof al))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Vt.fromString(e,...t));return W1(n),new al(r.firestore,null,n)}}function Nn(r,e,...t){if(r=gt(r),arguments.length===1&&(e=aE.newId()),gj("doc","path",e),r instanceof Zv){const n=Vt.fromString(e,...t);return z1(n),new vr(r,null,new Ae(n))}{if(!(r instanceof vr||r instanceof al))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Vt.fromString(e,...t));return z1(n),new vr(r.firestore,r instanceof al?r.converter:null,new Ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="AsyncQueue";class rP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z2(this,"async_queue_retry"),this._c=()=>{const n=ry();n&&Ee(tP,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=ry();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ry();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Zi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;Ee(tP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",nP(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=DE.createAndSchedule(this,e,t,n,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ze(47125,{Pc:nP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nP(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(r,["next","error","complete"])}class oo extends Zv{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new rP,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rP(e),this._firestoreClient=void 0,await e}}}function Zq(r,e){const t=typeof r=="object"?r:Yb(),n=typeof r=="string"?r:ky,s=Ev(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=sN("firestore");i&&Xq(s,...i)}return s}function e0(r){if(r._terminated)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cO(r),r._firestoreClient}function cO(r){var n,s,i;const e=r._freezeSettings(),t=function(c,d,h,p){return new I7(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,aO(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Gq(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(r._componentsProvider))}function eH(r,e){Dc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return tH(r,Ly.provider,{build:n=>new Hq(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function tH(r,e,t){if((r=Wn(r,oo))._firestoreClient||r._terminated)throw new ke(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ke(le.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},cO(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(Vr.fromBase64String(e))}catch(t){throw new ke(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fs(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wp(e,Fs._jsonSchema))return Fs.fromBase64String(e.bytes)}}Fs._jsonSchemaVersion="firestore/bytes/1.0",Fs._jsonSchema={type:Lr("string",Fs._jsonSchemaVersion),bytes:Lr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:eo._jsonSchemaVersion}}static fromJSON(e){if(Wp(e,eo._jsonSchema))return new eo(e.latitude,e.longitude)}}eo._jsonSchemaVersion="firestore/geoPoint/1.0",eo._jsonSchema={type:Lr("string",eo._jsonSchemaVersion),latitude:Lr("number"),longitude:Lr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:to._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wp(e,to._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new to(e.vectorValues);throw new ke(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}to._jsonSchemaVersion="firestore/vectorValue/1.0",to._jsonSchema={type:Lr("string",to._jsonSchemaVersion),vectorValues:Lr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=/^__.*__$/;class nH{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ph(e,this.data,t,this.fieldTransforms)}}class uO{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dO(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:r})}}class WE{constructor(e,t,n,s,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new WE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dO(this.Ac)&&rH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sH{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Jv(e)}Cc(e,t,n,s=!1){return new WE({Ac:e,methodName:t,Dc:n,path:dr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n0(r){const e=r._freezeSettings(),t=Jv(r._databaseId);return new sH(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hO(r,e,t,n,s,i={}){const o=r.Cc(i.merge||i.mergeFields?2:0,e,t,s);HE("Data must be an object, but it was:",o,n);const c=fO(n,o);let d,h;if(i.merge)d=new ss(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const v=U_(e,g,t);if(!o.contains(v))throw new ke(le.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);mO(p,v)||p.push(v)}d=new ss(p),h=o.fieldTransforms.filter(g=>d.covers(g.field))}else d=null,h=o.fieldTransforms;return new nH(new Pn(c),d,h)}class s0 extends r0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}class qE extends r0{_toFieldTransform(e){return new o2(e.path,new qd)}isEqual(e){return e instanceof qE}}function iH(r,e,t,n){const s=r.Cc(1,e,t);HE("Data must be an object, but it was:",s,n);const i=[],o=Pn.empty();_l(n,(d,h)=>{const p=GE(e,d,t);h=gt(h);const g=s.yc(p);if(h instanceof s0)i.push(p);else{const v=Zp(h,g);v!=null&&(i.push(p),o.set(p,v))}});const c=new ss(i);return new uO(o,c,s.fieldTransforms)}function oH(r,e,t,n,s,i){const o=r.Cc(1,e,t),c=[U_(e,n,t)],d=[s];if(i.length%2!=0)throw new ke(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)c.push(U_(e,i[v])),d.push(i[v+1]);const h=[],p=Pn.empty();for(let v=c.length-1;v>=0;--v)if(!mO(h,c[v])){const w=c[v];let k=d[v];k=gt(k);const _=o.yc(w);if(k instanceof s0)h.push(w);else{const E=Zp(k,_);E!=null&&(h.push(w),p.set(w,E))}}const g=new ss(h);return new uO(p,g,o.fieldTransforms)}function aH(r,e,t,n=!1){return Zp(t,r.Cc(n?4:3,e))}function Zp(r,e){if(pO(r=gt(r)))return HE("Unsupported field value:",e,r),fO(r,e);if(r instanceof r0)return function(n,s){if(!dO(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const c of n){let d=Zp(c,s.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(r,e)}return function(n,s){if((n=gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return G7(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ft.fromDate(n);return{timestampValue:Kd(s.serializer,i)}}if(n instanceof Ft){const i=new Ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Kd(s.serializer,i)}}if(n instanceof eo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Fs)return{bytesValue:f2(s.serializer,n._byteString)};if(n instanceof vr){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:EE(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof to)return function(o,c){return{mapValue:{fields:{[mE]:{stringValue:gE},[$d]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return vE(c.serializer,h)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Dv(n)}`)}(r,e)}function fO(r,e){const t={};return Nj(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(r,(n,s)=>{const i=Zp(s,e.mc(n));i!=null&&(t[n]=i)}),{mapValue:{fields:t}}}function pO(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ft||r instanceof eo||r instanceof Fs||r instanceof vr||r instanceof r0||r instanceof to)}function HE(r,e,t){if(!pO(t)||!yj(t)){const n=Dv(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function U_(r,e,t){if((e=gt(e))instanceof t0)return e._internalPath;if(typeof e=="string")return GE(r,e);throw Fy("Field path arguments must be of type string or ",r,!1,void 0,t)}const lH=new RegExp("[~\\*/\\[\\]]");function GE(r,e,t){if(e.search(lH)>=0)throw Fy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new t0(...e.split("."))._internalPath}catch{throw Fy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Fy(r,e,t,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${s}`),d+=")"),new ke(le.INVALID_ARGUMENT,c+r+d)}function mO(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(i0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cH extends gO{data(){return super.data()}}function i0(r,e){return typeof e=="string"?GE(r,e):e instanceof t0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ke(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KE{}class YE extends KE{}function Tc(r,e,...t){let n=[];e instanceof KE&&n.push(e),n=n.concat(t),function(i){const o=i.filter(d=>d instanceof QE).length,c=i.filter(d=>d instanceof o0).length;if(o>1||o>0&&c>0)throw new ke(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)r=s._apply(r);return r}class o0 extends YE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new o0(e,t,n)}_apply(e){const t=this._parse(e);return vO(e._query,t),new ia(e.firestore,e.converter,C_(e._query,t))}_parse(e){const t=n0(e.firestore);return function(i,o,c,d,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ke(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){oP(g,p);const k=[];for(const _ of g)k.push(iP(d,i,_));v={arrayValue:{values:k}}}else v=iP(d,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||oP(g,p),v=aH(c,o,g,p==="in"||p==="not-in");return St.create(h,p,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sc(r,e,t){const n=e,s=i0("where",r);return o0._create(s,n,t)}class QE extends KE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new QE(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const d of c)vO(o,d),o=C_(o,d)}(e._query,t),new ia(e.firestore,e.converter,C_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class JE extends YE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new JE(e,t)}_apply(e){const t=function(s,i,o){if(s.startAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bp(i,o)}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new fh(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function $_(r,e="asc"){const t=e,n=i0("orderBy",r);return JE._create(n,t)}class XE extends YE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new XE(e,t,n)}_apply(e){return new ia(e.firestore,e.converter,Py(e._query,this._limit,this._limitType))}}function uH(r){return XE._create("limit",r,"F")}function iP(r,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new ke(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yj(e)&&t.indexOf("/")!==-1)throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Vt.fromString(t));if(!Ae.isDocumentKey(n))throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return xp(r,new Ae(n))}if(t instanceof vr)return xp(r,t._key);throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dv(t)}.`)}function oP(r,e){if(!Array.isArray(r)||r.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vO(r,e){const t=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dH{convertValue(e,t="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return _l(e,(s,i)=>{n[s]=this.convertValue(i,t)}),n}convertVectorValue(e){var n,s,i;const t=(i=(s=(n=e.fields)==null?void 0:n[$d].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>or(o.doubleValue));return new to(t)}convertGeoPoint(e){return new eo(or(e.latitude),or(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=$v(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const t=Jo(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Vt.fromString(e);Ke(E2(n),9688,{name:e});const s=new Mc(n.get(1),n.get(3)),i=new Ae(n.popFirst(5));return s.isEqual(t)||Bn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kc extends gO{constructor(e,t,n,s,i,o){super(e,t,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ny(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(i0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=kc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",kc._jsonSchema={type:Lr("string",kc._jsonSchemaVersion),bundleSource:Lr("string","DocumentSnapshot"),bundleName:Lr("string"),bundle:Lr("string")};class ny extends kc{data(e={}){return super.data(e)}}class Ic{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Pf(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ny(this._firestore,this._userDataWriter,n.key,n,new Pf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const d=new ny(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Pf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const d=new ny(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Pf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:hH(c.type),doc:d,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ic._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=aE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hH(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(r){r=Wn(r,vr);const e=Wn(r.firestore,oo);return Qq(e0(e),r._key).then(t=>_O(e,r,t))}Ic._jsonSchemaVersion="firestore/querySnapshot/1.0",Ic._jsonSchema={type:Lr("string",Ic._jsonSchemaVersion),bundleSource:Lr("string","QuerySnapshot"),bundleName:Lr("string"),bundle:Lr("string")};class ZE extends dH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function gh(r){r=Wn(r,ia);const e=Wn(r.firestore,oo),t=e0(e),n=new ZE(e);return yO(r._query),Jq(t,r._query).then(s=>new Ic(e,n,r,s))}function xO(r,e,t){r=Wn(r,vr);const n=Wn(r.firestore,oo),s=wO(r.converter,e,t);return a0(n,[hO(n0(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,An.none())])}function Bs(r,e,t,...n){r=Wn(r,vr);const s=Wn(r.firestore,oo),i=n0(s);let o;return o=typeof(e=gt(e))=="string"||e instanceof t0?oH(i,"updateDoc",r._key,e,t,n):iH(i,"updateDoc",r._key,e),a0(s,[o.toMutation(r._key,An.exists(!0))])}function fH(r){return a0(Wn(r.firestore,oo),[new Hv(r._key,An.none())])}function Sp(r,e){const t=Wn(r.firestore,oo),n=Nn(r),s=wO(r.converter,e);return a0(t,[hO(n0(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,An.exists(!1))]).then(()=>n)}function Uy(r,...e){var d,h,p;r=gt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||sP(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(sP(e[n])){const g=e[n];e[n]=(d=g.next)==null?void 0:d.bind(g),e[n+1]=(h=g.error)==null?void 0:h.bind(g),e[n+2]=(p=g.complete)==null?void 0:p.bind(g)}let i,o,c;if(r instanceof vr)o=Wn(r.firestore,oo),c=Gp(r._key.path),i={next:g=>{e[n]&&e[n](_O(o,r,g))},error:e[n+1],complete:e[n+2]};else{const g=Wn(r,ia);o=Wn(g.firestore,oo),c=g._query;const v=new ZE(o);i={next:w=>{e[n]&&e[n](new Ic(o,v,g,w))},error:e[n+1],complete:e[n+2]},yO(r._query)}return function(v,w,k,_){const E=new zE(_),C=new UE(w,E,k);return v.asyncQueue.enqueueAndForget(async()=>LE(await Vy(v),C)),()=>{E.Nu(),v.asyncQueue.enqueueAndForget(async()=>VE(await Vy(v),C))}}(e0(o),c,s,i)}function a0(r,e){return function(n,s){const i=new Zi;return n.asyncQueue.enqueueAndForget(async()=>Vq(await Yq(n),s,i)),i.promise}(e0(r),e)}function _O(r,e,t){const n=t.docs.get(e._key),s=new ZE(r);return new kc(r,s,e._key,n,new Pf(t.hasPendingWrites,t.fromCache),e.converter)}function hn(){return new qE("serverTimestamp")}(function(e,t=!0){(function(s){hh=s})(Yc),Nc(new dl("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new oo(new Fz(n.getProvider("auth-internal")),new Bz(o,n.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(h.options.projectId,p)}(o,s),o);return i={useFetchStreams:t,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Xi(F1,U1,e),Xi(F1,U1,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firebasestorage.googleapis.com",EO="storageBucket",pH=2*60*1e3,mH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur=class TO extends co{constructor(e,t,n=0){super(Cx(e),`Firebase Storage: ${t} (${Cx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,TO.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var xr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xr||(xr={}));function Cx(r){return"storage/"+r}function eT(){const r="An unknown error occurred, please check the error payload for server response.";return new Ur(xr.UNKNOWN,r)}function gH(r){return new Ur(xr.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function yH(r){return new Ur(xr.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vH(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ur(xr.UNAUTHENTICATED,r)}function wH(){return new Ur(xr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xH(r){return new Ur(xr.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function _H(){return new Ur(xr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bH(){return new Ur(xr.CANCELED,"User canceled the upload/download.")}function EH(r){return new Ur(xr.INVALID_URL,"Invalid URL '"+r+"'.")}function TH(r){return new Ur(xr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function SH(){return new Ur(xr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EO+"' property when initializing the app?")}function kH(){return new Ur(xr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IH(){return new Ur(xr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CH(r){return new Ur(xr.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function B_(r){return new Ur(xr.INVALID_ARGUMENT,r)}function SO(){return new Ur(xr.APP_DELETED,"The Firebase app was deleted.")}function PH(r){return new Ur(xr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yf(r,e){return new Ur(xr.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function vf(r){throw new Ur(xr.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ts.makeFromUrl(e,t)}catch{return new Ts(e,"")}if(n.path==="")return n;throw TH(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),d={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${p}/b/${s}/o${v}`,"i"),k={bucket:1,path:3},_=t===bO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",C=new RegExp(`^https?://${_}/${s}/${E}`,"i"),j=[{regex:c,indices:d,postModify:i},{regex:w,indices:k,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<j.length;M++){const $=j[M],B=$.regex.exec(e);if(B){const A=B[$.indices.bucket];let R=B[$.indices.path];R||(R=""),n=new Ts(A,R),$.postModify(n);break}}if(n==null)throw EH(e);return n}}class AH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(r,e,t){let n=1,s=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...E){h||(h=!0,e.apply(null,E))}function g(E){s=setTimeout(()=>{s=null,r(w,d())},E)}function v(){i&&clearTimeout(i)}function w(E,...C){if(h){v();return}if(E){v(),p.call(null,E,...C);return}if(d()||o){v(),p.call(null,E,...C);return}n<64&&(n*=2);let j;c===1?(c=2,j=0):j=(n+Math.random())*1e3,g(j)}let k=!1;function _(E){k||(k=!0,v(),!h&&(s!==null?(E||(c=2),clearTimeout(s),g(0)):E||(c=1)))}return g(0),i=setTimeout(()=>{o=!0,_(!0)},t),_}function NH(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(r){return r!==void 0}function OH(r){return typeof r=="object"&&!Array.isArray(r)}function tT(r){return typeof r=="string"||r instanceof String}function aP(r){return rT()&&r instanceof Blob}function rT(){return typeof Blob<"u"}function lP(r,e,t,n){if(n<e)throw B_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw B_(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function kO(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Cc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Cc||(Cc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,t,n,s,i,o,c,d,h,p,g,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,_)=>{this.resolve_=k,this.reject_=_,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Cg(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Cc.NO_ERROR,d=i.getStatus();if(!c||DH(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Cc.ABORT;n(!1,new Cg(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Cg(h,i))})},t=(n,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());jH(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=eT();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(s.canceled){const d=this.appDelete_?SO():bH();o(d)}else{const d=_H();o(d)}};this.canceled_?t(!1,new Cg(!1,null,!0)):this.backoffId_=RH(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function LH(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function VH(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FH(r,e){e&&(r["X-Firebase-GMPID"]=e)}function UH(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function $H(r,e,t,n,s,i,o=!0,c=!1){const d=kO(r.urlParams),h=r.url+d,p=Object.assign({},r.headers);return FH(p,e),LH(p,t),VH(p,i),UH(p,n),new MH(h,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zH(...r){const e=BH();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(rT())return new Blob(r);throw new Ur(xr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WH(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(r){if(typeof atob>"u")throw CH("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Px{constructor(e,t){this.data=e,this.contentType=t||null}}function HH(r,e){switch(r){case Yi.RAW:return new Px(IO(e));case Yi.BASE64:case Yi.BASE64URL:return new Px(CO(r,e));case Yi.DATA_URL:return new Px(KH(e),YH(e))}throw eT()}function IO(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=r.charCodeAt(++t);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function GH(r){let e;try{e=decodeURIComponent(r)}catch{throw Yf(Yi.DATA_URL,"Malformed data URL.")}return IO(e)}function CO(r,e){switch(r){case Yi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Yf(r,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Yi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Yf(r,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qH(e)}catch(s){throw s.message.includes("polyfill")?s:Yf(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}class PO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Yf(Yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=QH(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function KH(r){const e=new PO(r);return e.base64?CO(Yi.BASE64,e.rest):GH(e.rest)}function YH(r){return new PO(r).contentType}function QH(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){let n=0,s="";aP(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(aP(this.data_)){const n=this.data_,s=WH(n,e,t);return s===null?null:new Wa(s)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Wa(n,!0)}}static getBlob(...e){if(rT()){const t=e.map(n=>n instanceof Wa?n.data_:n);return new Wa(zH.apply(null,t))}else{const t=e.map(o=>tT(o)?HH(Yi.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let i=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Wa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(r){let e;try{e=JSON.parse(r)}catch{return null}return OH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function XH(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function RO(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(r,e){return e}class Ln{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||ZH}}let Pg=null;function eG(r){return!tT(r)||r.length<2?r:RO(r)}function NO(){if(Pg)return Pg;const r=[];r.push(new Ln("bucket")),r.push(new Ln("generation")),r.push(new Ln("metageneration")),r.push(new Ln("name","fullPath",!0));function e(i,o){return eG(o)}const t=new Ln("name");t.xform=e,r.push(t);function n(i,o){return o!==void 0?Number(o):o}const s=new Ln("size");return s.xform=n,r.push(s),r.push(new Ln("timeCreated")),r.push(new Ln("updated")),r.push(new Ln("md5Hash",null,!0)),r.push(new Ln("cacheControl",null,!0)),r.push(new Ln("contentDisposition",null,!0)),r.push(new Ln("contentEncoding",null,!0)),r.push(new Ln("contentLanguage",null,!0)),r.push(new Ln("contentType",null,!0)),r.push(new Ln("metadata","customMetadata",!0)),Pg=r,Pg}function tG(r,e){function t(){const n=r.bucket,s=r.fullPath,i=new Ts(n,s);return e._makeStorageReference(i)}Object.defineProperty(r,"ref",{get:t})}function rG(r,e,t){const n={};n.type="file";const s=t.length;for(let i=0;i<s;i++){const o=t[i];n[o.local]=o.xform(n,e[o.server])}return tG(n,r),n}function jO(r,e,t){const n=AO(e);return n===null?null:rG(r,n,t)}function nG(r,e,t,n){const s=AO(e);if(s===null||!tT(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=r.bucket,g=r.fullPath,v="/b/"+o(p)+"/o/"+o(g),w=nT(v,t,n),k=kO({alt:"media",token:h});return w+k})[0]}function sG(r,e){const t={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(t[i.server]=r[i.local])}return JSON.stringify(t)}class OO{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(r){if(!r)throw eT()}function iG(r,e){function t(n,s){const i=jO(r,s,e);return DO(i!==null),i}return t}function oG(r,e){function t(n,s){const i=jO(r,s,e);return DO(i!==null),nG(i,s,r.host,r._protocol)}return t}function MO(r){function e(t,n){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=wH():s=vH():t.getStatus()===402?s=yH(r.bucket):t.getStatus()===403?s=xH(r.path):s=n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}return e}function aG(r){const e=MO(r);function t(n,s){let i=e(n,s);return n.getStatus()===404&&(i=gH(r.path)),i.serverResponse=s.serverResponse,i}return t}function lG(r,e,t){const n=e.fullServerUrl(),s=nT(n,r.host,r._protocol),i="GET",o=r.maxOperationRetryTime,c=new OO(s,i,oG(r,t),o);return c.errorHandler=aG(e),c}function cG(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function uG(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=cG(null,e)),n}function dG(r,e,t,n,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let j="";for(let M=0;M<2;M++)j=j+Math.random().toString().slice(2);return j}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=uG(e,n,s),p=sG(h,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+d+"--",w=Wa.getBlob(g,n,v);if(w===null)throw kH();const k={name:h.fullPath},_=nT(i,r.host,r._protocol),E="POST",C=r.maxUploadRetryTime,P=new OO(_,E,iG(r,t),C);return P.urlParams=k,P.headers=o,P.body=w.uploadData(),P.errorHandler=MO(e),P}class hG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s,i){if(this.sent_)throw vf("cannot .send() more than once");if(wl(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fG extends hG{initXhr(){this.xhr_.responseType="text"}}function LO(){return new fG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this._service=e,t instanceof Ts?this._location=t:this._location=Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bc(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RO(this._location.path)}get storage(){return this._service}get parent(){const e=JH(this._location.path);if(e===null)return null;const t=new Ts(this._location.bucket,e);return new Bc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw PH(e)}}function pG(r,e,t){r._throwIfRoot("uploadBytes");const n=dG(r.storage,r._location,NO(),new Wa(e,!0),t);return r.storage.makeRequestWithTokens(n,LO).then(s=>({metadata:s,ref:r}))}function mG(r){r._throwIfRoot("getDownloadURL");const e=lG(r.storage,r._location,NO());return r.storage.makeRequestWithTokens(e,LO).then(t=>{if(t===null)throw IH();return t})}function gG(r,e){const t=XH(r._location.path,e),n=new Ts(r._location.bucket,t);return new Bc(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(r){return/^[A-Za-z]+:\/\//.test(r)}function vG(r,e){return new Bc(r,e)}function VO(r,e){if(r instanceof sT){const t=r;if(t._bucket==null)throw SH();const n=new Bc(t,t._bucket);return e!=null?VO(n,e):n}else return e!==void 0?gG(r,e):r}function wG(r,e){if(e&&yG(e)){if(r instanceof sT)return vG(r,e);throw B_("To use ref(service, url), the first argument must be a Storage instance.")}else return VO(r,e)}function cP(r,e){const t=e==null?void 0:e[EO];return t==null?null:Ts.makeFromBucketSpec(t,r)}function xG(r,e,t,n={}){r.host=`${e}:${t}`;const s=wl(e);s&&(qb(`https://${r.host}/b`),Hb("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:aN(i,r.app.options.projectId))}class sT{constructor(e,t,n,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=bO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pH,this._maxUploadRetryTime=mH,this._requests=new Set,s!=null?this._bucket=Ts.makeFromBucketSpec(s,this._host):this._bucket=cP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ts.makeFromBucketSpec(this._url,e):this._bucket=cP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bc(this,e)}_makeRequest(e,t,n,s,i=!0){if(this._deleted)return new AH(SO());{const o=$H(e,this._appId,n,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const uP="@firebase/storage",dP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="storage";function _G(r,e,t){return r=gt(r),pG(r,e,t)}function bG(r){return r=gt(r),mG(r)}function EG(r,e){return r=gt(r),wG(r,e)}function TG(r=Yb(),e){r=gt(r);const n=Ev(r,FO).getImmediate({identifier:e}),s=sN("storage");return s&&SG(n,...s),n}function SG(r,e,t,n={}){xG(r,e,t,n)}function kG(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new sT(t,n,s,e,Yc)}function IG(){Nc(new dl(FO,kG,"PUBLIC").setMultipleInstances(!0)),Xi(uP,dP,""),Xi(uP,dP,"esm2020")}IG();const UO={apiKey:"your_firebase_api_key",authDomain:"your_firebase_auth_domain",projectId:"your_firebase_project_id",storageBucket:"your_firebase_storage_bucket",messagingSenderId:"your_firebase_messaging_sender_id",appId:"your_firebase_app_id",measurementId:"your_firebase_measurement_id"},CG=["apiKey","authDomain","projectId","appId","storageBucket","messagingSenderId"],hP=CG.filter(r=>!UO[r]);if(hP.length>0){const r=`Firebase initialization failed: Missing environment variables for: ${hP.join(", ")}. Please check your .env file.`;throw console.error(r),ue.error(r),new Error(r)}const iT=pN(UO),Va=K9(iT),Gt=Zq(iT),PG=TG(iT);eH(Gt).then(()=>{console.log("Firestore offline persistence enabled successfully!")}).catch(r=>{r.code==="failed-precondition"?console.warn("Firestore persistence failed: Multiple tabs open, persistence can only be enabled in one tab at a time."):r.code==="unimplemented"?console.warn("Firestore persistence failed: The current browser does not support all of the features required to enable persistence."):console.error("Firestore persistence failed for unknown reason:",r)});const AG=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>dh(async()=>{const{default:n}=await Promise.resolve().then(()=>yh);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class oT extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class fP extends oT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pP extends oT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mP extends oT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var z_;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(z_||(z_={}));var RG=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};class NG{constructor(e,{headers:t={},customFetch:n,region:s=z_.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=AG(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return RG(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:c}=t;let d={},{region:h}=t;h||(h=this.region);const p=new URL(`${this.url}/${e}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=o):typeof o=="string"?(d["Content-Type"]="text/plain",g=o):typeof FormData<"u"&&o instanceof FormData?g=o:(d["Content-Type"]="application/json",g=JSON.stringify(o)));const v=yield this.fetch(p.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:g,signal:c}).catch(E=>{throw E.name==="AbortError"?E:new fP(E)}),w=v.headers.get("x-relay-error");if(w&&w==="true")throw new pP(v);if(!v.ok)throw new mP(v);let k=((n=v.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return k==="application/json"?_=yield v.json():k==="application/octet-stream"?_=yield v.blob():k==="text/event-stream"?_=v:k==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new fP(s)}:{data:null,error:s,response:s instanceof mP||s instanceof pP?s.context:void 0}}})}}var Zr={},Wu={},qu={},Hu={},Gu={},Ku={},jG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qd=jG();const OG=Qd.fetch,$O=Qd.fetch.bind(Qd),BO=Qd.Headers,DG=Qd.Request,MG=Qd.Response,yh=Object.freeze(Object.defineProperty({__proto__:null,Headers:BO,Request:DG,Response:MG,default:$O,fetch:OG},Symbol.toStringTag,{value:"Module"})),LG=EF(yh);var Ag={},gP;function zO(){if(gP)return Ag;gP=1,Object.defineProperty(Ag,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ag.default=r,Ag}var yP;function WO(){if(yP)return Ku;yP=1;var r=Ku&&Ku.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ku,"__esModule",{value:!0});const e=r(LG),t=r(zO());class n{constructor(i){var o,c;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(c=i.isMaybeSingle)!==null&&c!==void 0?c:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,v,w;let k=null,_=null,E=null,C=h.status,P=h.statusText;if(h.ok){if(this.method!=="HEAD"){const B=await h.text();B===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?_=B:_=JSON.parse(B))}const M=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),$=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");M&&$&&$.length>1&&(E=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(k={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,E=null,C=406,P="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const M=await h.text();try{k=JSON.parse(M),Array.isArray(k)&&h.status===404&&(_=[],k=null,C=200,P="OK")}catch{h.status===404&&M===""?(C=204,P="No Content"):k={message:M}}if(k&&this.isMaybeSingle&&(!((w=k==null?void 0:k.details)===null||w===void 0)&&w.includes("0 rows"))&&(k=null,C=200,P="OK"),k&&this.shouldThrowOnError)throw new t.default(k)}return{error:k,data:_,count:E,status:C,statusText:P}});return this.shouldThrowOnError||(d=d.catch(h=>{var p,g,v;return{error:{message:`${(p=h==null?void 0:h.name)!==null&&p!==void 0?p:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h==null?void 0:h.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,o)}returns(){return this}overrideTypes(){return this}}return Ku.default=n,Ku}var vP;function qO(){if(vP)return Gu;vP=1;var r=Gu&&Gu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gu,"__esModule",{value:!0});const e=r(WO());class t extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:c=!1,wal:d=!1,format:h="text"}={}){var p;const g=[s?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Gu.default=t,Gu}var wP;function aT(){if(wP)return Hu;wP=1;var r=Hu&&Hu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hu,"__esModule",{value:!0});const e=r(qO());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${d}fts${h}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return Hu.default=t,Hu}var xP;function HO(){if(xP)return qu;xP=1;var r=qu&&qu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qu,"__esModule",{value:!0});const e=r(aT());class t{constructor(s,{headers:i={},schema:o,fetch:c}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=c}select(s,{head:i=!1,count:o}={}){const c=i?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var c;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:c,defaultToNull:d=!0}={}){var h;const p="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(g.length>0){const v=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(s,{count:i}={}){var o;const c="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return qu.default=t,qu}var _P;function VG(){if(_P)return Wu;_P=1;var r=Wu&&Wu.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wu,"__esModule",{value:!0});const e=r(HO()),t=r(aT());class n{constructor(i,{headers:o={},schema:c,fetch:d}={}){this.url=i,this.headers=new Headers(o),this.schemaName=c,this.fetch=d}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:c=!1,get:d=!1,count:h}={}){var p;let g;const v=new URL(`${this.url}/rpc/${i}`);let w;c||d?(g=c?"HEAD":"GET",Object.entries(o).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{v.searchParams.append(_,E)})):(g="POST",w=o);const k=new Headers(this.headers);return h&&k.set("Prefer",`count=${h}`),new t.default({method:g,url:v,headers:k,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Wu.default=n,Wu}var bP;function FG(){if(bP)return Zr;bP=1;var r=Zr&&Zr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.PostgrestError=Zr.PostgrestBuilder=Zr.PostgrestTransformBuilder=Zr.PostgrestFilterBuilder=Zr.PostgrestQueryBuilder=Zr.PostgrestClient=void 0;const e=r(VG());Zr.PostgrestClient=e.default;const t=r(HO());Zr.PostgrestQueryBuilder=t.default;const n=r(aT());Zr.PostgrestFilterBuilder=n.default;const s=r(qO());Zr.PostgrestTransformBuilder=s.default;const i=r(WO());Zr.PostgrestBuilder=i.default;const o=r(zO());return Zr.PostgrestError=o.default,Zr.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Zr}var UG=FG();const $G=Pb(UG),{PostgrestClient:BG,PostgrestQueryBuilder:Kne,PostgrestFilterBuilder:Yne,PostgrestTransformBuilder:Qne,PostgrestBuilder:Jne,PostgrestError:Xne}=$G;class zG{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WG="2.15.5",qG=`realtime-js/${WG}`,HG="1.0.0",W_=1e4,GG=1e3,KG=100;var Qf;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Qf||(Qf={}));var Wr;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Wr||(Wr={}));var ui;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ui||(ui={}));var q_;(function(r){r.websocket="websocket"})(q_||(q_={}));var fc;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(fc||(fc={}));class YG{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=n.decode(e.slice(o,o+s));o=o+s;const d=n.decode(e.slice(o,o+i));o=o+i;const h=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:d,payload:h}}}class GO{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Xt||(Xt={}));const EP=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=QG(o,r,e,s),i),{})},QG=(r,e,t,n)=>{const s=e.find(c=>c.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?KO(i,o):H_(o)},KO=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return eK(e,t)}switch(r){case Xt.bool:return JG(e);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return XG(e);case Xt.json:case Xt.jsonb:return ZG(e);case Xt.timestamp:return tK(e);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return H_(e);default:return H_(e)}},H_=r=>r,JG=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},XG=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},ZG=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},eK=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>KO(e,c))}return r},tK=r=>typeof r=="string"?r.replace(" ","T"):r,YO=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ax{constructor(e,t,n={},s=W_){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var TP;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(TP||(TP={}));class Jf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jf.syncState(this.state,s,i,o),this.pendingDiffs.forEach(d=>{this.state=Jf.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Jf.syncDiff(this.state,s,i,o),c())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),c={},d={};return this.map(i,(h,p)=>{o[h]||(d[h]=p)}),this.map(o,(h,p)=>{const g=i[h];if(g){const v=p.map(E=>E.presence_ref),w=g.map(E=>E.presence_ref),k=p.filter(E=>w.indexOf(E.presence_ref)<0),_=g.filter(E=>v.indexOf(E.presence_ref)<0);k.length>0&&(c[h]=k),_.length>0&&(d[h]=_)}else c[h]=p}),this.syncDiff(i,{joins:c,leaves:d},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(c,d)=>{var h;const p=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(d),p.length>0){const g=e[c].map(w=>w.presence_ref),v=p.filter(w=>g.indexOf(w.presence_ref)<0);e[c].unshift(...v)}n(c,p,d)}),this.map(o,(c,d)=>{let h=e[c];if(!h)return;const p=d.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[c]=h,s(c,h,d),h.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var SP;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(SP||(SP={}));var Xf;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Xf||(Xf={}));var Do;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Do||(Do={}));class lT{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ax(this,ui.join,this.params,this.timeout),this.rejoinTimer=new GO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Jf(this),this.broadcastEndpointURL=YO(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Wr.closed){const{config:{broadcast:o,presence:c,private:d}}=this.params,h=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Xf.PRESENCE]&&this.bindings[Xf.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},v={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Do.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Do.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var k;if(this.socket.setAuth(),w===void 0){e==null||e(Do.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,C=[];for(let P=0;P<E;P++){const j=_[P],{filter:{event:M,schema:$,table:B,filter:A}}=j,R=w&&w[P];if(R&&R.event===M&&R.schema===$&&R.table===B&&R.filter===A)C.push(Object.assign(Object.assign({},j),{id:R.id}));else{this.unsubscribe(),this.state=Wr.errored,e==null||e(Do.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Do.SUBSCRIBED);return}}).receive("error",w=>{this.state=Wr.errored,e==null||e(Do.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Do.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Wr.joined&&e===Xf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ax(this,ui.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wr.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ax(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>KG){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:c,error:d,leave:h,join:p}=ui;if(n&&[c,d,h,p].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var k,_,E;return((k=w.filter)===null||k===void 0?void 0:k.event)==="*"||((E=(_=w.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(w=>w.callback(v,n)):(i=this.bindings[o])===null||i===void 0||i.filter(w=>{var k,_,E,C,P,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in w){const M=w.id,$=(k=w.filter)===null||k===void 0?void 0:k.event;return M&&((_=t.ids)===null||_===void 0?void 0:_.includes(M))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const M=(P=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return M==="*"||M===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===o}).map(w=>{if(typeof v=="object"&&"ids"in v){const k=v.data,{schema:_,table:E,commit_timestamp:C,type:P,errors:j}=k;v=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:C,eventType:P,new:{},old:{},errors:j}),this._getPayloadRecords(k))}w.callback(v,n)})}_isClosed(){return this.state===Wr.closed}_isJoined(){return this.state===Wr.joined}_isJoining(){return this.state===Wr.joining}_isLeaving(){return this.state===Wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&lT.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ui.close,{},e)}_onError(e){this._on(ui.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=EP(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=EP(e.columns,e.old_record)),t}}const Rx=()=>{},Rg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rK=[1e3,2e3,5e3,1e4],nK=1e4,sK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iK{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=W_,this.transport=null,this.heartbeatIntervalMs=Rg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rx,this.ref=0,this.reconnectTimer=null,this.logger=Rx,this.conn=null,this.sendBuffer=[],this.serializer=new YG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>dh(async()=>{const{default:c}=await Promise.resolve().then(()=>yh);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${q_.websocket}`,this.httpEndpoint=YO(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zG.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HG}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qf.connecting:return fc.Connecting;case Qf.open:return fc.Open;case Qf.closing:return fc.Closing;default:return fc.Closed}}isConnected(){return this.connectionState()===fc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new lT(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(GG,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Rg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=t,c=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${c}`.trim(),i),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ui.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([sK],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const s={access_token:t,version:qG};t&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ui.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new GO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,i,o,c,d,h,p;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:W_,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Rg.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Rx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:g=>rK[g-1]||nK,this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(g,v)=>v(JSON.stringify(g)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class cT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jr(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class oK extends cT{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class G_ extends cT{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var aK=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};const QO=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>dh(async()=>{const{default:n}=await Promise.resolve().then(()=>yh);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},lK=()=>aK(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dh(()=>Promise.resolve().then(()=>yh),void 0)).Response:Response}),K_=r=>{if(Array.isArray(r))return r.map(t=>K_(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=K_(n)}),e},cK=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Zc=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};const Nx=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),uK=(r,e,t)=>Zc(void 0,void 0,void 0,function*(){const n=yield lK();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{const i=r.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new oK(Nx(s),i,o))}).catch(s=>{e(new G_(Nx(s),s))}):e(new G_(Nx(r),r))}),dK=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!n?s:(cK(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function em(r,e,t,n,s,i){return Zc(this,void 0,void 0,function*(){return new Promise((o,c)=>{r(t,dK(e,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>uK(d,c,n))})})}function $y(r,e,t,n){return Zc(this,void 0,void 0,function*(){return em(r,"GET",e,t,n)})}function Ui(r,e,t,n,s){return Zc(this,void 0,void 0,function*(){return em(r,"POST",e,n,s,t)})}function Y_(r,e,t,n,s){return Zc(this,void 0,void 0,function*(){return em(r,"PUT",e,n,s,t)})}function hK(r,e,t,n){return Zc(this,void 0,void 0,function*(){return em(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function JO(r,e,t,n,s){return Zc(this,void 0,void 0,function*(){return em(r,"DELETE",e,n,s,t)})}var fK=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};class pK{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return fK(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}})}}var mK=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};class gK{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new pK(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return mK(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}})}}var ts=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};const yK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vK{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=QO(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return ts(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},kP),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const h=this._removeEmptyFolders(t),p=this._getFinalPath(h),g=yield(e=="PUT"?Y_:Ui)(this.fetch,`${this.url}/object/${p}`,i,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jr(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ts(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return ts(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:kP.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield Y_(this.fetch,c.toString(),d,{headers:p});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(jr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return ts(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Ui(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new cT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}update(e,t,n){return ts(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ts(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}})}copy(e,t,n){return ts(this,void 0,void 0,function*(){try{return{data:{path:(yield Ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return ts(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ui(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return ts(this,void 0,void 0,function*(){try{const s=yield Ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",c=this._getFinalPath(e),d=()=>$y(this.fetch,`${this.url}/${s}/${c}${o}`,{headers:this.headers,noResolveJson:!0});return new gK(d,this.shouldThrowOnError)}info(e){return ts(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield $y(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:K_(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}exists(e){return ts(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield hK(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n)&&n instanceof G_){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${h}`)}}}remove(e){return ts(this,void 0,void 0,function*(){try{return{data:yield JO(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}})}list(e,t,n){return ts(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yK),t),{prefix:e||""});return{data:yield Ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}})}listV2(e,t){return ts(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ui(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const wK="2.12.2",xK={"X-Client-Info":`storage-js/${wK}`};var Yu=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};class _K{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},xK),t),this.fetch=QO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Yu(this,void 0,void 0,function*(){try{return{data:yield $y(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}})}getBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield $y(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Yu(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Yu(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yu(this,void 0,void 0,function*(){try{return{data:yield JO(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}})}}class bK extends _K{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new vK(this.url,this.headers,e,this.fetch)}}const EK="2.58.0";let Af="";typeof Deno<"u"?Af="deno":typeof document<"u"?Af="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Af="react-native":Af="node";const TK={"X-Client-Info":`supabase-js-${Af}/${EK}`},SK={headers:TK},kK={schema:"public"},IK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CK={};var PK=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};const AK=r=>{let e;return r?e=r:typeof fetch>"u"?e=$O:e=fetch,(...t)=>e(...t)},RK=()=>typeof Headers>"u"?BO:Headers,NK=(r,e,t)=>{const n=AK(t),s=RK();return(i,o)=>PK(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:r;let h=new s(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",r),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},o),{headers:h}))})};var jK=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};function OK(r){return r.endsWith("/")?r:r+"/"}function DK(r,e){var t,n;const{db:s,auth:i,realtime:o,global:c}=r,{db:d,auth:h,realtime:p,global:g}=e,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},p),o),storage:{},global:Object.assign(Object.assign(Object.assign({},g),c),{headers:Object.assign(Object.assign({},(t=g==null?void 0:g.headers)!==null&&t!==void 0?t:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>jK(this,void 0,void 0,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}function MK(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(OK(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const XO="2.72.0",cd=30*1e3,Q_=3,jx=Q_*cd,LK="http://localhost:9999",VK="supabase.auth.token",FK={"X-Client-Info":`gotrue-js/${XO}`},J_="X-Supabase-Api-Version",ZO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$K=10*60*1e3;class uT extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ct(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class BK extends uT{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function zK(r){return ct(r)&&r.name==="AuthApiError"}class eD extends uT{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bl extends uT{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Ma extends bl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WK(r){return ct(r)&&r.name==="AuthSessionMissingError"}class wf extends bl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ng extends bl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jg extends bl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qK(r){return ct(r)&&r.name==="AuthImplicitGrantRedirectError"}class IP extends bl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class X_ extends bl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ox(r){return ct(r)&&r.name==="AuthRetryableFetchError"}class CP extends bl{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Z_ extends bl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const By="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),PP=` 	
\r=`.split(""),HK=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<PP.length;e+=1)r[PP[e].charCodeAt(0)]=-2;for(let e=0;e<By.length;e+=1)r[By[e].charCodeAt(0)]=e;return r})();function AP(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(By[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(By[n]),e.queuedBits-=6}}function tD(r,e,t){const n=HK[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function RP(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{YK(o,n,t)};for(let o=0;o<r.length;o+=1)tD(r.charCodeAt(o),s,i);return e.join("")}function GK(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function KK(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}GK(n,e)}}function YK(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function QK(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<r.length;s+=1)tD(r.charCodeAt(s),t,n);return new Uint8Array(e)}function JK(r){const e=[];return KK(r,t=>e.push(t)),new Uint8Array(e)}function XK(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return r.forEach(s=>AP(s,t,n)),AP(null,t,n),e.join("")}function ZK(r){return Math.round(Date.now()/1e3)+r}function eY(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ls=()=>typeof window<"u"&&typeof document<"u",nc={tested:!1,writable:!1},rD=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nc.tested)return nc.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),nc.tested=!0,nc.writable=!0}catch{nc.tested=!0,nc.writable=!1}return nc.writable};function tY(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const nD=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>dh(async()=>{const{default:n}=await Promise.resolve().then(()=>yh);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},rY=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ud=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},sc=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Oa=async(r,e)=>{await r.removeItem(e)};class l0{constructor(){this.promise=new l0.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}l0.promiseConstructor=Promise;function Dx(r){const e=r.split(".");if(e.length!==3)throw new Z_("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!UK.test(e[n]))throw new Z_("JWT not in base64url format");return{header:JSON.parse(RP(e[0])),payload:JSON.parse(RP(e[1])),signature:QK(e[2]),raw:{header:e[0],payload:e[1]}}}async function nY(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function sY(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function iY(r){return("0"+r.toString(16)).substr(-2)}function oY(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,iY).join("")}async function aY(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function lY(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await aY(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qu(r,e,t=!1){const n=oY();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await ud(r,`${e}-code-verifier`,s);const i=await lY(n);return[i,n===i?"plain":"s256"]}const cY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uY(r){const e=r.headers.get(J_);if(!e||!e.match(cY))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dY(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function hY(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ju(r){if(!fY.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mx(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function NP(r){return JSON.parse(JSON.stringify(r))}var pY=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const lc=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),mY=[502,503,504];async function jP(r){var e;if(!rY(r))throw new X_(lc(r),0);if(mY.includes(r.status))throw new X_(lc(r),r.status);let t;try{t=await r.json()}catch(i){throw new eD(lc(i),i)}let n;const s=uY(r);if(s&&s.getTime()>=ZO["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new CP(lc(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ma}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new CP(lc(t),r.status,t.weak_password.reasons);throw new BK(lc(t),r.status||500,n)}const gY=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function xt(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[J_]||(i[J_]=ZO["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await yY(r,e,t+c,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function yY(r,e,t,n,s,i){const o=gY(e,n,s,i);let c;try{c=await r(t,Object.assign({},o))}catch(d){throw console.error(d),new X_(lc(d),0)}if(c.ok||await jP(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(d){await jP(d)}}function Fi(r){var e;let t=null;_Y(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ZK(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function OP(r){const e=Fi(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function qa(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function vY(r){return{data:r,error:null}}function wY(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=pY(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function xY(r){return r}function _Y(r){return r.access_token&&r.refresh_token&&r.expires_in}const Lx=["global","local","others"];var bY=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class EY{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=nD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Lx[0]){if(Lx.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lx.join(", ")}`);try{return await xt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qa})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=bY(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wY,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ct(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qa})}catch(t){if(ct(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,c,d;try{const h={nextPage:null,lastPage:0,total:0},p=await xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:xY});if(p.error)throw p.error;const g=await p.json(),v=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,w=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(k.split(";")[1].split("=")[1]);h[`${E}Page`]=_}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(ct(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ju(e);try{return await xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qa})}catch(t){if(ct(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ju(e);try{return await xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qa})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Ju(e);try{return await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qa})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ju(e.userId);try{const{data:t,error:n}=await xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(ct(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ju(e.userId),Ju(e.id);try{return{data:await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ct(t))return{data:null,error:t};throw t}}}function DP(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function TY(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xu={debug:!!(globalThis&&rD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sD extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SY extends sD{}async function kY(r,e,t){Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new SY(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Xu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function iD(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function IY(r){return parseInt(r,16)}function CY(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function PY(r){var e;const{chainId:t,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:c,requestId:d,resources:h,scheme:p,uri:g,version:v}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const w=iD(r.address),k=p?`${p}://${n}`:n,_=r.statement?`${r.statement}
`:"",E=`${k} wants you to sign in with your Ethereum account:
${w}

${_}`;let C=`URI: ${g}
Version: ${v}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(C+=`
Expiration Time: ${s.toISOString()}`),c&&(C+=`
Not Before: ${c.toISOString()}`),d&&(C+=`
Request ID: ${d}`),h){let P=`
Resources:`;for(const j of h){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);P+=`
- ${j}`}C+=P}return`${E}
${C}`}TY();const AY={url:LK,storageKey:VK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MP(r,e,t){return await t()}const Zu={};class kp{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kp.nextInstanceID,kp.nextInstanceID+=1,this.instanceID>0&&Ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},AY),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new EY({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nD(s.fetch),this.lock=s.lock||MP,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ls()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=kY:this.lock=MP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:rD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=DP(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=DP(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Zu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Zu[this.storageKey]=Object.assign(Object.assign({},Zu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Zu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zu[this.storageKey]=Object.assign(Object.assign({},Zu[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${XO}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=tY(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ls()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),qK(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ct(t)?{error:t}:{error:new eD("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Fi}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:p,password:g,options:v}=e;let w=null,k=null;this.flowType==="pkce"&&([w,k]=await Qu(this.storage,this.storageKey)),i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:g,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:k},xform:Fi})}else if("phone"in e){const{phone:p,password:g,options:v}=e;i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Fi})}else throw new Ng("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:c}=e;t=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:OP})}else if("phone"in e){const{phone:i,password:o,options:c}=e;t=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:OP})}else throw new Ng("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wf}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(ct(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,s,i,o,c,d,h,p,g,v;let w,k;if("message"in e)w=e.message,k=e.signature;else{const{chain:_,wallet:E,statement:C,options:P}=e;let j;if(Ls())if(typeof E=="object")j=E;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")j=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=E}const M=new URL((t=P==null?void 0:P.url)!==null&&t!==void 0?t:window.location.href),$=await j.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=iD($[0]);let A=(n=P==null?void 0:P.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const D=await j.request({method:"eth_chainId"});A=IY(D)}const R={domain:M.host,address:B,statement:C,uri:M.href,version:"1",chainId:A,nonce:(s=P==null?void 0:P.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=P==null?void 0:P.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=P==null?void 0:P.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=P==null?void 0:P.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=P==null?void 0:P.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=P==null?void 0:P.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=PY(R),k=await j.request({method:"personal_sign",params:[CY(w),B]})}try{const{data:_,error:E}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:k},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Fi});if(E)throw E;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new wf}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:E})}catch(_){if(ct(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,n,s,i,o,c,d,h,p,g,v,w;let k,_;if("message"in e)k=e.message,_=e.signature;else{const{chain:E,wallet:C,statement:P,options:j}=e;let M;if(Ls())if(typeof C=="object")M=C;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))M=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const $=new URL((t=j==null?void 0:j.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in M&&M.signIn){const B=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),P?{statement:P}:null));let A;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")A=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)A=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)k=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),_=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${$.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(s=(n=j==null?void 0:j.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((h=j==null?void 0:j.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((g=(p=j==null?void 0:j.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...j.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const B=await M.signMessage(new TextEncoder().encode(k),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=B}}try{const{data:E,error:C}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:XK(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Fi});if(C)throw C;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new wf}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:C})}catch(E){if(ct(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const t=await sc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:o}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Fi});if(await Oa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wf}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ct(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,c=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Fi}),{data:d,error:h}=c;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new wf}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(ct(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if("email"in e){const{email:c,options:d}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Qu(this.storage,this.storageKey));const{error:g}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:d}=e,{data:h,error:p}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new Ng("You must provide either an email or phone number.")}catch(c){if(ct(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Fi});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,h=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Qu(this.storage,this.storageKey)),await xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:vY})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ma;const{error:s}=await xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ct(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await xt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:c}=await xt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Ng("You must provide either an email or phone number and a type")}catch(t){if(ct(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await sc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<jx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await sc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Mx()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,p)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,p))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qa}):await this._useSession(async t=>{var n,s,i;const{data:o,error:c}=t;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ma}:await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qa})})}catch(t){if(ct(t))return WK(t)&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ma;const o=s.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Qu(this.storage,this.storageKey));const{data:h,error:p}=await xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:qa});if(p)throw p;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ma;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:o}=Dx(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ct(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:c}=t;if(c)throw c;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ma;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ct(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ls())throw new jg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new IP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jg("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new IP("No code detected.");const{data:P,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:c,expires_at:d,token_type:h}=e;if(!i||!c||!o||!h)throw new jg("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(c);let v=p+g;d&&(v=parseInt(d));const w=v-p;w*1e3<=cd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const k=v-g;p-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,v,p):p-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,v,p);const{data:_,error:E}=await this._getUser(i);if(E)throw E;const C={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:v,refresh_token:o,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(n){if(ct(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(zK(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=eY(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Qu(this.storage,this.storageKey,!0));try{return await xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ct(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,c,d,h,p;const{data:g,error:v}=i;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await xt(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Ls()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ct(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ct(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await sY(async s=>(s>0&&await nY(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fi})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ox(i)&&Date.now()+o-n<cd})}catch(n){if(this._debug(t,"error",n),ct(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ls()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await sc(this.storage,this.storageKey);if(s&&this.userStorage){let o=await sc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ud(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Mx()}else if(s&&!s.user&&!s.user){const o=await sc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Oa(this.storage,this.storageKey+"-user"),await ud(this.storage,this.storageKey,s)):s.user=Mx()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jx;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${jx}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ox(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(s.access_token);!c&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ma;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new l0;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ma;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),ct(i)){const o={session:null,error:i};return Ox(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await ud(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=NP(s);await ud(this.storage,this.storageKey,i)}else{const s=NP(t);await ud(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Oa(this.storage,this.storageKey),await Oa(this.storage,this.storageKey+"-code-verifier"),await Oa(this.storage,this.storageKey+"-user"),this.userStorage&&await Oa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/cd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${cd}ms, refresh threshold is ${Q_} ticks`),s<=Q_&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sD)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Qu(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(c.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ct(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:h}=await xt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(ct(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:c}=await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(t){if(ct(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ct(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Dx(s.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(c=>c.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+$K>s)return n;const{data:i,error:o}=await xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:w,error:k}=await this.getSession();if(k||!w.session)return{data:null,error:k};n=w.session.access_token}const{header:s,payload:i,signature:o,raw:{header:c,payload:d}}=Dx(n);t!=null&&t.allowExpired||dY(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!h){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:i,header:s,signature:o},error:null}}const p=hY(s.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,o,JK(`${c}.${d}`)))throw new Z_("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}}}kp.nextInstanceID=0;const RY=kp;class NY extends RY{constructor(e){super(e)}}var jY=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{h(n.next(p))}catch(g){o(g)}}function d(p){try{h(n.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(c,d)}h((n=n.apply(r,e||[])).next())})};class OY{constructor(e,t,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=t;const c=MK(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:kK,realtime:CK,auth:Object.assign(Object.assign({},IK),{storageKey:d}),global:SK},p=DK(n??{},h);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=NK(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new BG(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new bK(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new NG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jY(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:c,lock:d,debug:h},p,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NY({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,flowType:c,lock:d,debug:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new iK(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oD=(r,e,t)=>new OY(r,e,t);function DY(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}DY()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const aD="your_supabase_url",lD="your_supabase_anon_key",c0=oD(aD,lD);oD(aD,lD,{realtime:{params:{eventsPerSecond:10}}});const cD=b.createContext(void 0),MY=({children:r})=>{const[e,t]=G.useState({user:null,isAuthenticated:!1,loading:!0}),n=G.useCallback(async(g,v)=>{try{const{data:w,error:k}=await c0.from("user_presence").upsert({user_id:g,is_online:v,last_seen_at:new Date().toISOString()},{onConflict:"user_id"}).select();if(k)throw k;console.log(`[Supabase Presence] User ${g} presence updated: ${v?"online":"offline"}`)}catch(w){console.error("Error updating user presence:",w.message)}},[]);G.useEffect(()=>{const g=Va.onAuthStateChanged(async w=>{w?(t({user:w,isAuthenticated:!0,loading:!1}),n(w.uid,!0)):(e.user&&n(e.user.uid,!1),t({user:null,isAuthenticated:!1,loading:!1}))}),v=()=>{e.user&&n(e.user.uid,!1)};return window.addEventListener("beforeunload",v),()=>{g(),window.removeEventListener("beforeunload",v),e.user&&n(e.user.uid,!1)}},[n]);const p={...e,signupWithEmailPassword:async(g,v,w,k)=>{try{const _=await w8(Va,g,v),E=`${w||""} ${k||""}`.trim();return await w1(_.user,{displayName:E,photoURL:null}),_.user?(await v1(_.user),ue.success("Account created successfully! A verification email has been sent to your inbox. Please verify your email to continue."),console.log(`[Auth Log] Signup successful (Email/Password) for user: ${g} at ${new Date().toISOString()}. Verification email sent.`),_.user):(ue.success("Account created successfully! You are now logged in."),console.log(`[Auth Log] Signup successful (Email/Password) for user: ${g} at ${new Date().toISOString()}`),null)}catch(_){console.error("Auth error caught during signup:",_),console.log(`[Auth Log] Signup failed (Email/Password) for user: ${g} at ${new Date().toISOString()} - Error: ${_.message}`);let E="Failed to create account.";throw _.code==="auth/email-already-in-use"?E="This email is already in use.":_.code==="auth/weak-password"?E="Password should be at least 6 characters.":_.message&&(E=_.message),ue.error(E),_}},loginWithEmailPassword:async(g,v)=>{try{await x8(Va,g,v),ue.success("Logged in successfully!"),console.log(`[Auth Log] Login successful (Email/Password) for user: ${g} at ${new Date().toISOString()}`)}catch(w){console.error("Auth error caught during login:",w),console.log(`[Auth Log] Login failed (Email/Password) for user: ${g} at ${new Date().toISOString()} - Error: ${w.message}`);let k="Failed to log in.";throw w.code==="auth/invalid-credential"?k="Invalid email or password.":w.code==="auth/user-not-found"?k="No user found with this email.":w.code==="auth/wrong-password"?k="Incorrect password.":w.message&&(k=w.message),ue.error(k),w}},logout:async()=>{try{e.user&&await n(e.user.uid,!1),await N8(Va),ue.success("Logged out successfully!"),console.log(`[Auth Log] Logout successful at ${new Date().toISOString()}`)}catch(g){console.error("Error signing out:",g),ue.error(`Failed to log out: ${g.message}`),console.log(`[Auth Log] Logout failed at ${new Date().toISOString()} - Error: ${g.message}`)}},updateUserProfile:async(g,v,w)=>{if(!e.user){ue.error("You must be logged in to update your profile.");return}try{const k=`${g} ${v}`.trim();await w1(e.user,{displayName:k,photoURL:w}),ue.success("Firebase profile updated successfully!"),console.log(`[Auth Log] Firebase profile update successful for user: ${e.user.uid} at ${new Date().toISOString()}`)}catch(k){throw console.error("Error updating Firebase profile:",k),ue.error(`Failed to update Firebase profile: ${k.message}`),console.log(`[Auth Log] Firebase profile update failed for user: ${e.user.uid} at ${new Date().toISOString()} - Error: ${k.message}`),k}},signInWithGoogle:async()=>{var g,v,w;try{t(_=>({..._,loading:!0}));const k=await Oz.signInWithGoogle();if((g=k.credential)!=null&&g.idToken&&((v=k.credential)!=null&&v.accessToken)){const _=Vo.credential(k.credential.idToken,k.credential.accessToken);await Av(Va,_),ue.success("Logged in with Google successfully!"),console.log(`[Auth Log] Google sign-in successful for user: ${(w=Va.currentUser)==null?void 0:w.email} at ${new Date().toISOString()}`)}else throw new Error("Google sign-in did not return valid credentials.")}catch(k){console.error("Auth error caught during Google sign-in:",k),console.log(`[Auth Log] Login failed (Google) at ${new Date().toISOString()} - Error: ${k.message}`);let _="Failed to sign in with Google.";throw k.code==="auth/popup-closed-by-user"?_="Google sign-in popup closed.":k.message&&(_=k.message),ue.error(_),t(E=>({...E,loading:!1})),k}},sendVerificationEmail:async()=>{if(!e.user){ue.error("No user logged in to send verification email.");return}try{await v1(e.user),ue.success("Verification email sent! Please check your inbox."),console.log(`[Auth Log] Verification email sent to ${e.user.email} at ${new Date().toISOString()}`)}catch(g){throw console.error("Error sending verification email:",g),ue.error(`Failed to send verification email: ${g.message}`),console.log(`[Auth Log] Failed to send verification email to ${e.user.email} at ${new Date().toISOString()} - Error: ${g.message}`),g}}};return u.jsx(cD.Provider,{value:p,children:r})},Sr=()=>{const r=b.useContext(cD);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},LY=async r=>{try{const{data:e,error:t}=await c0.from("profiles").select("*").eq("id",r).single();if(t&&t.code!=="PGRST116")throw t;return e}catch(e){return console.error("Error fetching Supabase profile:",e),ue.error(`Failed to load user profile: ${e.message}`),null}},VY=async(r,e,t,n,s,i="user")=>{try{const{data:o,error:c}=await c0.from("profiles").upsert({id:r,first_name:e,last_name:t,avatar_url:s,phone:n,role:i,updated_at:new Date().toISOString()}).select().single();if(c)throw c;return o}catch(o){return console.error("Error creating/updating Supabase profile:",o),ue.error(`Failed to save user profile: ${o.message}`),null}},uD=b.createContext(void 0),FY=({children:r,firebaseUser:e})=>{const[t,n]=G.useState(null),[s,i]=G.useState(!0),[o,c]=G.useState(null),d=G.useCallback(async g=>{i(!0),c(null);try{const v=await LY(g);return n(v),v}catch(v){return c(v.message||"Failed to fetch Supabase profile."),null}finally{i(!1)}},[]),h=G.useCallback(async(g,v,w,k,_,E)=>{i(!0),c(null);try{const C=await VY(g,v,w,k,_,E);return n(C),ue.success("Supabase profile updated successfully!"),C}catch(C){return c(C.message||"Failed to update Supabase profile."),ue.error(`Failed to update Supabase profile: ${C.message}`),null}finally{i(!1)}},[]);G.useEffect(()=>{e?d(e.uid):(n(null),i(!1))},[e,d]);const p={profile:t,loadingProfile:s,errorProfile:o,fetchProfile:d,updateProfile:h};return u.jsx(uD.Provider,{value:p,children:r})},u0=()=>{const r=b.useContext(uD);if(r===void 0)throw new Error("useSupabaseProfile must be used within a SupabaseProfileProvider");return r},LP=async r=>{try{const e=Nn(Gt,"taskerProfiles",r),t=await uo(e);return t.exists()?t.data():null}catch(e){return console.error("Error fetching tasker profile by ID:",e),ue.error(`Failed to load tasker profile: ${e.message}`),null}},UY=async(r,e)=>{try{const t=Nn(Gt,"taskerProfiles",e.uid),n={userId:e.uid,displayName:e.displayName||e.email||"Anonymous Tasker",photoURL:e.photoURL||void 0,isTasker:!0,dateJoined:new Date().toISOString()};return await xO(t,{...n,...r},{merge:!0}),ue.success("Tasker profile saved successfully!"),n}catch(t){throw console.error("Error saving tasker profile:",t),ue.error(`Failed to save tasker profile: ${t.message}`),t}},VP=async()=>{try{return(await gh(ns(Gt,"taskerProfiles"))).docs.map(t=>t.data())}catch(r){throw console.error("Error fetching all tasker profiles:",r),ue.error("Failed to load all tasker profiles."),r}},$Y=async()=>{const r=ns(Gt,"taskerProfiles");if((await gh(r)).empty){console.log("Tasker profiles collection is empty, seeding initial tasker profiles...");const t=[{userId:"seed-tasker-1",displayName:"Kuya Juan",photoURL:"https://randomuser.me/api/portraits/men/21.jpg",skills:["Plumbing","Electrical","Carpentry","Assembly Services"],bio:"Experienced handyman with 10+ years in home repairs and installations. Mabilis at maaasahan!",hourlyRate:350,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-2",displayName:"Ate Maria",photoURL:"https://randomuser.me/api/portraits/women/22.jpg",skills:["Home Cleaning","Office Cleaning","Deep Cleaning"],bio:"Dedicated cleaner providing top-notch cleaning services for homes and offices. Malinis at maayos ang trabaho!",hourlyRate:250,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-3",displayName:"Manong Pedro",photoURL:"https://randomuser.me/api/portraits/men/23.jpg",skills:["Delivery","Errands","Grocery Shopping"],bio:"Fast and reliable delivery service for documents, packages, and groceries. On-time palagi!",hourlyRate:180,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-4",displayName:"Inday Elena",photoURL:"https://randomuser.me/api/portraits/women/24.jpg",skills:["Painting Services","Wall Repair"],bio:"Professional painter for residential and commercial spaces. Quality finish guaranteed!",hourlyRate:300,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-5",displayName:"Mang Ramon",photoURL:"https://randomuser.me/api/portraits/men/25.jpg",skills:["Laptop Fix","Appliance Repair","Electronics Setup"],bio:"Tech-savvy individual offering repair services for laptops and home appliances. Expert sa gadgets!",hourlyRate:400,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-6",displayName:"Teacher Sofia",photoURL:"https://randomuser.me/api/portraits/women/26.jpg",skills:["Tutoring (Math)","Tutoring (English)","Online Teaching"],bio:"Patient and effective tutor for students of all ages. Helping you achieve academic success!",hourlyRate:280,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-7",displayName:"Kuya Carlo",photoURL:"https://randomuser.me/api/portraits/men/27.jpg",skills:["Carpentry","Furniture Assembly","Woodwork"],bio:"Skilled carpenter for custom furniture and repairs. Gawaing kahoy, ako bahala!",hourlyRate:380,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-8",displayName:"Ate Anna",photoURL:"https://randomuser.me/api/portraits/women/28.jpg",skills:["Gardening","Landscaping","Plant Care"],bio:"Passionate gardener ready to transform your outdoor space. Green thumb, happy plants!",hourlyRate:220,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-9",displayName:"Manong Mark",photoURL:"https://randomuser.me/api/portraits/men/29.jpg",skills:["Moving","Hauling","Packing"],bio:"Efficient and careful mover for your relocation needs. Walang hassle sa paglipat!",hourlyRate:450,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-10",displayName:"Ate Grace",photoURL:"https://randomuser.me/api/portraits/women/30.jpg",skills:["Pet Sitting","Dog Walking","Pet Care"],bio:"Loving and responsible pet sitter for your furry friends. Alaga ang pets mo sa akin!",hourlyRate:200,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-11",displayName:"Kuya Benny",photoURL:"https://randomuser.me/api/portraits/men/31.jpg",skills:["Construction","Renovation","Demolition"],bio:"Expert in small to medium construction and renovation projects. Building dreams, one brick at a time!",hourlyRate:500,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-12",displayName:"Chef Carla",photoURL:"https://randomuser.me/api/portraits/women/32.jpg",skills:["Catering","Personal Chef","Meal Prep"],bio:"Bringing delicious meals to your table. From intimate dinners to small events, I've got you covered!",hourlyRate:400,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-13",displayName:"Kuya David",photoURL:"https://randomuser.me/api/portraits/men/33.jpg",skills:["Personal Driver","Airport Transfer","Logistics"],bio:"Safe and reliable driver for all your transportation needs. Your comfort is my priority!",hourlyRate:250,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-14",displayName:"Event Planner Emily",photoURL:"https://randomuser.me/api/portraits/women/34.jpg",skills:["Event Planning","Party Organizer","Decorations"],bio:"Making your special occasions unforgettable. Let's plan your perfect event!",hourlyRate:600,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-15",displayName:"Mang Frank",photoURL:"https://randomuser.me/api/portraits/men/35.jpg",skills:["General Repairs","Home Maintenance","Appliance Installation"],bio:"Your go-to guy for all household fixes. No job too small, no problem too big!",hourlyRate:320,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-16",displayName:"Graphic Designer Gina",photoURL:"https://randomuser.me/api/portraits/women/36.jpg",skills:["Graphic Design","Logo Design","Social Media Content"],bio:"Creative graphic designer ready to elevate your brand's visual identity. Let's make it pop!",hourlyRate:480,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-17",displayName:"Kuya Henry",photoURL:"https://randomuser.me/api/portraits/men/37.jpg",skills:["Errands","Personal Assistant","Shopping"],bio:"Your reliable personal helper for daily errands and tasks. Consider it done!",hourlyRate:200,isTasker:!0,dateJoined:new Date().toISOString()}];for(const n of t)await xO(Nn(r,n.userId),n);ue.info("Initial demo tasker profiles added!")}else console.log("Tasker profiles collection is not empty, skipping seeding.")},dD=b.createContext(void 0),BY=({children:r})=>{const{user:e,isAuthenticated:t,loading:n}=Sr(),{profile:s,updateProfile:i}=u0(),[o,c]=G.useState(null),[d,h]=G.useState([]),[p,g]=G.useState(!0),[v,w]=G.useState(null),[k,_]=G.useState(!1),E=async j=>LP(j);G.useEffect(()=>{(async()=>{if(g(!0),w(null),t&&e)try{const M=await LP(e.uid);c(M),_(!!M)}catch{}else c(null),_(!1);try{const M=await VP();h(M)}catch{}finally{g(!1)}})(),$Y()},[t,e,n]);const P={taskerProfile:o,allTaskerProfiles:d,loading:p,error:v,createOrUpdateTaskerProfile:async j=>{var M,$;if(!t||!e){ue.error("You must be logged in to manage a tasker profile.");return}g(!0);try{const B=await UY(j,e);c(B),_(!0),await i(e.uid,((M=e.displayName)==null?void 0:M.split(" ")[0])||null,(($=e.displayName)==null?void 0:$.split(" ").slice(1).join(" "))||null,(s==null?void 0:s.phone)||null,e.photoURL||null,"tasker");const A=await VP();h(A)}catch{}finally{g(!1)}},isTasker:k,fetchTaskerProfileById:E};return u.jsx(dD.Provider,{value:P,children:r})},Is=()=>{const r=b.useContext(dD);if(r===void 0)throw new Error("useTaskerProfile must be used within a TaskerProfileProvider");return r},hD=b.createContext(void 0),zY=({children:r})=>{const{user:e,isAuthenticated:t,loading:n}=Sr(),{taskerProfile:s,loading:i}=Is(),[o,c]=G.useState([]),[d,h]=G.useState([]),[p,g]=G.useState(!0),[v,w]=G.useState(!1),[k,_]=G.useState(null),[E,C]=G.useState(null),P=G.useRef(null),[j,M]=G.useState({});G.useEffect(()=>{if(!t||!e||n){c([]),g(!1);return}g(!0),_(null);const L=ns(Gt,"chatRooms"),N=Tc(L,Sc("participants","array-contains",e.uid),$_("lastMessageTimestamp","desc")),Y=Uy(N,ae=>{const de=ae.docs.map(he=>{var J,K;const X=he.data();return{id:he.id,participants:X.participants,participantNames:X.participantNames,lastMessage:X.lastMessage,lastMessageTimestamp:(J=X.lastMessageTimestamp)==null?void 0:J.toDate().toISOString(),createdAt:(K=X.createdAt)==null?void 0:K.toDate().toISOString(),typingUsers:X.typingUsers||[],status:X.status||"active"}});c(de),g(!1)},ae=>{console.error("Error fetching chat rooms:",ae),_("Failed to fetch chat rooms."),g(!1),ue.error("Failed to load chat rooms.")});return()=>Y()},[t,e,n]),G.useEffect(()=>{if(!E){h([]);return}w(!0),_(null);const L=ns(Gt,"chatRooms",E,"messages"),N=Tc(L,$_("timestamp","asc")),Y=Uy(N,ae=>{const de=ae.docs.map(he=>{var J;const X=he.data();return{id:he.id,roomId:E,senderId:X.senderId,senderName:X.senderName,senderAvatar:X.senderAvatar,text:X.text,timestamp:(J=X.timestamp)==null?void 0:J.toDate().toISOString()}});h(de),w(!1)},ae=>{console.error("Error fetching messages:",ae),_("Failed to fetch messages."),w(!1),ue.error("Failed to load messages.")});return()=>Y()},[E]),G.useEffect(()=>{if(!t||!e||!E){M({});return}const L=o.find(ae=>ae.id===E);if(!L){M({});return}const N=L.participants,Y=c0.channel(`room_presence_${L.id}`);return Y.on("presence",{event:"sync"},()=>{const ae=Y.presenceState(),de={};N.forEach(he=>{de[he]=ae[he]&&ae[he].length>0}),M(de)}).subscribe(async ae=>{ae==="SUBSCRIBED"&&await Y.track({user_id:e.uid,online_at:new Date().toISOString()})}),()=>{Y&&Y.unsubscribe()}},[E,o,t,e]);const $=L=>{C(L)},B=async(L,N)=>{var Y,ae;if(!t||!e||!N.trim()){ue.error("You must be logged in and provide a message.");return}try{const de=ns(Gt,"chatRooms",L,"messages");await Sp(de,{senderId:e.uid,senderName:e.displayName||e.email||"Anonymous",senderAvatar:e.photoURL||void 0,text:N.trim(),timestamp:hn()});const he=Nn(ns(Gt,"chatRooms"),L);await Bs(he,{lastMessage:N.trim(),lastMessageTimestamp:hn(),typingUsers:((ae=(Y=o.find(X=>X.id===L))==null?void 0:Y.typingUsers)==null?void 0:ae.filter(X=>X!==e.uid))||[]})}catch(de){throw console.error("Error sending message:",de),ue.error(`Failed to send message: ${de.message}`),de}},A=async(L,N)=>{if(!t||!e)return ue.error("You must be logged in to create a chat room."),null;L.includes(e.uid)||(L.push(e.uid),N.push(e.displayName||e.email||"Anonymous")),L.sort();try{const Y=ns(Gt,"chatRooms"),ae=Tc(Y,Sc("participants","==",L),uH(1)),de=await gh(ae);if(!de.empty){const X=de.docs[0].id;return ue.info("Chat room already exists."),X}const he=await Sp(Y,{participants:L,participantNames:N,createdAt:hn(),lastMessage:"New chat started.",lastMessageTimestamp:hn(),typingUsers:[],status:"active"});return ue.success("Chat room created!"),he.id}catch(Y){throw console.error("Error creating chat room:",Y),ue.error(`Failed to create chat room: ${Y.message}`),Y}},R=G.useCallback((L,N)=>{if(!e||!L)return;P.current&&clearTimeout(P.current);const Y=async()=>{var he;const ae=Nn(Gt,"chatRooms",L),de=await uo(ae);if(de.exists()){const X=((he=de.data())==null?void 0:he.typingUsers)||[];let J=[...X];N&&!J.includes(e.uid)?J.push(e.uid):!N&&J.includes(e.uid)&&(J=J.filter(K=>K!==e.uid)),(J.length!==X.length||J.some((K,W)=>K!==X[W]))&&await Bs(ae,{typingUsers:J})}};N?(Y(),P.current=setTimeout(()=>{R(L,!1)},3e3)):Y()},[e]),D=async(L,N)=>{try{const Y=Nn(Gt,"chatRooms",L);await Bs(Y,{status:N,dateUpdated:hn()}),ue.success(`Chat room status updated to ${N}.`)}catch(Y){throw console.error("Error updating chat room status:",Y),ue.error(`Failed to update chat room status: ${Y.message}`),Y}},U={chatRooms:G.useMemo(()=>o.map(L=>({...L,onlineStatus:j})),[o,j]),messages:d,loadingRooms:p||n,loadingMessages:v,error:k,sendMessage:B,createChatRoom:A,fetchMessagesForRoom:$,sendTypingStatus:R,updateChatRoomStatus:D};return u.jsx(hD.Provider,{value:U,children:r})},tm=()=>{const r=b.useContext(hD);if(r===void 0)throw new Error("useChat must be used within a ChatProvider");return r},WY=async(r,e)=>{try{await Sp(ns(Gt,"tasks"),{...r,posterId:e.uid,posterName:e.displayName||e.email||"Anonymous User",posterAvatar:e.photoURL||"https://randomuser.me/api/portraits/lego/1.jpg",datePosted:hn(),status:"open",imageUrl:r.imageUrl||"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}),ue.success("Task posted successfully!")}catch(t){throw console.error("Error adding task:",t),ue.error(`Failed to post task: ${t.message}`),t}},qY=async(r,e,t)=>{var n;try{const s=Nn(Gt,"tasks",r),i=await uo(s);if(!i.exists()||((n=i.data())==null?void 0:n.posterId)!==t.uid){ue.error("You are not authorized to edit this task.");return}await Bs(s,{...e,dateUpdated:hn()}),ue.success("Task updated successfully!")}catch(s){throw console.error("Error updating task:",s),ue.error(`Failed to update task: ${s.message}`),s}},HY=async(r,e)=>{var t;try{const n=Nn(Gt,"tasks",r),s=await uo(n);if(!s.exists()||((t=s.data())==null?void 0:t.posterId)!==e.uid){ue.error("You are not authorized to delete this task.");return}await fH(n),ue.success("Task deleted successfully!")}catch(n){throw console.error("Error deleting task:",n),ue.error(`Failed to delete task: ${n.message}`),n}},GY=async(r,e,t,n)=>{var s;try{const i=Nn(Gt,"tasks",r),o=await uo(i);if(!o.exists()||((s=o.data())==null?void 0:s.posterId)!==n.uid){ue.error("You are not authorized to complete and review this task.");return}await Bs(i,{status:"completed",rating:e,review:t,dateCompleted:hn(),dateUpdated:hn()}),ue.success("Task marked as completed and reviewed!")}catch(i){throw console.error("Error completing task with review:",i),ue.error(`Failed to complete task and add review: ${i.message}`),i}},KY=async(r,e)=>{var t;try{const n=Nn(Gt,"tasks",r),s=await uo(n);if(!s.exists()||((t=s.data())==null?void 0:t.posterId)!==e.uid){ue.error("You are not authorized to cancel this task.");return}await Bs(n,{status:"cancelled",assignedTaskerId:null,assignedOfferId:null,chatRoomId:null,dateUpdated:hn()}),ue.success("Task cancelled successfully!")}catch(n){throw console.error("Error cancelling task:",n),ue.error(`Failed to cancel task: ${n.message}`),n}},YY=async(r,e,t,n,s,i)=>{try{await Sp(ns(Gt,"offers"),{taskId:r,taskerId:s.uid,taskerName:i.displayName,taskerAvatar:i.photoURL,clientId:e,offerAmount:t,message:n,status:"pending",dateCreated:hn()}),ue.success("Offer submitted successfully!")}catch(o){throw console.error("Error adding offer:",o),ue.error(`Failed to submit offer: ${o.message}`),o}},QY=async(r,e,t,n)=>{try{const s=Nn(Gt,"offers",r),i=await uo(s);if(!i.exists())return ue.error("Offer not found."),null;const o=i.data();if(o.clientId!==t.uid)return ue.error("You are not authorized to accept this offer."),null;const c=Tc(ns(Gt,"offers"),Sc("taskId","==",e),Sc("status","==","pending"),Sc("__name__","!=",r)),d=await gh(c),h=[];d.forEach(g=>{h.push(Bs(g.ref,{status:"rejected",dateUpdated:hn()}))}),await Promise.all(h),await Bs(s,{status:"accepted",dateUpdated:hn()});const p=Nn(Gt,"tasks",e);return await Bs(p,{status:"assigned",assignedTaskerId:o.taskerId,assignedOfferId:r,chatRoomId:n,dateUpdated:hn()}),ue.success("Offer accepted!"),{taskerId:o.taskerId,clientId:o.clientId}}catch(s){throw console.error("Error accepting offer:",s),ue.error(`Failed to accept offer: ${s.message}`),s}},JY=async(r,e)=>{try{const t=Nn(Gt,"offers",r),n=await uo(t);if(!n.exists()){ue.error("Offer not found.");return}if(n.data().clientId!==e.uid){ue.error("You are not authorized to reject this offer.");return}await Bs(t,{status:"rejected",dateUpdated:hn()}),ue.info("Offer rejected.")}catch(t){throw console.error("Error rejecting offer:",t),ue.error(`Failed to reject offer: ${t.message}`),t}},XY=async(r,e)=>{try{const t=Nn(Gt,"offers",r),n=await uo(t);if(!n.exists()){ue.error("Offer not found.");return}if(n.data().taskerId!==e.uid){ue.error("You are not authorized to withdraw this offer.");return}await Bs(t,{status:"withdrawn",dateUpdated:hn()}),ue.info("Offer withdrawn.")}catch(t){throw console.error("Error withdrawing offer:",t),ue.error(`Failed to withdraw offer: ${t.message}`),t}},ZY=async(r,e)=>{try{const t=Tc(ns(Gt,"offers"),Sc("taskId","==",r),Sc("clientId","==",e.uid)),n=await gh(t),s=[];n.forEach(i=>{const o=i.data();(o.status==="pending"||o.status==="accepted")&&s.push(Bs(i.ref,{status:"cancelled",dateUpdated:hn()}))}),await Promise.all(s),console.log(`Cancelled ${n.size} offers for task ${r}.`)}catch(t){throw console.error("Error cancelling offers for task:",t),ue.error(`Failed to cancel associated offers: ${t.message}`),t}},eQ=(r,e)=>{const t=ns(Gt,"offers"),n=Tc(t);return Uy(n,i=>{const o=i.docs.map(c=>{var h,p;const d=c.data();return{id:c.id,taskId:d.taskId,taskerId:d.taskerId,taskerName:d.taskerName,taskerAvatar:d.taskerAvatar,clientId:d.clientId,offerAmount:d.offerAmount,message:d.message,status:d.status,dateCreated:((h=d.dateCreated)==null?void 0:h.toDate().toISOString())||new Date().toISOString(),dateUpdated:(p=d.dateUpdated)==null?void 0:p.toDate().toISOString()}});r(o)},i=>{console.error("Error fetching offers:",i),e("Failed to fetch offers."),ue.error("Failed to load offers.")})},tQ=[{id:"task-open-1",title:"Clean my apartment",category:"cleaning",description:"Need a thorough cleaning for a 2-bedroom apartment. Includes kitchen, bathroom, and living area.",location:"Makati City",budget:1500,posterId:"seed-user-1",posterName:"Client A",posterAvatar:"https://randomuser.me/api/portraits/lego/2.jpg",datePosted:"2023-10-26T10:00:00Z",status:"open",imageUrl:"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"},{id:"task-open-2",title:"Assemble IKEA bookshelf",category:"assembly",description:"I need help assembling a large IKEA bookshelf. All tools provided.",location:"Quezon City",budget:800,posterId:"seed-user-2",posterName:"Client B",posterAvatar:"https://randomuser.me/api/portraits/lego/3.jpg",datePosted:"2023-10-25T14:30:00Z",status:"open",imageUrl:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],rQ=[{id:"task-assigned-1",title:"Fix leaky faucet",category:"repairs",description:"My kitchen faucet is leaking and needs to be repaired or replaced.",location:"Taguig City",budget:1e3,posterId:"seed-user-3",posterName:"Client C",posterAvatar:"https://randomuser.me/api/portraits/lego/4.jpg",datePosted:"2023-10-20T09:00:00Z",status:"assigned",assignedTaskerId:"seed-tasker-1",imageUrl:"https://images.unsplash.com/photo-1581093458791-8a6b5d174d6c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],nQ=[{id:"task-completed-1",title:"Deliver groceries",category:"delivery",description:"Need groceries delivered from SM Supermarket to my home.",location:"Pasig City",budget:500,posterId:"seed-user-4",posterName:"Client D",posterAvatar:"https://randomuser.me/api/portraits/lego/5.jpg",datePosted:"2023-10-15T11:00:00Z",status:"completed",assignedTaskerId:"seed-tasker-3",rating:5,review:"Fast and efficient delivery! Highly recommended.",imageUrl:"https://images.unsplash.com/photo-1541976590-713941681591?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],sQ=async()=>{const r=ns(Gt,"tasks");if((await gh(r)).empty){console.log("Database is empty, seeding initial tasks...");const t=[...tQ,...rQ,...nQ];for(const n of t)await Sp(r,n);ue.info("Initial demo tasks added!")}else console.log("Tasks collection is not empty, skipping seeding.")},fD=b.createContext(void 0),iQ=({children:r})=>{const{user:e,isAuthenticated:t}=Sr(),{updateChatRoomStatus:n}=tm(),[s,i]=G.useState([]),[o,c]=G.useState(!0),[d,h]=G.useState(null);G.useEffect(()=>{c(!0),h(null);const E=ns(Gt,"tasks"),C=Tc(E,$_("datePosted","desc")),P=Uy(C,j=>{const M=j.docs.map($=>{var R,D;const B=$.data();let A;return B.datePosted instanceof Ft?A=B.datePosted.toDate():typeof B.datePosted=="string"?A=new Date(B.datePosted):A=new Date,{id:$.id,title:B.title,category:B.category,description:B.description,location:B.location,budget:B.budget,posterId:B.posterId,posterName:B.posterName,posterAvatar:B.posterAvatar||"https://randomuser.me/api/portraits/lego/1.jpg",datePosted:A.toISOString().split("T")[0],status:B.status||"open",imageUrl:B.imageUrl||"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",assignedTaskerId:B.assignedTaskerId||void 0,assignedOfferId:B.assignedOfferId||void 0,chatRoomId:B.chatRoomId||void 0,rating:B.rating||void 0,review:B.review||void 0,dateUpdated:(R=B.dateUpdated)==null?void 0:R.toDate().toISOString(),dateCompleted:(D=B.dateCompleted)==null?void 0:D.toDate().toISOString()}});i(M),c(!1),M.length===0&&sQ()},j=>{console.error("Error fetching tasks:",j),h("Failed to fetch tasks."),c(!1),ue.error("Failed to load tasks.")});return()=>P()},[]);const _={tasks:s,loading:o,error:d,addTask:async E=>{if(!t||!e){ue.error("You must be logged in to post a task.");return}await WY(E,e)},editTask:async(E,C)=>{if(!t||!e){ue.error("You must be logged in to edit a task.");return}await qY(E,C,e)},deleteTask:async E=>{if(!t||!e){ue.error("You must be logged in to delete a task.");return}await HY(E,e)},completeTaskWithReview:async(E,C,P)=>{if(!t||!e){ue.error("You must be logged in to complete and review a task.");return}const j=s.find(M=>M.id===E);j!=null&&j.chatRoomId&&await n(j.chatRoomId,"closed"),await GY(E,C,P,e)},cancelTask:async E=>{if(!t||!e){ue.error("You must be logged in to cancel a task.");return}try{const C=s.find(P=>P.id===E);C!=null&&C.chatRoomId&&await n(C.chatRoomId,"closed"),await KY(E,e),await ZY(E,e)}catch{}}};return u.jsx(fD.Provider,{value:_,children:r})},oa=()=>{const r=b.useContext(fD);if(r===void 0)throw new Error("useTasks must be used within a TasksProvider");return r};function Be(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r==null||r(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ip({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,s]=oQ({defaultProp:e,onChange:t}),i=r!==void 0,o=i?r:n,c=ur(t),d=b.useCallback(h=>{if(i){const g=typeof h=="function"?h(r):h;g!==r&&c(g)}else s(h)},[i,r,s,c]);return[o,d]}function oQ({defaultProp:r,onChange:e}){const t=b.useState(r),[n]=t,s=b.useRef(n),i=ur(e);return b.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),t}var aQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pt=aQ.reduce((r,e)=>{const t=Ac(`Primitive.${e}`),n=b.forwardRef((s,i)=>{const{asChild:o,...c}=s,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(d,{...c,ref:i})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{});function pD(r,e){r&&rh.flushSync(()=>r.dispatchEvent(e))}var lQ="DismissableLayer",eb="dismissableLayer.update",cQ="dismissableLayer.pointerDownOutside",uQ="dismissableLayer.focusOutside",FP,mD=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d0=b.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...d}=r,h=b.useContext(mD),[p,g]=b.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=b.useState({}),k=ft(e,A=>g(A)),_=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(E),P=p?_.indexOf(p):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,M=P>=C,$=fQ(A=>{const R=A.target,D=[...h.branches].some(V=>V.contains(R));!M||D||(s==null||s(A),o==null||o(A),A.defaultPrevented||c==null||c())},v),B=pQ(A=>{const R=A.target;[...h.branches].some(V=>V.contains(R))||(i==null||i(A),o==null||o(A),A.defaultPrevented||c==null||c())},v);return jA(A=>{P===h.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&c&&(A.preventDefault(),c()))},v),b.useEffect(()=>{if(p)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(FP=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),UP(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=FP)}},[p,v,t,h]),b.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),UP())},[p,h]),b.useEffect(()=>{const A=()=>w({});return document.addEventListener(eb,A),()=>document.removeEventListener(eb,A)},[]),u.jsx(pt.div,{...d,ref:k,style:{pointerEvents:j?M?"auto":"none":void 0,...r.style},onFocusCapture:Be(r.onFocusCapture,B.onFocusCapture),onBlurCapture:Be(r.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Be(r.onPointerDownCapture,$.onPointerDownCapture)})});d0.displayName=lQ;var dQ="DismissableLayerBranch",hQ=b.forwardRef((r,e)=>{const t=b.useContext(mD),n=b.useRef(null),s=ft(e,n);return b.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),u.jsx(pt.div,{...r,ref:s})});hQ.displayName=dQ;function fQ(r,e=globalThis==null?void 0:globalThis.document){const t=ur(r),n=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=c=>{if(c.target&&!n.current){let d=function(){gD(cQ,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function pQ(r,e=globalThis==null?void 0:globalThis.document){const t=ur(r),n=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!n.current&&gD(uQ,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function UP(){const r=new CustomEvent(eb);document.dispatchEvent(r)}function gD(r,e,t,{discrete:n}){const s=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?pD(s,i):s.dispatchEvent(i)}var Vx="focusScope.autoFocusOnMount",Fx="focusScope.autoFocusOnUnmount",$P={bubbles:!1,cancelable:!0},mQ="FocusScope",h0=b.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=r,[c,d]=b.useState(null),h=ur(s),p=ur(i),g=b.useRef(null),v=ft(e,_=>d(_)),w=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(n){let _=function(j){if(w.paused||!c)return;const M=j.target;c.contains(M)?g.current=M:La(g.current,{select:!0})},E=function(j){if(w.paused||!c)return;const M=j.relatedTarget;M!==null&&(c.contains(M)||La(g.current,{select:!0}))},C=function(j){if(document.activeElement===document.body)for(const $ of j)$.removedNodes.length>0&&La(c)};document.addEventListener("focusin",_),document.addEventListener("focusout",E);const P=new MutationObserver(C);return c&&P.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",E),P.disconnect()}}},[n,c,w.paused]),b.useEffect(()=>{if(c){zP.add(w);const _=document.activeElement;if(!c.contains(_)){const C=new CustomEvent(Vx,$P);c.addEventListener(Vx,h),c.dispatchEvent(C),C.defaultPrevented||(gQ(_Q(yD(c)),{select:!0}),document.activeElement===_&&La(c))}return()=>{c.removeEventListener(Vx,h),setTimeout(()=>{const C=new CustomEvent(Fx,$P);c.addEventListener(Fx,p),c.dispatchEvent(C),C.defaultPrevented||La(_??document.body,{select:!0}),c.removeEventListener(Fx,p),zP.remove(w)},0)}}},[c,h,p,w]);const k=b.useCallback(_=>{if(!t&&!n||w.paused)return;const E=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,C=document.activeElement;if(E&&C){const P=_.currentTarget,[j,M]=yQ(P);j&&M?!_.shiftKey&&C===M?(_.preventDefault(),t&&La(j,{select:!0})):_.shiftKey&&C===j&&(_.preventDefault(),t&&La(M,{select:!0})):C===P&&_.preventDefault()}},[t,n,w.paused]);return u.jsx(pt.div,{tabIndex:-1,...o,ref:v,onKeyDown:k})});h0.displayName=mQ;function gQ(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(La(n,{select:e}),document.activeElement!==t)return}function yQ(r){const e=yD(r),t=BP(e,r),n=BP(e.reverse(),r);return[t,n]}function yD(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function BP(r,e){for(const t of r)if(!vQ(t,{upTo:e}))return t}function vQ(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function wQ(r){return r instanceof HTMLInputElement&&"select"in r}function La(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&wQ(r)&&e&&r.select()}}var zP=xQ();function xQ(){let r=[];return{add(e){const t=r[0];e!==t&&(t==null||t.pause()),r=WP(r,e),r.unshift(e)},remove(e){var t;r=WP(r,e),(t=r[0])==null||t.resume()}}}function WP(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function _Q(r){return r.filter(e=>e.tagName!=="A")}var bQ="Portal",f0=b.forwardRef((r,e)=>{var c;const{container:t,...n}=r,[s,i]=b.useState(!1);hr(()=>i(!0),[]);const o=t||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?RA.createPortal(u.jsx(pt.div,{...n,ref:e}),o):null});f0.displayName=bQ;function EQ(r,e){return b.useReducer((t,n)=>e[t][n]??t,r)}var Gs=r=>{const{present:e,children:t}=r,n=TQ(e),s=typeof t=="function"?t({present:n.isPresent}):b.Children.only(t),i=ft(n.ref,SQ(s));return typeof t=="function"||n.isPresent?b.cloneElement(s,{ref:i}):null};Gs.displayName="Presence";function TQ(r){const[e,t]=b.useState(),n=b.useRef({}),s=b.useRef(r),i=b.useRef("none"),o=r?"mounted":"unmounted",[c,d]=EQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=Og(n.current);i.current=c==="mounted"?h:"none"},[c]),hr(()=>{const h=n.current,p=s.current;if(p!==r){const v=i.current,w=Og(h);r?d("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(p&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,d]),hr(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=w=>{const _=Og(n.current).includes(w.animationName);if(w.target===e&&_&&(d("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=w=>{w.target===e&&(i.current=Og(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:b.useCallback(h=>{h&&(n.current=getComputedStyle(h)),t(h)},[])}}function Og(r){return(r==null?void 0:r.animationName)||"none"}function SQ(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var Ux=0;function dT(){b.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??qP()),document.body.insertAdjacentElement("beforeend",r[1]??qP()),Ux++,()=>{Ux===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ux--}},[])}function qP(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Hi=function(){return Hi=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hi.apply(this,arguments)};function vD(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function kQ(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var sy="right-scroll-bar-position",iy="width-before-scroll-bar",IQ="with-scroll-bars-hidden",CQ="--removed-body-scroll-bar-size";function $x(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function PQ(r,e){var t=b.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var AQ=typeof window<"u"?b.useLayoutEffect:b.useEffect,HP=new WeakMap;function RQ(r,e){var t=PQ(null,function(n){return r.forEach(function(s){return $x(s,n)})});return AQ(function(){var n=HP.get(t);if(n){var s=new Set(n),i=new Set(r),o=t.current;s.forEach(function(c){i.has(c)||$x(c,null)}),i.forEach(function(c){s.has(c)||$x(c,o)})}HP.set(t,r)},[r]),t}function NQ(r){return r}function jQ(r,e){e===void 0&&(e=NQ);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(i){var o=e(i,n);return t.push(o),function(){t=t.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(n=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(c){return i(c)},filter:function(){return t}}},assignMedium:function(i){n=!0;var o=[];if(t.length){var c=t;t=[],c.forEach(i),o=t}var d=function(){var p=o;o=[],p.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(p){o.push(p),h()},filter:function(p){return o=o.filter(p),t}}}};return s}function OQ(r){r===void 0&&(r={});var e=jQ(null);return e.options=Hi({async:!0,ssr:!1},r),e}var wD=function(r){var e=r.sideCar,t=vD(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return b.createElement(n,Hi({},t))};wD.isSideCarExport=!0;function DQ(r,e){return r.useMedium(e),wD}var xD=OQ(),Bx=function(){},p0=b.forwardRef(function(r,e){var t=b.useRef(null),n=b.useState({onScrollCapture:Bx,onWheelCapture:Bx,onTouchMoveCapture:Bx}),s=n[0],i=n[1],o=r.forwardProps,c=r.children,d=r.className,h=r.removeScrollBar,p=r.enabled,g=r.shards,v=r.sideCar,w=r.noIsolation,k=r.inert,_=r.allowPinchZoom,E=r.as,C=E===void 0?"div":E,P=r.gapMode,j=vD(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,$=RQ([t,e]),B=Hi(Hi({},j),s);return b.createElement(b.Fragment,null,p&&b.createElement(M,{sideCar:xD,removeScrollBar:h,shards:g,noIsolation:w,inert:k,setCallbacks:i,allowPinchZoom:!!_,lockRef:t,gapMode:P}),o?b.cloneElement(b.Children.only(c),Hi(Hi({},B),{ref:$})):b.createElement(C,Hi({},B,{className:d,ref:$}),c))});p0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};p0.classNames={fullWidth:iy,zeroRight:sy};var MQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LQ(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=MQ();return e&&r.setAttribute("nonce",e),r}function VQ(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function FQ(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var UQ=function(){var r=0,e=null;return{add:function(t){r==0&&(e=LQ())&&(VQ(e,t),FQ(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},$Q=function(){var r=UQ();return function(e,t){b.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},_D=function(){var r=$Q(),e=function(t){var n=t.styles,s=t.dynamic;return r(n,s),null};return e},BQ={left:0,top:0,right:0,gap:0},zx=function(r){return parseInt(r||"",10)||0},zQ=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],s=e[r==="padding"?"paddingRight":"marginRight"];return[zx(t),zx(n),zx(s)]},WQ=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return BQ;var e=zQ(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},qQ=_D(),wd="data-scroll-locked",HQ=function(r,e,t,n){var s=r.left,i=r.top,o=r.right,c=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(IQ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(wd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sy,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(iy,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(sy," .").concat(sy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(iy," .").concat(iy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(wd,`] {
    `).concat(CQ,": ").concat(c,`px;
  }
`)},GP=function(){var r=parseInt(document.body.getAttribute(wd)||"0",10);return isFinite(r)?r:0},GQ=function(){b.useEffect(function(){return document.body.setAttribute(wd,(GP()+1).toString()),function(){var r=GP()-1;r<=0?document.body.removeAttribute(wd):document.body.setAttribute(wd,r.toString())}},[])},KQ=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,s=n===void 0?"margin":n;GQ();var i=b.useMemo(function(){return WQ(s)},[s]);return b.createElement(qQ,{styles:HQ(i,!e,s,t?"":"!important")})},tb=!1;if(typeof window<"u")try{var Dg=Object.defineProperty({},"passive",{get:function(){return tb=!0,!0}});window.addEventListener("test",Dg,Dg),window.removeEventListener("test",Dg,Dg)}catch{tb=!1}var ed=tb?{passive:!1}:!1,YQ=function(r){return r.tagName==="TEXTAREA"},bD=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!YQ(r)&&t[e]==="visible")},QQ=function(r){return bD(r,"overflowY")},JQ=function(r){return bD(r,"overflowX")},KP=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=ED(r,n);if(s){var i=TD(r,n),o=i[1],c=i[2];if(o>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},XQ=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},ZQ=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},ED=function(r,e){return r==="v"?QQ(e):JQ(e)},TD=function(r,e){return r==="v"?XQ(e):ZQ(e)},eJ=function(r,e){return r==="h"&&e==="rtl"?-1:1},tJ=function(r,e,t,n,s){var i=eJ(r,window.getComputedStyle(e).direction),o=i*n,c=t.target,d=e.contains(c),h=!1,p=o>0,g=0,v=0;do{var w=TD(r,c),k=w[0],_=w[1],E=w[2],C=_-E-i*k;(k||C)&&ED(r,c)&&(g+=C,v+=k),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(p&&Math.abs(g)<1||!p&&Math.abs(v)<1)&&(h=!0),h},Mg=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},YP=function(r){return[r.deltaX,r.deltaY]},QP=function(r){return r&&"current"in r?r.current:r},rJ=function(r,e){return r[0]===e[0]&&r[1]===e[1]},nJ=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},sJ=0,td=[];function iJ(r){var e=b.useRef([]),t=b.useRef([0,0]),n=b.useRef(),s=b.useState(sJ++)[0],i=b.useState(_D)[0],o=b.useRef(r);b.useEffect(function(){o.current=r},[r]),b.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(s));var _=kQ([r.lockRef.current],(r.shards||[]).map(QP),!0).filter(Boolean);return _.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[r.inert,r.lockRef.current,r.shards]);var c=b.useCallback(function(_,E){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var C=Mg(_),P=t.current,j="deltaX"in _?_.deltaX:P[0]-C[0],M="deltaY"in _?_.deltaY:P[1]-C[1],$,B=_.target,A=Math.abs(j)>Math.abs(M)?"h":"v";if("touches"in _&&A==="h"&&B.type==="range")return!1;var R=KP(A,B);if(!R)return!0;if(R?$=A:($=A==="v"?"h":"v",R=KP(A,B)),!R)return!1;if(!n.current&&"changedTouches"in _&&(j||M)&&(n.current=$),!$)return!0;var D=n.current||$;return tJ(D,E,_,D==="h"?j:M)},[]),d=b.useCallback(function(_){var E=_;if(!(!td.length||td[td.length-1]!==i)){var C="deltaY"in E?YP(E):Mg(E),P=e.current.filter(function($){return $.name===E.type&&($.target===E.target||E.target===$.shadowParent)&&rJ($.delta,C)})[0];if(P&&P.should){E.cancelable&&E.preventDefault();return}if(!P){var j=(o.current.shards||[]).map(QP).filter(Boolean).filter(function($){return $.contains(E.target)}),M=j.length>0?c(E,j[0]):!o.current.noIsolation;M&&E.cancelable&&E.preventDefault()}}},[]),h=b.useCallback(function(_,E,C,P){var j={name:_,delta:E,target:C,should:P,shadowParent:oJ(C)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(M){return M!==j})},1)},[]),p=b.useCallback(function(_){t.current=Mg(_),n.current=void 0},[]),g=b.useCallback(function(_){h(_.type,YP(_),_.target,c(_,r.lockRef.current))},[]),v=b.useCallback(function(_){h(_.type,Mg(_),_.target,c(_,r.lockRef.current))},[]);b.useEffect(function(){return td.push(i),r.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,ed),document.addEventListener("touchmove",d,ed),document.addEventListener("touchstart",p,ed),function(){td=td.filter(function(_){return _!==i}),document.removeEventListener("wheel",d,ed),document.removeEventListener("touchmove",d,ed),document.removeEventListener("touchstart",p,ed)}},[]);var w=r.removeScrollBar,k=r.inert;return b.createElement(b.Fragment,null,k?b.createElement(i,{styles:nJ(s)}):null,w?b.createElement(KQ,{gapMode:r.gapMode}):null)}function oJ(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const aJ=DQ(xD,iJ);var m0=b.forwardRef(function(r,e){return b.createElement(p0,Hi({},r,{ref:e,sideCar:aJ}))});m0.classNames=p0.classNames;var lJ=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},rd=new WeakMap,Lg=new WeakMap,Vg={},Wx=0,SD=function(r){return r&&(r.host||SD(r.parentNode))},cJ=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=SD(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},uJ=function(r,e,t,n){var s=cJ(e,Array.isArray(r)?r:[r]);Vg[t]||(Vg[t]=new WeakMap);var i=Vg[t],o=[],c=new Set,d=new Set(s),h=function(g){!g||c.has(g)||(c.add(g),h(g.parentNode))};s.forEach(h);var p=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(c.has(v))p(v);else try{var w=v.getAttribute(n),k=w!==null&&w!=="false",_=(rd.get(v)||0)+1,E=(i.get(v)||0)+1;rd.set(v,_),i.set(v,E),o.push(v),_===1&&k&&Lg.set(v,!0),E===1&&v.setAttribute(t,"true"),k||v.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",v,C)}})};return p(e),c.clear(),Wx++,function(){o.forEach(function(g){var v=rd.get(g)-1,w=i.get(g)-1;rd.set(g,v),i.set(g,w),v||(Lg.has(g)||g.removeAttribute(n),Lg.delete(g)),w||g.removeAttribute(t)}),Wx--,Wx||(rd=new WeakMap,rd=new WeakMap,Lg=new WeakMap,Vg={})}},hT=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),s=lJ(r);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),uJ(n,s,t,"aria-hidden")):function(){return null}},fT="Dialog",[kD,ID]=Hs(fT),[dJ,vi]=kD(fT),CD=r=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=r,c=b.useRef(null),d=b.useRef(null),[h=!1,p]=Ip({prop:n,defaultProp:s,onChange:i});return u.jsx(dJ,{scope:e,triggerRef:c,contentRef:d,contentId:zo(),titleId:zo(),descriptionId:zo(),open:h,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(g=>!g),[p]),modal:o,children:t})};CD.displayName=fT;var PD="DialogTrigger",AD=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=vi(PD,t),i=ft(e,s.triggerRef);return u.jsx(pt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":gT(s.open),...n,ref:i,onClick:Be(r.onClick,s.onOpenToggle)})});AD.displayName=PD;var pT="DialogPortal",[hJ,RD]=kD(pT,{forceMount:void 0}),ND=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:s}=r,i=vi(pT,e);return u.jsx(hJ,{scope:e,forceMount:t,children:b.Children.map(n,o=>u.jsx(Gs,{present:t||i.open,children:u.jsx(f0,{asChild:!0,container:s,children:o})}))})};ND.displayName=pT;var zy="DialogOverlay",jD=b.forwardRef((r,e)=>{const t=RD(zy,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=vi(zy,r.__scopeDialog);return i.modal?u.jsx(Gs,{present:n||i.open,children:u.jsx(pJ,{...s,ref:e})}):null});jD.displayName=zy;var fJ=Ac("DialogOverlay.RemoveScroll"),pJ=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=vi(zy,t);return u.jsx(m0,{as:fJ,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(pt.div,{"data-state":gT(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),zc="DialogContent",OD=b.forwardRef((r,e)=>{const t=RD(zc,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=vi(zc,r.__scopeDialog);return u.jsx(Gs,{present:n||i.open,children:i.modal?u.jsx(mJ,{...s,ref:e}):u.jsx(gJ,{...s,ref:e})})});OD.displayName=zc;var mJ=b.forwardRef((r,e)=>{const t=vi(zc,r.__scopeDialog),n=b.useRef(null),s=ft(e,t.contentRef,n);return b.useEffect(()=>{const i=n.current;if(i)return hT(i)},[]),u.jsx(DD,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(r.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Be(r.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:Be(r.onFocusOutside,i=>i.preventDefault())})}),gJ=b.forwardRef((r,e)=>{const t=vi(zc,r.__scopeDialog),n=b.useRef(!1),s=b.useRef(!1);return u.jsx(DD,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=r.onCloseAutoFocus)==null||o.call(r,i),i.defaultPrevented||(n.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var d,h;(d=r.onInteractOutside)==null||d.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((h=t.triggerRef.current)==null?void 0:h.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),DD=b.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=r,c=vi(zc,t),d=b.useRef(null),h=ft(e,d);return dT(),u.jsxs(u.Fragment,{children:[u.jsx(h0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(d0,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":gT(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(vJ,{titleId:c.titleId}),u.jsx(xJ,{contentRef:d,descriptionId:c.descriptionId})]})]})}),mT="DialogTitle",MD=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=vi(mT,t);return u.jsx(pt.h2,{id:s.titleId,...n,ref:e})});MD.displayName=mT;var LD="DialogDescription",VD=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=vi(LD,t);return u.jsx(pt.p,{id:s.descriptionId,...n,ref:e})});VD.displayName=LD;var FD="DialogClose",UD=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=vi(FD,t);return u.jsx(pt.button,{type:"button",...n,ref:e,onClick:Be(r.onClick,()=>s.onOpenChange(!1))})});UD.displayName=FD;function gT(r){return r?"open":"closed"}var $D="DialogTitleWarning",[yJ,BD]=NF($D,{contentName:zc,titleName:mT,docsSlug:"dialog"}),vJ=({titleId:r})=>{const e=BD($D),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},wJ="DialogDescriptionWarning",xJ=({contentRef:r,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BD(wJ).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=r.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,r,e]),null},zD=CD,_J=AD,WD=ND,yT=jD,vT=OD,wT=MD,xT=VD,_T=UD;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qD=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=b.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...c},d)=>b.createElement("svg",{ref:d,...EJ,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:qD("lucide",s),...c},[...o.map(([h,p])=>b.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,e)=>{const t=b.forwardRef(({className:n,...s},i)=>b.createElement(TJ,{ref:i,iconNode:e,className:qD(`lucide-${bJ(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=Ye("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Ye("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=Ye("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Ye("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=Ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=Ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=Ye("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=Ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=Ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=Ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=Ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=Ye("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=Ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Ye("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=Ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=Ye("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=Ye("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=Ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=Ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=Ye("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=Ye("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=Ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=Ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=Ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=Ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=Ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=Ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=Ye("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=Ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=Ye("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=Ye("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eu=zD,rX=WD,iM=b.forwardRef(({className:r,...e},t)=>u.jsx(yT,{ref:t,className:Oe("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));iM.displayName=yT.displayName;const Tl=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(rX,{children:[u.jsx(iM,{}),u.jsxs(vT,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",r),...t,children:[e,u.jsxs(_T,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(y0,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tl.displayName=vT.displayName;const Sl=({className:r,...e})=>u.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Sl.displayName="DialogHeader";const kl=({className:r,...e})=>u.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});kl.displayName="DialogFooter";const Il=b.forwardRef(({className:r,...e},t)=>u.jsx(wT,{ref:t,className:Oe("text-lg font-semibold leading-none tracking-tight",r),...e}));Il.displayName=wT.displayName;const Cl=b.forwardRef(({className:r,...e},t)=>u.jsx(xT,{ref:t,className:Oe("text-sm text-muted-foreground",r),...e}));Cl.displayName=xT.displayName;const zt=b.forwardRef(({className:r,type:e,...t},n)=>u.jsx("input",{type:e,className:Oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));zt.displayName="Input";var nX="Label",oM=b.forwardRef((r,e)=>u.jsx(pt.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));oM.displayName=nX;var aM=oM;const sX=zb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Lt=b.forwardRef(({className:r,...e},t)=>u.jsx(aM,{ref:t,className:Oe(sX(),r),...e}));Lt.displayName=aM.displayName;var rm=r=>r.type==="checkbox",mc=r=>r instanceof Date,Un=r=>r==null;const lM=r=>typeof r=="object";var Tr=r=>!Un(r)&&!Array.isArray(r)&&lM(r)&&!mc(r),iX=r=>Tr(r)&&r.target?rm(r.target)?r.target.checked:r.target.value:r,oX=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,aX=(r,e)=>r.has(oX(e)),lX=r=>{const e=r.constructor&&r.constructor.prototype;return Tr(e)&&e.hasOwnProperty("isPrototypeOf")},TT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kn(r){let e;const t=Array.isArray(r),n=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(TT&&(r instanceof Blob||n))&&(t||Tr(r)))if(e=t?[]:{},!t&&!lX(r))e=r;else for(const s in r)r.hasOwnProperty(s)&&(e[s]=kn(r[s]));else return r;return e}var v0=r=>Array.isArray(r)?r.filter(Boolean):[],Dr=r=>r===void 0,$e=(r,e,t)=>{if(!e||!Tr(r))return t;const n=v0(e.split(/[,[\].]+?/)).reduce((s,i)=>Un(s)?s:s[i],r);return Dr(n)||n===r?Dr(r[e])?t:r[e]:n},Bi=r=>typeof r=="boolean",ST=r=>/^\w*$/.test(r),cM=r=>v0(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Ht=(r,e,t)=>{let n=-1;const s=ST(e)?[e]:cM(e),i=s.length,o=i-1;for(;++n<i;){const c=s[n];let d=t;if(n!==o){const h=r[c];d=Tr(h)||Array.isArray(h)?h:isNaN(+s[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;r[c]=d,r=r[c]}};const JP={BLUR:"blur",FOCUS_OUT:"focusout"},di={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},No={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};G.createContext(null);var cX=(r,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in r)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==di.all&&(e._proxyFormState[o]=!n||di.all),r[o]}});return s},Qi=r=>typeof r=="string",uX=(r,e,t,n,s)=>Qi(r)?(n&&e.watch.add(r),$e(t,r,s)):Array.isArray(r)?r.map(i=>(n&&e.watch.add(i),$e(t,i))):(n&&(e.watchAll=!0),t),uM=(r,e,t,n,s)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:s||!0}}:{},Zf=r=>Array.isArray(r)?r:[r],XP=()=>{let r=[];return{get observers(){return r},next:s=>{for(const i of r)i.next&&i.next(s)},subscribe:s=>(r.push(s),{unsubscribe:()=>{r=r.filter(i=>i!==s)}}),unsubscribe:()=>{r=[]}}},nb=r=>Un(r)||!lM(r);function Ha(r,e){if(nb(r)||nb(e))return r===e;if(mc(r)&&mc(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const i=r[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(mc(i)&&mc(o)||Tr(i)&&Tr(o)||Array.isArray(i)&&Array.isArray(o)?!Ha(i,o):i!==o)return!1}}return!0}var Fn=r=>Tr(r)&&!Object.keys(r).length,kT=r=>r.type==="file",hi=r=>typeof r=="function",Wy=r=>{if(!TT)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},dM=r=>r.type==="select-multiple",IT=r=>r.type==="radio",dX=r=>IT(r)||rm(r),Hx=r=>Wy(r)&&r.isConnected;function hX(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=Dr(r)?n++:r[e[n++]];return r}function fX(r){for(const e in r)if(r.hasOwnProperty(e)&&!Dr(r[e]))return!1;return!0}function qr(r,e){const t=Array.isArray(e)?e:ST(e)?[e]:cM(e),n=t.length===1?r:hX(r,t),s=t.length-1,i=t[s];return n&&delete n[i],s!==0&&(Tr(n)&&Fn(n)||Array.isArray(n)&&fX(n))&&qr(r,t.slice(0,-1)),r}var hM=r=>{for(const e in r)if(hi(r[e]))return!0;return!1};function qy(r,e={}){const t=Array.isArray(r);if(Tr(r)||t)for(const n in r)Array.isArray(r[n])||Tr(r[n])&&!hM(r[n])?(e[n]=Array.isArray(r[n])?[]:{},qy(r[n],e[n])):Un(r[n])||(e[n]=!0);return e}function fM(r,e,t){const n=Array.isArray(r);if(Tr(r)||n)for(const s in r)Array.isArray(r[s])||Tr(r[s])&&!hM(r[s])?Dr(e)||nb(t[s])?t[s]=Array.isArray(r[s])?qy(r[s],[]):{...qy(r[s])}:fM(r[s],Un(e)?{}:e[s],t[s]):t[s]=!Ha(r[s],e[s]);return t}var xf=(r,e)=>fM(r,e,qy(e));const ZP={value:!1,isValid:!1},eA={value:!0,isValid:!0};var pM=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Dr(r[0].attributes.value)?Dr(r[0].value)||r[0].value===""?eA:{value:r[0].value,isValid:!0}:eA:ZP}return ZP},mM=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Dr(r)?r:e?r===""?NaN:r&&+r:t&&Qi(r)?new Date(r):n?n(r):r;const tA={isValid:!1,value:null};var gM=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,tA):tA;function rA(r){const e=r.ref;return kT(e)?e.files:IT(e)?gM(r.refs).value:dM(e)?[...e.selectedOptions].map(({value:t})=>t):rm(e)?pM(r.refs).value:mM(Dr(e.value)?r.ref.value:e.value,r)}var pX=(r,e,t,n)=>{const s={};for(const i of r){const o=$e(e,i);o&&Ht(s,i,o._f)}return{criteriaMode:t,names:[...r],fields:s,shouldUseNativeValidation:n}},Hy=r=>r instanceof RegExp,_f=r=>Dr(r)?r:Hy(r)?r.source:Tr(r)?Hy(r.value)?r.value.source:r.value:r,nA=r=>({isOnSubmit:!r||r===di.onSubmit,isOnBlur:r===di.onBlur,isOnChange:r===di.onChange,isOnAll:r===di.all,isOnTouch:r===di.onTouched});const sA="AsyncFunction";var mX=r=>!!r&&!!r.validate&&!!(hi(r.validate)&&r.validate.constructor.name===sA||Tr(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===sA)),gX=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),iA=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const ep=(r,e,t,n)=>{for(const s of t||Object.keys(r)){const i=$e(r,s);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(ep(c,e))break}else if(Tr(c)&&ep(c,e))break}}};function oA(r,e,t){const n=$e(r,t);if(n||ST(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=$e(e,i),c=$e(r,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(c&&c.type)return{name:i,error:c};s.pop()}return{name:t}}var yX=(r,e,t,n)=>{t(r);const{name:s,...i}=r;return Fn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!n||di.all))},vX=(r,e,t)=>!r||!e||r===e||Zf(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),wX=(r,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||r):(t?n.isOnBlur:s.isOnBlur)?!r:(t?n.isOnChange:s.isOnChange)?r:!0,xX=(r,e)=>!v0($e(r,e)).length&&qr(r,e),_X=(r,e,t)=>{const n=Zf($e(r,t));return Ht(n,"root",e[t]),Ht(r,t,n),r},oy=r=>Qi(r);function aA(r,e,t="validate"){if(oy(r)||Array.isArray(r)&&r.every(oy)||Bi(r)&&!r)return{type:t,message:oy(r)?r:"",ref:e}}var nd=r=>Tr(r)&&!Hy(r)?r:{value:r,message:""},lA=async(r,e,t,n,s,i)=>{const{ref:o,refs:c,required:d,maxLength:h,minLength:p,min:g,max:v,pattern:w,validate:k,name:_,valueAsNumber:E,mount:C}=r._f,P=$e(t,_);if(!C||e.has(_))return{};const j=c?c[0]:o,M=L=>{s&&j.reportValidity&&(j.setCustomValidity(Bi(L)?"":L||""),j.reportValidity())},$={},B=IT(o),A=rm(o),R=B||A,D=(E||kT(o))&&Dr(o.value)&&Dr(P)||Wy(o)&&o.value===""||P===""||Array.isArray(P)&&!P.length,V=uM.bind(null,_,n,$),U=(L,N,Y,ae=No.maxLength,de=No.minLength)=>{const he=L?N:Y;$[_]={type:L?ae:de,message:he,ref:o,...V(L?ae:de,he)}};if(i?!Array.isArray(P)||!P.length:d&&(!R&&(D||Un(P))||Bi(P)&&!P||A&&!pM(c).isValid||B&&!gM(c).isValid)){const{value:L,message:N}=oy(d)?{value:!!d,message:d}:nd(d);if(L&&($[_]={type:No.required,message:N,ref:j,...V(No.required,N)},!n))return M(N),$}if(!D&&(!Un(g)||!Un(v))){let L,N;const Y=nd(v),ae=nd(g);if(!Un(P)&&!isNaN(P)){const de=o.valueAsNumber||P&&+P;Un(Y.value)||(L=de>Y.value),Un(ae.value)||(N=de<ae.value)}else{const de=o.valueAsDate||new Date(P),he=K=>new Date(new Date().toDateString()+" "+K),X=o.type=="time",J=o.type=="week";Qi(Y.value)&&P&&(L=X?he(P)>he(Y.value):J?P>Y.value:de>new Date(Y.value)),Qi(ae.value)&&P&&(N=X?he(P)<he(ae.value):J?P<ae.value:de<new Date(ae.value))}if((L||N)&&(U(!!L,Y.message,ae.message,No.max,No.min),!n))return M($[_].message),$}if((h||p)&&!D&&(Qi(P)||i&&Array.isArray(P))){const L=nd(h),N=nd(p),Y=!Un(L.value)&&P.length>+L.value,ae=!Un(N.value)&&P.length<+N.value;if((Y||ae)&&(U(Y,L.message,N.message),!n))return M($[_].message),$}if(w&&!D&&Qi(P)){const{value:L,message:N}=nd(w);if(Hy(L)&&!P.match(L)&&($[_]={type:No.pattern,message:N,ref:o,...V(No.pattern,N)},!n))return M(N),$}if(k){if(hi(k)){const L=await k(P,t),N=aA(L,j);if(N&&($[_]={...N,...V(No.validate,N.message)},!n))return M(N.message),$}else if(Tr(k)){let L={};for(const N in k){if(!Fn(L)&&!n)break;const Y=aA(await k[N](P,t),j,N);Y&&(L={...Y,...V(N,Y.message)},M(Y.message),n&&($[_]=L))}if(!Fn(L)&&($[_]={ref:j,...L},!n))return $}}return M(!0),$};const bX={mode:di.onSubmit,reValidateMode:di.onChange,shouldFocusError:!0};function EX(r={}){let e={...bX,...r},t={submitCount:0,isDirty:!1,isLoading:hi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=Tr(e.defaultValues)||Tr(e.values)?kn(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:kn(s),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...p};const v={array:XP(),state:XP()},w=nA(e.mode),k=nA(e.reValidateMode),_=e.criteriaMode===di.all,E=q=>ne=>{clearTimeout(h),h=setTimeout(q,ne)},C=async q=>{if(!e.disabled&&(p.isValid||g.isValid||q)){const ne=e.resolver?Fn((await D()).errors):await U(n,!0);ne!==t.isValid&&v.state.next({isValid:ne})}},P=(q,ne)=>{!e.disabled&&(p.isValidating||p.validatingFields||g.isValidating||g.validatingFields)&&((q||Array.from(c.mount)).forEach(ce=>{ce&&(ne?Ht(t.validatingFields,ce,ne):qr(t.validatingFields,ce))}),v.state.next({validatingFields:t.validatingFields,isValidating:!Fn(t.validatingFields)}))},j=(q,ne=[],ce,Ce,_e=!0,we=!0)=>{if(Ce&&ce&&!e.disabled){if(o.action=!0,we&&Array.isArray($e(n,q))){const Ne=ce($e(n,q),Ce.argA,Ce.argB);_e&&Ht(n,q,Ne)}if(we&&Array.isArray($e(t.errors,q))){const Ne=ce($e(t.errors,q),Ce.argA,Ce.argB);_e&&Ht(t.errors,q,Ne),xX(t.errors,q)}if((p.touchedFields||g.touchedFields)&&we&&Array.isArray($e(t.touchedFields,q))){const Ne=ce($e(t.touchedFields,q),Ce.argA,Ce.argB);_e&&Ht(t.touchedFields,q,Ne)}(p.dirtyFields||g.dirtyFields)&&(t.dirtyFields=xf(s,i)),v.state.next({name:q,isDirty:N(q,ne),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Ht(i,q,ne)},M=(q,ne)=>{Ht(t.errors,q,ne),v.state.next({errors:t.errors})},$=q=>{t.errors=q,v.state.next({errors:t.errors,isValid:!1})},B=(q,ne,ce,Ce)=>{const _e=$e(n,q);if(_e){const we=$e(i,q,Dr(ce)?$e(s,q):ce);Dr(we)||Ce&&Ce.defaultChecked||ne?Ht(i,q,ne?we:rA(_e._f)):de(q,we),o.mount&&C()}},A=(q,ne,ce,Ce,_e)=>{let we=!1,Ne=!1;const yt={name:q};if(!e.disabled){if(!ce||Ce){(p.isDirty||g.isDirty)&&(Ne=t.isDirty,t.isDirty=yt.isDirty=N(),we=Ne!==yt.isDirty);const At=Ha($e(s,q),ne);Ne=!!$e(t.dirtyFields,q),At?qr(t.dirtyFields,q):Ht(t.dirtyFields,q,!0),yt.dirtyFields=t.dirtyFields,we=we||(p.dirtyFields||g.dirtyFields)&&Ne!==!At}if(ce){const At=$e(t.touchedFields,q);At||(Ht(t.touchedFields,q,ce),yt.touchedFields=t.touchedFields,we=we||(p.touchedFields||g.touchedFields)&&At!==ce)}we&&_e&&v.state.next(yt)}return we?yt:{}},R=(q,ne,ce,Ce)=>{const _e=$e(t.errors,q),we=(p.isValid||g.isValid)&&Bi(ne)&&t.isValid!==ne;if(e.delayError&&ce?(d=E(()=>M(q,ce)),d(e.delayError)):(clearTimeout(h),d=null,ce?Ht(t.errors,q,ce):qr(t.errors,q)),(ce?!Ha(_e,ce):_e)||!Fn(Ce)||we){const Ne={...Ce,...we&&Bi(ne)?{isValid:ne}:{},errors:t.errors,name:q};t={...t,...Ne},v.state.next(Ne)}},D=async q=>{P(q,!0);const ne=await e.resolver(i,e.context,pX(q||c.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return P(q),ne},V=async q=>{const{errors:ne}=await D(q);if(q)for(const ce of q){const Ce=$e(ne,ce);Ce?Ht(t.errors,ce,Ce):qr(t.errors,ce)}else t.errors=ne;return ne},U=async(q,ne,ce={valid:!0})=>{for(const Ce in q){const _e=q[Ce];if(_e){const{_f:we,...Ne}=_e;if(we){const yt=c.array.has(we.name),At=_e._f&&mX(_e._f);At&&p.validatingFields&&P([Ce],!0);const Kt=await lA(_e,c.disabled,i,_,e.shouldUseNativeValidation&&!ne,yt);if(At&&p.validatingFields&&P([Ce]),Kt[we.name]&&(ce.valid=!1,ne))break;!ne&&($e(Kt,we.name)?yt?_X(t.errors,Kt,we.name):Ht(t.errors,we.name,Kt[we.name]):qr(t.errors,we.name))}!Fn(Ne)&&await U(Ne,ne,ce)}}return ce.valid},L=()=>{for(const q of c.unMount){const ne=$e(n,q);ne&&(ne._f.refs?ne._f.refs.every(ce=>!Hx(ce)):!Hx(ne._f.ref))&&Ve(q)}c.unMount=new Set},N=(q,ne)=>!e.disabled&&(q&&ne&&Ht(i,q,ne),!Ha(Z(),s)),Y=(q,ne,ce)=>uX(q,c,{...o.mount?i:Dr(ne)?s:Qi(q)?{[q]:ne}:ne},ce,ne),ae=q=>v0($e(o.mount?i:s,q,e.shouldUnregister?$e(s,q,[]):[])),de=(q,ne,ce={})=>{const Ce=$e(n,q);let _e=ne;if(Ce){const we=Ce._f;we&&(!we.disabled&&Ht(i,q,mM(ne,we)),_e=Wy(we.ref)&&Un(ne)?"":ne,dM(we.ref)?[...we.ref.options].forEach(Ne=>Ne.selected=_e.includes(Ne.value)):we.refs?rm(we.ref)?we.refs.length>1?we.refs.forEach(Ne=>(!Ne.defaultChecked||!Ne.disabled)&&(Ne.checked=Array.isArray(_e)?!!_e.find(yt=>yt===Ne.value):_e===Ne.value)):we.refs[0]&&(we.refs[0].checked=!!_e):we.refs.forEach(Ne=>Ne.checked=Ne.value===_e):kT(we.ref)?we.ref.value="":(we.ref.value=_e,we.ref.type||v.state.next({name:q,values:kn(i)})))}(ce.shouldDirty||ce.shouldTouch)&&A(q,_e,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&W(q)},he=(q,ne,ce)=>{for(const Ce in ne){const _e=ne[Ce],we=`${q}.${Ce}`,Ne=$e(n,we);(c.array.has(q)||Tr(_e)||Ne&&!Ne._f)&&!mc(_e)?he(we,_e,ce):de(we,_e,ce)}},X=(q,ne,ce={})=>{const Ce=$e(n,q),_e=c.array.has(q),we=kn(ne);Ht(i,q,we),_e?(v.array.next({name:q,values:kn(i)}),(p.isDirty||p.dirtyFields||g.isDirty||g.dirtyFields)&&ce.shouldDirty&&v.state.next({name:q,dirtyFields:xf(s,i),isDirty:N(q,we)})):Ce&&!Ce._f&&!Un(we)?he(q,we,ce):de(q,we,ce),iA(q,c)&&v.state.next({...t}),v.state.next({name:o.mount?q:void 0,values:kn(i)})},J=async q=>{o.mount=!0;const ne=q.target;let ce=ne.name,Ce=!0;const _e=$e(n,ce),we=Ne=>{Ce=Number.isNaN(Ne)||mc(Ne)&&isNaN(Ne.getTime())||Ha(Ne,$e(i,ce,Ne))};if(_e){let Ne,yt;const At=ne.type?rA(_e._f):iX(q),Kt=q.type===JP.BLUR||q.type===JP.FOCUS_OUT,fo=!gX(_e._f)&&!e.resolver&&!$e(t.errors,ce)&&!_e._f.deps||wX(Kt,$e(t.touchedFields,ce),t.isSubmitted,k,w),mn=iA(ce,c,Kt);Ht(i,ce,At),Kt?(_e._f.onBlur&&_e._f.onBlur(q),d&&d(0)):_e._f.onChange&&_e._f.onChange(q);const rn=A(ce,At,Kt),wi=!Fn(rn)||mn;if(!Kt&&v.state.next({name:ce,type:q.type,values:kn(i)}),fo)return(p.isValid||g.isValid)&&(e.mode==="onBlur"?Kt&&C():Kt||C()),wi&&v.state.next({name:ce,...mn?{}:rn});if(!Kt&&mn&&v.state.next({...t}),e.resolver){const{errors:_r}=await D([ce]);if(we(At),Ce){const xi=oA(t.errors,n,ce),us=oA(_r,n,xi.name||ce);Ne=us.error,ce=us.name,yt=Fn(_r)}}else P([ce],!0),Ne=(await lA(_e,c.disabled,i,_,e.shouldUseNativeValidation))[ce],P([ce]),we(At),Ce&&(Ne?yt=!1:(p.isValid||g.isValid)&&(yt=await U(n,!0)));Ce&&(_e._f.deps&&W(_e._f.deps),R(ce,yt,Ne,rn))}},K=(q,ne)=>{if($e(t.errors,ne)&&q.focus)return q.focus(),1},W=async(q,ne={})=>{let ce,Ce;const _e=Zf(q);if(e.resolver){const we=await V(Dr(q)?q:_e);ce=Fn(we),Ce=q?!_e.some(Ne=>$e(we,Ne)):ce}else q?(Ce=(await Promise.all(_e.map(async we=>{const Ne=$e(n,we);return await U(Ne&&Ne._f?{[we]:Ne}:Ne)}))).every(Boolean),!(!Ce&&!t.isValid)&&C()):Ce=ce=await U(n);return v.state.next({...!Qi(q)||(p.isValid||g.isValid)&&ce!==t.isValid?{}:{name:q},...e.resolver||!q?{isValid:ce}:{},errors:t.errors}),ne.shouldFocus&&!Ce&&ep(n,K,q?_e:c.mount),Ce},Z=q=>{const ne={...o.mount?i:s};return Dr(q)?ne:Qi(q)?$e(ne,q):q.map(ce=>$e(ne,ce))},Se=(q,ne)=>({invalid:!!$e((ne||t).errors,q),isDirty:!!$e((ne||t).dirtyFields,q),error:$e((ne||t).errors,q),isValidating:!!$e(t.validatingFields,q),isTouched:!!$e((ne||t).touchedFields,q)}),ge=q=>{q&&Zf(q).forEach(ne=>qr(t.errors,ne)),v.state.next({errors:q?t.errors:{}})},Me=(q,ne,ce)=>{const Ce=($e(n,q,{_f:{}})._f||{}).ref,_e=$e(t.errors,q)||{},{ref:we,message:Ne,type:yt,...At}=_e;Ht(t.errors,q,{...At,...ne,ref:Ce}),v.state.next({name:q,errors:t.errors,isValid:!1}),ce&&ce.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},qe=(q,ne)=>hi(q)?v.state.subscribe({next:ce=>q(Y(void 0,ne),ce)}):Y(q,ne,!0),pe=q=>v.state.subscribe({next:ne=>{vX(q.name,ne.name,q.exact)&&yX(ne,q.formState||p,It,q.reRenderRoot)&&q.callback({values:{...i},...t,...ne})}}).unsubscribe,je=q=>(o.mount=!0,g={...g,...q.formState},pe({...q,formState:g})),Ve=(q,ne={})=>{for(const ce of q?Zf(q):c.mount)c.mount.delete(ce),c.array.delete(ce),ne.keepValue||(qr(n,ce),qr(i,ce)),!ne.keepError&&qr(t.errors,ce),!ne.keepDirty&&qr(t.dirtyFields,ce),!ne.keepTouched&&qr(t.touchedFields,ce),!ne.keepIsValidating&&qr(t.validatingFields,ce),!e.shouldUnregister&&!ne.keepDefaultValue&&qr(s,ce);v.state.next({values:kn(i)}),v.state.next({...t,...ne.keepDirty?{isDirty:N()}:{}}),!ne.keepIsValid&&C()},Qe=({disabled:q,name:ne})=>{(Bi(q)&&o.mount||q||c.disabled.has(ne))&&(q?c.disabled.add(ne):c.disabled.delete(ne))},tt=(q,ne={})=>{let ce=$e(n,q);const Ce=Bi(ne.disabled)||Bi(e.disabled);return Ht(n,q,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:q}},name:q,mount:!0,...ne}}),c.mount.add(q),ce?Qe({disabled:Bi(ne.disabled)?ne.disabled:e.disabled,name:q}):B(q,!0,ne.value),{...Ce?{disabled:ne.disabled||e.disabled}:{},...e.progressive?{required:!!ne.required,min:_f(ne.min),max:_f(ne.max),minLength:_f(ne.minLength),maxLength:_f(ne.maxLength),pattern:_f(ne.pattern)}:{},name:q,onChange:J,onBlur:J,ref:_e=>{if(_e){tt(q,ne),ce=$e(n,q);const we=Dr(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,Ne=dX(we),yt=ce._f.refs||[];if(Ne?yt.find(At=>At===we):we===ce._f.ref)return;Ht(n,q,{_f:{...ce._f,...Ne?{refs:[...yt.filter(Hx),we,...Array.isArray($e(s,q))?[{}]:[]],ref:{type:we.type,name:q}}:{ref:we}}}),B(q,!1,void 0,we)}else ce=$e(n,q,{}),ce._f&&(ce._f.mount=!1),(e.shouldUnregister||ne.shouldUnregister)&&!(aX(c.array,q)&&o.action)&&c.unMount.add(q)}}},at=()=>e.shouldFocusError&&ep(n,K,c.mount),Pt=q=>{Bi(q)&&(v.state.next({disabled:q}),ep(n,(ne,ce)=>{const Ce=$e(n,ce);Ce&&(ne.disabled=Ce._f.disabled||q,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(_e=>{_e.disabled=Ce._f.disabled||q}))},0,!1))},Zt=(q,ne)=>async ce=>{let Ce;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let _e=kn(i);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:we,values:Ne}=await D();t.errors=we,_e=Ne}else await U(n);if(c.disabled.size)for(const we of c.disabled)Ht(_e,we,void 0);if(qr(t.errors,"root"),Fn(t.errors)){v.state.next({errors:{}});try{await q(_e,ce)}catch(we){Ce=we}}else ne&&await ne({...t.errors},ce),at(),setTimeout(at);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fn(t.errors)&&!Ce,submitCount:t.submitCount+1,errors:t.errors}),Ce)throw Ce},pn=(q,ne={})=>{$e(n,q)&&(Dr(ne.defaultValue)?X(q,kn($e(s,q))):(X(q,ne.defaultValue),Ht(s,q,kn(ne.defaultValue))),ne.keepTouched||qr(t.touchedFields,q),ne.keepDirty||(qr(t.dirtyFields,q),t.isDirty=ne.defaultValue?N(q,kn($e(s,q))):N()),ne.keepError||(qr(t.errors,q),p.isValid&&C()),v.state.next({...t}))},kr=(q,ne={})=>{const ce=q?kn(q):s,Ce=kn(ce),_e=Fn(q),we=_e?s:Ce;if(ne.keepDefaultValues||(s=ce),!ne.keepValues){if(ne.keepDirtyValues){const Ne=new Set([...c.mount,...Object.keys(xf(s,i))]);for(const yt of Array.from(Ne))$e(t.dirtyFields,yt)?Ht(we,yt,$e(i,yt)):X(yt,$e(we,yt))}else{if(TT&&Dr(q))for(const Ne of c.mount){const yt=$e(n,Ne);if(yt&&yt._f){const At=Array.isArray(yt._f.refs)?yt._f.refs[0]:yt._f.ref;if(Wy(At)){const Kt=At.closest("form");if(Kt){Kt.reset();break}}}}for(const Ne of c.mount)X(Ne,$e(we,Ne))}i=kn(we),v.array.next({values:{...we}}),v.state.next({values:{...we}})}c={mount:ne.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,o.watch=!!e.shouldUnregister,v.state.next({submitCount:ne.keepSubmitCount?t.submitCount:0,isDirty:_e?!1:ne.keepDirty?t.isDirty:!!(ne.keepDefaultValues&&!Ha(q,s)),isSubmitted:ne.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:_e?{}:ne.keepDirtyValues?ne.keepDefaultValues&&i?xf(s,i):t.dirtyFields:ne.keepDefaultValues&&q?xf(s,q):ne.keepDirty?t.dirtyFields:{},touchedFields:ne.keepTouched?t.touchedFields:{},errors:ne.keepErrors?t.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ir=(q,ne)=>kr(hi(q)?q(i):q,ne),On=(q,ne={})=>{const ce=$e(n,q),Ce=ce&&ce._f;if(Ce){const _e=Ce.refs?Ce.refs[0]:Ce.ref;_e.focus&&(_e.focus(),ne.shouldSelect&&hi(_e.select)&&_e.select())}},It=q=>{t={...t,...q}},Cr={control:{register:tt,unregister:Ve,getFieldState:Se,handleSubmit:Zt,setError:Me,_subscribe:pe,_runSchema:D,_getWatch:Y,_getDirty:N,_setValid:C,_setFieldArray:j,_setDisabledField:Qe,_setErrors:$,_getFieldArray:ae,_reset:kr,_resetDefaultValues:()=>hi(e.defaultValues)&&e.defaultValues().then(q=>{Ir(q,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:Pt,_subjects:v,_proxyFormState:p,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(q){o=q},get _defaultValues(){return s},get _names(){return c},set _names(q){c=q},get _formState(){return t},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:je,trigger:W,register:tt,handleSubmit:Zt,watch:qe,setValue:X,getValues:Z,reset:Ir,resetField:pn,clearErrors:ge,unregister:Ve,setError:Me,setFocus:On,getFieldState:Se};return{...Cr,formControl:Cr}}function CT(r={}){const e=G.useRef(void 0),t=G.useRef(void 0),[n,s]=G.useState({isDirty:!1,isValidating:!1,isLoading:hi(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:hi(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...r.formControl?r.formControl:EX(r),formState:n},r.formControl&&r.defaultValues&&!hi(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions));const i=e.current.control;return i._options=r,G.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),G.useEffect(()=>i._disableForm(r.disabled),[i,r.disabled]),G.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),G.useEffect(()=>{r.values&&!Ha(r.values,t.current)?(i._reset(r.values,i._options.resetOptions),t.current=r.values,s(o=>({...o}))):i._resetDefaultValues()},[r.values,i]),G.useEffect(()=>{r.errors&&!Fn(r.errors)&&i._setErrors(r.errors)},[r.errors,i]),G.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),G.useEffect(()=>{r.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[r.shouldUnregister,i]),e.current.formState=cX(n,i),e.current}const cA=(r,e,t)=>{if(r&&"reportValidity"in r){const n=$e(t,e);r.setCustomValidity(n&&n.message||""),r.reportValidity()}},yM=(r,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?cA(n.ref,t,r):n.refs&&n.refs.forEach(s=>cA(s,t,r))}},TX=(r,e)=>{e.shouldUseNativeValidation&&yM(r,e);const t={};for(const n in r){const s=$e(e.fields,n),i=Object.assign(r[n]||{},{ref:s&&s.ref});if(SX(e.names||Object.keys(r),n)){const o=Object.assign({},$e(t,n));Ht(o,"root",i),Ht(t,n,o)}else Ht(t,n,i)}return t},SX=(r,e)=>r.some(t=>t.startsWith(e+"."));var kX=function(r,e){for(var t={};r.length;){var n=r[0],s=n.code,i=n.message,o=n.path.join(".");if(!t[o])if("unionErrors"in n){var c=n.unionErrors[0].errors[0];t[o]={message:c.message,type:c.code}}else t[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(p){return p.errors.forEach(function(g){return r.push(g)})}),e){var d=t[o].types,h=d&&d[n.code];t[o]=uM(o,e,t,s,h?[].concat(h,n.message):n.message)}r.shift()}return t},PT=function(r,e,t){return t===void 0&&(t={}),function(n,s,i){try{return Promise.resolve(function(o,c){try{var d=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(h){return i.shouldUseNativeValidation&&yM({},i),{errors:{},values:t.raw?n:h}})}catch(h){return c(h)}return d&&d.then?d.then(void 0,c):d}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:TX(kX(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},jt;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(const c of i)o[c]=s[c];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(const o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(jt||(jt={}));var uA;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(uA||(uA={}));const Le=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fa=r=>{switch(typeof r){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return isNaN(r)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"symbol":return Le.symbol;case"object":return Array.isArray(r)?Le.array:r===null?Le.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Le.promise:typeof Map<"u"&&r instanceof Map?Le.map:typeof Set<"u"&&r instanceof Set?Le.set:typeof Date<"u"&&r instanceof Date?Le.date:Le.object;default:return Le.unknown}},be=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let c=n,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(o))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return s(this),n}static assert(e){if(!(e instanceof zs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}zs.create=r=>new zs(r);const Pp=(r,e)=>{let t;switch(r.code){case be.invalid_type:r.received===Le.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case be.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,jt.jsonStringifyReplacer)}`;break;case be.unrecognized_keys:t=`Unrecognized key(s) in object: ${jt.joinValues(r.keys,", ")}`;break;case be.invalid_union:t="Invalid input";break;case be.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${jt.joinValues(r.options)}`;break;case be.invalid_enum_value:t=`Invalid enum value. Expected ${jt.joinValues(r.options)}, received '${r.received}'`;break;case be.invalid_arguments:t="Invalid function arguments";break;case be.invalid_return_type:t="Invalid function return type";break;case be.invalid_date:t="Invalid date";break;case be.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:jt.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case be.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case be.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case be.custom:t="Invalid input";break;case be.invalid_intersection_types:t="Intersection results could not be merged";break;case be.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case be.not_finite:t="Number must be finite";break;default:t=e.defaultError,jt.assertNever(r)}return{message:t}};let IX=Pp;function sb(){return IX}const ib=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const d=n.filter(h=>!!h).slice().reverse();for(const h of d)c=h(o,{data:e,defaultError:c}).message;return{...s,path:i,message:c}};function Re(r,e){const t=sb(),n=ib({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Pp?void 0:Pp].filter(s=>!!s)});r.common.issues.push(n)}class Hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return st;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return Hn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return st;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const st=Object.freeze({status:"aborted"}),Rf=r=>({status:"dirty",value:r}),cs=r=>({status:"valid",value:r}),dA=r=>r.status==="aborted",hA=r=>r.status==="dirty",Jd=r=>r.status==="valid",Gy=r=>typeof Promise<"u"&&r instanceof Promise;function Ky(r,e,t,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function vM(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var Ge;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ge||(Ge={}));var Nf,jf;class ao{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fA=(r,e)=>{if(Jd(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new zs(r.common.issues);return this._error=t,this._error}}};function ht(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,c)=>{var d,h;const{message:p}=r;return o.code==="invalid_enum_value"?{message:p??c.defaultError}:typeof c.data>"u"?{message:(d=p??n)!==null&&d!==void 0?d:c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:(h=p??t)!==null&&h!==void 0?h:c.defaultError}},description:s}}class Et{get description(){return this._def.description}_getType(e){return Fa(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hn,ctx:{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gy(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},i=this._parseSync({data:e,path:s.path,parent:s});return fA(s,i)}"~validate"(e){var t,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Jd(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((n=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Jd(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Gy(s)?s:Promise.resolve(s));return fA(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),c=()=>i.addIssue({code:be.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new ta({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return qo.create(this,this._def)}nullable(){return Hc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ro.create(this)}promise(){return Rp.create(this,this._def)}or(e){return Jy.create([this,e],this._def)}and(e){return Xy.create(this,e,this._def)}transform(e){return new ta({...ht(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new nv({...ht(this._def),innerType:this,defaultValue:t,typeName:rt.ZodDefault})}brand(){return new bM({typeName:rt.ZodBranded,type:this,...ht(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new sv({...ht(this._def),innerType:this,catchValue:t,typeName:rt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return w0.create(this,e)}readonly(){return iv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CX=/^c[^\s-]{8,}$/i,PX=/^[0-9a-z]+$/,AX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NX=/^[a-z0-9_-]{21}$/i,jX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,OX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,DX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,MX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gx;const LX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,VX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$X=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,wM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zX=new RegExp(`^${wM}$`);function xM(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function WX(r){return new RegExp(`^${xM(r)}$`)}function qX(r){let e=`${wM}T${xM(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function HX(r,e){return!!((e==="v4"||!e)&&LX.test(r)||(e==="v6"||!e)&&FX.test(r))}function GX(r,e){if(!jX.test(r))return!1;try{const[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function KX(r,e){return!!((e==="v4"||!e)&&VX.test(r)||(e==="v6"||!e)&&UX.test(r))}class Bo extends Et{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Le.string){const i=this._getOrReturnCtx(e);return Re(i,{code:be.invalid_type,expected:Le.string,received:i.parsedType}),st}const n=new Hn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:be.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:be.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,c=e.data.length<i.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?Re(s,{code:be.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&Re(s,{code:be.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")DX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"email",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Gx||(Gx=new RegExp(MX,"u")),Gx.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"emoji",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")RX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"uuid",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")NX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"nanoid",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")CX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"cuid",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")PX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"cuid2",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")AX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"ulid",code:be.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Re(s,{validation:"url",code:be.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"regex",code:be.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?qX(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?zX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?WX(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{code:be.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?OX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"duration",code:be.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?HX(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"ip",code:be.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?GX(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"jwt",code:be.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?KX(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"cidr",code:be.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?$X.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"base64",code:be.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?BX.test(e.data)||(s=this._getOrReturnCtx(e,s),Re(s,{validation:"base64url",code:be.invalid_string,message:i.message}),n.dirty()):jt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:be.invalid_string,...Ge.errToObj(n)})}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ge.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ge.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ge.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ge.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ge.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ge.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ge.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ge.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ge.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ge.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ge.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ge.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ge.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ge.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ge.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ge.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ge.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ge.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ge.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ge.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ge.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ge.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ge.errToObj(t)})}nonempty(e){return this.min(1,Ge.errToObj(e))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Bo.create=r=>{var e;return new Bo({checks:[],typeName:rt.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ht(r)})};function YX(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Xd extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Le.number){const i=this._getOrReturnCtx(e);return Re(i,{code:be.invalid_type,expected:Le.number,received:i.parsedType}),st}let n;const s=new Hn;for(const i of this._def.checks)i.kind==="int"?jt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Re(n,{code:be.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?YX(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Re(n,{code:be.not_finite,message:i.message}),s.dirty()):jt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ge.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ge.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ge.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ge.toString(t))}setLimit(e,t,n,s){return new Xd({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ge.toString(s)}]})}_addCheck(e){return new Xd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ge.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ge.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ge.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ge.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ge.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ge.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Xd.create=r=>new Xd({checks:[],typeName:rt.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...ht(r)});class Zd extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Le.bigint)return this._getInvalidInput(e);let n;const s=new Hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Re(n,{code:be.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):jt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Re(t,{code:be.invalid_type,expected:Le.bigint,received:t.parsedType}),st}gte(e,t){return this.setLimit("min",e,!0,Ge.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ge.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ge.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ge.toString(t))}setLimit(e,t,n,s){return new Zd({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ge.toString(s)}]})}_addCheck(e){return new Zd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ge.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ge.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Zd.create=r=>{var e;return new Zd({checks:[],typeName:rt.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ht(r)})};class ob extends Et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Le.boolean){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.boolean,received:n.parsedType}),st}return cs(e.data)}}ob.create=r=>new ob({typeName:rt.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...ht(r)});class Ap extends Et{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Le.date){const i=this._getOrReturnCtx(e);return Re(i,{code:be.invalid_type,expected:Le.date,received:i.parsedType}),st}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Re(i,{code:be.invalid_date}),st}const n=new Hn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:be.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Re(s,{code:be.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):jt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ap({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ge.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ge.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ap.create=r=>new Ap({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:rt.ZodDate,...ht(r)});class ab extends Et{_parse(e){if(this._getType(e)!==Le.symbol){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.symbol,received:n.parsedType}),st}return cs(e.data)}}ab.create=r=>new ab({typeName:rt.ZodSymbol,...ht(r)});class Yy extends Et{_parse(e){if(this._getType(e)!==Le.undefined){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.undefined,received:n.parsedType}),st}return cs(e.data)}}Yy.create=r=>new Yy({typeName:rt.ZodUndefined,...ht(r)});class Qy extends Et{_parse(e){if(this._getType(e)!==Le.null){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.null,received:n.parsedType}),st}return cs(e.data)}}Qy.create=r=>new Qy({typeName:rt.ZodNull,...ht(r)});class lb extends Et{constructor(){super(...arguments),this._any=!0}_parse(e){return cs(e.data)}}lb.create=r=>new lb({typeName:rt.ZodAny,...ht(r)});class _d extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cs(e.data)}}_d.create=r=>new _d({typeName:rt.ZodUnknown,...ht(r)});class gl extends Et{_parse(e){const t=this._getOrReturnCtx(e);return Re(t,{code:be.invalid_type,expected:Le.never,received:t.parsedType}),st}}gl.create=r=>new gl({typeName:rt.ZodNever,...ht(r)});class cb extends Et{_parse(e){if(this._getType(e)!==Le.undefined){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.void,received:n.parsedType}),st}return cs(e.data)}}cb.create=r=>new cb({typeName:rt.ZodVoid,...ht(r)});class ro extends Et{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==Le.array)return Re(t,{code:be.invalid_type,expected:Le.array,received:t.parsedType}),st;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,c=t.data.length<s.exactLength.value;(o||c)&&(Re(t,{code:o?be.too_big:be.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Re(t,{code:be.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Re(t,{code:be.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,c)=>s.type._parseAsync(new ao(t,o,t.path,c)))).then(o=>Hn.mergeArray(n,o));const i=[...t.data].map((o,c)=>s.type._parseSync(new ao(t,o,t.path,c)));return Hn.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ro({...this._def,minLength:{value:e,message:Ge.toString(t)}})}max(e,t){return new ro({...this._def,maxLength:{value:e,message:Ge.toString(t)}})}length(e,t){return new ro({...this._def,exactLength:{value:e,message:Ge.toString(t)}})}nonempty(e){return this.min(1,e)}}ro.create=(r,e)=>new ro({type:r,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...ht(e)});function dd(r){if(r instanceof gr){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=qo.create(dd(n))}return new gr({...r._def,shape:()=>e})}else return r instanceof ro?new ro({...r._def,type:dd(r.element)}):r instanceof qo?qo.create(dd(r.unwrap())):r instanceof Hc?Hc.create(dd(r.unwrap())):r instanceof ea?ea.create(r.items.map(e=>dd(e))):r}class gr extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=jt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Le.object){const h=this._getOrReturnCtx(e);return Re(h,{code:be.invalid_type,expected:Le.object,received:h.parsedType}),st}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const h in s.data)o.includes(h)||c.push(h);const d=[];for(const h of o){const p=i[h],g=s.data[h];d.push({key:{status:"valid",value:h},value:p._parse(new ao(s,g,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof gl){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of c)d.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(h==="strict")c.length>0&&(Re(s,{code:be.unrecognized_keys,keys:c}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of c){const g=s.data[p];d.push({key:{status:"valid",value:p},value:h._parse(new ao(s,g,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of d){const g=await p.key,v=await p.value;h.push({key:g,value:v,alwaysSet:p.alwaysSet})}return h}).then(h=>Hn.mergeObjectSync(n,h)):Hn.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return Ge.errToObj,new gr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,o,c;const d=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(c=Ge.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new gr({...this._def,unknownKeys:"strip"})}passthrough(){return new gr({...this._def,unknownKeys:"passthrough"})}extend(e){return new gr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new gr({...this._def,catchall:e})}pick(e){const t={};return jt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new gr({...this._def,shape:()=>t})}omit(e){const t={};return jt.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new gr({...this._def,shape:()=>t})}deepPartial(){return dd(this)}partial(e){const t={};return jt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new gr({...this._def,shape:()=>t})}required(e){const t={};return jt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof qo;)i=i._def.innerType;t[n]=i}}),new gr({...this._def,shape:()=>t})}keyof(){return _M(jt.objectKeys(this.shape))}}gr.create=(r,e)=>new gr({shape:()=>r,unknownKeys:"strip",catchall:gl.create(),typeName:rt.ZodObject,...ht(e)});gr.strictCreate=(r,e)=>new gr({shape:()=>r,unknownKeys:"strict",catchall:gl.create(),typeName:rt.ZodObject,...ht(e)});gr.lazycreate=(r,e)=>new gr({shape:r,unknownKeys:"strip",catchall:gl.create(),typeName:rt.ZodObject,...ht(e)});class Jy extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new zs(c.ctx.common.issues));return Re(t,{code:be.invalid_union,unionErrors:o}),st}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const d of n){const h={...t,common:{...t.common,issues:[]},parent:null},p=d._parseSync({data:t.data,path:t.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(d=>new zs(d));return Re(t,{code:be.invalid_union,unionErrors:c}),st}}get options(){return this._def.options}}Jy.create=(r,e)=>new Jy({options:r,typeName:rt.ZodUnion,...ht(e)});const Oo=r=>r instanceof ev?Oo(r.schema):r instanceof ta?Oo(r.innerType()):r instanceof tv?[r.value]:r instanceof qc?r.options:r instanceof rv?jt.objectValues(r.enum):r instanceof nv?Oo(r._def.innerType):r instanceof Yy?[void 0]:r instanceof Qy?[null]:r instanceof qo?[void 0,...Oo(r.unwrap())]:r instanceof Hc?[null,...Oo(r.unwrap())]:r instanceof bM||r instanceof iv?Oo(r.unwrap()):r instanceof sv?Oo(r._def.innerType):[];class AT extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Le.object)return Re(t,{code:be.invalid_type,expected:Le.object,received:t.parsedType}),st;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Re(t,{code:be.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),st)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const o=Oo(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,i)}}return new AT({typeName:rt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ht(n)})}}function ub(r,e){const t=Fa(r),n=Fa(e);if(r===e)return{valid:!0,data:r};if(t===Le.object&&n===Le.object){const s=jt.objectKeys(e),i=jt.objectKeys(r).filter(c=>s.indexOf(c)!==-1),o={...r,...e};for(const c of i){const d=ub(r[c],e[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(t===Le.array&&n===Le.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const o=r[i],c=e[i],d=ub(o,c);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return t===Le.date&&n===Le.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Xy extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(dA(i)||dA(o))return st;const c=ub(i.value,o.value);return c.valid?((hA(i)||hA(o))&&t.dirty(),{status:t.value,value:c.data}):(Re(n,{code:be.invalid_intersection_types}),st)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Xy.create=(r,e,t)=>new Xy({left:r,right:e,typeName:rt.ZodIntersection,...ht(t)});class ea extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.array)return Re(n,{code:be.invalid_type,expected:Le.array,received:n.parsedType}),st;if(n.data.length<this._def.items.length)return Re(n,{code:be.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),st;!this._def.rest&&n.data.length>this._def.items.length&&(Re(n,{code:be.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ao(n,o,n.path,c)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Hn.mergeArray(t,o)):Hn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:r,typeName:rt.ZodTuple,rest:null,...ht(e)})};class Zy extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.object)return Re(n,{code:be.invalid_type,expected:Le.object,received:n.parsedType}),st;const s=[],i=this._def.keyType,o=this._def.valueType;for(const c in n.data)s.push({key:i._parse(new ao(n,c,n.path,c)),value:o._parse(new ao(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Hn.mergeObjectAsync(t,s):Hn.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Et?new Zy({keyType:e,valueType:t,typeName:rt.ZodRecord,...ht(n)}):new Zy({keyType:Bo.create(),valueType:e,typeName:rt.ZodRecord,...ht(t)})}}class db extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.map)return Re(n,{code:be.invalid_type,expected:Le.map,received:n.parsedType}),st;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([c,d],h)=>({key:s._parse(new ao(n,c,n.path,[h,"key"])),value:i._parse(new ao(n,d,n.path,[h,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,p=await d.value;if(h.status==="aborted"||p.status==="aborted")return st;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),c.set(h.value,p.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const d of o){const h=d.key,p=d.value;if(h.status==="aborted"||p.status==="aborted")return st;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),c.set(h.value,p.value)}return{status:t.value,value:c}}}}db.create=(r,e,t)=>new db({valueType:e,keyType:r,typeName:rt.ZodMap,...ht(t)});class eh extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.set)return Re(n,{code:be.invalid_type,expected:Le.set,received:n.parsedType}),st;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Re(n,{code:be.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Re(n,{code:be.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(d){const h=new Set;for(const p of d){if(p.status==="aborted")return st;p.status==="dirty"&&t.dirty(),h.add(p.value)}return{status:t.value,value:h}}const c=[...n.data.values()].map((d,h)=>i._parse(new ao(n,d,n.path,h)));return n.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(e,t){return new eh({...this._def,minSize:{value:e,message:Ge.toString(t)}})}max(e,t){return new eh({...this._def,maxSize:{value:e,message:Ge.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eh.create=(r,e)=>new eh({valueType:r,minSize:null,maxSize:null,typeName:rt.ZodSet,...ht(e)});class tp extends Et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Le.function)return Re(t,{code:be.invalid_type,expected:Le.function,received:t.parsedType}),st;function n(c,d){return ib({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sb(),Pp].filter(h=>!!h),issueData:{code:be.invalid_arguments,argumentsError:d}})}function s(c,d){return ib({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sb(),Pp].filter(h=>!!h),issueData:{code:be.invalid_return_type,returnTypeError:d}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Rp){const c=this;return cs(async function(...d){const h=new zs([]),p=await c._def.args.parseAsync(d,i).catch(w=>{throw h.addIssue(n(d,w)),h}),g=await Reflect.apply(o,this,p);return await c._def.returns._def.type.parseAsync(g,i).catch(w=>{throw h.addIssue(s(g,w)),h})})}else{const c=this;return cs(function(...d){const h=c._def.args.safeParse(d,i);if(!h.success)throw new zs([n(d,h.error)]);const p=Reflect.apply(o,this,h.data),g=c._def.returns.safeParse(p,i);if(!g.success)throw new zs([s(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tp({...this._def,args:ea.create(e).rest(_d.create())})}returns(e){return new tp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new tp({args:e||ea.create([]).rest(_d.create()),returns:t||_d.create(),typeName:rt.ZodFunction,...ht(n)})}}class ev extends Et{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ev.create=(r,e)=>new ev({getter:r,typeName:rt.ZodLazy,...ht(e)});class tv extends Et{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Re(t,{received:t.data,code:be.invalid_literal,expected:this._def.value}),st}return{status:"valid",value:e.data}}get value(){return this._def.value}}tv.create=(r,e)=>new tv({value:r,typeName:rt.ZodLiteral,...ht(e)});function _M(r,e){return new qc({values:r,typeName:rt.ZodEnum,...ht(e)})}class qc extends Et{constructor(){super(...arguments),Nf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Re(t,{expected:jt.joinValues(n),received:t.parsedType,code:be.invalid_type}),st}if(Ky(this,Nf)||vM(this,Nf,new Set(this._def.values)),!Ky(this,Nf).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Re(t,{received:t.data,code:be.invalid_enum_value,options:n}),st}return cs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return qc.create(e,{...this._def,...t})}exclude(e,t=this._def){return qc.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Nf=new WeakMap;qc.create=_M;class rv extends Et{constructor(){super(...arguments),jf.set(this,void 0)}_parse(e){const t=jt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Le.string&&n.parsedType!==Le.number){const s=jt.objectValues(t);return Re(n,{expected:jt.joinValues(s),received:n.parsedType,code:be.invalid_type}),st}if(Ky(this,jf)||vM(this,jf,new Set(jt.getValidEnumValues(this._def.values))),!Ky(this,jf).has(e.data)){const s=jt.objectValues(t);return Re(n,{received:n.data,code:be.invalid_enum_value,options:s}),st}return cs(e.data)}get enum(){return this._def.values}}jf=new WeakMap;rv.create=(r,e)=>new rv({values:r,typeName:rt.ZodNativeEnum,...ht(e)});class Rp extends Et{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Le.promise&&t.common.async===!1)return Re(t,{code:be.invalid_type,expected:Le.promise,received:t.parsedType}),st;const n=t.parsedType===Le.promise?t.data:Promise.resolve(t.data);return cs(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Rp.create=(r,e)=>new Rp({type:r,typeName:rt.ZodPromise,...ht(e)});class ta extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Re(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async c=>{if(t.value==="aborted")return st;const d=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return d.status==="aborted"?st:d.status==="dirty"||t.value==="dirty"?Rf(d.value):d});{if(t.value==="aborted")return st;const c=this._def.schema._parseSync({data:o,path:n.path,parent:n});return c.status==="aborted"?st:c.status==="dirty"||t.value==="dirty"?Rf(c.value):c}}if(s.type==="refinement"){const o=c=>{const d=s.refinement(c,i);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?st:(c.status==="dirty"&&t.dirty(),o(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?st:(c.status==="dirty"&&t.dirty(),o(c.value).then(()=>({status:t.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Jd(o))return o;const c=s.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Jd(o)?Promise.resolve(s.transform(o.value,i)).then(c=>({status:t.value,value:c})):o);jt.assertNever(s)}}ta.create=(r,e,t)=>new ta({schema:r,typeName:rt.ZodEffects,effect:e,...ht(t)});ta.createWithPreprocess=(r,e,t)=>new ta({schema:e,effect:{type:"preprocess",transform:r},typeName:rt.ZodEffects,...ht(t)});class qo extends Et{_parse(e){return this._getType(e)===Le.undefined?cs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qo.create=(r,e)=>new qo({innerType:r,typeName:rt.ZodOptional,...ht(e)});class Hc extends Et{_parse(e){return this._getType(e)===Le.null?cs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Hc.create=(r,e)=>new Hc({innerType:r,typeName:rt.ZodNullable,...ht(e)});class nv extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Le.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nv.create=(r,e)=>new nv({innerType:r,typeName:rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ht(e)});class sv extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Gy(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zs(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zs(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}sv.create=(r,e)=>new sv({innerType:r,typeName:rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ht(e)});class hb extends Et{_parse(e){if(this._getType(e)!==Le.nan){const n=this._getOrReturnCtx(e);return Re(n,{code:be.invalid_type,expected:Le.nan,received:n.parsedType}),st}return{status:"valid",value:e.data}}}hb.create=r=>new hb({typeName:rt.ZodNaN,...ht(r)});class bM extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class w0 extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?st:i.status==="dirty"?(t.dirty(),Rf(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?st:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new w0({in:e,out:t,typeName:rt.ZodPipeline})}}class iv extends Et{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Jd(s)&&(s.value=Object.freeze(s.value)),s);return Gy(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}iv.create=(r,e)=>new iv({innerType:r,typeName:rt.ZodReadonly,...ht(e)});gr.lazycreate;var rt;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(rt||(rt={}));const fi=Bo.create,QX=Xd.create;hb.create;Zd.create;ob.create;Ap.create;ab.create;Yy.create;Qy.create;lb.create;_d.create;gl.create;cb.create;ro.create;const RT=gr.create;gr.strictCreate;Jy.create;AT.create;Xy.create;ea.create;Zy.create;db.create;eh.create;tp.create;ev.create;tv.create;qc.create;rv.create;Rp.create;ta.create;qo.create;Hc.create;const JX=ta.createWithPreprocess;w0.create;const XX=RT({email:fi().email("Invalid email address."),password:fi().min(6,"Password must be at least 6 characters.")}),ZX=({isOpen:r,onClose:e,onSwitchToSignup:t})=>{const{loginWithEmailPassword:n,signInWithGoogle:s,loading:i}=Sr(),[o,c]=G.useState(!1),d=CT({resolver:PT(XX),defaultValues:{email:"",password:""}});G.useEffect(()=>{r&&(d.reset(),c(!1))},[r,d]);const h=async w=>{c(!0);try{await n(w.email,w.password),e()}catch{}finally{c(!1)}},p=async()=>{c(!0);try{e(),await s()}catch{c(!1)}},g=()=>{e(),t()},v=o||i;return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[425px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Login to Tasko"}),u.jsx(Cl,{className:"text-[hsl(var(--text-light))]",children:"Access your tasks and connect with taskers."})]}),u.jsxs("form",{onSubmit:d.handleSubmit(h),className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"email",children:"Email"}),u.jsx(zt,{id:"email",type:"email",placeholder:"m@example.com",...d.register("email"),disabled:v}),d.formState.errors.email&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.email.message})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"password",children:"Password"}),u.jsx(zt,{id:"password",type:"password",...d.register("password"),disabled:v}),d.formState.errors.password&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.password.message})]}),u.jsx(ve,{type:"submit",disabled:v,className:"w-full bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:o?"Logging In...":"Login with Email"})]}),u.jsxs("div",{className:"relative my-4",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("span",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:u.jsx("span",{className:"bg-white px-2 text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Or continue with"})})]}),u.jsxs(ve,{onClick:p,disabled:v,variant:"outline",className:"w-full flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700",children:[u.jsx(PJ,{size:20})," ",v?"Signing In...":"Sign in with Google"]}),u.jsxs(kl,{className:"text-sm text-center text-[hsl(var(--text-light))]",children:["Don't have an account? ",u.jsx(ve,{variant:"link",className:"p-0 h-auto text-[hsl(var(--primary-color))] hover:text-[hsl(var(--primary-color))]",onClick:g,children:"Sign Up"})]})]})})},eZ=RT({firstName:fi().min(2,"First name must be at least 2 characters.").max(50,"First name cannot exceed 50 characters."),lastName:fi().min(2,"Last name must be at least 2 characters.").max(50,"Last name cannot exceed 50 characters."),email:fi().email("Invalid email address."),password:fi().min(6,"Password must be at least 6 characters."),phone:fi().optional().refine(r=>!r||/^\+?\d{10,15}$/.test(r),{message:"Invalid phone number format. Use international format (e.g., +639171234567)."})}),tZ=({isOpen:r,onClose:e,onSwitchToLogin:t})=>{const{signupWithEmailPassword:n,loading:s}=Sr(),{updateProfile:i}=u0(),[o,c]=G.useState(!1),d=CT({resolver:PT(eZ),defaultValues:{firstName:"",lastName:"",email:"",password:"",phone:""}});G.useEffect(()=>{r&&(d.reset(),c(!1))},[r,d]);const h=async v=>{c(!0);try{const w=await n(v.email,v.password,v.firstName,v.lastName);w&&await i(w.uid,v.firstName,v.lastName,v.phone||null,w.photoURL||null,"user"),e()}catch{}finally{c(!1)}},p=()=>{e(),t()},g=o||s;return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[425px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Sign Up for Tasko"}),u.jsx(Cl,{className:"text-[hsl(var(--text-light))]",children:"Join our community and start getting tasks done or earning money."})]}),u.jsxs("form",{onSubmit:d.handleSubmit(h),className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"firstName",children:"First Name"}),u.jsx(zt,{id:"firstName",type:"text",placeholder:"Juan",...d.register("firstName"),disabled:g}),d.formState.errors.firstName&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.firstName.message})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"lastName",children:"Last Name"}),u.jsx(zt,{id:"lastName",type:"text",placeholder:"Dela Cruz",...d.register("lastName"),disabled:g}),d.formState.errors.lastName&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.lastName.message})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"email",children:"Email"}),u.jsx(zt,{id:"email",type:"email",placeholder:"m@example.com",...d.register("email"),disabled:g}),d.formState.errors.email&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.email.message})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"password",children:"Password"}),u.jsx(zt,{id:"password",type:"password",...d.register("password"),disabled:g}),d.formState.errors.password&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.password.message})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"phone",children:"Phone Number (Optional)"}),u.jsx(zt,{id:"phone",type:"tel",placeholder:"+639171234567",...d.register("phone"),disabled:g}),d.formState.errors.phone&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.formState.errors.phone.message})]}),u.jsx(ve,{type:"submit",disabled:g,className:"w-full bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:o?"Signing Up...":"Sign Up with Email"})]}),u.jsxs(kl,{className:"text-sm text-center text-[hsl(var(--text-light))]",children:["Already have an account? ",u.jsx(ve,{variant:"link",className:"p-0 h-auto text-[hsl(var(--primary-color))] hover:text-[hsl(var(--primary-color))]",onClick:p,children:"Login"})]})]})})},wh=b.forwardRef(({className:r,...e},t)=>u.jsx("textarea",{className:Oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...e}));wh.displayName="Textarea";function fb(r,[e,t]){return Math.min(t,Math.max(e,r))}function NT(r){const e=r+"CollectionProvider",[t,n]=Hs(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:E,children:C}=_,P=G.useRef(null),j=G.useRef(new Map).current;return u.jsx(s,{scope:E,itemMap:j,collectionRef:P,children:C})};o.displayName=e;const c=r+"CollectionSlot",d=Ac(c),h=G.forwardRef((_,E)=>{const{scope:C,children:P}=_,j=i(c,C),M=ft(E,j.collectionRef);return u.jsx(d,{ref:M,children:P})});h.displayName=c;const p=r+"CollectionItemSlot",g="data-radix-collection-item",v=Ac(p),w=G.forwardRef((_,E)=>{const{scope:C,children:P,...j}=_,M=G.useRef(null),$=ft(E,M),B=i(p,C);return G.useEffect(()=>(B.itemMap.set(M,{ref:M,...j}),()=>void B.itemMap.delete(M))),u.jsx(v,{[g]:"",ref:$,children:P})});w.displayName=p;function k(_){const E=i(r+"CollectionConsumer",_);return G.useCallback(()=>{const P=E.collectionRef.current;if(!P)return[];const j=Array.from(P.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((B,A)=>j.indexOf(B.ref.current)-j.indexOf(A.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:h,ItemSlot:w},k,n]}var rZ=b.createContext(void 0);function x0(r){const e=b.useContext(rZ);return r||e||"ltr"}var nZ="Arrow",EM=b.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...i}=r;return u.jsx(pt.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});EM.displayName=nZ;var sZ=EM,jT="Popper",[TM,_0]=Hs(jT),[iZ,SM]=TM(jT),kM=r=>{const{__scopePopper:e,children:t}=r,[n,s]=b.useState(null);return u.jsx(iZ,{scope:e,anchor:n,onAnchorChange:s,children:t})};kM.displayName=jT;var IM="PopperAnchor",CM=b.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,i=SM(IM,t),o=b.useRef(null),c=ft(e,o);return b.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:u.jsx(pt.div,{...s,ref:c})});CM.displayName=IM;var OT="PopperContent",[oZ,aZ]=TM(OT),PM=b.forwardRef((r,e)=>{var pe,je,Ve,Qe,tt,at;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:k,..._}=r,E=SM(OT,t),[C,P]=b.useState(null),j=ft(e,Pt=>P(Pt)),[M,$]=b.useState(null),B=nR(M),A=(B==null?void 0:B.width)??0,R=(B==null?void 0:B.height)??0,D=n+(i!=="center"?"-"+i:""),V=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},U=Array.isArray(h)?h:[h],L=U.length>0,N={padding:V,boundary:U.filter(cZ),altBoundary:L},{refs:Y,floatingStyles:ae,placement:de,isPositioned:he,middlewareData:X}=KA({strategy:"fixed",placement:D,whileElementsMounted:(...Pt)=>HA(...Pt,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[YA({mainAxis:s+R,alignmentAxis:o}),d&&QA({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?JA():void 0,...N}),d&&XA({...N}),ZA({...N,apply:({elements:Pt,rects:Zt,availableWidth:pn,availableHeight:kr})=>{const{width:Ir,height:On}=Zt.reference,It=Pt.floating.style;It.setProperty("--radix-popper-available-width",`${pn}px`),It.setProperty("--radix-popper-available-height",`${kr}px`),It.setProperty("--radix-popper-anchor-width",`${Ir}px`),It.setProperty("--radix-popper-anchor-height",`${On}px`)}}),M&&tR({element:M,padding:c}),uZ({arrowWidth:A,arrowHeight:R}),v&&eR({strategy:"referenceHidden",...N})]}),[J,K]=NM(de),W=ur(k);hr(()=>{he&&(W==null||W())},[he,W]);const Z=(pe=X.arrow)==null?void 0:pe.x,Se=(je=X.arrow)==null?void 0:je.y,ge=((Ve=X.arrow)==null?void 0:Ve.centerOffset)!==0,[Me,qe]=b.useState();return hr(()=>{C&&qe(window.getComputedStyle(C).zIndex)},[C]),u.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:he?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(Qe=X.transformOrigin)==null?void 0:Qe.x,(tt=X.transformOrigin)==null?void 0:tt.y].join(" "),...((at=X.hide)==null?void 0:at.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:u.jsx(oZ,{scope:t,placedSide:J,onArrowChange:$,arrowX:Z,arrowY:Se,shouldHideArrow:ge,children:u.jsx(pt.div,{"data-side":J,"data-align":K,..._,ref:j,style:{..._.style,animation:he?void 0:"none"}})})})});PM.displayName=OT;var AM="PopperArrow",lZ={top:"bottom",right:"left",bottom:"top",left:"right"},RM=b.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,i=aZ(AM,n),o=lZ[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(sZ,{...s,ref:t,style:{...s.style,display:"block"}})})});RM.displayName=AM;function cZ(r){return r!==null}var uZ=r=>({name:"transformOrigin",options:r,fn(e){var E,C,P;const{placement:t,rects:n,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,c=o?0:r.arrowWidth,d=o?0:r.arrowHeight,[h,p]=NM(t),g={start:"0%",center:"50%",end:"100%"}[p],v=(((C=s.arrow)==null?void 0:C.x)??0)+c/2,w=(((P=s.arrow)==null?void 0:P.y)??0)+d/2;let k="",_="";return h==="bottom"?(k=o?g:`${v}px`,_=`${-d}px`):h==="top"?(k=o?g:`${v}px`,_=`${n.floating.height+d}px`):h==="right"?(k=`${-d}px`,_=o?g:`${w}px`):h==="left"&&(k=`${n.floating.width+d}px`,_=o?g:`${w}px`),{data:{x:k,y:_}}}});function NM(r){const[e,t="center"]=r.split("-");return[e,t]}var jM=kM,OM=CM,DM=PM,MM=RM;function dZ(r){const e=b.useRef({value:r,previous:r});return b.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var hZ="VisuallyHidden",LM=b.forwardRef((r,e)=>u.jsx(pt.span,{...r,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}));LM.displayName=hZ;var fZ=[" ","Enter","ArrowUp","ArrowDown"],pZ=[" ","Enter"],nm="Select",[b0,E0,mZ]=NT(nm),[xh,Zne]=Hs(nm,[mZ,_0]),T0=_0(),[gZ,Pl]=xh(nm),[yZ,vZ]=xh(nm),VM=r=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:c,onValueChange:d,dir:h,name:p,autoComplete:g,disabled:v,required:w,form:k}=r,_=T0(e),[E,C]=b.useState(null),[P,j]=b.useState(null),[M,$]=b.useState(!1),B=x0(h),[A=!1,R]=Ip({prop:n,defaultProp:s,onChange:i}),[D,V]=Ip({prop:o,defaultProp:c,onChange:d}),U=b.useRef(null),L=E?k||!!E.closest("form"):!0,[N,Y]=b.useState(new Set),ae=Array.from(N).map(de=>de.props.value).join(";");return u.jsx(jM,{..._,children:u.jsxs(gZ,{required:w,scope:e,trigger:E,onTriggerChange:C,valueNode:P,onValueNodeChange:j,valueNodeHasChildren:M,onValueNodeHasChildrenChange:$,contentId:zo(),value:D,onValueChange:V,open:A,onOpenChange:R,dir:B,triggerPointerDownPosRef:U,disabled:v,children:[u.jsx(b0.Provider,{scope:e,children:u.jsx(yZ,{scope:r.__scopeSelect,onNativeOptionAdd:b.useCallback(de=>{Y(he=>new Set(he).add(de))},[]),onNativeOptionRemove:b.useCallback(de=>{Y(he=>{const X=new Set(he);return X.delete(de),X})},[]),children:t})}),L?u.jsxs(cL,{"aria-hidden":!0,required:w,tabIndex:-1,name:p,autoComplete:g,value:D,onChange:de=>V(de.target.value),disabled:v,form:k,children:[D===void 0?u.jsx("option",{value:""}):null,Array.from(N)]},ae):null]})})};VM.displayName=nm;var FM="SelectTrigger",UM=b.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:n=!1,...s}=r,i=T0(t),o=Pl(FM,t),c=o.disabled||n,d=ft(e,o.onTriggerChange),h=E0(t),p=b.useRef("touch"),[g,v,w]=uL(_=>{const E=h().filter(j=>!j.disabled),C=E.find(j=>j.value===o.value),P=dL(E,_,C);P!==void 0&&o.onValueChange(P.value)}),k=_=>{c||(o.onOpenChange(!0),w()),_&&(o.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return u.jsx(OM,{asChild:!0,...i,children:u.jsx(pt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":lL(o.value)?"":void 0,...s,ref:d,onClick:Be(s.onClick,_=>{_.currentTarget.focus(),p.current!=="mouse"&&k(_)}),onPointerDown:Be(s.onPointerDown,_=>{p.current=_.pointerType;const E=_.target;E.hasPointerCapture(_.pointerId)&&E.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(k(_),_.preventDefault())}),onKeyDown:Be(s.onKeyDown,_=>{const E=g.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&v(_.key),!(E&&_.key===" ")&&fZ.includes(_.key)&&(k(),_.preventDefault())})})})});UM.displayName=FM;var $M="SelectValue",BM=b.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,children:i,placeholder:o="",...c}=r,d=Pl($M,t),{onValueNodeHasChildrenChange:h}=d,p=i!==void 0,g=ft(e,d.onValueNodeChange);return hr(()=>{h(p)},[h,p]),u.jsx(pt.span,{...c,ref:g,style:{pointerEvents:"none"},children:lL(d.value)?u.jsx(u.Fragment,{children:o}):i})});BM.displayName=$M;var wZ="SelectIcon",zM=b.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...s}=r;return u.jsx(pt.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});zM.displayName=wZ;var xZ="SelectPortal",WM=r=>u.jsx(f0,{asChild:!0,...r});WM.displayName=xZ;var Gc="SelectContent",qM=b.forwardRef((r,e)=>{const t=Pl(Gc,r.__scopeSelect),[n,s]=b.useState();if(hr(()=>{s(new DocumentFragment)},[]),!t.open){const i=n;return i?rh.createPortal(u.jsx(HM,{scope:r.__scopeSelect,children:u.jsx(b0.Slot,{scope:r.__scopeSelect,children:u.jsx("div",{children:r.children})})}),i):null}return u.jsx(GM,{...r,ref:e})});qM.displayName=Gc;var ii=10,[HM,Al]=xh(Gc),_Z="SelectContentImpl",bZ=Ac("SelectContent.RemoveScroll"),GM=b.forwardRef((r,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:v,collisionPadding:w,sticky:k,hideWhenDetached:_,avoidCollisions:E,...C}=r,P=Pl(Gc,t),[j,M]=b.useState(null),[$,B]=b.useState(null),A=ft(e,pe=>M(pe)),[R,D]=b.useState(null),[V,U]=b.useState(null),L=E0(t),[N,Y]=b.useState(!1),ae=b.useRef(!1);b.useEffect(()=>{if(j)return hT(j)},[j]),dT();const de=b.useCallback(pe=>{const[je,...Ve]=L().map(at=>at.ref.current),[Qe]=Ve.slice(-1),tt=document.activeElement;for(const at of pe)if(at===tt||(at==null||at.scrollIntoView({block:"nearest"}),at===je&&$&&($.scrollTop=0),at===Qe&&$&&($.scrollTop=$.scrollHeight),at==null||at.focus(),document.activeElement!==tt))return},[L,$]),he=b.useCallback(()=>de([R,j]),[de,R,j]);b.useEffect(()=>{N&&he()},[N,he]);const{onOpenChange:X,triggerPointerDownPosRef:J}=P;b.useEffect(()=>{if(j){let pe={x:0,y:0};const je=Qe=>{var tt,at;pe={x:Math.abs(Math.round(Qe.pageX)-(((tt=J.current)==null?void 0:tt.x)??0)),y:Math.abs(Math.round(Qe.pageY)-(((at=J.current)==null?void 0:at.y)??0))}},Ve=Qe=>{pe.x<=10&&pe.y<=10?Qe.preventDefault():j.contains(Qe.target)||X(!1),document.removeEventListener("pointermove",je),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",je),document.addEventListener("pointerup",Ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",je),document.removeEventListener("pointerup",Ve,{capture:!0})}}},[j,X,J]),b.useEffect(()=>{const pe=()=>X(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[X]);const[K,W]=uL(pe=>{const je=L().filter(tt=>!tt.disabled),Ve=je.find(tt=>tt.ref.current===document.activeElement),Qe=dL(je,pe,Ve);Qe&&setTimeout(()=>Qe.ref.current.focus())}),Z=b.useCallback((pe,je,Ve)=>{const Qe=!ae.current&&!Ve;(P.value!==void 0&&P.value===je||Qe)&&(D(pe),Qe&&(ae.current=!0))},[P.value]),Se=b.useCallback(()=>j==null?void 0:j.focus(),[j]),ge=b.useCallback((pe,je,Ve)=>{const Qe=!ae.current&&!Ve;(P.value!==void 0&&P.value===je||Qe)&&U(pe)},[P.value]),Me=n==="popper"?pb:KM,qe=Me===pb?{side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:v,collisionPadding:w,sticky:k,hideWhenDetached:_,avoidCollisions:E}:{};return u.jsx(HM,{scope:t,content:j,viewport:$,onViewportChange:B,itemRefCallback:Z,selectedItem:R,onItemLeave:Se,itemTextRefCallback:ge,focusSelectedItem:he,selectedItemText:V,position:n,isPositioned:N,searchRef:K,children:u.jsx(m0,{as:bZ,allowPinchZoom:!0,children:u.jsx(h0,{asChild:!0,trapped:P.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Be(s,pe=>{var je;(je=P.trigger)==null||je.focus({preventScroll:!0}),pe.preventDefault()}),children:u.jsx(d0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:u.jsx(Me,{role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:pe=>pe.preventDefault(),...C,...qe,onPlaced:()=>Y(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Be(C.onKeyDown,pe=>{const je=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!je&&pe.key.length===1&&W(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let Qe=L().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(Qe=Qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const tt=pe.target,at=Qe.indexOf(tt);Qe=Qe.slice(at+1)}setTimeout(()=>de(Qe)),pe.preventDefault()}})})})})})})});GM.displayName=_Z;var EZ="SelectItemAlignedPosition",KM=b.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:n,...s}=r,i=Pl(Gc,t),o=Al(Gc,t),[c,d]=b.useState(null),[h,p]=b.useState(null),g=ft(e,A=>p(A)),v=E0(t),w=b.useRef(!1),k=b.useRef(!0),{viewport:_,selectedItem:E,selectedItemText:C,focusSelectedItem:P}=o,j=b.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&_&&E&&C){const A=i.trigger.getBoundingClientRect(),R=h.getBoundingClientRect(),D=i.valueNode.getBoundingClientRect(),V=C.getBoundingClientRect();if(i.dir!=="rtl"){const tt=V.left-R.left,at=D.left-tt,Pt=A.left-at,Zt=A.width+Pt,pn=Math.max(Zt,R.width),kr=window.innerWidth-ii,Ir=fb(at,[ii,Math.max(ii,kr-pn)]);c.style.minWidth=Zt+"px",c.style.left=Ir+"px"}else{const tt=R.right-V.right,at=window.innerWidth-D.right-tt,Pt=window.innerWidth-A.right-at,Zt=A.width+Pt,pn=Math.max(Zt,R.width),kr=window.innerWidth-ii,Ir=fb(at,[ii,Math.max(ii,kr-pn)]);c.style.minWidth=Zt+"px",c.style.right=Ir+"px"}const U=v(),L=window.innerHeight-ii*2,N=_.scrollHeight,Y=window.getComputedStyle(h),ae=parseInt(Y.borderTopWidth,10),de=parseInt(Y.paddingTop,10),he=parseInt(Y.borderBottomWidth,10),X=parseInt(Y.paddingBottom,10),J=ae+de+N+X+he,K=Math.min(E.offsetHeight*5,J),W=window.getComputedStyle(_),Z=parseInt(W.paddingTop,10),Se=parseInt(W.paddingBottom,10),ge=A.top+A.height/2-ii,Me=L-ge,qe=E.offsetHeight/2,pe=E.offsetTop+qe,je=ae+de+pe,Ve=J-je;if(je<=ge){const tt=U.length>0&&E===U[U.length-1].ref.current;c.style.bottom="0px";const at=h.clientHeight-_.offsetTop-_.offsetHeight,Pt=Math.max(Me,qe+(tt?Se:0)+at+he),Zt=je+Pt;c.style.height=Zt+"px"}else{const tt=U.length>0&&E===U[0].ref.current;c.style.top="0px";const Pt=Math.max(ge,ae+_.offsetTop+(tt?Z:0)+qe)+Ve;c.style.height=Pt+"px",_.scrollTop=je-ge+_.offsetTop}c.style.margin=`${ii}px 0`,c.style.minHeight=K+"px",c.style.maxHeight=L+"px",n==null||n(),requestAnimationFrame(()=>w.current=!0)}},[v,i.trigger,i.valueNode,c,h,_,E,C,i.dir,n]);hr(()=>j(),[j]);const[M,$]=b.useState();hr(()=>{h&&$(window.getComputedStyle(h).zIndex)},[h]);const B=b.useCallback(A=>{A&&k.current===!0&&(j(),P==null||P(),k.current=!1)},[j,P]);return u.jsx(SZ,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:w,onScrollButtonChange:B,children:u.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:u.jsx(pt.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});KM.displayName=EZ;var TZ="SelectPopperPosition",pb=b.forwardRef((r,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:s=ii,...i}=r,o=T0(t);return u.jsx(DM,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pb.displayName=TZ;var[SZ,DT]=xh(Gc,{}),mb="SelectViewport",YM=b.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:n,...s}=r,i=Al(mb,t),o=DT(mb,t),c=ft(e,i.onViewportChange),d=b.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),u.jsx(b0.Slot,{scope:t,children:u.jsx(pt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Be(s.onScroll,h=>{const p=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=o;if(v!=null&&v.current&&g){const w=Math.abs(d.current-p.scrollTop);if(w>0){const k=window.innerHeight-ii*2,_=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),C=Math.max(_,E);if(C<k){const P=C+w,j=Math.min(k,P),M=P-j;g.style.height=j+"px",g.style.bottom==="0px"&&(p.scrollTop=M>0?M:0,g.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});YM.displayName=mb;var QM="SelectGroup",[kZ,IZ]=xh(QM),CZ=b.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=zo();return u.jsx(kZ,{scope:t,id:s,children:u.jsx(pt.div,{role:"group","aria-labelledby":s,...n,ref:e})})});CZ.displayName=QM;var JM="SelectLabel",XM=b.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=IZ(JM,t);return u.jsx(pt.div,{id:s.id,...n,ref:e})});XM.displayName=JM;var ov="SelectItem",[PZ,ZM]=xh(ov),eL=b.forwardRef((r,e)=>{const{__scopeSelect:t,value:n,disabled:s=!1,textValue:i,...o}=r,c=Pl(ov,t),d=Al(ov,t),h=c.value===n,[p,g]=b.useState(i??""),[v,w]=b.useState(!1),k=ft(e,P=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,P,n,s)}),_=zo(),E=b.useRef("touch"),C=()=>{s||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(PZ,{scope:t,value:n,disabled:s,textId:_,isSelected:h,onItemTextChange:b.useCallback(P=>{g(j=>j||((P==null?void 0:P.textContent)??"").trim())},[]),children:u.jsx(b0.ItemSlot,{scope:t,value:n,disabled:s,textValue:p,children:u.jsx(pt.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:k,onFocus:Be(o.onFocus,()=>w(!0)),onBlur:Be(o.onBlur,()=>w(!1)),onClick:Be(o.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:Be(o.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:Be(o.onPointerDown,P=>{E.current=P.pointerType}),onPointerMove:Be(o.onPointerMove,P=>{var j;E.current=P.pointerType,s?(j=d.onItemLeave)==null||j.call(d):E.current==="mouse"&&P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Be(o.onPointerLeave,P=>{var j;P.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:Be(o.onKeyDown,P=>{var M;((M=d.searchRef)==null?void 0:M.current)!==""&&P.key===" "||(pZ.includes(P.key)&&C(),P.key===" "&&P.preventDefault())})})})})});eL.displayName=ov;var Of="SelectItemText",tL=b.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,...i}=r,o=Pl(Of,t),c=Al(Of,t),d=ZM(Of,t),h=vZ(Of,t),[p,g]=b.useState(null),v=ft(e,C=>g(C),d.onItemTextChange,C=>{var P;return(P=c.itemTextRefCallback)==null?void 0:P.call(c,C,d.value,d.disabled)}),w=p==null?void 0:p.textContent,k=b.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:w},d.value),[d.disabled,d.value,w]),{onNativeOptionAdd:_,onNativeOptionRemove:E}=h;return hr(()=>(_(k),()=>E(k)),[_,E,k]),u.jsxs(u.Fragment,{children:[u.jsx(pt.span,{id:d.textId,...i,ref:v}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?rh.createPortal(i.children,o.valueNode):null]})});tL.displayName=Of;var rL="SelectItemIndicator",nL=b.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return ZM(rL,t).isSelected?u.jsx(pt.span,{"aria-hidden":!0,...n,ref:e}):null});nL.displayName=rL;var gb="SelectScrollUpButton",sL=b.forwardRef((r,e)=>{const t=Al(gb,r.__scopeSelect),n=DT(gb,r.__scopeSelect),[s,i]=b.useState(!1),o=ft(e,n.onScrollButtonChange);return hr(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollTop>0;i(h)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?u.jsx(oL,{...r,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});sL.displayName=gb;var yb="SelectScrollDownButton",iL=b.forwardRef((r,e)=>{const t=Al(yb,r.__scopeSelect),n=DT(yb,r.__scopeSelect),[s,i]=b.useState(!1),o=ft(e,n.onScrollButtonChange);return hr(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<h;i(p)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?u.jsx(oL,{...r,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});iL.displayName=yb;var oL=b.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:n,...s}=r,i=Al("SelectScrollButton",t),o=b.useRef(null),c=E0(t),d=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>d(),[d]),hr(()=>{var p;const h=c().find(g=>g.ref.current===document.activeElement);(p=h==null?void 0:h.ref.current)==null||p.scrollIntoView({block:"nearest"})},[c]),u.jsx(pt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Be(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Be(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Be(s.onPointerLeave,()=>{d()})})}),AZ="SelectSeparator",aL=b.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return u.jsx(pt.div,{"aria-hidden":!0,...n,ref:e})});aL.displayName=AZ;var vb="SelectArrow",RZ=b.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=T0(t),i=Pl(vb,t),o=Al(vb,t);return i.open&&o.position==="popper"?u.jsx(MM,{...s,...n,ref:e}):null});RZ.displayName=vb;function lL(r){return r===""||r===void 0}var cL=b.forwardRef((r,e)=>{const{value:t,...n}=r,s=b.useRef(null),i=ft(e,s),o=dZ(t);return b.useEffect(()=>{const c=s.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&p){const g=new Event("change",{bubbles:!0});p.call(c,t),c.dispatchEvent(g)}},[o,t]),u.jsx(LM,{asChild:!0,children:u.jsx("select",{...n,ref:i,defaultValue:t})})});cL.displayName="BubbleSelect";function uL(r){const e=ur(r),t=b.useRef(""),n=b.useRef(0),s=b.useCallback(o=>{const c=t.current+o;e(c),function d(h){t.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>d(""),1e3))}(c)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,s,i]}function dL(r,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let o=NZ(r,Math.max(i,0));s.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function NZ(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var jZ=VM,hL=UM,OZ=BM,DZ=zM,MZ=WM,fL=qM,LZ=YM,pL=XM,mL=eL,VZ=tL,FZ=nL,gL=sL,yL=iL,vL=aL;const wL=jZ,xL=OZ,MT=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(hL,{ref:n,className:Oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,u.jsx(DZ,{asChild:!0,children:u.jsx(YD,{className:"h-4 w-4 opacity-50"})})]}));MT.displayName=hL.displayName;const LT=b.forwardRef(({className:r,children:e,position:t="popper",...n},s)=>u.jsx(MZ,{children:u.jsxs(fL,{ref:s,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t==="popper"&&"data-[state=closed]:slide-out-to-top-[5%] data-[state=open]:slide-in-from-top-[5%]",r),position:t,...n,children:[u.jsx(_L,{}),u.jsx(LZ,{className:Oe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(bL,{})]})}));LT.displayName=fL.displayName;const UZ=b.forwardRef(({className:r,...e},t)=>u.jsx(pL,{ref:t,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));UZ.displayName=pL.displayName;const un=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(mL,{ref:n,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(FZ,{children:u.jsx(KD,{className:"h-4 w-4"})})}),u.jsx(VZ,{children:e})]}));un.displayName=mL.displayName;const $Z=b.forwardRef(({className:r,...e},t)=>u.jsx(vL,{ref:t,className:Oe("-mx-1 my-1 h-px bg-muted",r),...e}));$Z.displayName=vL.displayName;const _L=b.forwardRef(({className:r,...e},t)=>u.jsx(gL,{className:Oe("flex cursor-default items-center justify-center py-1",r),ref:t,...e,children:u.jsx(CJ,{className:"h-4 w-4"})}));_L.displayName=gL.displayName;const bL=b.forwardRef(({className:r,...e},t)=>u.jsx(yL,{className:Oe("flex cursor-default items-center justify-center py-1",r),ref:t,...e,children:u.jsx(YD,{className:"h-4 w-4"})}));bL.displayName=yL.displayName;const EL=()=>{const[r,e]=b.useState(!1),[t,n]=b.useState(null);return{uploadFile:async(i,o)=>{e(!0),n(null);try{const c=EG(PG,o),d=await _G(c,i),h=await bG(d.ref);return ue.success("File uploaded successfully!"),h}catch(c){return console.error("Error uploading file:",c),n(`Failed to upload file: ${c.message}`),ue.error(`Failed to upload file: ${c.message}`),null}finally{e(!1)}},loading:r,error:t}},BZ=RT({title:fi().min(5,"Title must be at least 5 characters.").max(100,"Title cannot exceed 100 characters."),description:fi().min(20,"Description must be at least 20 characters.").max(500,"Description cannot exceed 500 characters."),location:fi().min(3,"Location must be at least 3 characters.").max(100,"Location cannot exceed 100 characters."),budget:JX(r=>Number(r),QX().min(100,"Budget must be at least ₱100.").max(1e5,"Budget cannot exceed ₱100,000.")),category:fi().min(1,"Please select a category.")}),zZ=({isOpen:r,onClose:e})=>{const{addTask:t}=oa(),{uploadFile:n,loading:s}=EL(),[i,o]=G.useState(null),[c,d]=G.useState(null),[h,p]=G.useState(!1),g=CT({resolver:PT(BZ),defaultValues:{title:"",description:"",location:"",budget:0,category:""}});G.useEffect(()=>{r&&(g.reset(),o(null),d(null),p(!1))},[r,g]);const v=_=>{if(_.target.files&&_.target.files[0]){const E=_.target.files[0];if(E.size>5*1024*1024){ue.error("Image file size cannot exceed 5MB."),o(null),d(null);return}o(E),d(URL.createObjectURL(E))}else o(null),d(null)},w=async _=>{p(!0);let E;if(i){const C=`task_images/${Date.now()}_${i.name}`,P=await n(i,C);if(P)E=P;else{p(!1);return}}try{await t({title:_.title,description:_.description,location:_.location,budget:_.budget,category:_.category,imageUrl:E}),e()}catch{}finally{p(!1)}},k=h||s;return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[500px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Post a New Task"}),u.jsx(Cl,{className:"text-[hsl(var(--text-light))]",children:"Describe your task and let local taskers make offers."})]}),u.jsxs("form",{onSubmit:g.handleSubmit(w),className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"title",className:"text-right",children:"Title"}),u.jsxs("div",{className:"col-span-3",children:[u.jsx(zt,{id:"title",placeholder:"e.g., 'House Cleaning'",...g.register("title"),disabled:k}),g.formState.errors.title&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.formState.errors.title.message})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"description",className:"text-right",children:"Description"}),u.jsxs("div",{className:"col-span-3",children:[u.jsx(wh,{id:"description",placeholder:"Provide details about your task...",...g.register("description"),disabled:k}),g.formState.errors.description&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.formState.errors.description.message})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"location",className:"text-right",children:"Location"}),u.jsxs("div",{className:"col-span-3",children:[u.jsx(zt,{id:"location",placeholder:"e.g., 'Quezon City, Metro Manila'",...g.register("location"),disabled:k}),g.formState.errors.location&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.formState.errors.location.message})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"budget",className:"text-right",children:"Budget (₱)"}),u.jsxs("div",{className:"col-span-3",children:[u.jsx(zt,{id:"budget",type:"number",placeholder:"e.g., '1500'",...g.register("budget",{valueAsNumber:!0}),disabled:k}),g.formState.errors.budget&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.formState.errors.budget.message})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"category",className:"text-right",children:"Category"}),u.jsxs("div",{className:"col-span-3",children:[u.jsxs(wL,{value:g.watch("category"),onValueChange:_=>g.setValue("category",_,{shouldValidate:!0}),disabled:k,children:[u.jsx(MT,{id:"category",children:u.jsx(xL,{placeholder:"Select a category"})}),u.jsxs(LT,{children:[u.jsx(un,{value:"cleaning",children:"Home Cleaning"}),u.jsx(un,{value:"repairs",children:"Handyman Services"}),u.jsx(un,{value:"moving",children:"Moving & Hauling"}),u.jsx(un,{value:"delivery",children:"Delivery & Errands"}),u.jsx(un,{value:"painting",children:"Painting Services"}),u.jsx(un,{value:"assembly",children:"Assembly Services"}),u.jsx(un,{value:"marketing",children:"Marketing Services"}),u.jsx(un,{value:"other",children:"Other"})]})]}),g.formState.errors.category&&u.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.formState.errors.category.message})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(Lt,{htmlFor:"task-image-upload",className:"text-right pt-2",children:"Task Image"}),u.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[c&&u.jsx("img",{src:c,alt:"Task Preview",className:"w-32 h-32 object-cover rounded-md mb-2"}),u.jsxs(Lt,{htmlFor:"task-image-upload",className:"cursor-pointer flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[u.jsx(GD,{size:20})," ",i?"Change Image":"Upload Image (Optional)",u.jsx(zt,{id:"task-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:v,disabled:k})]}),!i&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max file size: 5MB"})]})]}),u.jsxs(kl,{children:[u.jsx(ve,{type:"button",variant:"outline",onClick:e,disabled:k,children:"Cancel"}),u.jsx(ve,{type:"submit",disabled:k,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:k?"Posting...":"Post Task"})]})]})]})})},WZ=["Home Cleaning","Plumbing","Electrical","Carpentry","Moving","Delivery","Painting","Furniture Assembly","Gardening","Pet Sitting","Marketing","Web Development","Graphic Design","Tutoring","Photography","Event Planning","Other"],qZ=({isOpen:r,onClose:e})=>{const{taskerProfile:t,createOrUpdateTaskerProfile:n,loading:s}=Is(),[i,o]=G.useState([]),[c,d]=G.useState(""),[h,p]=G.useState(""),[g,v]=G.useState(!1);G.useEffect(()=>{t?(o(t.skills||[]),d(t.bio||""),p(t.hourlyRate?String(t.hourlyRate):"")):(o([]),d(""),p(""))},[t,r]);const w=_=>{o(E=>E.includes(_)?E.filter(C=>C!==_):[...E,_])},k=async()=>{if(i.length===0||c.trim()===""||!h){ue.error("Please fill in all required fields.");return}if(isNaN(parseFloat(h))||parseFloat(h)<=0){ue.error("Hourly rate must be a positive number.");return}v(!0);try{await n({skills:i,bio:c,hourlyRate:parseFloat(h)}),e()}catch{}finally{v(!1)}};return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[600px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:t?"Edit Your Tasker Profile":"Become a Tasker"}),u.jsx(Cl,{className:"text-[hsl(var(--text-light))]",children:t?"Update your skills and availability.":"Share your skills and start earning!"})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(Lt,{htmlFor:"skills",className:"text-right pt-2",children:"Skills"}),u.jsx("div",{className:"col-span-3 flex flex-wrap gap-2",children:WZ.map(_=>u.jsx(ve,{variant:i.includes(_)?"default":"outline",onClick:()=>w(_),disabled:g||s,className:i.includes(_)?"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white":"border-[hsl(var(--border-color))] text-[hsl(var(--text-dark))] hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700",children:_},_))})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"bio",className:"text-right",children:"Bio"}),u.jsx(wh,{id:"bio",placeholder:"Tell us about your experience and what you offer...",className:"col-span-3",value:c,onChange:_=>d(_.target.value),disabled:g||s})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"hourlyRate",className:"text-right",children:"Hourly Rate (₱)"}),u.jsx(zt,{id:"hourlyRate",type:"number",placeholder:"e.g., 300",className:"col-span-3",value:h,onChange:_=>p(_.target.value),disabled:g||s})]})]}),u.jsxs(kl,{children:[u.jsx(ve,{variant:"outline",onClick:e,disabled:g||s,children:"Cancel"}),u.jsx(ve,{onClick:k,disabled:g||s,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:g?"Saving...":"Save Profile"})]})]})})},TL=b.createContext(void 0),HZ=({children:r})=>{const{user:e,isAuthenticated:t}=Sr(),{taskerProfile:n,isTasker:s,loading:i,fetchTaskerProfileById:o}=Is(),{createChatRoom:c}=tm(),[d,h]=G.useState([]),[p,g]=G.useState(!0),[v,w]=G.useState(null);G.useEffect(()=>{g(!0),w(null);const M=eQ($=>{h($),g(!1)},$=>{w($),g(!1)});return()=>M()},[]);const j={offers:d,loading:p||i,error:v,addOffer:async(M,$,B,A)=>{if(!t||!e||!s||!n){ue.error("You must be logged in as a tasker to make an offer.");return}g(!0);try{await YY(M,$,B,A,e,n)}catch{}finally{g(!1)}},getOffersForTask:M=>d.filter($=>$.taskId===M),acceptOffer:async(M,$)=>{if(!t||!e)return ue.error("You must be logged in to accept an offer."),null;g(!0);try{const B=Nn(Gt,"offers",M),A=await uo(B);if(!A.exists())return ue.error("Offer not found."),null;const R=A.data(),D=R.taskerId,V=R.clientId,U=await o(D),L=(U==null?void 0:U.displayName)||"Tasker",N=e.displayName||e.email||"Client",Y=await c([V,D],[N,L]);return Y&&await QY(M,$,e,Y)?Y:null}catch{return null}finally{g(!1)}},rejectOffer:async M=>{if(!t||!e){ue.error("You must be logged in to reject an offer.");return}g(!0);try{await JY(M,e)}catch{}finally{g(!1)}},withdrawOffer:async M=>{if(!t||!e){ue.error("You must be logged in to withdraw an offer.");return}g(!0);try{await XY(M,e)}catch{}finally{g(!1)}}};return u.jsx(TL.Provider,{value:j,children:r})},S0=()=>{const r=b.useContext(TL);if(r===void 0)throw new Error("useOffers must be used within an OffersProvider");return r},GZ=({isOpen:r,onClose:e,task:t})=>{const{isAuthenticated:n,user:s}=Sr(),{isTasker:i,loading:o}=Is(),{addOffer:c,loading:d}=S0(),[h,p]=G.useState(""),[g,v]=G.useState(""),[w,k]=G.useState(!1);G.useEffect(()=>{r&&(p(""),v(""))},[r]);const _=async()=>{if(!n||!s){ue.error("You must be logged in to make an offer.");return}if(!i){ue.error("You must be registered as a tasker to make an offer.");return}if(!t){ue.error("No task selected to make an offer on.");return}if(!h||!g.trim()){ue.error("Please enter an offer amount and a message.");return}const C=parseFloat(h);if(isNaN(C)||C<=0){ue.error("Offer amount must be a positive number.");return}k(!0);try{await c(t.id,t.posterId,C,g),e()}catch{}finally{k(!1)}},E=w||o||d;return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[500px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Make an Offer"}),u.jsxs(Cl,{className:"text-[hsl(var(--text-light))]",children:['Submit your offer for "',(t==null?void 0:t.title)||"this task",'".']})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"offerAmount",className:"text-right",children:"Your Offer (₱)"}),u.jsx(zt,{id:"offerAmount",type:"number",placeholder:"e.g., 1200",className:"col-span-3",value:h,onChange:C=>p(C.target.value),disabled:E})]}),u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(Lt,{htmlFor:"message",className:"text-right pt-2",children:"Message"}),u.jsx(wh,{id:"message",placeholder:"Tell the client why you're the best tasker for this job...",className:"col-span-3",value:g,onChange:C=>v(C.target.value),disabled:E})]})]}),u.jsxs(kl,{children:[u.jsx(ve,{variant:"outline",onClick:e,disabled:E,children:"Cancel"}),u.jsx(ve,{onClick:_,disabled:E,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:w?"Submitting...":"Submit Offer"})]})]})})},KZ=({isOpen:r,onClose:e,onReviewSubmit:t,taskTitle:n})=>{const[s,i]=b.useState(0),[o,c]=b.useState(""),[d,h]=b.useState(!1);G.useEffect(()=>{r&&(i(0),c(""))},[r]);const p=v=>{i(v+1)},g=async()=>{if(s===0){ue.error("Please provide a star rating.");return}if(o.trim()===""){ue.error("Please write a review.");return}h(!0);try{await t(s,o),e()}catch{}finally{h(!1)}};return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[425px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Review Task"}),u.jsxs(Cl,{className:"text-[hsl(var(--text-light))]",children:['Share your experience for "',n,'".']})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{className:"text-lg font-semibold",children:"Rating"}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((v,w)=>u.jsx(Wo,{size:32,className:Oe("cursor-pointer transition-colors",w<s?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"),onClick:()=>p(w),"aria-label":`${w+1} star rating`},w))})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"review",children:"Your Review"}),u.jsx(wh,{id:"review",placeholder:"How was your experience with the tasker?",value:o,onChange:v=>c(v.target.value),rows:4,disabled:d})]})]}),u.jsxs(kl,{children:[u.jsx(ve,{variant:"outline",onClick:e,disabled:d,children:"Cancel"}),u.jsx(ve,{onClick:g,disabled:d,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:d?"Submitting...":"Submit Review"})]})]})})},YZ=({isOpen:r,onClose:e,task:t})=>{const{editTask:n}=oa(),[s,i]=G.useState((t==null?void 0:t.title)||""),[o,c]=G.useState((t==null?void 0:t.description)||""),[d,h]=G.useState((t==null?void 0:t.location)||""),[p,g]=G.useState(t!=null&&t.budget?String(t.budget):""),[v,w]=G.useState((t==null?void 0:t.category)||""),[k,_]=G.useState(!1);G.useEffect(()=>{t&&(i(t.title),c(t.description),h(t.location),g(String(t.budget)),w(t.category))},[t]);const E=async()=>{if(!t){ue.error("No task selected for editing.");return}if(!s||!o||!d||!p||!v){ue.error("Please fill in all task details.");return}_(!0);try{await n(t.id,{title:s,description:o,location:d,budget:parseFloat(p),category:v}),e()}catch{}finally{_(!1)}};return u.jsx(eu,{open:r,onOpenChange:e,children:u.jsxs(Tl,{className:"sm:max-w-[500px]",children:[u.jsxs(Sl,{children:[u.jsx(Il,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Edit Task"}),u.jsx(Cl,{className:"text-[hsl(var(--text-light))]",children:"Update the details of your task."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"title",className:"text-right",children:"Title"}),u.jsx(zt,{id:"title",placeholder:"e.g., 'House Cleaning'",className:"col-span-3",value:s,onChange:C=>i(C.target.value),disabled:k})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"description",className:"text-right",children:"Description"}),u.jsx(wh,{id:"description",placeholder:"Provide details about your task...",className:"col-span-3",value:o,onChange:C=>c(C.target.value),disabled:k})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"location",className:"text-right",children:"Location"}),u.jsx(zt,{id:"location",placeholder:"e.g., 'Quezon City, Metro Manila'",className:"col-span-3",value:d,onChange:C=>h(C.target.value),disabled:k})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"budget",className:"text-right",children:"Budget (₱)"}),u.jsx(zt,{id:"budget",type:"number",placeholder:"e.g., '1500'",className:"col-span-3",value:p,onChange:C=>g(C.target.value),disabled:k})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Lt,{htmlFor:"category",className:"text-right",children:"Category"}),u.jsxs(wL,{value:v,onValueChange:w,disabled:k,children:[u.jsx(MT,{id:"category",className:"col-span-3",children:u.jsx(xL,{placeholder:"Select a category"})}),u.jsxs(LT,{children:[u.jsx(un,{value:"cleaning",children:"Home Cleaning"}),u.jsx(un,{value:"repairs",children:"Handyman Services"}),u.jsx(un,{value:"moving",children:"Moving & Hauling"}),u.jsx(un,{value:"delivery",children:"Delivery & Errands"}),u.jsx(un,{value:"painting",children:"Painting Services"}),u.jsx(un,{value:"assembly",children:"Assembly Services"}),u.jsx(un,{value:"marketing",children:"Marketing Services"}),u.jsx(un,{value:"other",children:"Other"})]})]})]})]}),u.jsxs(kl,{children:[u.jsx(ve,{variant:"outline",onClick:e,disabled:k,children:"Cancel"}),u.jsx(ve,{onClick:E,disabled:k,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:k?"Saving...":"Save Changes"})]})]})})},SL=b.createContext(void 0),QZ=({children:r})=>{const[e,t]=G.useState(!1),[n,s]=G.useState(!1),[i,o]=G.useState(!1),[c,d]=G.useState(!1),[h,p]=G.useState(!1),[g,v]=G.useState(!1),[w,k]=G.useState(!1),[_,E]=G.useState(null),[C,P]=G.useState(null),[j,M]=G.useState(null),{isAuthenticated:$}=Sr(),{completeTaskWithReview:B}=oa(),A=()=>{if($){ue.info("You are already logged in.");return}ae(),t(!0)},R=()=>{if($){ue.info("You are already logged in.");return}ae(),s(!0)},D=()=>{if(!$){ue.error("Please log in to post a task."),A();return}ae(),o(!0)},V=()=>{if(!$){ue.error("Please log in to register as a tasker."),A();return}ae(),d(!0)},U=he=>{if(!$){ue.error("Please log in to make an offer."),A();return}ae(),E(he),p(!0)},L=he=>{if(!$){ue.error("Please log in to review a task."),A();return}ae(),P(he),v(!0)},N=he=>{if(!$){ue.error("Please log in to edit a task."),A();return}ae(),M(he),k(!0)},Y=async(he,X)=>{C&&C.assignedTaskerId?await B(C.id,he,X):ue.error("Cannot submit review: Task or assigned tasker information is missing.")},ae=()=>{t(!1),s(!1),o(!1),d(!1),p(!1),v(!1),k(!1),E(null),P(null),M(null)},de={openLoginModal:A,openSignupModal:R,openPostTaskModal:D,openTaskerRegistrationModal:V,openMakeOfferModal:U,openReviewTaskModal:L,openEditTaskModal:N,closeAllModals:ae};return u.jsxs(SL.Provider,{value:de,children:[r,u.jsx(ZX,{isOpen:e,onClose:ae,onSwitchToSignup:R}),u.jsx(tZ,{isOpen:n,onClose:ae,onSwitchToLogin:A}),u.jsx(zZ,{isOpen:i,onClose:ae}),u.jsx(qZ,{isOpen:c,onClose:ae}),u.jsx(GZ,{isOpen:h,onClose:ae,task:_}),u.jsx(KZ,{isOpen:g,onClose:ae,onReviewSubmit:Y,taskTitle:(C==null?void 0:C.title)||""}),u.jsx(YZ,{isOpen:w,onClose:ae,task:j})]})},Rl=()=>{const r=b.useContext(SL);if(r===void 0)throw new Error("useModal must be used within a ModalProvider");return r};var VT="Avatar",[JZ,ese]=Hs(VT),[XZ,kL]=JZ(VT),IL=b.forwardRef((r,e)=>{const{__scopeAvatar:t,...n}=r,[s,i]=b.useState("idle");return u.jsx(XZ,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:u.jsx(pt.span,{...n,ref:e})})});IL.displayName=VT;var CL="AvatarImage",PL=b.forwardRef((r,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...i}=r,o=kL(CL,t),c=ZZ(n,i),d=ur(h=>{s(h),o.onImageLoadingStatusChange(h)});return hr(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?u.jsx(pt.img,{...i,ref:e,src:n}):null});PL.displayName=CL;var AL="AvatarFallback",RL=b.forwardRef((r,e)=>{const{__scopeAvatar:t,delayMs:n,...s}=r,i=kL(AL,t),[o,c]=b.useState(n===void 0);return b.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),o&&i.imageLoadingStatus!=="loaded"?u.jsx(pt.span,{...s,ref:e}):null});RL.displayName=AL;function pA(r,e){return r?e?(r.src!==e&&(r.src=e),r.complete&&r.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ZZ(r,{referrerPolicy:e,crossOrigin:t}){const n=tee(),s=b.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,c]=b.useState(()=>pA(i,r));return hr(()=>{c(pA(i,r))},[i,r]),hr(()=>{const d=g=>()=>{c(g)};if(!i)return;const h=d("loaded"),p=d("error");return i.addEventListener("load",h),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",h),i.removeEventListener("error",p)}},[i,t,e]),o}function eee(){return()=>{}}function tee(){return b.useSyncExternalStore(eee,()=>!0,()=>!1)}var NL=IL,jL=PL,OL=RL;const is=b.forwardRef(({className:r,...e},t)=>u.jsx(NL,{ref:t,className:Oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));is.displayName=NL.displayName;const os=b.forwardRef(({className:r,...e},t)=>u.jsx(jL,{ref:t,className:Oe("aspect-square h-full w-full",r),...e}));os.displayName=jL.displayName;const as=b.forwardRef(({className:r,children:e,...t},n)=>u.jsx(OL,{ref:n,className:Oe("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t,children:e}));as.displayName=OL.displayName;const ree=({isAuthenticated:r,onSignOut:e})=>{const{openLoginModal:t,openSignupModal:n,openPostTaskModal:s}=Rl(),{user:i}=Sr(),{isTasker:o}=Is();return u.jsx("header",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-50 h-[60px] flex items-center pt-[var(--safe-area-top)]",children:u.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center w-full",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("h1",{className:"text-2xl text-[hsl(var(--primary-color))] font-bold",children:"Tasko"})}),u.jsxs("nav",{className:"hidden md:flex gap-8",children:[u.jsx(dn,{to:"/",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Go to Home page",children:"Home"}),u.jsx("a",{href:"#categories",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Scroll to Services section",children:"Services"}),r&&u.jsx(dn,{to:"/my-tasks",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Go to My Tasks page",children:"My Tasks"}),r&&o&&u.jsx(dn,{to:"/tasker-dashboard",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Go to Tasker Dashboard",children:"Tasker Dashboard"}),u.jsx("a",{href:"#how-it-works",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Scroll to How It Works section",children:"How It Works"}),u.jsx(dn,{to:"/features-earnings",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Go to Become a Tasker page",children:"Become a Tasker"}),r&&u.jsx(dn,{to:"/profile",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm","aria-label":"Go to Profile page",children:"Profile"})]}),u.jsx("div",{className:"flex gap-3 items-center",children:r?u.jsxs(u.Fragment,{children:[u.jsxs(ve,{onClick:s,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] flex items-center gap-1 px-3 py-2 h-auto text-sm","aria-label":"Post a new task",children:[u.jsx(rM,{size:16})," Post Task"]}),u.jsx(dn,{to:"/profile",className:"flex items-center","aria-label":"View user profile",children:u.jsxs(is,{className:"w-8 h-8 border-2 border-[hsl(var(--primary-color))]",children:[u.jsx(os,{src:(i==null?void 0:i.photoURL)||void 0,alt:(i==null?void 0:i.displayName)||(i==null?void 0:i.email)||"User"}),u.jsx(as,{className:"bg-[hsl(var(--primary-color))] text-white text-sm font-semibold",children:i!=null&&i.displayName?i.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:16})})]})}),u.jsx(ve,{onClick:e,variant:"outline",className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white","aria-label":"Sign out of your account",children:"Sign Out"})]}):u.jsxs(u.Fragment,{children:[u.jsx(ve,{onClick:t,variant:"outline",className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white","aria-label":"Log in to your account",children:"Login"}),u.jsx(ve,{onClick:n,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]","aria-label":"Sign up for a new account",children:"Sign Up"})]})})]})})},nee=({searchTerm:r,onSearchTermChange:e,onSearchSubmit:t})=>{const n=s=>{s.key==="Enter"&&t()};return u.jsxs("section",{className:"relative bg-gradient-to-r from-[hsl(var(--primary-color))] to-[#008a25] text-white py-20 md:py-32 overflow-hidden mt-[60px] rounded-b-[20px] mb-6",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:u.jsx("img",{src:"https://images.unsplash.com/photo-1507679799977-c91849123e4f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Background",className:"w-full h-full object-cover",loading:"lazy"})}),u.jsxs("div",{className:"container mx-auto px-4 relative z-10 text-center",children:[u.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold leading-tight mb-4 drop-shadow-lg",children:"Your Everyday Tasks, Simplified."}),u.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-3xl mx-auto drop-shadow-md opacity-90",children:"Connect with trusted local taskers for home services, errands, and more."}),u.jsxs("div",{className:"max-w-2xl mx-auto relative",children:[u.jsx(qJ,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 z-20",size:20}),u.jsx(zt,{type:"text",placeholder:"🔍 What task do you need help with? (e.g., 'house cleaning', 'furniture assembly')",className:"w-full py-4 pl-12 pr-4 rounded-full border border-gray-300 bg-white text-gray-800 shadow-lg focus:ring-2 focus:ring-[hsl(var(--primary-color))]",value:r,onChange:s=>e(s.target.value),onKeyDown:n}),u.jsx(ve,{onClick:t,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[hsl(var(--secondary-color))] hover:bg-[#e05a00] text-white rounded-full px-6 py-2 h-auto",children:"Search"})]}),u.jsxs("p",{className:"mt-6 text-sm md:text-base drop-shadow-md",children:["Popular: ",u.jsx("a",{href:"#",className:"underline hover:text-green-200",children:"Cleaning"}),", ",u.jsx("a",{href:"#",className:"underline hover:text-green-200",children:"Handyman"}),", ",u.jsx("a",{href:"#",className:"underline hover:text-green-200",children:"Moving"}),", ",u.jsx("a",{href:"#",className:"underline hover:text-green-200",children:"Delivery"})]})]})]})},_t=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:Oe("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));_t.displayName="Card";const fn=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:Oe("flex flex-col space-y-1.5 p-6",r),...e}));fn.displayName="CardHeader";const jn=b.forwardRef(({className:r,...e},t)=>u.jsx("h3",{ref:t,className:Oe("text-2xl font-semibold leading-none tracking-tight",r),...e}));jn.displayName="CardTitle";const FT=b.forwardRef(({className:r,...e},t)=>u.jsx("p",{ref:t,className:Oe("text-sm text-muted-foreground",r),...e}));FT.displayName="CardDescription";const bt=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:Oe("p-6 pt-0",r),...e}));bt.displayName="CardContent";const see=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:Oe("flex items-center p-6 pt-0",r),...e}));see.displayName="CardFooter";const iee=[{name:"All Services",icon:eM,description:"Browse all available tasks.",value:"all"},{name:"Home Cleaning",icon:bT,description:"Sparkling clean homes, hassle-free.",value:"cleaning"},{name:"Handyman Services",icon:tX,description:"Fixes, repairs, and installations.",value:"repairs"},{name:"Moving & Hauling",icon:JJ,description:"Effortless moving and junk removal.",value:"moving"},{name:"Delivery & Errands",icon:BJ,description:"Get anything delivered or done.",value:"delivery"},{name:"Painting Services",icon:zJ,description:"Transform your space with a fresh coat.",value:"painting"},{name:"Assembly Services",icon:MJ,description:"Furniture assembly, electronics setup.",value:"assembly"}],oee=({activeCategory:r,onCategorySelect:e})=>u.jsx("section",{id:"categories",className:"py-12 bg-[hsl(var(--bg-light))] dark:bg-gray-800",children:u.jsxs("div",{className:"container mx-auto px-4 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-10",children:"Explore Our Services"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:iee.map((t,n)=>u.jsx(_t,{className:Oe("flex flex-col items-center p-6 shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer border-[hsl(var(--border-color))] rounded-[var(--border-radius)]",r===t.value?"border-2 border-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)] dark:bg-gray-700":"border border-[hsl(var(--border-color))] dark:border-gray-700"),onClick:()=>e(t.value),children:u.jsxs(bt,{className:"flex flex-col items-center p-0",children:[u.jsx(t.icon,{size:48,className:"text-[hsl(var(--primary-color))] mb-4"}),u.jsx("h3",{className:"text-xl font-semibold mb-2 text-[hsl(var(--text-dark))] dark:text-gray-100",children:t.name}),u.jsx("p",{className:"text-[hsl(var(--text-light))] dark:text-gray-300 text-sm",children:t.description})]})},n))})]})}),aee=()=>{const r=[{icon:AJ,title:"Post Your Task",description:"Describe what you need help with and set your budget."},{icon:OJ,title:"Get Offers",description:"Taskers in your area will send you offers."},{icon:ZJ,title:"Choose a Tasker",description:"Review profiles and pick the best fit."},{icon:Cp,title:"Get It Done",description:"Your task gets completed safely and efficiently."}];return u.jsx("section",{id:"how-it-works",className:"py-12 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8",children:u.jsxs("div",{className:"container mx-auto px-4 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-10",children:"How Tasko Works"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((e,t)=>u.jsxs(_t,{className:"flex flex-col items-center p-6 shadow-md rounded-[var(--border-radius)]",children:[u.jsxs(fn,{className:"p-0 mb-4",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(e.icon,{size:32,className:"text-[hsl(var(--primary-color))] dark:text-green-200"})}),u.jsx(jn,{className:"text-xl font-semibold text-[hsl(var(--text-dark))] dark:text-gray-100",children:e.title})]}),u.jsx(bt,{className:"p-0",children:u.jsx("p",{className:"text-[hsl(var(--text-light))] dark:text-gray-300 text-sm",children:e.description})})]},t))})]})})},lee=()=>u.jsxs("footer",{className:"bg-gray-800 text-gray-300 py-10",children:[u.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Tasko"}),u.jsx("p",{className:"text-sm mb-2",children:"Your trusted partner for everyday tasks."}),u.jsx("p",{className:"text-sm",children:"Making life easier, one task at a time."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Links"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(dn,{to:"/",className:"hover:text-white transition-colors duration-200",children:"Home"})}),u.jsx("li",{children:u.jsx("a",{href:"#how-it-works",className:"hover:text-white transition-colors duration-200",children:"How it Works"})}),u.jsx("li",{children:u.jsx(dn,{to:"/features-earnings",className:"hover:text-white transition-colors duration-200",children:"Become a Tasker"})}),u.jsx("li",{children:u.jsx(dn,{to:"/contact",className:"hover:text-white transition-colors duration-200",children:"Help & Support"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Legal"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(dn,{to:"/privacy",className:"hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),u.jsx("li",{children:u.jsx(dn,{to:"/terms",className:"hover:text-white transition-colors duration-200",children:"Terms of Service"})}),u.jsx("li",{children:u.jsx(dn,{to:"/eula",className:"hover:text-white transition-colors duration-200",children:"EULA"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Download Our App"}),u.jsx("p",{className:"text-sm mb-4",children:"Get the full Tasko experience on your mobile device."}),u.jsx("div",{className:"flex flex-col space-y-3 mb-6",children:u.jsxs("div",{className:"flex flex-col space-y-3",children:[u.jsx("a",{href:"/app-store-badge.png",target:"_blank",rel:"noopener noreferrer",children:u.jsxs(ve,{className:"w-full bg-black text-white hover:bg-gray-700 flex items-center justify-center space-x-2 py-2 px-4 rounded-lg",children:[u.jsx(SJ,{size:20}),u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-xs",children:"Download on the"}),u.jsx("span",{className:"text-sm font-semibold",children:"App Store"})]})]})}),u.jsx("a",{href:"/google-play-badge.png",target:"_blank",rel:"noopener noreferrer",children:u.jsxs(ve,{className:"w-full bg-black text-white hover:bg-gray-700 flex items-center justify-center space-x-2 py-2 px-4 rounded-lg",children:[u.jsx(WJ,{size:20}),u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-xs",children:"Get it on"}),u.jsx("span",{className:"text-sm font-semibold",children:"Google Play"})]})]})})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Follow Us"}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-200",children:u.jsx(RJ,{size:24})}),u.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-200",children:u.jsx(XJ,{size:24})}),u.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-200",children:u.jsx(DJ,{size:24})}),u.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-200",children:u.jsx(LJ,{size:24})})]})]})]})]}),u.jsxs("div",{className:"text-center text-sm text-gray-500 mt-10 border-t border-gray-700 pt-6",children:["© ",new Date().getFullYear()," Tasko. All rights reserved."]})]}),cee=()=>u.jsx("div",{className:"p-4 text-center",children:u.jsx("a",{href:"https://www.dyad.sh/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Made with Dyad"})}),uee=()=>u.jsxs("div",{className:"fixed inset-0 bg-[hsl(var(--primary-color))] flex flex-col items-center justify-center z-[9999] text-white transition-opacity duration-500",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🛠️"}),u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tasko"}),u.jsx("p",{children:"Loading your task service..."}),u.jsx("div",{className:"w-10 h-10 border-3 border-solid border-[rgba(255,255,255,0.3)] border-t-white rounded-full animate-spin"})]}),dee=({isVisible:r,onInstall:e,onClose:t})=>r?u.jsxs("div",{className:"fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-xl p-4 z-50 flex flex-col md:flex-row items-center gap-4 animate-slideUp md:max-w-md md:mx-auto",children:[u.jsx("div",{className:"text-3xl text-[hsl(var(--primary-color))]",children:"🛠️"}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h3",{className:"font-semibold text-[hsl(var(--text-dark))]",children:"Install Tasko App"}),u.jsx("p",{className:"text-sm text-[hsl(var(--text-light))]",children:"Get the full app experience with offline access"})]}),u.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-center",children:[u.jsx(ve,{onClick:e,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] text-sm px-4 py-2",children:"Install"}),u.jsx(ve,{onClick:t,variant:"ghost",size:"icon",className:"text-[hsl(var(--text-light))] hover:bg-gray-100",children:u.jsx(y0,{size:20})})]})]}):null,hee=({isVisible:r})=>u.jsx("div",{className:Oe("fixed top-[60px] left-0 right-0 bg-[hsl(var(--secondary-color))] text-white text-center py-2 z-40 transition-transform duration-300 ease-out",r?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(eX,{size:18}),u.jsx("span",{children:"You are currently offline"})]})}),fee=()=>{const{isAuthenticated:r}=Sr(),{isTasker:e}=Is(),{openLoginModal:t}=Rl(),n=Fr(),s=()=>{r?n("/profile"):t()};return u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 md:hidden pb-[var(--safe-area-bottom)]",children:u.jsxs("div",{className:"flex justify-around py-2",children:[u.jsxs(vg,{to:"/",className:({isActive:i})=>Oe("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),"aria-label":"Go to Home page",children:[u.jsx(bT,{size:20,className:"mb-1"}),u.jsx("span",{children:"Home"})]}),u.jsxs("a",{href:"#categories",className:"flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200 text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50","aria-label":"Scroll to Services section",children:[u.jsx(eM,{size:20,className:"mb-1"}),u.jsx("span",{children:"Services"})]}),u.jsxs(vg,{to:"/my-tasks",className:({isActive:i})=>Oe("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),"aria-label":"Go to My Tasks page",children:[u.jsx(VJ,{size:20,className:"mb-1"}),u.jsx("span",{children:"My Tasks"})]}),r&&e&&u.jsxs(vg,{to:"/tasker-dashboard",className:({isActive:i})=>Oe("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),"aria-label":"Go to Tasker Dashboard",children:[u.jsx(xd,{size:20,className:"mb-1"}),u.jsx("span",{children:"Dashboard"})]}),u.jsxs(vg,{to:"/chat",className:({isActive:i})=>Oe("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),"aria-label":"Go to Chat page",children:[u.jsx(Wc,{size:20,className:"mb-1"}),u.jsx("span",{children:"Chat"})]}),u.jsxs("button",{onClick:s,className:"flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200 text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50","aria-label":"Go to Profile page",children:[u.jsx(yi,{size:20,className:"mb-1"}),u.jsx("span",{children:"Profile"})]})]})})},Fg=[{title:"Welcome to Tasko!",description:"Your go-to platform for finding reliable help and getting tasks done efficiently.",image:"https://images.unsplash.com/photo-1522071820075-efceb6a63d43?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Find Skilled Taskers",description:"Browse through a wide range of categories and connect with verified professionals near you.",image:"https://images.unsplash.com/photo-1552664730-d307ca8849d1?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Post Your Tasks",description:"Need something done? Post your task, set your budget, and let taskers bid on it.",image:"https://images.unsplash.com/photo-1504384308090-c894fd24153e?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Earn Money as a Tasker",description:"Offer your skills, find tasks that match your expertise, and start earning on your own terms.",image:"https://images.unsplash.com/photo-1556740738-b63629034c2f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Secure & Transparent",description:"Enjoy secure payments, transparent pricing, and reliable support every step of the way.",image:"https://images.unsplash.com/photo-1579621970563-cd787c538e76?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],pee=({onClose:r})=>{const[e,t]=G.useState(0),n=Fg[e],s=()=>{e<Fg.length-1?t(e+1):o()},i=()=>{e>0&&t(e-1)},o=()=>{localStorage.setItem("hasSeenOnboarding","true"),r()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4",children:u.jsxs(_t,{className:"w-full max-w-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg shadow-2xl relative",children:[u.jsx(ve,{variant:"ghost",size:"icon",onClick:o,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u.jsx(y0,{size:24})}),u.jsxs(bt,{className:"p-6 text-center",children:[u.jsx("img",{src:n.image,alt:"Onboarding illustration",className:"w-32 h-32 object-contain mx-auto mb-6"}),u.jsx("h2",{className:"text-3xl font-bold text-[hsl(var(--primary-color))] mb-3",children:n.title}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-8",children:n.description}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs(ve,{variant:"outline",onClick:i,disabled:e===0,className:"flex items-center gap-2 border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[u.jsx(IJ,{size:20})," Previous"]}),u.jsx("div",{className:"flex space-x-2",children:Fg.map((c,d)=>u.jsx("span",{className:`block w-3 h-3 rounded-full ${d===e?"bg-[hsl(var(--primary-color))]":"bg-gray-300 dark:bg-gray-600"}`},d))}),u.jsxs(ve,{onClick:s,className:"flex items-center gap-2 bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]",children:[e===Fg.length-1?"Finish":"Next"," ",u.jsx(QD,{size:20})]})]})]})]})})},mee=({minBudget:r,setMinBudget:e,maxBudget:t,setMaxBudget:n,filterLocation:s,setFilterLocation:i,onApplyFilters:o,onResetFilters:c})=>u.jsxs("section",{className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-6",children:"Refine Your Search"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterLocation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),u.jsx(zt,{id:"filterLocation",type:"text",placeholder:"e.g., 'Makati City'",value:s,onChange:d=>i(d.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"minBudget",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Budget (₱)"}),u.jsx(zt,{id:"minBudget",type:"number",placeholder:"e.g., 500",value:r,onChange:d=>e(d.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"maxBudget",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Budget (₱)"}),u.jsx(zt,{id:"maxBudget",type:"number",placeholder:"e.g., 2000",value:t,onChange:d=>n(d.target.value),className:"w-full"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(ve,{onClick:c,variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:"Reset Filters"}),u.jsx(ve,{onClick:o,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]",children:"Apply Filters"})]})]});function ut({className:r,...e}){return u.jsx("div",{className:Oe("animate-pulse rounded-md bg-muted",r),...e})}const gee=r=>({all:"All Services",cleaning:"Cleaning",moving:"Moving",assembly:"Assembly",repairs:"Repairs",delivery:"Delivery",mounting:"Mounting",painting:"Painting",marketing:"Marketing",other:"Other"})[r]||"Task",yee=({tasks:r,loading:e,onViewTaskDetails:t})=>u.jsxs("section",{id:"featured-tasks",className:"py-8",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8 text-center",children:"✨ Featured Tasks"}),e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((n,s)=>u.jsxs(_t,{className:"shadow-lg rounded-[var(--border-radius)] overflow-hidden",children:[u.jsx(ut,{className:"h-40 w-full"}),u.jsxs(bt,{className:"p-4",children:[u.jsx(ut,{className:"h-6 w-3/4 mb-2"}),u.jsx(ut,{className:"h-4 w-1/2 mb-2"}),u.jsx(ut,{className:"h-6 w-1/3 mb-4"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ut,{className:"h-8 w-8 rounded-full"}),u.jsx(ut,{className:"h-4 w-20"})]}),u.jsx(ut,{className:"h-10 w-24 rounded-md"})]})]})]},s))}):r.length===0?u.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No featured tasks available right now."}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(n=>u.jsxs(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute top-2 left-2 bg-[hsl(var(--primary-color))] text-white px-3 py-1 rounded-full text-xs font-semibold",children:gee(n.category)})]}),u.jsxs(bt,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:n.title}),u.jsxs("p",{className:"text-[hsl(var(--text-light))] flex items-center mb-2",children:[u.jsx(vh,{size:16,className:"mr-2"})," ",n.location]}),u.jsxs("p",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:["₱",n.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:n.posterAvatar,alt:n.posterName,className:"w-8 h-8 rounded-full object-cover border-2 border-[hsl(var(--border-color))]"}),u.jsx("span",{className:"font-medium",children:n.posterName})]}),u.jsx(ve,{variant:"outline",onClick:()=>t(n.id),className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"View Details"})]})]})]},n.id))})]}),vee=r=>({all:"All Services",cleaning:"Cleaning",moving:"Moving",assembly:"Assembly",repairs:"Repairs",delivery:"Delivery",mounting:"Mounting",painting:"Painting",marketing:"Marketing",other:"Other"})[r]||"Task",wee=({tasks:r,loading:e,error:t,onViewTaskDetails:n})=>{const{openPostTaskModal:s}=Rl();return u.jsxs("section",{id:"tasks",className:"py-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))]",children:"📋 Available Tasks Near You"}),u.jsxs(ve,{onClick:s,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] flex items-center gap-2",children:[u.jsx(rM,{size:20})," Post a Task"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t&&u.jsxs("p",{className:"col-span-full text-center text-red-500 italic py-8",children:["Error loading tasks: ",t]}),e&&[...Array(6)].map((i,o)=>u.jsxs(_t,{className:"shadow-lg rounded-[var(--border-radius)] overflow-hidden",children:[u.jsx(ut,{className:"h-40 w-full"}),u.jsxs(bt,{className:"p-4",children:[u.jsx(ut,{className:"h-6 w-3/4 mb-2"}),u.jsx(ut,{className:"h-4 w-1/2 mb-2"}),u.jsx(ut,{className:"h-6 w-1/3 mb-4"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ut,{className:"h-8 w-8 rounded-full"}),u.jsx(ut,{className:"h-4 w-20"})]}),u.jsx(ut,{className:"h-10 w-24 rounded-md"})]})]})]},o)),!e&&r.length===0&&!t?u.jsx("p",{className:"col-span-full text-center text-gray-500 italic py-8",children:"No tasks found matching your criteria. Try adjusting your filters!"}):!e&&r.map(i=>u.jsxs(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute top-2 left-2 bg-[hsl(var(--primary-color))] text-white px-3 py-1 rounded-full text-xs font-semibold",children:vee(i.category)})]}),u.jsxs(bt,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.title}),u.jsxs("p",{className:"text-[hsl(var(--text-light))] flex items-center mb-2",children:[u.jsx(vh,{size:16,className:"mr-2"})," ",i.location]}),u.jsxs("p",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:["₱",i.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:i.posterAvatar,alt:i.posterName,className:"w-8 h-8 rounded-full object-cover border-2 border-[hsl(var(--border-color))]"}),u.jsx("span",{className:"font-medium",children:i.posterName})]}),u.jsx(ve,{variant:"outline",onClick:()=>n(i.id),className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"View Details"})]})]})]},i.id))]})]})},xee=zb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Bt({className:r,variant:e,...t}){return u.jsx("div",{className:Oe(xee({variant:e}),r),...t})}const _ee=({taskers:r,loading:e})=>{const t=Fr();return u.jsxs("section",{id:"top-taskers",className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8 text-center",children:"⭐ Top Taskers"}),e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((n,s)=>u.jsx(_t,{className:"shadow-md rounded-[var(--border-radius)]",children:u.jsxs(bt,{className:"p-4 flex flex-col items-center text-center",children:[u.jsx(ut,{className:"w-20 h-20 rounded-full mb-3"}),u.jsx(ut,{className:"h-6 w-3/4 mb-1"}),u.jsx(ut,{className:"h-4 w-1/2 mb-2"}),u.jsx(ut,{className:"h-4 w-1/3 mb-3"}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[u.jsx(ut,{className:"h-6 w-16 rounded-full"}),u.jsx(ut,{className:"h-6 w-16 rounded-full"}),u.jsx(ut,{className:"h-6 w-16 rounded-full"})]}),u.jsx(ut,{className:"h-10 w-32 rounded-md"})]})},s))}):r.length===0?u.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No top taskers available yet. Be the first to register!"}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(n=>u.jsx(_t,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 rounded-[var(--border-radius)]",children:u.jsxs(bt,{className:"p-4 flex flex-col items-center text-center",children:[u.jsxs(is,{className:"w-20 h-20 mb-3 border-2 border-green-500",children:[u.jsx(os,{src:n.photoURL||void 0,alt:n.displayName}),u.jsx(as,{className:"bg-green-200 text-green-800 text-2xl font-semibold",children:n.displayName?n.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:24})})]}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:n.displayName}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:n.bio}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-3",children:[u.jsx(El,{size:16})," ",u.jsxs("span",{children:["₱",n.hourlyRate.toLocaleString(),"/hr"]})]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[n.skills.slice(0,3).map((s,i)=>u.jsx(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:s},i)),n.skills.length>3&&u.jsxs(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:["+",n.skills.length-3," more"]})]}),u.jsx(ve,{variant:"outline",onClick:()=>t(`/taskers/${n.userId}`),className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Profile"})]})},n.userId))})]})},bee=()=>u.jsxs("section",{id:"gamification",className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8",children:"🏆 Earn Badges!"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"Complete tasks, get 5-star ratings, and be a fast responder to earn exclusive Tasko badges!"}),u.jsxs("div",{className:"flex justify-center gap-6 flex-wrap",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(qx,{size:48,className:"text-yellow-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"5-Star Rated"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Achieve perfect ratings"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(qx,{size:48,className:"text-blue-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Fast Responder"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reply quickly to clients"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(qx,{size:48,className:"text-purple-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Task Master"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete many tasks"})]})]})]}),Eee=()=>u.jsxs("section",{id:"referral-promo",className:"py-8 bg-[hsl(var(--primary-color))] text-white rounded-lg shadow-lg my-8 p-6 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"🤝 Invite Friends & Earn!"}),u.jsx("p",{className:"text-lg mb-6",children:"Refer a friend to Tasko and both of you will earn ₱50 credits!"}),u.jsxs(ve,{className:"bg-[hsl(var(--secondary-color))] hover:bg-[#e05a00] text-white text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all flex items-center gap-2 mx-auto",children:[u.jsx(jJ,{size:24})," Refer Now!"]})]}),DL=G.createContext(void 0),Tee=2e3,See=({children:r})=>{const[e,t]=G.useState(typeof navigator<"u"?navigator.onLine:!0),[n,s]=G.useState(null),[i,o]=G.useState(!1),[c,d]=G.useState(!0);G.useEffect(()=>{const w=setTimeout(()=>{d(!1)},Tee),k=()=>{t(!0),ue.success("You are back online!")},_=()=>{t(!1),ue.error("You are currently offline.")},E=P=>{P.preventDefault(),s(P),h()||setTimeout(()=>{o(!0)},3e3)},C=()=>{s(null),o(!1),ue.success("Tasko installed successfully!")};return typeof window<"u"&&(window.addEventListener("online",k),window.addEventListener("offline",_),window.addEventListener("beforeinstallprompt",E),window.addEventListener("appinstalled",C),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(P=>{console.log("SW registered: ",P)}).catch(P=>{console.log("SW registration failed: ",P),ue.error("Failed to register service worker for offline support.")})})),()=>{clearTimeout(w),typeof window<"u"&&(window.removeEventListener("online",k),window.removeEventListener("offline",_),window.removeEventListener("beforeinstallprompt",E),window.removeEventListener("appinstalled",C))}},[]);const h=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,v={isOnline:e,showInstallPrompt:i,installApp:async()=>{if(n){n.prompt();const{outcome:w}=await n.userChoice;w==="accepted"&&(s(null),o(!1))}},closeInstallPrompt:()=>{o(!1)},showSplashScreen:c};return u.jsx(DL.Provider,{value:v,children:r})},kee=()=>{const r=G.useContext(DL);if(r===void 0)throw new Error("usePWA must be used within a PWAProvider");return r},Iee=()=>{const{isOnline:r,showInstallPrompt:e,installApp:t,closeInstallPrompt:n,showSplashScreen:s}=kee(),{isAuthenticated:i,loading:o,logout:c}=Sr(),{openPostTaskModal:d,openLoginModal:h}=Rl(),p=Fr(),{tasks:g,loading:v,error:w}=oa(),{allTaskerProfiles:k,loading:_}=Is(),[E,C]=G.useState(""),[P,j]=G.useState("all"),[M,$]=G.useState(""),[B,A]=G.useState(""),[R,D]=G.useState(""),[V,U]=G.useState(!1);G.useEffect(()=>{localStorage.getItem("hasSeenOnboarding")||U(!0)},[]);const L=async()=>{await c()},N=()=>{console.log("Searching for:",E,"in category:",P,"min budget:",M,"max budget:",B,"location:",R)},Y=K=>{j(K),C("")},ae=K=>{p(`/tasks/${K}`)},de=()=>{C(""),j("all"),$(""),A(""),D("")},he=G.useMemo(()=>{let K=g;if(P&&P!=="all"&&(K=K.filter(W=>W.category===P)),E){const W=E.toLowerCase();K=K.filter(Z=>Z.title.toLowerCase().includes(W)||Z.description.toLowerCase().includes(W)||Z.location.toLowerCase().includes(W))}if(M){const W=parseFloat(M);isNaN(W)||(K=K.filter(Z=>Z.budget>=W))}if(B){const W=parseFloat(B);isNaN(W)||(K=K.filter(Z=>Z.budget<=W))}if(R){const W=R.toLowerCase();K=K.filter(Z=>Z.location.toLowerCase().includes(W))}return K},[g,E,P,M,B,R]),X=G.useMemo(()=>g.filter(K=>K.status==="open").slice(0,5),[g]),J=G.useMemo(()=>k.slice(0,3),[k]);return u.jsxs("div",{className:"min-h-screen bg-[hsl(var(--bg-light))] dark:bg-gray-900 text-[hsl(var(--text-dark))] dark:text-gray-100 pb-16 md:pb-0",children:[u.jsx("div",{className:Oe("fixed inset-0 z-[9999] transition-opacity duration-500",s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:u.jsx(uee,{})}),u.jsx(hee,{isVisible:!r}),u.jsx(ree,{isAuthenticated:i,onSignOut:L}),u.jsx(nee,{searchTerm:E,onSearchTermChange:C,onSearchSubmit:N}),u.jsxs("main",{className:"container mx-auto p-4 pt-[60px]",children:[u.jsx(oee,{activeCategory:P,onCategorySelect:Y}),u.jsx(mee,{minBudget:M,setMinBudget:$,maxBudget:B,setMaxBudget:A,filterLocation:R,setFilterLocation:D,onApplyFilters:N,onResetFilters:de}),u.jsx(yee,{tasks:X,loading:v,onViewTaskDetails:ae}),u.jsx(wee,{tasks:he,loading:v,error:w,onViewTaskDetails:ae}),u.jsx(_ee,{taskers:J,loading:_}),u.jsx(bee,{}),u.jsx(Eee,{}),u.jsx(aee,{})]}),u.jsx(lee,{}),u.jsx(cee,{}),u.jsx(dee,{isVisible:e,onInstall:t,onClose:n}),u.jsx(fee,{}),V&&u.jsx(pee,{onClose:()=>U(!1)})]})},Cee=()=>{const r=ah();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),u.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),u.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Pee=()=>{const{id:r}=GR(),e=Fr(),{tasks:t,loading:n,error:s}=oa(),{user:i,isAuthenticated:o,loading:c}=Sr(),{isTasker:d,loading:h}=Is(),{offers:p,loading:g,acceptOffer:v,rejectOffer:w,withdrawOffer:k}=S0(),{openMakeOfferModal:_}=Rl(),{createChatRoom:E}=tm(),C=t.find(N=>N.id===r),P=p.filter(N=>N.taskId===r);if(n||c||h||g)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading task details..."});if(s)return u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",s]});if(!C)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Task not found."});const M=o&&(i==null?void 0:i.uid)===C.posterId,$=o&&d&&!M&&C.status==="open",B=o&&(i==null?void 0:i.uid)!==C.posterId,A=()=>{C&&_(C)},R=async()=>{if(!i||!C){ue.error("User or task information is missing.");return}if(i.uid===C.posterId){ue.info("You cannot chat with yourself.");return}try{await E([i.uid,C.posterId],[i.displayName||i.email||"You",C.posterName])&&e("/chat")}catch(N){console.error("Failed to create or navigate to chat room:",N),ue.error("Failed to start chat.")}},D=async N=>{if(!M){ue.error("You are not authorized to accept offers for this task.");return}try{await v(N,C.id)&&e("/chat")}catch{}},V=async N=>{if(!M){ue.error("You are not authorized to reject offers for this task.");return}try{await w(N)}catch{}},U=async N=>{const Y=P.find(ae=>ae.id===N);if(!o||(i==null?void 0:i.uid)!==(Y==null?void 0:Y.taskerId)){ue.error("You are not authorized to withdraw this offer.");return}try{await k(N)}catch{}},L=N=>{switch(N){case"pending":return u.jsx(Bt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Bt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Bt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Bt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});case"cancelled":return u.jsx(Bt,{variant:"outline",className:"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-200",children:"Cancelled"});default:return u.jsx(Bt,{variant:"outline",children:"Unknown"})}};return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx(ve,{onClick:()=>e(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"← Back to Tasks"}),u.jsxs(_t,{className:"shadow-lg",children:[u.jsxs(fn,{className:"relative p-0",children:[u.jsx("img",{src:C.imageUrl,alt:C.title,className:"w-full h-64 object-cover rounded-t-lg"}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 text-white",children:[u.jsx(jn,{className:"text-3xl font-bold mb-1",children:C.title}),u.jsxs(FT,{className:"text-gray-200 flex items-center gap-2",children:[u.jsx(vh,{size:18})," ",C.location]})]})]}),u.jsxs(bt,{className:"p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-gray-100",children:"Task Details"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:C.description}),u.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(g0,{size:18})," ",u.jsx("strong",{children:"Category:"})," ",C.category]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(HD,{size:18})," ",u.jsx("strong",{children:"Posted:"})," ",new Date(C.datePosted).toLocaleDateString()]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(El,{size:18})," ",u.jsx("strong",{children:"Budget:"})," ₱",C.budget.toLocaleString()]}),u.jsx("p",{className:"flex items-center gap-2",children:u.jsxs(Bt,{className:`text-white px-2 py-1 rounded-full text-xs font-semibold ${C.status==="open"?"bg-blue-600":C.status==="assigned"?"bg-yellow-600":C.status==="completed"?"bg-green-600":"bg-gray-600"}`,children:["Status: ",C.status.charAt(0).toUpperCase()+C.status.slice(1)]})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-gray-100",children:"Posted By"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("img",{src:C.posterAvatar,alt:C.posterName,className:"w-16 h-16 rounded-full object-cover border-2 border-green-500"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:C.posterName}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Task Poster"})]})]}),$&&u.jsxs(ve,{onClick:A,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center gap-2 mb-2",children:[u.jsx(yi,{size:20})," Make an Offer"]}),B&&u.jsxs(ve,{onClick:R,variant:"outline",className:"w-full border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white flex items-center gap-2",children:[u.jsx(Wc,{size:20})," Chat with Poster"]}),!o&&u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Log in to make an offer or chat."}),o&&!d&&!M&&u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Register as a tasker to make an offer."})]})]}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:["Offers (",P.length,")"]}),P.length===0?u.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No offers yet. Be the first to make one!"}):u.jsx("div",{className:"space-y-4",children:P.map(N=>u.jsx(_t,{className:"p-4 shadow-sm",children:u.jsxs(bt,{className:"p-0 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(is,{className:"w-12 h-12 border-2 border-blue-500",children:[u.jsx(os,{src:N.taskerAvatar||void 0,alt:N.taskerName}),u.jsx(as,{className:"bg-blue-200 text-blue-800 text-lg font-semibold",children:N.taskerName?N.taskerName.charAt(0).toUpperCase():u.jsx(yi,{size:20})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:N.taskerName}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[u.jsx(Wc,{size:14})," ",N.message]})]})]}),u.jsxs("div",{className:"flex flex-col items-end sm:items-center gap-2",children:[u.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["₱",N.offerAmount.toLocaleString()]}),L(N.status),M&&N.status==="pending"&&u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsxs(ve,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>D(N.id),children:[u.jsx(Cp,{size:16,className:"mr-1"})," Accept"]}),u.jsxs(ve,{size:"sm",variant:"destructive",onClick:()=>V(N.id),children:[u.jsx(JD,{size:16,className:"mr-1"})," Reject"]})]}),o&&(i==null?void 0:i.uid)===N.taskerId&&N.status==="pending"&&u.jsxs(ve,{size:"sm",variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 mt-2",onClick:()=>U(N.id),children:[u.jsx(ZD,{size:16,className:"mr-1"})," Withdraw"]})]})]})},N.id))})]})]})]})]})})};var ML="AlertDialog",[Aee,tse]=Hs(ML,[ID]),aa=ID(),LL=r=>{const{__scopeAlertDialog:e,...t}=r,n=aa(e);return u.jsx(zD,{...n,...t,modal:!0})};LL.displayName=ML;var Ree="AlertDialogTrigger",Nee=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=aa(t);return u.jsx(_J,{...s,...n,ref:e})});Nee.displayName=Ree;var jee="AlertDialogPortal",VL=r=>{const{__scopeAlertDialog:e,...t}=r,n=aa(e);return u.jsx(WD,{...n,...t})};VL.displayName=jee;var Oee="AlertDialogOverlay",FL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=aa(t);return u.jsx(yT,{...s,...n,ref:e})});FL.displayName=Oee;var bd="AlertDialogContent",[Dee,Mee]=Aee(bd),Lee=I5("AlertDialogContent"),UL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:n,...s}=r,i=aa(t),o=b.useRef(null),c=ft(e,o),d=b.useRef(null);return u.jsx(yJ,{contentName:bd,titleName:$L,docsSlug:"alert-dialog",children:u.jsx(Dee,{scope:t,cancelRef:d,children:u.jsxs(vT,{role:"alertdialog",...i,...s,ref:c,onOpenAutoFocus:Be(s.onOpenAutoFocus,h=>{var p;h.preventDefault(),(p=d.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[u.jsx(Lee,{children:n}),u.jsx(Fee,{contentRef:o})]})})})});UL.displayName=bd;var $L="AlertDialogTitle",BL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=aa(t);return u.jsx(wT,{...s,...n,ref:e})});BL.displayName=$L;var zL="AlertDialogDescription",WL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=aa(t);return u.jsx(xT,{...s,...n,ref:e})});WL.displayName=zL;var Vee="AlertDialogAction",qL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=aa(t);return u.jsx(_T,{...s,...n,ref:e})});qL.displayName=Vee;var HL="AlertDialogCancel",GL=b.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,{cancelRef:s}=Mee(HL,t),i=aa(t),o=ft(e,s);return u.jsx(_T,{...i,...n,ref:o})});GL.displayName=HL;var Fee=({contentRef:r})=>{const e=`\`${bd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bd}\` by passing a \`${zL}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var n;document.getElementById((n=r.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},Uee=LL,$ee=VL,KL=FL,YL=UL,QL=qL,JL=GL,XL=BL,UT=WL;const mA=Uee,Bee=$ee,ZL=b.forwardRef(({className:r,...e},t)=>u.jsx(KL,{ref:t,className:Oe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));ZL.displayName=KL.displayName;const wb=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(Bee,{children:[u.jsx(ZL,{}),u.jsxs(YL,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,u.jsx(UT,{className:"sr-only",children:"This is an alert dialog."})]})]}));wb.displayName=YL.displayName;const xb=({className:r,...e})=>u.jsx("div",{className:Oe("flex flex-col space-y-2 text-center sm:text-left",r),...e});xb.displayName="AlertDialogHeader";const _b=({className:r,...e})=>u.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});_b.displayName="AlertDialogFooter";const bb=b.forwardRef(({className:r,...e},t)=>u.jsx(XL,{ref:t,className:Oe("text-lg font-semibold",r),...e}));bb.displayName=XL.displayName;const Eb=b.forwardRef(({className:r,...e},t)=>u.jsx(UT,{ref:t,className:Oe("text-sm text-muted-foreground",r),...e}));Eb.displayName=UT.displayName;const Tb=b.forwardRef(({className:r,...e},t)=>u.jsx(QL,{ref:t,className:Oe(Wb(),r),...e}));Tb.displayName=QL.displayName;const Sb=b.forwardRef(({className:r,...e},t)=>u.jsx(JL,{ref:t,className:Oe(Wb({variant:"outline"}),"mt-2 sm:mt-0",r),...e}));Sb.displayName=JL.displayName;const zee=()=>{const{user:r,isAuthenticated:e,loading:t}=Sr(),{tasks:n,loading:s,error:i,deleteTask:o,cancelTask:c}=oa(),{offers:d,loading:h,acceptOffer:p,rejectOffer:g}=S0(),{openReviewTaskModal:v,openEditTaskModal:w}=Rl(),k=Fr(),[_,E]=G.useState(!1),[C,P]=G.useState(null),[j,M]=G.useState(!1),[$,B]=G.useState(null),[A,R]=G.useState("all");if(t||s||h)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading your tasks and offers..."});if(!e||!r)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your tasks."}),u.jsx(ve,{onClick:()=>k("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});const D=n.filter(K=>K.posterId===r.uid),V=G.useMemo(()=>A==="all"?D:D.filter(K=>K.status===A),[D,A]),U=K=>{P(K),E(!0)},L=async()=>{if(C)try{await o(C)}catch{}finally{P(null),E(!1)}},N=K=>{B(K),M(!0)},Y=async()=>{if($)try{await c($)}catch{}finally{B(null),M(!1)}},ae=async(K,W)=>{try{await p(K,W)&&k("/chat")}catch{}},de=async K=>{try{await g(K)}catch{}},he=K=>{v(K)},X=K=>{w(K)},J=K=>{switch(K){case"pending":return u.jsx(Bt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Bt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Bt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Bt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});case"cancelled":return u.jsx(Bt,{variant:"outline",className:"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-200",children:"Cancelled"});default:return u.jsx(Bt,{variant:"outline",children:"Unknown"})}};return u.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:[u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Posted Tasks"}),i&&u.jsxs("p",{className:"col-span-full text-center text-red-500 italic py-8",children:["Error loading tasks: ",i]}),u.jsxs("div",{className:"flex justify-center gap-2 mb-8 flex-wrap",children:[u.jsxs(ve,{variant:A==="all"?"default":"outline",onClick:()=>R("all"),className:Oe(A==="all"?"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white":"border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:["All Tasks (",D.length,")"]}),u.jsxs(ve,{variant:A==="open"?"default":"outline",onClick:()=>R("open"),className:Oe(A==="open"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-400 text-blue-600 hover:bg-blue-100 dark:text-blue-300 dark:hover:bg-blue-700"),children:["Open (",D.filter(K=>K.status==="open").length,")"]}),u.jsxs(ve,{variant:A==="assigned"?"default":"outline",onClick:()=>R("assigned"),className:Oe(A==="assigned"?"bg-yellow-600 hover:bg-yellow-700 text-white":"border-yellow-400 text-yellow-600 hover:bg-yellow-100 dark:text-yellow-300 dark:hover:bg-yellow-700"),children:["Assigned (",D.filter(K=>K.status==="assigned").length,")"]}),u.jsxs(ve,{variant:A==="completed"?"default":"outline",onClick:()=>R("completed"),className:Oe(A==="completed"?"bg-green-600 hover:bg-green-700 text-white":"border-green-400 text-green-600 hover:bg-green-100 dark:text-green-300 dark:hover:bg-green-700"),children:["Completed (",D.filter(K=>K.status==="completed").length,")"]}),u.jsxs(ve,{variant:A==="cancelled"?"default":"outline",onClick:()=>R("cancelled"),className:Oe(A==="cancelled"?"bg-purple-600 hover:bg-purple-700 text-white":"border-purple-400 text-purple-600 hover:bg-purple-100 dark:text-purple-300 dark:hover:bg-purple-700"),children:["Cancelled (",D.filter(K=>K.status==="cancelled").length,")"]})]}),V.length===0&&!s&&!i?u.jsxs("div",{className:"text-center py-12",children:[u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:['No tasks found with status "',A,'".']}),A==="all"&&u.jsx(ve,{onClick:()=>k("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Post a New Task"}),A!=="all"&&u.jsx(ve,{onClick:()=>R("all"),className:"bg-green-600 hover:bg-green-700 text-white",children:"View All Tasks"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(K=>{const W=d.filter(ge=>ge.taskId===K.id),Z=W.find(ge=>ge.status==="accepted"),Se=Z==null?void 0:Z.taskerName;return u.jsxs(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:K.imageUrl,alt:K.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:`absolute top-2 left-2 px-3 py-1 rounded-full text-xs font-semibold ${K.status==="open"?"bg-blue-600 text-white":K.status==="assigned"?"bg-yellow-600 text-white":K.status==="completed"?"bg-green-600 text-white":"bg-gray-600 text-white"}`,children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]}),u.jsxs(bt,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:K.title}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(vh,{size:16,className:"mr-2"})," ",K.location]}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(g0,{size:16,className:"mr-2"})," ",K.category]}),u.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-4",children:["₱",K.budget.toLocaleString()]}),K.status==="assigned"&&Se&&u.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900 rounded-md flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[u.jsx(yi,{size:18}),u.jsxs("span",{children:["Assigned to: ",u.jsx("span",{className:"font-semibold",children:Se})]})]}),K.status==="completed"&&K.rating&&K.review?u.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900 rounded-md text-green-800 dark:text-green-200",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[[...Array(5)].map((ge,Me)=>u.jsx(Wo,{size:16,className:Me<K.rating?"fill-green-600 text-green-600":"text-gray-400"},Me)),u.jsxs("span",{className:"font-semibold ml-1",children:[K.rating,"/5"]})]}),u.jsxs("p",{className:"text-sm italic",children:['"',K.review,'"']})]}):K.status==="assigned"&&u.jsxs(ve,{onClick:()=>he(K),className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2 mb-4",children:[u.jsx(Cp,{size:20})," Mark as Complete & Review"]}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[u.jsx(ve,{variant:"outline",onClick:()=>k(`/tasks/${K.id}`),className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Details"}),u.jsxs("div",{className:"flex gap-2",children:[(K.status==="open"||K.status==="assigned")&&u.jsx(ve,{variant:"outline",size:"icon",onClick:()=>X(K),className:"border-blue-600 text-blue-600 hover:bg-blue-100",children:u.jsx(rb,{size:20})}),(K.status==="open"||K.status==="assigned")&&u.jsx(ve,{variant:"outline",size:"icon",onClick:()=>N(K.id),className:"border-red-600 text-red-600 hover:bg-red-100",children:u.jsx(kJ,{size:20})}),K.status!=="cancelled"&&u.jsx(ve,{variant:"destructive",size:"icon",onClick:()=>U(K.id),className:"bg-red-600 hover:bg-red-700 text-white",children:u.jsx(YJ,{size:20})})]})]}),K.status==="open"&&u.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("h4",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-100",children:["Offers (",W.length,")"]}),W.length===0?u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No offers yet."}):u.jsx("div",{className:"space-y-3",children:W.map(ge=>u.jsx(_t,{className:"p-3 shadow-sm",children:u.jsxs(bt,{className:"p-0 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(is,{className:"w-10 h-10 border-2 border-blue-500",children:[u.jsx(os,{src:ge.taskerAvatar||void 0,alt:ge.taskerName}),u.jsx(as,{className:"bg-blue-200 text-blue-800 text-md font-semibold",children:ge.taskerName?ge.taskerName.charAt(0).toUpperCase():u.jsx(yi,{size:16})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-md text-gray-800 dark:text-gray-100",children:ge.taskerName}),u.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[u.jsx(Wc,{size:12})," ",ge.message]})]})]}),u.jsxs("div",{className:"flex flex-col items-end sm:items-center gap-1",children:[u.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["₱",ge.offerAmount.toLocaleString()]}),J(ge.status),ge.status==="pending"&&u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsxs(ve,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white h-7 px-3 text-xs",onClick:()=>ae(ge.id,K.id),children:[u.jsx(Cp,{size:14,className:"mr-1"})," Accept"]}),u.jsxs(ve,{size:"sm",variant:"destructive",className:"h-7 px-3 text-xs",onClick:()=>de(ge.id),children:[u.jsx(JD,{size:14,className:"mr-1"})," Reject"]})]})]})]})},ge.id))})]})]})]},K.id)})})]}),u.jsx(mA,{open:_,onOpenChange:E,children:u.jsxs(wb,{children:[u.jsxs(xb,{children:[u.jsx(bb,{children:"Are you absolutely sure?"}),u.jsx(Eb,{children:"This action cannot be undone. This will permanently delete your task."})]}),u.jsxs(_b,{children:[u.jsx(Sb,{children:"Cancel"}),u.jsx(Tb,{onClick:L,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})}),u.jsx(mA,{open:j,onOpenChange:M,children:u.jsxs(wb,{children:[u.jsxs(xb,{children:[u.jsx(bb,{children:"Are you sure you want to cancel this task?"}),u.jsx(Eb,{children:"This action will mark the task as cancelled. If the task is assigned, the assignment will be revoked. All pending offers will be rejected. This cannot be undone."})]}),u.jsxs(_b,{children:[u.jsx(Sb,{children:"No, keep task"}),u.jsx(Tb,{onClick:Y,className:"bg-red-600 hover:bg-red-700 text-white",children:"Yes, cancel task"})]})]})})]})},Wee=()=>{Fr();const{openTaskerRegistrationModal:r}=Rl(),e=[{icon:El,title:"Competitive Earnings",description:"Set your own rates and earn what you deserve for your skills."},{icon:Wo,title:"Flexible Schedule",description:"Work when you want, where you want. Be your own boss."},{icon:QJ,title:"Grow Your Business",description:"Access a wide customer base and expand your service offerings."},{icon:GJ,title:"Secure Payments",description:"All payments are processed securely through the platform."},{icon:Cp,title:"Variety of Tasks",description:"Choose from a diverse range of tasks that match your expertise."}];return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-6 text-center",children:"Become a Tasker with Tasko!"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-12 text-center max-w-3xl mx-auto",children:"Join our growing community of skilled taskers and turn your talents into income. Enjoy flexibility, fair pay, and a steady stream of opportunities."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:e.map((t,n)=>u.jsxs(_t,{className:"shadow-lg p-6 text-center",children:[u.jsxs(fn,{className:"p-0 mb-4",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(t.icon,{size:32,className:"text-green-600 dark:text-green-200"})}),u.jsx(jn,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:t.title})]}),u.jsx(bt,{className:"p-0",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:t.description})})]},n))}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"Ready to Start Earning?"}),u.jsx(ve,{onClick:r,className:"bg-green-600 hover:bg-green-700 text-white text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all",children:"Sign Up as a Tasker"})]})]})})},qee=({onCancel:r,onSaveSuccess:e})=>{const{user:t,updateUserProfile:n}=Sr(),{profile:s,loadingProfile:i,updateProfile:o}=u0(),{uploadFile:c,loading:d}=EL(),[h,p]=G.useState((s==null?void 0:s.first_name)||""),[g,v]=G.useState((s==null?void 0:s.last_name)||""),[w,k]=G.useState((s==null?void 0:s.phone)||""),[_,E]=G.useState(null),[C,P]=G.useState((t==null?void 0:t.photoURL)||(s==null?void 0:s.avatar_url)||null),[j,M]=G.useState(!1);G.useEffect(()=>{s&&(p(s.first_name||""),v(s.last_name||""),k(s.phone||""),P((t==null?void 0:t.photoURL)||(s==null?void 0:s.avatar_url)||null))},[s,t==null?void 0:t.photoURL]);const $=R=>{if(R.target.files&&R.target.files[0]){const D=R.target.files[0];E(D),P(URL.createObjectURL(D))}},B=async()=>{if(!t||!s){ue.error("No user profile found.");return}if(h.trim()===""||g.trim()===""){ue.error("First name and last name cannot be empty.");return}M(!0);let R=t.photoURL||s.avatar_url;if(_){const D=`avatars/${t.uid}/${_.name}`,V=await c(_,D);if(V)R=V;else{M(!1);return}}try{await n(h,g,R||void 0),await o(t.uid,h,g,w,R||null,s.role),e()}catch{}finally{M(!1)}},A=j||d||i;return u.jsxs(_t,{className:"shadow-lg p-6",children:[u.jsx(fn,{className:"p-0 mb-4",children:u.jsx(jn,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Edit Profile"})}),u.jsxs(bt,{className:"p-0 space-y-4",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[u.jsxs(is,{className:"w-24 h-24 border-4 border-green-500",children:[u.jsx(os,{src:C||void 0,alt:(t==null?void 0:t.displayName)||"User Avatar"}),u.jsx(as,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:t!=null&&t.displayName?t.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:48})})]}),u.jsxs(Lt,{htmlFor:"avatar-upload",className:"cursor-pointer flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[u.jsx(GD,{size:20})," Change Avatar",u.jsx(zt,{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:$,disabled:A})]})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"firstName",children:"First Name"}),u.jsx(zt,{id:"firstName",value:h,onChange:R=>p(R.target.value),disabled:A})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"lastName",children:"Last Name"}),u.jsx(zt,{id:"lastName",value:g,onChange:R=>v(R.target.value),disabled:A})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Lt,{htmlFor:"phone",children:"Phone Number"}),u.jsx(zt,{id:"phone",value:w,onChange:R=>k(R.target.value),disabled:A,placeholder:"e.g., +639171234567"})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[u.jsx(ve,{variant:"outline",onClick:r,disabled:A,children:"Cancel"}),u.jsx(ve,{onClick:B,disabled:A,className:"bg-green-600 hover:bg-green-700 text-white",children:A?"Saving...":"Save Changes"})]})]})]})},Hee=()=>{const{user:r,isAuthenticated:e,loading:t}=Sr(),{profile:n,loadingProfile:s}=u0(),{taskerProfile:i,isTasker:o,loading:c}=Is(),{openTaskerRegistrationModal:d}=Rl(),h=Fr(),[p,g]=G.useState(!1);if(t||s||c)return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Profile"}),u.jsx(_t,{className:"shadow-lg p-6 mb-8",children:u.jsxs(bt,{className:"flex flex-col items-center text-center p-0",children:[u.jsx(ut,{className:"w-24 h-24 rounded-full mb-4"}),u.jsx(ut,{className:"h-8 w-3/4 mb-2"}),u.jsx(ut,{className:"h-5 w-1/2 mb-1"}),u.jsx(ut,{className:"h-5 w-1/3 mb-4"}),u.jsx(ut,{className:"h-10 w-40 rounded-md"})]})}),u.jsxs(_t,{className:"shadow-lg p-6",children:[u.jsx(fn,{className:"p-0 mb-4",children:u.jsx(ut,{className:"h-7 w-2/3 mb-2"})}),u.jsxs(bt,{className:"p-0 space-y-4",children:[u.jsx(ut,{className:"h-12 w-full"}),u.jsx(ut,{className:"h-12 w-full"}),u.jsx(ut,{className:"h-12 w-full"})]})]})]})});if(!e||!r)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your profile."}),u.jsx(ve,{onClick:()=>h("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});const v=n!=null&&n.first_name&&(n!=null&&n.last_name)?`${n.first_name} ${n.last_name}`:r.displayName||"Anonymous User";return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Profile"}),p?u.jsx(qee,{onCancel:()=>g(!1),onSaveSuccess:()=>g(!1)}):u.jsxs(u.Fragment,{children:[u.jsx(_t,{className:"shadow-lg p-6 mb-8",children:u.jsxs(bt,{className:"flex flex-col items-center text-center p-0",children:[u.jsxs(is,{className:"w-24 h-24 mb-4 border-4 border-green-500",children:[u.jsx(os,{src:r.photoURL||(n==null?void 0:n.avatar_url)||void 0,alt:v}),u.jsx(as,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:v.charAt(0).toUpperCase()})]}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:v}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[u.jsx(ET,{size:18})," ",r.email]}),(n==null?void 0:n.phone)&&u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2 mt-1",children:[u.jsx(tM,{size:18})," ",n.phone]}),u.jsxs(ve,{variant:"outline",onClick:()=>g(!0),className:"mt-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white flex items-center gap-2",children:[u.jsx(rb,{size:18})," Edit Profile"]})]})}),o&&i&&u.jsxs(_t,{className:"shadow-lg p-6 mb-8",children:[u.jsx(fn,{className:"p-0 mb-4",children:u.jsxs(jn,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[u.jsx(xd,{size:24})," Tasker Profile"]})}),u.jsxs(bt,{className:"p-0 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bio:"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.bio})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[u.jsx(El,{size:18})," Hourly Rate:"]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["₱",i.hourlyRate.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[u.jsx(Wo,{size:18})," Skills:"]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills.map((w,k)=>u.jsx(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:w},k))})]}),u.jsxs(ve,{variant:"outline",onClick:d,className:"mt-6 w-full border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white flex items-center gap-2",children:[u.jsx(rb,{size:18})," Edit Tasker Profile"]}),u.jsxs(ve,{onClick:()=>h("/tasker-dashboard"),className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-6 flex items-center justify-center gap-2 mt-4",children:[u.jsx(xd,{size:20})," View Tasker Dashboard"]})]})]}),u.jsxs(_t,{className:"shadow-lg p-6",children:[u.jsx(fn,{className:"p-0 mb-4",children:u.jsx(jn,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"My Activities"})}),u.jsxs(bt,{className:"p-0 space-y-4",children:[u.jsx(ve,{onClick:()=>h("/my-tasks"),className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-6",children:"View My Posted Tasks"}),o&&u.jsxs(ve,{onClick:()=>h("/my-offers"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-lg py-6 flex items-center justify-center gap-2",children:[u.jsx(xd,{size:20})," View My Offers"]}),u.jsxs(ve,{onClick:()=>h("/settings"),className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 text-lg py-6 flex items-center justify-center gap-2",children:[u.jsx(nM,{size:20})," App Settings"]})]})]})]})]})})},Gee=()=>{const r=Fr(),e=[{question:"How do I post a task?",answer:"To post a task, simply click the 'Post a Task' button on the homepage, describe your task, set your budget, and choose a category. You'll need to be logged in to post."},{question:"How do I become a Tasker?",answer:"Visit the 'Become a Tasker' page from the navigation menu to learn about the benefits and sign up to offer your services."},{question:"How are payments handled?",answer:"All payments are processed securely through the Tasko platform. Once a task is completed and approved, funds are released to the Tasker."},{question:"What if I have an issue with a task?",answer:"If you encounter any issues, please contact our support team through the 'Contact Us' page. We're here to help resolve disputes and ensure satisfaction."},{question:"Is Tasko available nationwide?",answer:"Tasko is currently focused on key cities in the Philippines, but we are rapidly expanding! Check the app for service availability in your area."}];return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Frequently Asked Questions"}),u.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md",children:e.map((t,n)=>u.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700 last:border-b-0 last:mb-0 last:pb-0",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:t.question}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.answer})]},n))})]})})},Kee=()=>{const r=Fr();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Contact Us"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md text-center",children:[u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"Have questions, feedback, or need support? Reach out to us!"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(ET,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"support@tasko.ph"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(tM,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"+63 917 123 4567"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(vh,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"Makati City, Metro Manila, Philippines"})]})]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Our support team is available Monday to Friday, 9 AM - 5 PM (PST)."})]})]})})},Yee=()=>{const r=Fr();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Privacy Policy"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:"This Privacy Policy describes Our policies and procedures on the collection, use and disclosure of Your information when You use the Service and tells You about Your privacy rights and how the law protects You."}),u.jsx("p",{children:"We use Your Personal data to provide and improve the Service. By using the Service, You agree to the collection and use of information in accordance with this Privacy Policy."}),u.jsx("h2",{children:"Interpretation and Definitions"}),u.jsx("h3",{children:"Interpretation"}),u.jsx("p",{children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),u.jsx("h3",{children:"Definitions"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Account"})," means a unique account created for You to access our Service or parts of our Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Company"}),' (referred to as either "the Company", "We", "Us" or "Our" in this Agreement) refers to Tasko Philippines.']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies"})," are small files that are placed on Your computer, mobile device or any other device by a website, containing the details of Your browsing history on that website among its many uses."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Country"})," refers to: Philippines"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Device"})," means any device that can access the Service such as a computer, a cellphone or a digital tablet."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Personal Data"})," is any information that relates to an identified or identifiable individual."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Service"})," refers to the Website."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Service Provider"})," means any natural or legal person who processes the data on behalf of the Company. It refers to third-party companies or individuals employed by the Company to facilitate the Service, to provide the Service on behalf of the Company, to perform services related to the Service or to assist the Company in analyzing how the Service is used."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Usage Data"})," refers to data collected automatically, either generated by the use of the Service or from the Service infrastructure itself (for example, the duration of a page visit)."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Website"})," refers to Tasko, accessible from ",u.jsx("a",{href:"https://www.dyad.sh",target:"_blank",rel:"noopener noreferrer",children:"https://www.dyad.sh"})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"You"})," means the individual accessing or using the Service, or the company, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."]})]}),u.jsx("h2",{children:"Collecting and Using Your Personal Data"}),u.jsx("h3",{children:"Types of Data Collected"}),u.jsx("h4",{children:"Personal Data"}),u.jsx("p",{children:"While using Our Service, We may ask You to provide Us with certain personally identifiable information that can be used to contact or identify You. Personally identifiable information may include, but is not limited to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Email address"}),u.jsx("li",{children:"First name and last name"}),u.jsx("li",{children:"Phone number"}),u.jsx("li",{children:"Address, State, Province, ZIP/Postal code, City"}),u.jsx("li",{children:"Usage Data"})]}),u.jsx("h4",{children:"Usage Data"}),u.jsx("p",{children:"Usage Data is collected automatically when using the Service."}),u.jsx("p",{children:"Usage Data may include information such as Your Device's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that You visit, the time and date of Your visit, the time spent on those pages, unique device identifiers and other diagnostic data."}),u.jsx("p",{children:"When You access the Service by or through a mobile device, We may collect certain information automatically, including, but not limited to, the type of mobile device You use, Your mobile device unique ID, the IP address of Your mobile device, Your mobile operating system, the type of mobile Internet browser You use, unique device identifiers and other diagnostic data."}),u.jsx("p",{children:"We may also collect information that Your browser sends whenever You visit our Service or when You access the Service by or through a mobile device."}),u.jsx("h4",{children:"Tracking Technologies and Cookies"}),u.jsx("p",{children:"We use Cookies and similar tracking technologies to track the activity on Our Service and store certain information. Tracking technologies used are beacons, tags, and scripts to collect and track information and to improve and analyze Our Service. The technologies We use may include:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies or Browser Cookies."})," A cookie is a small file placed on Your Device. You can instruct Your browser to refuse all Cookies or to indicate when a Cookie is being sent. However, if You do not accept Cookies, You may not be able to use some parts of our Service. Unless you have adjusted Your browser setting so that it will refuse Cookies, our Service may use Cookies."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Web Beacons."})," Certain sections of our Service and our emails may contain small electronic files known as web beacons (also referred to as clear gifs, pixel tags, and single-pixel gifs) that permit the Company, for example, to count users who have visited those pages or opened an email and for other related website statistics (for example, recording the popularity of a certain section and verifying system and server integrity)."]})]}),u.jsx("p",{children:'Cookies can be "Persistent" or "Session" Cookies. Persistent Cookies remain on Your personal computer or mobile device when You go offline, while Session Cookies are deleted as soon as You close Your web browser.'}),u.jsx("p",{children:"We use both Session and Persistent Cookies for the purposes set out below:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Necessary / Essential Cookies"}),u.jsx("p",{children:"Type: Session Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies are essential to provide You with services available through the Website and to enable You to use some of its features. They help to authenticate users and prevent fraudulent use of user accounts. Without these Cookies, the services that You have asked for cannot be provided, and We only use these Cookies to provide You with those services."})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies Policy / Notice Acceptance Cookies"}),u.jsx("p",{children:"Type: Persistent Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies identify if users have accepted the use of cookies on the Website."})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Functionality Cookies"}),u.jsx("p",{children:"Type: Persistent Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies allow us to remember choices You make when You use the Website, such as remembering your login details or language preference. The purpose of these Cookies is to provide You with a more personal experience and to avoid You having to re-enter your preferences every time You use the Website."})]})]}),u.jsx("h3",{children:"Use of Your Personal Data"}),u.jsx("p",{children:"The Company may use Personal Data for the following purposes:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"To provide and maintain our Service"}),", including to monitor the usage of our Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To manage Your Account:"})," to manage Your registration as a user of the Service. The Personal Data You provide can give You access to different functionalities of the Service that are available to You as a registered user."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For the performance of a contract:"})," the development, compliance and undertaking of the purchase contract for the products, items or services You have purchased or of any other contract with Us through the Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To contact You:"})," To contact You by email, telephone calls, SMS, or other equivalent forms of electronic communication, such as a mobile application's push notifications regarding updates or informative communications related to the functionalities, products or contracted services, including the security updates, when necessary or reasonable for their implementation."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To provide You"})," with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless You have opted not to receive such information."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To manage Your requests:"})," To attend and manage Your requests to Us."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For business transfers:"})," We may use Your information to evaluate or conduct a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Our assets, whether as a going concern or as part of bankruptcy, liquidation, or similar proceeding, in which Personal Data held by Us about our Service users is among the assets transferred."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For other purposes"}),": We may use Your information for other purposes, such as data analysis, identifying usage trends, determining the effectiveness of our promotional campaigns and to evaluate and improve our Service, products, services, marketing and your experience."]})]}),u.jsx("p",{children:"We may share Your personal information in the following situations:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"With Service Providers:"})," We may share Your personal information with Service Providers to monitor and analyze the use of our Service, to contact You."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For business transfers:"})," We may share or transfer Your personal information in connection with, or during negotiations of, any merger, sale of Company assets, financing, or acquisition of all or a portion of Our business to another company."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Affiliates:"})," We may share Your information with Our affiliates, in which case we will require those affiliates to honor this Privacy Policy. Affiliates include Our parent company and any other subsidiaries, joint venture partners or other companies that We control or that are under common control with Us."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With business partners:"})," We may share Your information with Our business partners to offer You certain products, services or promotions."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With other users:"})," when You share personal information or otherwise interact in the public areas with other users, such information may be viewed by all users and may be publicly distributed outside."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Your consent"}),": We may disclose Your personal information for any other purpose with Your consent."]})]}),u.jsx("h3",{children:"Retention of Your Personal Data"}),u.jsx("p",{children:"The Company will retain Your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use Your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."}),u.jsx("p",{children:"The Company will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period of time, except when this data is used to strengthen the security or to improve the functionality of Our Service, or We are legally obligated to retain this data for longer time periods."}),u.jsx("h3",{children:"Transfer of Your Personal Data"}),u.jsx("p",{children:"Your information, including Personal Data, is processed at the Company's operating offices and in any other places where the parties involved in the processing are located. It means that this information may be transferred to — and maintained on — computers located outside of Your state, province, country or other governmental jurisdiction where the data protection laws may differ than those from Your jurisdiction."}),u.jsx("p",{children:"Your consent to this Privacy Policy followed by Your submission of such information represents Your agreement to that transfer."}),u.jsx("p",{children:"The Company will take all steps reasonably necessary to ensure that Your data is treated securely and in accordance with this Privacy Policy and no transfer of Your Personal Data will take place to an organization or a country unless there are adequate controls in place including the security of Your data and other personal information."}),u.jsx("h3",{children:"Delete Your Personal Data"}),u.jsx("p",{children:"You have the right to delete or request that We assist in deleting the Personal Data that We have collected about You."}),u.jsx("p",{children:"Our Service may give You the ability to delete certain information about You from within the Service."}),u.jsx("p",{children:"You may update, amend, or delete Your information at any time by signing in to Your Account, if you have one, and visiting the account settings section that allows you to manage Your personal information. You may also contact Us to request access to, correct, or delete any personal information that You have provided to Us."}),u.jsx("p",{children:"Please note, however, that We may need to retain certain information when we have a legal obligation or lawful basis to do so."}),u.jsx("h3",{children:"Disclosure of Your Personal Data"}),u.jsx("h4",{children:"Business Transactions"}),u.jsx("p",{children:"If the Company is involved in a merger, acquisition or asset sale, Your Personal Data may be transferred. We will provide notice before Your Personal Data is transferred and becomes subject to a different Privacy Policy."}),u.jsx("h4",{children:"Law enforcement"}),u.jsx("p",{children:"Under certain circumstances, the Company may be required to disclose Your Personal Data if required to do so by law or in response to valid requests by public authorities (e.g. a court or a government agency)."}),u.jsx("h4",{children:"Other legal requirements"}),u.jsx("p",{children:"The Company may disclose Your Personal Data in the good faith belief that such action is necessary to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Comply with a legal obligation"}),u.jsx("li",{children:"Protect and defend the rights or property of the Company"}),u.jsx("li",{children:"Prevent or investigate possible wrongdoing in connection with the Service"}),u.jsx("li",{children:"Protect the personal safety of Users of the Service or the public"}),u.jsx("li",{children:"Protect against legal liability"})]}),u.jsx("h3",{children:"Security of Your Personal Data"}),u.jsx("p",{children:"The security of Your Personal Data is important to Us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While We strive to use commercially acceptable means to protect Your Personal Data, We cannot guarantee its absolute security."}),u.jsx("h2",{children:"Children's Privacy"}),u.jsx("p",{children:"Our Service does not address anyone under the age of 13. We do not knowingly collect personally identifiable information from anyone under the age of 13. If You are a parent or guardian and You are aware that Your child has provided Us with Personal Data, please contact Us. If We become aware that We have collected Personal Data from anyone under the age of 13 without verification of parental consent, We take steps to remove that information from Our servers."}),u.jsx("p",{children:"If We need to rely on consent as a legal basis for processing Your information and Your country requires consent from a parent, We may require Your parent's consent before We collect and use that information."}),u.jsx("h2",{children:"Links to Other Websites"}),u.jsx("p",{children:"Our Service may contain links to other websites that are not operated by Us. If You click on a third party link, You will be directed to that third party's site. We strongly advise You to review the Privacy Policy of every site You visit."}),u.jsx("p",{children:"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."}),u.jsx("h2",{children:"Changes to this Privacy Policy"}),u.jsx("p",{children:"We may update Our Privacy Policy from time to time. We will notify You of any changes by posting the new Privacy Policy on this page."}),u.jsx("p",{children:'We will let You know via email and/or a prominent notice on Our Service, prior to the change becoming effective and update the "Last updated" date at the top of this Privacy Policy.'}),u.jsx("p",{children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."}),u.jsx("h2",{children:"Contact Us"}),u.jsx("p",{children:"If you have any questions about this Privacy Policy, You can contact us:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"By email: support@tasko.ph"}),u.jsxs("li",{children:["By visiting this page on our website: ",u.jsx("a",{href:"https://www.dyad.sh/contact",target:"_blank",rel:"noopener noreferrer",children:"https://www.dyad.sh/contact"})]})]})]})]})})},Qee=()=>{const r=Fr();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Terms of Service"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:'Welcome to Tasko! These Terms of Service ("Terms") govern your access to and use of the Tasko website, mobile applications, and services (collectively, the "Service"). By accessing or using the Service, you agree to be bound by these Terms.'}),u.jsx("h2",{children:"1. Acceptance of Terms"}),u.jsx("p",{children:"By creating an account, posting a task, offering services, or otherwise using the Service, you signify your agreement to these Terms. If you do not agree to these Terms, you may not access or use the Service."}),u.jsx("h2",{children:"2. Changes to Terms"}),u.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify you of any changes by posting the new Terms on this page. Your continued use of the Service after such modifications constitutes your acceptance of the revised Terms."}),u.jsx("h2",{children:"3. User Accounts"}),u.jsxs("ul",{children:[u.jsx("li",{children:"You must be at least 18 years old to use the Service."}),u.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account login information."}),u.jsx("li",{children:"You agree to provide accurate, current, and complete information during the registration process and to update such information to keep it accurate, current, and complete."})]}),u.jsx("h2",{children:"4. Service Description"}),u.jsx("p",{children:'Tasko is a platform that connects individuals ("Clients") seeking assistance with various tasks with individuals or businesses ("Taskers") offering to perform those tasks. Tasko facilitates the connection but does not directly employ Taskers or guarantee the quality of their work.'}),u.jsx("h2",{children:"5. Tasker Responsibilities"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Taskers agree to perform tasks with reasonable care and skill."}),u.jsx("li",{children:"Taskers are independent contractors and not employees of Tasko."}),u.jsx("li",{children:"Taskers are responsible for their own taxes, insurance, and compliance with all applicable laws and regulations."})]}),u.jsx("h2",{children:"6. Client Responsibilities"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Clients agree to provide clear and accurate descriptions of tasks."}),u.jsx("li",{children:"Clients agree to pay Taskers for completed tasks as per the agreed-upon budget."}),u.jsx("li",{children:"Clients are responsible for ensuring a safe working environment for Taskers."})]}),u.jsx("h2",{children:"7. Payments and Fees"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Tasko may charge fees for its services, which will be clearly disclosed."}),u.jsx("li",{children:"Payments for tasks are processed securely through the platform."}),u.jsx("li",{children:"Tasko reserves the right to withhold or cancel payments if fraud or a violation of these Terms is suspected."})]}),u.jsx("h2",{children:"8. Prohibited Conduct"}),u.jsx("p",{children:"You agree not to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Use the Service for any illegal or unauthorized purpose."}),u.jsx("li",{children:"Harass, abuse, or harm another person or group."}),u.jsx("li",{children:"Impersonate any person or entity."}),u.jsx("li",{children:"Interfere with or disrupt the Service or servers or networks connected to the Service."})]}),u.jsx("h2",{children:"9. Intellectual Property"}),u.jsx("p",{children:"All content on the Service, including text, graphics, logos, and software, is the property of Tasko or its licensors and is protected by intellectual property laws."}),u.jsx("h2",{children:"10. Disclaimers and Limitation of Liability"}),u.jsx("p",{children:'The Service is provided "as is" without warranties of any kind. Tasko is not liable for any damages arising from your use of the Service or from tasks performed by Taskers.'}),u.jsx("h2",{children:"11. Governing Law"}),u.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the Philippines."}),u.jsx("h2",{children:"12. Contact Information"}),u.jsx("p",{children:"If you have any questions about these Terms, please contact us at support@tasko.ph."})]})]})})},Jee=()=>{const r=Fr();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"End-User License Agreement (EULA)"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:'This End-User License Agreement ("EULA") is a legal agreement between you and Tasko Philippines. By installing or using the Tasko application, you are agreeing to be bound by the terms and conditions of this EULA.'}),u.jsx("h2",{children:"1. Grant of License"}),u.jsx("p",{children:"Tasko Philippines grants you a revocable, non-exclusive, non-transferable, limited license to download, install and use the application solely for your personal, non-commercial purposes strictly in accordance with the terms of this Agreement."}),u.jsx("h2",{children:"2. Restrictions"}),u.jsx("p",{children:"You agree not to, and you will not permit others to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"License, sell, rent, lease, assign, distribute, transmit, host, outsource, disclose or otherwise commercially exploit the application or make the application available to any third party."}),u.jsx("li",{children:"Modify, make derivative works of, disassemble, decrypt, reverse compile or reverse engineer any part of the application."}),u.jsx("li",{children:"Remove, alter or obscure any proprietary notice (including any notice of copyright or trademark) of Tasko Philippines or its affiliates, partners, suppliers or the licensors of the application."})]}),u.jsx("h2",{children:"3. Intellectual Property"}),u.jsx("p",{children:"The application, including without limitation all copyrights, patents, trademarks, trade secrets and other intellectual property rights are, and shall remain, the sole and exclusive property of Tasko Philippines."}),u.jsx("h2",{children:"4. Amendments to this Agreement"}),u.jsx("p",{children:"Tasko Philippines reserves the right, at its sole discretion, to modify or replace this Agreement at any time. If a revision is material we will provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."}),u.jsx("h2",{children:"5. Contact Information"}),u.jsx("p",{children:"If you have any questions about this EULA, please contact us at support@tasko.ph."})]})]})})},Xee=["Home Cleaning","Plumbing","Electrical","Carpentry","Moving","Delivery","Painting","Furniture Assembly","Gardening","Pet Sitting","Marketing","Web Development","Graphic Design","Tutoring","Photography","Event Planning","Other"],Zee=()=>{const r=Fr(),{allTaskerProfiles:e,loading:t,error:n}=Is(),[s,i]=b.useState(""),[o,c]=b.useState([]),[d,h]=b.useState(""),[p,g]=b.useState(""),v=_=>{c(E=>E.includes(_)?E.filter(C=>C!==_):[...E,_])},w=()=>{i(""),c([]),h(""),g("")},k=b.useMemo(()=>{let _=e;if(s){const E=s.toLowerCase();_=_.filter(C=>C.displayName.toLowerCase().includes(E)||C.bio.toLowerCase().includes(E)||C.skills.some(P=>P.toLowerCase().includes(E)))}if(o.length>0&&(_=_.filter(E=>o.some(C=>E.skills.includes(C)))),d){const E=parseFloat(d);isNaN(E)||(_=_.filter(C=>C.hourlyRate>=E))}if(p){const E=parseFloat(p);isNaN(E)||(_=_.filter(C=>C.hourlyRate<=E))}return _},[e,s,o,d,p]);return t?u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading taskers..."}):n?u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",n]}):u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"← Back"}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Browse Skilled Taskers"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-12 text-center max-w-3xl mx-auto",children:"Find the perfect professional for your task. Filter by skills, ratings, price, and location."}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-8",children:[u.jsxs("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4 flex items-center gap-2",children:[u.jsx(NJ,{size:24})," Filter Taskers"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search by Name or Bio"}),u.jsx(zt,{id:"search",type:"text",placeholder:"e.g., 'Juan Handyman', 'cleaning expert'",value:s,onChange:_=>i(_.target.value),className:"w-full"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"minRate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Hourly Rate (₱)"}),u.jsx(zt,{id:"minRate",type:"number",placeholder:"e.g., 200",value:d,onChange:_=>h(_.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"maxRate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Hourly Rate (₱)"}),u.jsx(zt,{id:"maxRate",type:"number",placeholder:"e.g., 500",value:p,onChange:_=>g(_.target.value),className:"w-full"})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Skills"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Xee.map(_=>u.jsx(ve,{variant:o.includes(_)?"default":"outline",onClick:()=>v(_),className:Oe(o.includes(_)?"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white":"border-[hsl(var(--border-color))] text-[hsl(var(--text-dark))] hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700"),children:_},_))})]}),u.jsx("div",{className:"flex justify-end gap-2",children:u.jsxs(ve,{onClick:w,variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[u.jsx(y0,{size:18,className:"mr-2"})," Reset Filters"]})})]}),k.length===0?u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md text-center",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xl mb-4",children:"No taskers found matching your criteria. Try adjusting your filters!"}),u.jsx(ve,{onClick:()=>r("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(_=>u.jsx(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:u.jsxs(bt,{className:"p-4 flex flex-col items-center text-center",children:[u.jsxs(is,{className:"w-20 h-20 mb-3 border-2 border-green-500",children:[u.jsx(os,{src:_.photoURL||void 0,alt:_.displayName}),u.jsx(as,{className:"bg-green-200 text-green-800 text-2xl font-semibold",children:_.displayName?_.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:24})})]}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:_.displayName}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:_.bio}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-3",children:[u.jsx(El,{size:16})," ",u.jsxs("span",{children:["₱",_.hourlyRate.toLocaleString(),"/hr"]})]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[_.skills.slice(0,3).map((E,C)=>u.jsx(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:E},C)),_.skills.length>3&&u.jsxs(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:["+",_.skills.length-3," more"]})]}),u.jsx(dn,{to:`/taskers/${_.userId}`,className:"w-full",children:u.jsx(ve,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Profile"})})]})},_.userId))})]})})},ete=()=>{const{id:r}=GR(),e=Fr(),{fetchTaskerProfileById:t,loading:n}=Is(),{tasks:s,loading:i}=oa(),{user:o,isAuthenticated:c,loading:d}=Sr(),{createChatRoom:h}=tm(),[p,g]=G.useState(null),[v,w]=G.useState(!0),[k,_]=G.useState(null);G.useEffect(()=>{(async()=>{if(!r){_("Tasker ID is missing."),w(!1);return}w(!0),_(null);const $=await t(r);$?g($):_("Tasker not found."),w(!1)})()},[r,t]);const E=G.useMemo(()=>!p||i?[]:s.filter(M=>M.status==="completed"&&M.assignedTaskerId===p.userId&&M.review&&M.rating),[p,s,i]),C=G.useMemo(()=>E.length===0?0:(E.reduce(($,B)=>$+(B.rating||0),0)/E.length).toFixed(1),[E]),P=c&&(o==null?void 0:o.uid)===(p==null?void 0:p.userId),j=async()=>{if(!c||!o){ue.error("Please log in to contact this tasker.");return}if(!p){ue.error("Tasker information is missing.");return}if(P){ue.info("You are viewing your own profile.");return}try{await h([o.uid,p.userId],[o.displayName||o.email||"You",p.displayName])&&e("/chat")}catch(M){console.error("Failed to create or navigate to chat room:",M),ue.error("Failed to start chat with tasker.")}};return v||n||i||d?u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx(ut,{className:"h-10 w-32 mb-6"})," ",u.jsx(_t,{className:"shadow-lg p-6",children:u.jsxs(bt,{className:"flex flex-col items-center text-center p-0",children:[u.jsx(ut,{className:"w-32 h-32 rounded-full mb-4"}),u.jsx(ut,{className:"h-10 w-3/4 mb-2"}),u.jsx(ut,{className:"h-6 w-1/2 mb-4"}),u.jsx(ut,{className:"h-20 w-full mb-6"})," ",u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full mb-6",children:[u.jsx(ut,{className:"h-6 w-full"}),u.jsx(ut,{className:"h-6 w-full"})]}),u.jsx(ut,{className:"h-8 w-1/3 mb-3"})," ",u.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 w-full mb-6",children:[u.jsx(ut,{className:"h-8 w-20 rounded-full"}),u.jsx(ut,{className:"h-8 w-24 rounded-full"}),u.jsx(ut,{className:"h-8 w-16 rounded-full"})]}),u.jsx(ut,{className:"h-14 w-full rounded-full"})," "]})})]})}):k?u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",k]}):p?u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx(ve,{onClick:()=>e(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"← Back to Taskers"}),u.jsx(_t,{className:"shadow-lg p-6",children:u.jsxs(bt,{className:"flex flex-col items-center text-center p-0",children:[u.jsxs(is,{className:"w-32 h-32 mb-4 border-4 border-green-500",children:[u.jsx(os,{src:p.photoURL||void 0,alt:p.displayName}),u.jsx(as,{className:"bg-green-200 text-green-800 text-5xl font-semibold",children:p.displayName?p.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:48})})]}),u.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:p.displayName}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-4",children:[u.jsx(ET,{size:18})," ",p.userId]}),u.jsx(FT,{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 max-w-prose",children:p.bio}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full mb-6",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(El,{size:20,className:"text-green-600"}),u.jsx("span",{className:"font-semibold",children:"Hourly Rate:"})," ₱",p.hourlyRate.toLocaleString()]}),u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(HD,{size:20,className:"text-green-600"}),u.jsx("span",{className:"font-semibold",children:"Joined:"})," ",new Date(p.dateJoined).toLocaleDateString()]})]}),E.length>0&&u.jsxs("div",{className:"w-full mb-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center justify-center md:justify-start gap-2",children:[u.jsx(Wo,{size:20})," Average Rating: ",C," (",E.length," reviews)"]}),u.jsx("div",{className:"flex items-center justify-center md:justify-start gap-1 mb-4",children:[...Array(5)].map((M,$)=>{const B=$<Math.round(parseFloat(C))?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600";return u.jsx(Wo,{size:24,className:Oe("transition-colors",B)},$)})})]}),u.jsxs("div",{className:"w-full mb-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center justify-center md:justify-start gap-2",children:[u.jsx(xd,{size:20})," Skills"]}),u.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:p.skills.map((M,$)=>u.jsx(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:M},$))})]}),E.length>0&&u.jsxs("div",{className:"w-full mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 text-center md:text-left",children:"Client Reviews"}),u.jsx("div",{className:"space-y-4",children:E.map((M,$)=>u.jsx(_t,{className:"p-4 shadow-sm",children:u.jsxs(bt,{className:"p-0",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[...Array(5)].map((B,A)=>u.jsx(Wo,{size:16,className:A<M.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"},A)),u.jsxs("span",{className:"font-semibold ml-1",children:[M.rating,"/5"]})]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic mb-2",children:['"',M.review,'"']}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",M.posterName,' for "',M.title,'"']})]})},$))})]}),u.jsxs(ve,{onClick:j,disabled:!c||P,className:Oe("mt-6 text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all flex items-center gap-2",!c||P?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:[u.jsx(Wc,{size:24}),P?"This is your profile":c?"Contact Tasker":"Login to Contact Tasker"]})]})})]})}):u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Tasker profile not found."})};function tte(r,e){return b.useReducer((t,n)=>e[t][n]??t,r)}var $T="ScrollArea",[e4,rse]=Hs($T),[rte,Ks]=e4($T),t4=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=r,[c,d]=b.useState(null),[h,p]=b.useState(null),[g,v]=b.useState(null),[w,k]=b.useState(null),[_,E]=b.useState(null),[C,P]=b.useState(0),[j,M]=b.useState(0),[$,B]=b.useState(!1),[A,R]=b.useState(!1),D=ft(e,U=>d(U)),V=x0(s);return u.jsx(rte,{scope:t,type:n,dir:V,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:p,content:g,onContentChange:v,scrollbarX:w,onScrollbarXChange:k,scrollbarXEnabled:$,onScrollbarXEnabledChange:B,scrollbarY:_,onScrollbarYChange:E,scrollbarYEnabled:A,onScrollbarYEnabledChange:R,onCornerWidthChange:P,onCornerHeightChange:M,children:u.jsx(pt.div,{dir:V,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":j+"px",...r.style}})})});t4.displayName=$T;var r4="ScrollAreaViewport",n4=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,nonce:s,...i}=r,o=Ks(r4,t),c=b.useRef(null),d=ft(e,c,o.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),u.jsx(pt.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...r.style},children:u.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});n4.displayName=r4;var ho="ScrollAreaScrollbar",BT=b.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Ks(ho,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,c=r.orientation==="horizontal";return b.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),s.type==="hover"?u.jsx(nte,{...n,ref:e,forceMount:t}):s.type==="scroll"?u.jsx(ste,{...n,ref:e,forceMount:t}):s.type==="auto"?u.jsx(s4,{...n,ref:e,forceMount:t}):s.type==="always"?u.jsx(zT,{...n,ref:e}):null});BT.displayName=ho;var nte=b.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Ks(ho,r.__scopeScrollArea),[i,o]=b.useState(!1);return b.useEffect(()=>{const c=s.scrollArea;let d=0;if(c){const h=()=>{window.clearTimeout(d),o(!0)},p=()=>{d=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",p)}}},[s.scrollArea,s.scrollHideDelay]),u.jsx(Gs,{present:t||i,children:u.jsx(s4,{"data-state":i?"visible":"hidden",...n,ref:e})})}),ste=b.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Ks(ho,r.__scopeScrollArea),i=r.orientation==="horizontal",o=I0(()=>d("SCROLL_END"),100),[c,d]=tte("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,s.scrollHideDelay,d]),b.useEffect(()=>{const h=s.viewport,p=i?"scrollLeft":"scrollTop";if(h){let g=h[p];const v=()=>{const w=h[p];g!==w&&(d("SCROLL"),o()),g=w};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,d,o]),u.jsx(Gs,{present:t||c!=="hidden",children:u.jsx(zT,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Be(r.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Be(r.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),s4=b.forwardRef((r,e)=>{const t=Ks(ho,r.__scopeScrollArea),{forceMount:n,...s}=r,[i,o]=b.useState(!1),c=r.orientation==="horizontal",d=I0(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;o(c?h:p)}},10);return th(t.viewport,d),th(t.content,d),u.jsx(Gs,{present:n||i,children:u.jsx(zT,{"data-state":i?"visible":"hidden",...s,ref:e})})}),zT=b.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,s=Ks(ho,r.__scopeScrollArea),i=b.useRef(null),o=b.useRef(0),[c,d]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=c4(c.viewport,c.content),p={...n,sizes:c,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function g(v,w){return ute(v,o.current,c,w)}return t==="horizontal"?u.jsx(ite,{...p,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,w=gA(v,c,s.dir);i.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=g(v,s.dir))}}):t==="vertical"?u.jsx(ote,{...p,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,w=gA(v,c);i.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=g(v))}}):null}),ite=b.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Ks(ho,r.__scopeScrollArea),[o,c]=b.useState(),d=b.useRef(null),h=ft(e,d,i.onScrollbarXChange);return b.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),u.jsx(o4,{"data-orientation":"horizontal",...s,ref:h,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":k0(t)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.x),onDragScroll:p=>r.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(i.viewport){const v=i.viewport.scrollLeft+p.deltaX;r.onWheelScroll(v),d4(v,g)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:lv(o.paddingLeft),paddingEnd:lv(o.paddingRight)}})}})}),ote=b.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Ks(ho,r.__scopeScrollArea),[o,c]=b.useState(),d=b.useRef(null),h=ft(e,d,i.onScrollbarYChange);return b.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),u.jsx(o4,{"data-orientation":"vertical",...s,ref:h,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":k0(t)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.y),onDragScroll:p=>r.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(i.viewport){const v=i.viewport.scrollTop+p.deltaY;r.onWheelScroll(v),d4(v,g)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:lv(o.paddingTop),paddingEnd:lv(o.paddingBottom)}})}})}),[ate,i4]=e4(ho),o4=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:p,onResize:g,...v}=r,w=Ks(ho,t),[k,_]=b.useState(null),E=ft(e,D=>_(D)),C=b.useRef(null),P=b.useRef(""),j=w.viewport,M=n.content-n.viewport,$=ur(p),B=ur(d),A=I0(g,10);function R(D){if(C.current){const V=D.clientX-C.current.left,U=D.clientY-C.current.top;h({x:V,y:U})}}return b.useEffect(()=>{const D=V=>{const U=V.target;(k==null?void 0:k.contains(U))&&$(V,M)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[j,k,M,$]),b.useEffect(B,[n,B]),th(k,A),th(w.content,A),u.jsx(ate,{scope:t,scrollbar:k,hasThumb:s,onThumbChange:ur(i),onThumbPointerUp:ur(o),onThumbPositionChange:B,onThumbPointerDown:ur(c),children:u.jsx(pt.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:Be(r.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),C.current=k.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),R(D))}),onPointerMove:Be(r.onPointerMove,R),onPointerUp:Be(r.onPointerUp,D=>{const V=D.target;V.hasPointerCapture(D.pointerId)&&V.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=P.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),av="ScrollAreaThumb",a4=b.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=i4(av,r.__scopeScrollArea);return u.jsx(Gs,{present:t||s.hasThumb,children:u.jsx(lte,{ref:e,...n})})}),lte=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...s}=r,i=Ks(av,t),o=i4(av,t),{onThumbPositionChange:c}=o,d=ft(e,g=>o.onThumbChange(g)),h=b.useRef(void 0),p=I0(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const g=i.viewport;if(g){const v=()=>{if(p(),!h.current){const w=dte(g,c);h.current=w,c()}};return c(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[i.viewport,p,c]),u.jsx(pt.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Be(r.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),k=g.clientX-w.left,_=g.clientY-w.top;o.onThumbPointerDown({x:k,y:_})}),onPointerUp:Be(r.onPointerUp,o.onThumbPointerUp)})});a4.displayName=av;var WT="ScrollAreaCorner",l4=b.forwardRef((r,e)=>{const t=Ks(WT,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?u.jsx(cte,{...r,ref:e}):null});l4.displayName=WT;var cte=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,...n}=r,s=Ks(WT,t),[i,o]=b.useState(0),[c,d]=b.useState(0),h=!!(i&&c);return th(s.scrollbarX,()=>{var g;const p=((g=s.scrollbarX)==null?void 0:g.offsetHeight)||0;s.onCornerHeightChange(p),d(p)}),th(s.scrollbarY,()=>{var g;const p=((g=s.scrollbarY)==null?void 0:g.offsetWidth)||0;s.onCornerWidthChange(p),o(p)}),h?u.jsx(pt.div,{...n,ref:e,style:{width:i,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function lv(r){return r?parseInt(r,10):0}function c4(r,e){const t=r/e;return isNaN(t)?0:t}function k0(r){const e=c4(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function ute(r,e,t,n="ltr"){const s=k0(t),i=s/2,o=e||i,c=s-o,d=t.scrollbar.paddingStart+o,h=t.scrollbar.size-t.scrollbar.paddingEnd-c,p=t.content-t.viewport,g=n==="ltr"?[0,p]:[p*-1,0];return u4([d,h],g)(r)}function gA(r,e,t="ltr"){const n=k0(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,c=i-n,d=t==="ltr"?[0,o]:[o*-1,0],h=fb(r,d);return u4([0,o],[0,c])(h)}function u4(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function d4(r,e){return r>0&&r<e}var dte=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function s(){const i={left:r.scrollLeft,top:r.scrollTop},o=t.left!==i.left,c=t.top!==i.top;(o||c)&&e(),t=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function I0(r,e){const t=ur(r),n=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),b.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function th(r,e){const t=ur(e);hr(()=>{let n=0;if(r){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(r),()=>{window.cancelAnimationFrame(n),s.unobserve(r)}}},[r,t])}var h4=t4,hte=n4,fte=l4;const kb=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(h4,{ref:n,className:Oe("relative overflow-hidden",r),...t,children:[u.jsx(hte,{className:"h-full w-full rounded-[inherit]",children:e}),u.jsx(f4,{}),u.jsx(fte,{})]}));kb.displayName=h4.displayName;const f4=b.forwardRef(({className:r,orientation:e="vertical",...t},n)=>u.jsx(BT,{ref:n,orientation:e,className:Oe("flex touch-none select-none transition-colors data-[state=hidden]:bg-transparent data-[orientation=vertical]:h-full data-[orientation=horizontal]:flex-col data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:u.jsx(a4,{className:"relative flex-1 rounded-full bg-border"})}));f4.displayName=BT.displayName;const Kx=768;function pte(){const[r,e]=b.useState(void 0);return b.useEffect(()=>{if(typeof window>"u"){e(!1);return}const t=window.matchMedia(`(max-width: ${Kx-1}px)`),n=()=>{e(window.innerWidth<Kx)};return t.addEventListener("change",n),e(window.innerWidth<Kx),()=>t.removeEventListener("change",n)},[]),!!r}const mte=()=>{var N;const r=Fr(),{user:e,isAuthenticated:t,loading:n}=Sr(),{chatRooms:s,messages:i,loadingRooms:o,loadingMessages:c,error:d,sendMessage:h,fetchMessagesForRoom:p,sendTypingStatus:g}=tm(),[v,w]=G.useState(null),[k,_]=G.useState(""),E=b.useRef(null),C=pte(),[P,j]=G.useState(!0);b.useEffect(()=>{var Y;(Y=E.current)==null||Y.scrollIntoView({behavior:"smooth"})},[i]),b.useEffect(()=>{!v&&s.length>0&&(w(s[0]),p(s[0].id))},[s,v,p]);const M=Y=>{w(Y),p(Y.id),C&&j(!1)},$=async()=>{v&&k.trim()&&(await h(v.id,k),_(""),g(v.id,!1))},B=Y=>{_(Y.target.value),v&&g(v.id,Y.target.value.length>0)},A=Y=>{if(!e)return"Unknown";const ae=Y.participantNames.filter(de=>de!==(e.displayName||e.email));return ae.length>0?ae.join(", "):"Self Chat"},R=Y=>{e&&Y.participants.filter(ae=>ae!==e.uid)},D=Y=>{if(!e||!Y.typingUsers)return null;const ae=Y.typingUsers.filter(he=>he!==e.uid);if(ae.length===0)return null;const de=ae.map(he=>{const X=Y.participants.indexOf(he);return Y.participantNames[X]||"Someone"});return u.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic flex items-center gap-1",children:[de.join(", ")," is typing...",u.jsxs("span",{className:"typing-dots",children:[u.jsx("span",{children:"."}),u.jsx("span",{children:"."}),u.jsx("span",{children:"."})]})]})};if(n)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading authentication..."});if(!t||!e)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs("div",{className:"w-full max-w-md text-center shadow-lg bg-white dark:bg-gray-800 p-8 rounded-lg",children:[u.jsx("h1",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your chats."}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})});const V=(v==null?void 0:v.status)==="closed",U=v==null?void 0:v.participants.find(Y=>Y!==e.uid),L=U?(N=v==null?void 0:v.onlineStatus)==null?void 0:N[U]:!1;return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] flex flex-col md:flex-row w-full",children:u.jsx("div",{className:"container mx-auto px-4 flex flex-grow",children:u.jsxs("div",{className:"flex w-full h-[calc(100vh-160px)] md:h-[calc(100vh-120px)] bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("div",{className:Oe("w-full md:w-1/3 border-r border-gray-200 dark:border-gray-700 flex flex-col",C&&!P&&"hidden"),children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Chats"}),u.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"md:hidden",children:u.jsx(Zo,{size:20})})]}),u.jsx(kb,{className:"flex-grow",children:o?u.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"Loading chat rooms..."}):s.length===0?u.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"No chat rooms yet."}):s.map(Y=>u.jsxs("div",{className:Oe("flex items-center gap-3 p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",(v==null?void 0:v.id)===Y.id&&"bg-gray-100 dark:bg-gray-700 border-l-4 border-[hsl(var(--primary-color))]"),onClick:()=>M(Y),children:[u.jsxs(is,{className:"w-10 h-10",children:[u.jsx(os,{src:R(Y),alt:A(Y)}),u.jsx(as,{className:"bg-blue-200 text-blue-800",children:A(Y).charAt(0).toUpperCase()}),Y.onlineStatus&&U&&Y.onlineStatus[U]&&u.jsx("span",{className:"absolute bottom-0 right-0 block h-3 w-3 rounded-full bg-green-500 ring-2 ring-white"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:A(Y)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:Y.lastMessage||"Start a conversation"}),D(Y)," "]}),u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[Y.lastMessageTimestamp&&u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(Y.lastMessageTimestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx(Bt,{variant:"outline",className:Oe("text-xs px-2 py-0.5",Y.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200"),children:Y.status==="active"?"Active":"Closed"})]})]},Y.id))})]}),u.jsx("div",{className:Oe("flex flex-col w-full md:w-2/3",C&&P&&"hidden"),children:v?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[C&&u.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>j(!0),children:u.jsx(Zo,{size:20})}),u.jsxs(is,{className:"w-10 h-10",children:[u.jsx(os,{src:R(v),alt:A(v)}),u.jsx(as,{className:"bg-blue-200 text-blue-800",children:A(v).charAt(0).toUpperCase()}),L&&u.jsx("span",{className:"absolute bottom-0 right-0 block h-3 w-3 rounded-full bg-green-500 ring-2 ring-white"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:A(v)}),L?u.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[u.jsx(XD,{size:10,fill:"currentColor"})," Online"]}):u.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Offline"})]}),u.jsx(Bt,{variant:"outline",className:Oe("ml-auto text-xs px-2 py-0.5",v.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200"),children:v.status==="active"?"Active":"Closed"})]}),u.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 p-3 flex items-center gap-2 text-sm",children:[u.jsx(sM,{size:20}),u.jsxs("span",{children:[u.jsx("span",{className:"font-semibold",children:"Scam Alert:"})," Be cautious of requests for off-platform payments or personal info. Report suspicious activity."]})]}),u.jsxs(kb,{className:"flex-grow p-4 space-y-4",children:[c?u.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading messages..."}):i.length===0?u.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No messages yet. Start the conversation!"}):i.map(Y=>u.jsxs("div",{className:Oe("flex items-end gap-2",Y.senderId===e.uid?"justify-end":"justify-start"),children:[Y.senderId!==e.uid&&u.jsxs(is,{className:"w-8 h-8",children:[u.jsx(os,{src:Y.senderAvatar||void 0,alt:Y.senderName}),u.jsx(as,{className:"bg-gray-200 text-gray-700 text-sm",children:Y.senderName.charAt(0).toUpperCase()})]}),u.jsxs("div",{className:Oe("max-w-[70%] p-3 rounded-lg",Y.senderId===e.uid?"bg-[hsl(var(--primary-color))] text-white rounded-br-none":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"),children:[u.jsx("p",{className:"text-sm",children:Y.text}),u.jsx("span",{className:"text-xs opacity-75 mt-1 block",children:new Date(Y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),Y.senderId===e.uid&&u.jsxs(is,{className:"w-8 h-8",children:[u.jsx(os,{src:Y.senderAvatar||void 0,alt:Y.senderName}),u.jsx(as,{className:"bg-green-200 text-green-800 text-sm",children:Y.senderName.charAt(0).toUpperCase()})]})]},Y.id)),u.jsx("div",{ref:E})]}),v&&D(v)&&u.jsx("div",{className:"px-4 pb-2",children:D(v)}),u.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[V&&u.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm italic w-full justify-center",children:[u.jsx(UJ,{size:16})," This chat is closed. You can no longer send messages."]}),u.jsx(zt,{placeholder:"Type your message...",value:k,onChange:B,onKeyPress:Y=>Y.key==="Enter"&&$(),className:"flex-grow",disabled:c||V}),u.jsx(ve,{onClick:$,disabled:c||!k.trim()||V,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:u.jsx(HJ,{size:20})})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow text-center p-4",children:[u.jsx(Wc,{size:64,className:"text-gray-400 mb-4"}),u.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Select a chat to start messaging"}),C&&u.jsx(ve,{onClick:()=>j(!0),className:"mt-4 bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:"View Chats"})]})})]})})})},gte=()=>{const r=Fr(),{user:e,isAuthenticated:t,loading:n}=Sr(),{isTasker:s,loading:i}=Is(),{offers:o,loading:c,withdrawOffer:d}=S0(),{tasks:h,loading:p}=oa();if(n||i||c||p)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading your offers..."});if(!t||!e)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your offers."}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});if(!s)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Not a Tasker"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be registered as a tasker to view your offers."}),u.jsx(ve,{onClick:()=>r("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]})]})});const v=o.filter(_=>_.taskerId===e.uid),w=async _=>{try{await d(_)}catch{}},k=_=>{switch(_){case"pending":return u.jsx(Bt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Bt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Bt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Bt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});default:return u.jsx(Bt,{variant:"outline",children:"Unknown"})}};return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Offers"}),v.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:"You haven't made any offers yet."}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Browse Tasks"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(_=>{const E=h.find(C=>C.id===_.taskId);return E?u.jsx(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:u.jsxs(bt,{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:E.title}),k(_.status)]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center mb-2",children:[u.jsx(g0,{size:16,className:"mr-2"})," ",E.category]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 flex items-center mb-2",children:[u.jsx(Wc,{size:16,className:"mr-2"})," ",_.message]}),u.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[u.jsx(El,{size:20,className:"mr-2"})," ₱",_.offerAmount.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(dn,{to:`/tasks/${E.id}`,children:u.jsx(ve,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Task"})}),_.status==="pending"&&u.jsxs(ve,{variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100",onClick:()=>w(_.id),children:[u.jsx(ZD,{size:16,className:"mr-2"})," Withdraw Offer"]})]})]})},_.id):null})})]})})};var cv=["light","dark"],qT="(prefers-color-scheme: dark)",yte=typeof window>"u",HT=b.createContext(void 0),vte={setTheme:r=>{},themes:[]},wte=()=>{var r;return(r=b.useContext(HT))!=null?r:vte},xte=r=>b.useContext(HT)?r.children:b.createElement(bte,{...r}),_te=["light","dark"],bte=({forcedTheme:r,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:i=_te,defaultTheme:o=t?"system":"light",attribute:c="data-theme",value:d,children:h,nonce:p})=>{let[g,v]=b.useState(()=>yA(s,o)),[w,k]=b.useState(()=>yA(s)),_=d?Object.values(d):i,E=b.useCallback(M=>{let $=M;if(!$)return;M==="system"&&t&&($=vA());let B=d?d[$]:$,A=e?Tte():null,R=document.documentElement;if(c==="class"?(R.classList.remove(..._),B&&R.classList.add(B)):B?R.setAttribute(c,B):R.removeAttribute(c),n){let D=cv.includes(o)?o:null,V=cv.includes($)?$:D;R.style.colorScheme=V}A==null||A()},[]),C=b.useCallback(M=>{let $=typeof M=="function"?M(M):M;v($);try{localStorage.setItem(s,$)}catch{}},[r]),P=b.useCallback(M=>{let $=vA(M);k($),g==="system"&&t&&!r&&E("system")},[g,r]);b.useEffect(()=>{let M=window.matchMedia(qT);return M.addListener(P),P(M),()=>M.removeListener(P)},[P]),b.useEffect(()=>{let M=$=>{if($.key!==s)return;let B=$.newValue||o;C(B)};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[C]),b.useEffect(()=>{E(r??g)},[r,g]);let j=b.useMemo(()=>({theme:g,setTheme:C,forcedTheme:r,resolvedTheme:g==="system"?w:g,themes:t?[...i,"system"]:i,systemTheme:t?w:void 0}),[g,C,r,w,t,i]);return b.createElement(HT.Provider,{value:j},b.createElement(Ete,{forcedTheme:r,disableTransitionOnChange:e,enableSystem:t,enableColorScheme:n,storageKey:s,themes:i,defaultTheme:o,attribute:c,value:d,children:h,attrs:_,nonce:p}),h)},Ete=b.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:c,nonce:d})=>{let h=i==="system",p=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(k=>`'${k}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,g=s?cv.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(k,_=!1,E=!0)=>{let C=o?o[k]:k,P=_?k+"|| ''":`'${C}'`,j="";return s&&E&&!_&&cv.includes(k)&&(j+=`d.style.colorScheme = '${k}';`),t==="class"?_||C?j+=`c.add(${P})`:j+="null":C&&(j+=`d[s](n,${P})`),j},w=r?`!function(){${p}${v(r)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${qT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${h?"":"else{"+v(i,!1,!1)+"}"}${g}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${g}}catch(t){}}();`;return b.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:w}})}),yA=(r,e)=>{if(yte)return;let t;try{t=localStorage.getItem(r)||void 0}catch{}return t||e},Tte=()=>{let r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},vA=r=>(r||(r=window.matchMedia(qT)),r.matches?"dark":"light"),Yx="rovingFocusGroup.onEntryFocus",Ste={bubbles:!1,cancelable:!0},C0="RovingFocusGroup",[Ib,p4,kte]=NT(C0),[Ite,m4]=Hs(C0,[kte]),[Cte,Pte]=Ite(C0),g4=b.forwardRef((r,e)=>u.jsx(Ib.Provider,{scope:r.__scopeRovingFocusGroup,children:u.jsx(Ib.Slot,{scope:r.__scopeRovingFocusGroup,children:u.jsx(Ate,{...r,ref:e})})}));g4.displayName=C0;var Ate=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...g}=r,v=b.useRef(null),w=ft(e,v),k=x0(i),[_=null,E]=Ip({prop:o,defaultProp:c,onChange:d}),[C,P]=b.useState(!1),j=ur(h),M=p4(t),$=b.useRef(!1),[B,A]=b.useState(0);return b.useEffect(()=>{const R=v.current;if(R)return R.addEventListener(Yx,j),()=>R.removeEventListener(Yx,j)},[j]),u.jsx(Cte,{scope:t,orientation:n,dir:k,loop:s,currentTabStopId:_,onItemFocus:b.useCallback(R=>E(R),[E]),onItemShiftTab:b.useCallback(()=>P(!0),[]),onFocusableItemAdd:b.useCallback(()=>A(R=>R+1),[]),onFocusableItemRemove:b.useCallback(()=>A(R=>R-1),[]),children:u.jsx(pt.div,{tabIndex:C||B===0?-1:0,"data-orientation":n,...g,ref:w,style:{outline:"none",...r.style},onMouseDown:Be(r.onMouseDown,()=>{$.current=!0}),onFocus:Be(r.onFocus,R=>{const D=!$.current;if(R.target===R.currentTarget&&D&&!C){const V=new CustomEvent(Yx,Ste);if(R.currentTarget.dispatchEvent(V),!V.defaultPrevented){const U=M().filter(de=>de.focusable),L=U.find(de=>de.active),N=U.find(de=>de.id===_),ae=[L,N,...U].filter(Boolean).map(de=>de.ref.current);w4(ae,p)}}$.current=!1}),onBlur:Be(r.onBlur,()=>P(!1))})})}),y4="RovingFocusGroupItem",v4=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:s=!1,tabStopId:i,...o}=r,c=zo(),d=i||c,h=Pte(y4,t),p=h.currentTabStopId===d,g=p4(t),{onFocusableItemAdd:v,onFocusableItemRemove:w}=h;return b.useEffect(()=>{if(n)return v(),()=>w()},[n,v,w]),u.jsx(Ib.ItemSlot,{scope:t,id:d,focusable:n,active:s,children:u.jsx(pt.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:Be(r.onMouseDown,k=>{n?h.onItemFocus(d):k.preventDefault()}),onFocus:Be(r.onFocus,()=>h.onItemFocus(d)),onKeyDown:Be(r.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){h.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const _=jte(k,h.orientation,h.dir);if(_!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let C=g().filter(P=>P.focusable).map(P=>P.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const P=C.indexOf(k.currentTarget);C=h.loop?Ote(C,P+1):C.slice(P+1)}setTimeout(()=>w4(C))}})})})});v4.displayName=y4;var Rte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nte(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function jte(r,e,t){const n=Nte(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Rte[n]}function w4(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function Ote(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var Dte=g4,Mte=v4,Cb=["Enter"," "],Lte=["ArrowDown","PageUp","Home"],x4=["ArrowUp","PageDown","End"],Vte=[...Lte,...x4],Fte={ltr:[...Cb,"ArrowRight"],rtl:[...Cb,"ArrowLeft"]},Ute={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sm="Menu",[Np,$te,Bte]=NT(sm),[tu,_4]=Hs(sm,[Bte,_0,m4]),P0=_0(),b4=m4(),[zte,ru]=tu(sm),[Wte,im]=tu(sm),E4=r=>{const{__scopeMenu:e,open:t=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=r,c=P0(e),[d,h]=b.useState(null),p=b.useRef(!1),g=ur(i),v=x0(s);return b.useEffect(()=>{const w=()=>{p.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>p.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),u.jsx(jM,{...c,children:u.jsx(zte,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:h,children:u.jsx(Wte,{scope:e,onClose:b.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:p,dir:v,modal:o,children:n})})})};E4.displayName=sm;var qte="MenuAnchor",GT=b.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,s=P0(t);return u.jsx(OM,{...s,...n,ref:e})});GT.displayName=qte;var KT="MenuPortal",[Hte,T4]=tu(KT,{forceMount:void 0}),S4=r=>{const{__scopeMenu:e,forceMount:t,children:n,container:s}=r,i=ru(KT,e);return u.jsx(Hte,{scope:e,forceMount:t,children:u.jsx(Gs,{present:t||i.open,children:u.jsx(f0,{asChild:!0,container:s,children:n})})})};S4.displayName=KT;var Ws="MenuContent",[Gte,YT]=tu(Ws),k4=b.forwardRef((r,e)=>{const t=T4(Ws,r.__scopeMenu),{forceMount:n=t.forceMount,...s}=r,i=ru(Ws,r.__scopeMenu),o=im(Ws,r.__scopeMenu);return u.jsx(Np.Provider,{scope:r.__scopeMenu,children:u.jsx(Gs,{present:n||i.open,children:u.jsx(Np.Slot,{scope:r.__scopeMenu,children:o.modal?u.jsx(Kte,{...s,ref:e}):u.jsx(Yte,{...s,ref:e})})})})}),Kte=b.forwardRef((r,e)=>{const t=ru(Ws,r.__scopeMenu),n=b.useRef(null),s=ft(e,n);return b.useEffect(()=>{const i=n.current;if(i)return hT(i)},[]),u.jsx(QT,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Be(r.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Yte=b.forwardRef((r,e)=>{const t=ru(Ws,r.__scopeMenu);return u.jsx(QT,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Qte=Ac("MenuContent.ScrollLock"),QT=b.forwardRef((r,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:v,onDismiss:w,disableOutsideScroll:k,..._}=r,E=ru(Ws,t),C=im(Ws,t),P=P0(t),j=b4(t),M=$te(t),[$,B]=b.useState(null),A=b.useRef(null),R=ft(e,A,E.onContentChange),D=b.useRef(0),V=b.useRef(""),U=b.useRef(0),L=b.useRef(null),N=b.useRef("right"),Y=b.useRef(0),ae=k?m0:b.Fragment,de=k?{as:Qte,allowPinchZoom:!0}:void 0,he=J=>{var pe,je;const K=V.current+J,W=M().filter(Ve=>!Ve.disabled),Z=document.activeElement,Se=(pe=W.find(Ve=>Ve.ref.current===Z))==null?void 0:pe.textValue,ge=W.map(Ve=>Ve.textValue),Me=lre(ge,K,Se),qe=(je=W.find(Ve=>Ve.textValue===Me))==null?void 0:je.ref.current;(function Ve(Qe){V.current=Qe,window.clearTimeout(D.current),Qe!==""&&(D.current=window.setTimeout(()=>Ve(""),1e3))})(K),qe&&setTimeout(()=>qe.focus())};b.useEffect(()=>()=>window.clearTimeout(D.current),[]),dT();const X=b.useCallback(J=>{var W,Z;return N.current===((W=L.current)==null?void 0:W.side)&&ure(J,(Z=L.current)==null?void 0:Z.area)},[]);return u.jsx(Gte,{scope:t,searchRef:V,onItemEnter:b.useCallback(J=>{X(J)&&J.preventDefault()},[X]),onItemLeave:b.useCallback(J=>{var K;X(J)||((K=A.current)==null||K.focus(),B(null))},[X]),onTriggerLeave:b.useCallback(J=>{X(J)&&J.preventDefault()},[X]),pointerGraceTimerRef:U,onPointerGraceIntentChange:b.useCallback(J=>{L.current=J},[]),children:u.jsx(ae,{...de,children:u.jsx(h0,{asChild:!0,trapped:s,onMountAutoFocus:Be(i,J=>{var K;J.preventDefault(),(K=A.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(d0,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:v,onDismiss:w,children:u.jsx(Dte,{asChild:!0,...j,dir:C.dir,orientation:"vertical",loop:n,currentTabStopId:$,onCurrentTabStopIdChange:B,onEntryFocus:Be(d,J=>{C.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(DM,{role:"menu","aria-orientation":"vertical","data-state":B4(E.open),"data-radix-menu-content":"",dir:C.dir,...P,..._,ref:R,style:{outline:"none",..._.style},onKeyDown:Be(_.onKeyDown,J=>{const W=J.target.closest("[data-radix-menu-content]")===J.currentTarget,Z=J.ctrlKey||J.altKey||J.metaKey,Se=J.key.length===1;W&&(J.key==="Tab"&&J.preventDefault(),!Z&&Se&&he(J.key));const ge=A.current;if(J.target!==ge||!Vte.includes(J.key))return;J.preventDefault();const qe=M().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);x4.includes(J.key)&&qe.reverse(),ore(qe)}),onBlur:Be(r.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(D.current),V.current="")}),onPointerMove:Be(r.onPointerMove,jp(J=>{const K=J.target,W=Y.current!==J.clientX;if(J.currentTarget.contains(K)&&W){const Z=J.clientX>Y.current?"right":"left";N.current=Z,Y.current=J.clientX}}))})})})})})})});k4.displayName=Ws;var Jte="MenuGroup",JT=b.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return u.jsx(pt.div,{role:"group",...n,ref:e})});JT.displayName=Jte;var Xte="MenuLabel",I4=b.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return u.jsx(pt.div,{...n,ref:e})});I4.displayName=Xte;var uv="MenuItem",wA="menu.itemSelect",A0=b.forwardRef((r,e)=>{const{disabled:t=!1,onSelect:n,...s}=r,i=b.useRef(null),o=im(uv,r.__scopeMenu),c=YT(uv,r.__scopeMenu),d=ft(e,i),h=b.useRef(!1),p=()=>{const g=i.current;if(!t&&g){const v=new CustomEvent(wA,{bubbles:!0,cancelable:!0});g.addEventListener(wA,w=>n==null?void 0:n(w),{once:!0}),pD(g,v),v.defaultPrevented?h.current=!1:o.onClose()}};return u.jsx(C4,{...s,ref:d,disabled:t,onClick:Be(r.onClick,p),onPointerDown:g=>{var v;(v=r.onPointerDown)==null||v.call(r,g),h.current=!0},onPointerUp:Be(r.onPointerUp,g=>{var v;h.current||(v=g.currentTarget)==null||v.click()}),onKeyDown:Be(r.onKeyDown,g=>{const v=c.searchRef.current!=="";t||v&&g.key===" "||Cb.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});A0.displayName=uv;var C4=b.forwardRef((r,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:s,...i}=r,o=YT(uv,t),c=b4(t),d=b.useRef(null),h=ft(e,d),[p,g]=b.useState(!1),[v,w]=b.useState("");return b.useEffect(()=>{const k=d.current;k&&w((k.textContent??"").trim())},[i.children]),u.jsx(Np.ItemSlot,{scope:t,disabled:n,textValue:s??v,children:u.jsx(Mte,{asChild:!0,...c,focusable:!n,children:u.jsx(pt.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:h,onPointerMove:Be(r.onPointerMove,jp(k=>{n?o.onItemLeave(k):(o.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Be(r.onPointerLeave,jp(k=>o.onItemLeave(k))),onFocus:Be(r.onFocus,()=>g(!0)),onBlur:Be(r.onBlur,()=>g(!1))})})})}),Zte="MenuCheckboxItem",P4=b.forwardRef((r,e)=>{const{checked:t=!1,onCheckedChange:n,...s}=r;return u.jsx(O4,{scope:r.__scopeMenu,checked:t,children:u.jsx(A0,{role:"menuitemcheckbox","aria-checked":dv(t)?"mixed":t,...s,ref:e,"data-state":ZT(t),onSelect:Be(s.onSelect,()=>n==null?void 0:n(dv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});P4.displayName=Zte;var A4="MenuRadioGroup",[ere,tre]=tu(A4,{value:void 0,onValueChange:()=>{}}),R4=b.forwardRef((r,e)=>{const{value:t,onValueChange:n,...s}=r,i=ur(n);return u.jsx(ere,{scope:r.__scopeMenu,value:t,onValueChange:i,children:u.jsx(JT,{...s,ref:e})})});R4.displayName=A4;var N4="MenuRadioItem",j4=b.forwardRef((r,e)=>{const{value:t,...n}=r,s=tre(N4,r.__scopeMenu),i=t===s.value;return u.jsx(O4,{scope:r.__scopeMenu,checked:i,children:u.jsx(A0,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":ZT(i),onSelect:Be(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});j4.displayName=N4;var XT="MenuItemIndicator",[O4,rre]=tu(XT,{checked:!1}),D4=b.forwardRef((r,e)=>{const{__scopeMenu:t,forceMount:n,...s}=r,i=rre(XT,t);return u.jsx(Gs,{present:n||dv(i.checked)||i.checked===!0,children:u.jsx(pt.span,{...s,ref:e,"data-state":ZT(i.checked)})})});D4.displayName=XT;var nre="MenuSeparator",M4=b.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return u.jsx(pt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});M4.displayName=nre;var sre="MenuArrow",L4=b.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,s=P0(t);return u.jsx(MM,{...s,...n,ref:e})});L4.displayName=sre;var ire="MenuSub",[nse,V4]=tu(ire),Df="MenuSubTrigger",F4=b.forwardRef((r,e)=>{const t=ru(Df,r.__scopeMenu),n=im(Df,r.__scopeMenu),s=V4(Df,r.__scopeMenu),i=YT(Df,r.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=i,h={__scopeMenu:r.__scopeMenu},p=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>p,[p]),b.useEffect(()=>{const g=c.current;return()=>{window.clearTimeout(g),d(null)}},[c,d]),u.jsx(GT,{asChild:!0,...h,children:u.jsx(C4,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":B4(t.open),...r,ref:Mp(e,s.onTriggerChange),onClick:g=>{var v;(v=r.onClick)==null||v.call(r,g),!(r.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Be(r.onPointerMove,jp(g=>{i.onItemEnter(g),!g.defaultPrevented&&!r.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:Be(r.onPointerLeave,jp(g=>{var w,k;p();const v=(w=t.content)==null?void 0:w.getBoundingClientRect();if(v){const _=(k=t.content)==null?void 0:k.dataset.side,E=_==="right",C=E?-5:5,P=v[E?"left":"right"],j=v[E?"right":"left"];i.onPointerGraceIntentChange({area:[{x:g.clientX+C,y:g.clientY},{x:P,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:P,y:v.bottom}],side:_}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(g),g.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Be(r.onKeyDown,g=>{var w;const v=i.searchRef.current!=="";r.disabled||v&&g.key===" "||Fte[n.dir].includes(g.key)&&(t.onOpenChange(!0),(w=t.content)==null||w.focus(),g.preventDefault())})})})});F4.displayName=Df;var U4="MenuSubContent",$4=b.forwardRef((r,e)=>{const t=T4(Ws,r.__scopeMenu),{forceMount:n=t.forceMount,...s}=r,i=ru(Ws,r.__scopeMenu),o=im(Ws,r.__scopeMenu),c=V4(U4,r.__scopeMenu),d=b.useRef(null),h=ft(e,d);return u.jsx(Np.Provider,{scope:r.__scopeMenu,children:u.jsx(Gs,{present:n||i.open,children:u.jsx(Np.Slot,{scope:r.__scopeMenu,children:u.jsx(QT,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var g;o.isUsingKeyboardRef.current&&((g=d.current)==null||g.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:Be(r.onFocusOutside,p=>{p.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Be(r.onEscapeKeyDown,p=>{o.onClose(),p.preventDefault()}),onKeyDown:Be(r.onKeyDown,p=>{var w;const g=p.currentTarget.contains(p.target),v=Ute[o.dir].includes(p.key);g&&v&&(i.onOpenChange(!1),(w=c.trigger)==null||w.focus(),p.preventDefault())})})})})})});$4.displayName=U4;function B4(r){return r?"open":"closed"}function dv(r){return r==="indeterminate"}function ZT(r){return dv(r)?"indeterminate":r?"checked":"unchecked"}function ore(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function are(r,e){return r.map((t,n)=>r[(e+n)%r.length])}function lre(r,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let o=are(r,Math.max(i,0));s.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function cre(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const c=e[i].x,d=e[i].y,h=e[o].x,p=e[o].y;d>n!=p>n&&t<(h-c)*(n-d)/(p-d)+c&&(s=!s)}return s}function ure(r,e){if(!e)return!1;const t={x:r.clientX,y:r.clientY};return cre(t,e)}function jp(r){return e=>e.pointerType==="mouse"?r(e):void 0}var dre=E4,hre=GT,fre=S4,pre=k4,mre=JT,gre=I4,yre=A0,vre=P4,wre=R4,xre=j4,_re=D4,bre=M4,Ere=L4,Tre=F4,Sre=$4,eS="DropdownMenu",[kre,sse]=Hs(eS,[_4]),Gn=_4(),[Ire,z4]=kre(eS),W4=r=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:c=!0}=r,d=Gn(e),h=b.useRef(null),[p=!1,g]=Ip({prop:s,defaultProp:i,onChange:o});return u.jsx(Ire,{scope:e,triggerId:zo(),triggerRef:h,contentId:zo(),open:p,onOpenChange:g,onOpenToggle:b.useCallback(()=>g(v=>!v),[g]),modal:c,children:u.jsx(dre,{...d,open:p,onOpenChange:g,dir:n,modal:c,children:t})})};W4.displayName=eS;var q4="DropdownMenuTrigger",H4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...s}=r,i=z4(q4,t),o=Gn(t);return u.jsx(hre,{asChild:!0,...o,children:u.jsx(pt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Mp(e,i.triggerRef),onPointerDown:Be(r.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:Be(r.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});H4.displayName=q4;var Cre="DropdownMenuPortal",G4=r=>{const{__scopeDropdownMenu:e,...t}=r,n=Gn(e);return u.jsx(fre,{...n,...t})};G4.displayName=Cre;var K4="DropdownMenuContent",Y4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=z4(K4,t),i=Gn(t),o=b.useRef(!1);return u.jsx(pre,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:Be(r.onCloseAutoFocus,c=>{var d;o.current||(d=s.triggerRef.current)==null||d.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Be(r.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;(!s.modal||p)&&(o.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Y4.displayName=K4;var Pre="DropdownMenuGroup",Are=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(mre,{...s,...n,ref:e})});Are.displayName=Pre;var Rre="DropdownMenuLabel",Q4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(gre,{...s,...n,ref:e})});Q4.displayName=Rre;var Nre="DropdownMenuItem",J4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(yre,{...s,...n,ref:e})});J4.displayName=Nre;var jre="DropdownMenuCheckboxItem",X4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(vre,{...s,...n,ref:e})});X4.displayName=jre;var Ore="DropdownMenuRadioGroup",Dre=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(wre,{...s,...n,ref:e})});Dre.displayName=Ore;var Mre="DropdownMenuRadioItem",Z4=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(xre,{...s,...n,ref:e})});Z4.displayName=Mre;var Lre="DropdownMenuItemIndicator",eV=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(_re,{...s,...n,ref:e})});eV.displayName=Lre;var Vre="DropdownMenuSeparator",tV=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(bre,{...s,...n,ref:e})});tV.displayName=Vre;var Fre="DropdownMenuArrow",Ure=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(Ere,{...s,...n,ref:e})});Ure.displayName=Fre;var $re="DropdownMenuSubTrigger",rV=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(Tre,{...s,...n,ref:e})});rV.displayName=$re;var Bre="DropdownMenuSubContent",nV=b.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Gn(t);return u.jsx(Sre,{...s,...n,ref:e,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nV.displayName=Bre;var zre=W4,Wre=H4,qre=G4,sV=Y4,iV=Q4,oV=J4,aV=X4,lV=Z4,cV=eV,uV=tV,dV=rV,hV=nV;const Hre=zre,Gre=Wre,Kre=b.forwardRef(({className:r,inset:e,children:t,...n},s)=>u.jsxs(dV,{ref:s,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",r),...n,children:[t,u.jsx(QD,{className:"ml-auto h-4 w-4"})]}));Kre.displayName=dV.displayName;const Yre=b.forwardRef(({className:r,...e},t)=>u.jsx(hV,{ref:t,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=open]:slide-in-from-left-1/2",r),...e}));Yre.displayName=hV.displayName;const fV=b.forwardRef(({className:r,sideOffset:e=4,...t},n)=>u.jsx(qre,{children:u.jsx(sV,{ref:n,sideOffset:e,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));fV.displayName=sV.displayName;const ay=b.forwardRef(({className:r,inset:e,...t},n)=>u.jsx(oV,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",r),...t}));ay.displayName=oV.displayName;const Qre=b.forwardRef(({className:r,children:e,checked:t,...n},s)=>u.jsxs(aV,{ref:s,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(cV,{children:u.jsx(KD,{className:"h-4 w-4"})})}),e]}));Qre.displayName=aV.displayName;const Jre=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(lV,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(cV,{children:u.jsx(XD,{className:"h-2 w-2 fill-current"})})}),e]}));Jre.displayName=lV.displayName;const Xre=b.forwardRef(({className:r,inset:e,...t},n)=>u.jsx(iV,{ref:n,className:Oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));Xre.displayName=iV.displayName;const Zre=b.forwardRef(({className:r,...e},t)=>u.jsx(uV,{ref:t,className:Oe("-mx-1 my-1 h-px bg-muted",r),...e}));Zre.displayName=uV.displayName;function ene(){const{setTheme:r}=wte();return u.jsxs(Hre,{children:[u.jsx(Gre,{asChild:!0,children:u.jsxs(ve,{variant:"outline",size:"icon",children:[u.jsx(KJ,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),u.jsx($J,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),u.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),u.jsxs(fV,{align:"end",children:[u.jsx(ay,{onClick:()=>r("light"),children:"Light"}),u.jsx(ay,{onClick:()=>r("dark"),children:"Dark"}),u.jsx(ay,{onClick:()=>r("system"),children:"System"})]})]})}const tne=()=>{const r=Fr();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(ve,{onClick:()=>r(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(Zo,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"App Settings"}),u.jsxs(_t,{className:"shadow-lg p-6",children:[u.jsx(fn,{className:"p-0 mb-4",children:u.jsxs(jn,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[u.jsx(nM,{size:24})," General Settings"]})}),u.jsx(bt,{className:"p-0 space-y-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Theme"}),u.jsx(ene,{})]})})]})]})})},rne=()=>{const r=Fr(),{user:e,isAuthenticated:t,loading:n}=Sr(),{taskerProfile:s,isTasker:i,loading:o}=Is(),{tasks:c,loading:d}=oa();if(n||o||d)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading tasker dashboard..."});if(!t||!e)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view the tasker dashboard."}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});if(!i||!s)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Not a Tasker"})}),u.jsxs(bt,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be registered as a tasker to access this dashboard."}),u.jsx(ve,{onClick:()=>r("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]})]})});const p=c.filter(w=>w.assignedTaskerId===e.uid),g=p.filter(w=>w.status==="completed"&&w.rating&&w.review),v=g.length>0?(g.reduce((w,k)=>w+(k.rating||0),0)/g.length).toFixed(1):"N/A";return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-5xl",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Tasker Dashboard"}),u.jsx(_t,{className:"shadow-lg p-6 mb-8",children:u.jsxs(bt,{className:"flex flex-col md:flex-row items-center md:items-start gap-6 p-0",children:[u.jsxs(is,{className:"w-24 h-24 border-4 border-green-500",children:[u.jsx(os,{src:s.photoURL||void 0,alt:s.displayName}),u.jsx(as,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:s.displayName?s.displayName.charAt(0).toUpperCase():u.jsx(yi,{size:48})})]}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:s.displayName}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center md:justify-start gap-2 mb-2",children:[u.jsx(xd,{size:18})," Tasker since ",new Date(s.dateJoined).toLocaleDateString()]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center md:justify-start gap-2 mb-2",children:[u.jsx(El,{size:18})," Hourly Rate: ₱",s.hourlyRate.toLocaleString()]}),u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(Wo,{size:18,className:"text-yellow-500"}),u.jsxs("span",{className:"font-semibold",children:["Average Rating: ",v]}),g.length>0&&u.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.length," reviews)"]})]}),u.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mt-4",children:s.skills.map((w,k)=>u.jsx(Bt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:w},k))})]}),u.jsx(ve,{onClick:()=>r("/profile"),variant:"outline",className:"mt-4 md:mt-0 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View My Public Profile"})]})}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center md:text-left",children:"My Assigned Tasks"}),p.length===0?u.jsxs("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:"No tasks currently assigned to you."}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Browse Open Tasks"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(w=>u.jsxs(_t,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:`absolute top-2 left-2 px-3 py-1 rounded-full text-xs font-semibold ${w.status==="open"?"bg-blue-600 text-white":w.status==="assigned"?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]}),u.jsxs(bt,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:w.title}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(vh,{size:16,className:"mr-2"})," ",w.location]}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(g0,{size:16,className:"mr-2"})," ",w.category]}),u.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-4",children:["₱",w.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(dn,{to:`/tasks/${w.id}`,children:u.jsx(ve,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Task Details"})}),w.status==="assigned"&&u.jsx(Bt,{variant:"outline",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-200",children:"Awaiting Client Completion"}),w.status==="completed"&&u.jsx(Bt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Completed"})]})]})]},w.id))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center md:text-left",children:"Client Reviews"}),g.length===0?u.jsx("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"No reviews yet. Complete more tasks to get feedback!"})}):u.jsx("div",{className:"space-y-4",children:g.map((w,k)=>u.jsx(_t,{className:"p-4 shadow-sm",children:u.jsxs(bt,{className:"p-0",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[...Array(5)].map((_,E)=>u.jsx(Wo,{size:16,className:E<w.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"},E)),u.jsxs("span",{className:"font-semibold ml-1",children:[w.rating,"/5"]})]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic mb-2",children:['"',w.review,'"']}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",w.posterName,' for "',w.title,'"']})]})},k))})]})]})})};function nne(){const[r,e]=b.useState(!0),[t,n]=b.useState(null);return b.useEffect(()=>{(async()=>{if(_8(Va,window.location.href)){let i=window.localStorage.getItem("emailForSignIn");if(i||(i=window.prompt("Please provide your email for confirmation")),!i){n("Email not provided for sign-in confirmation."),e(!1),ue.error("Email not provided for sign-in confirmation.");return}try{await b8(Va,i,window.location.href),console.log("User signed in successfully with email link."),localStorage.removeItem("emailForSignIn"),e(!1)}catch(o){console.error("Error during email link sign-in:",o),n(o.message||"Failed to sign in with email link."),e(!1),ue.error(`Failed to sign in: ${o.message}`)}}else e(!1)})()},[]),{loading:r,error:t}}const sne=()=>{const r=Fr(),{loading:e,error:t}=nne();return b.useEffect(()=>{if(!e&&!t){const n=setTimeout(()=>{r("/profile"),ue.success("Successfully logged in!")},1e3);return()=>clearTimeout(n)}else t&&ue.error(`Login failed: ${t}`)},[e,t,r]),u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsx(jn,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:e?"Logging you in...":"Sign-in Complete"})}),u.jsx(bt,{children:e?u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(FJ,{className:"h-8 w-8 animate-spin text-[hsl(var(--primary-color))] mb-4"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we complete your sign-in."})]}):t?u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsxs("p",{className:"text-red-500 mb-4",children:["An error occurred during sign-in: ",t]}),u.jsx(ve,{onClick:()=>r("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have successfully logged in."}),u.jsx(ve,{onClick:()=>r("/profile"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Profile"})]})})]})})};function ine({children:r,...e}){return u.jsx(xte,{...e,children:r})}const one=b.createContext(void 0),ane=({children:r})=>{const{user:e,isAuthenticated:t,loading:n}=Sr(),[s,i]=G.useState(!1);b.useEffect(()=>{!n&&t&&e&&!s?(console.log(`[Chat Log] Chat session initialized for user: ${e.uid} (${e.email}) at ${new Date().toISOString()}`),i(!0)):!t&&s&&(console.log(`[Chat Log] Chat session ended for previous user at ${new Date().toISOString()}`),i(!1))},[t,e,n,s]);const o={isChatSessionInitialized:s};return u.jsx(one.Provider,{value:o,children:r})};class lne extends b.Component{constructor(){super(...arguments);uI(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("Uncaught error:",t,n),this.setState({errorInfo:n})}render(){var t;return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:u.jsxs(_t,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(fn,{children:u.jsxs(jn,{className:"text-2xl font-bold text-red-600 flex items-center justify-center gap-2",children:[u.jsx(sM,{size:28})," Something went wrong!"]})}),u.jsxs(bt,{className:"space-y-4",children:[u.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We're sorry, but an unexpected error occurred."}),this.state.error&&u.jsxs("details",{className:"text-sm text-gray-500 dark:text-gray-400 text-left p-2 bg-gray-50 dark:bg-gray-700 rounded-md",children:[u.jsx("summary",{className:"cursor-pointer font-semibold",children:"Error Details"}),u.jsxs("pre",{className:"whitespace-pre-wrap break-words mt-2",children:[this.state.error.toString(),u.jsx("br",{}),(t=this.state.errorInfo)==null?void 0:t.componentStack]})]}),u.jsx(ve,{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white mr-2",children:"Reload Page"}),u.jsx(dn,{to:"/",children:u.jsxs(ve,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white flex items-center gap-2",children:[u.jsx(bT,{size:18})," Go to Home"]})})]})]})}):this.props.children}}const cne=new x3,une=({children:r})=>{const{user:e}=Sr();return u.jsx(FY,{firebaseUser:e,children:r})},dne=()=>u.jsxs(b3,{client:cne,children:[u.jsx(ine,{defaultTheme:"system",storageKey:"vite-ui-theme",children:u.jsx(Q6,{children:u.jsx(w5,{children:u.jsx(MY,{children:u.jsx(une,{children:u.jsx(See,{children:u.jsx(iQ,{children:u.jsx(BY,{children:u.jsx(zY,{children:u.jsx(HZ,{children:u.jsx(ane,{children:u.jsx(QZ,{children:u.jsx("div",{className:"min-h-screen w-full flex flex-col items-center",children:u.jsxs(lne,{children:[" ",u.jsxs(d5,{children:[u.jsx(zr,{path:"/",element:u.jsx(Iee,{})}),u.jsx(zr,{path:"/tasks/:id",element:u.jsx(Pee,{})}),u.jsx(zr,{path:"/my-tasks",element:u.jsx(zee,{})}),u.jsx(zr,{path:"/my-offers",element:u.jsx(gte,{})}),u.jsx(zr,{path:"/features-earnings",element:u.jsx(Wee,{})}),u.jsx(zr,{path:"/profile",element:u.jsx(Hee,{})}),u.jsx(zr,{path:"/settings",element:u.jsx(tne,{})}),u.jsx(zr,{path:"/faq",element:u.jsx(Gee,{})}),u.jsx(zr,{path:"/contact",element:u.jsx(Kee,{})}),u.jsx(zr,{path:"/privacy",element:u.jsx(Yee,{})}),u.jsx(zr,{path:"/terms",element:u.jsx(Qee,{})}),u.jsx(zr,{path:"/eula",element:u.jsx(Jee,{})}),u.jsx(zr,{path:"/browse-taskers",element:u.jsx(Zee,{})}),u.jsx(zr,{path:"/taskers/:id",element:u.jsx(ete,{})}),u.jsx(zr,{path:"/chat",element:u.jsx(mte,{})}),u.jsx(zr,{path:"/tasker-dashboard",element:u.jsx(rne,{})}),u.jsx(zr,{path:"/finishSignIn",element:u.jsx(sne,{})}),u.jsx(zr,{path:"*",element:u.jsx(Cee,{})})]})]})})})})})})})})})})})})})}),u.jsx(bz,{})]}),xA=document.getElementById("root");xA?RF.createRoot(xA).render(u.jsx(dne,{})):console.error("Root element not found in the document.");export{YB as A,Cne as B,Une as C,Vne as D,Qc as E,Ua as F,$a as G,$ne as H,Fne as I,y8 as J,Qo as K,Rne as L,h1 as M,G8 as N,zg as O,L1 as P,KN as Q,Dne as R,D8 as S,Ba as T,oj as W,Sne as a,Tne as b,w8 as c,One as d,Bne as e,Ine as f,K9 as g,Vo as h,_8 as i,jne as j,Ene as k,Lne as l,kne as m,M1 as n,Nne as o,xne as p,bne as q,EB as r,v1 as s,x8 as t,b8 as u,Mne as v,_ne as w,Pne as x,Ane as y,w1 as z};
