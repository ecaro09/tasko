var cS=n=>{throw TypeError(n)};var Cw=(n,e,t)=>e.has(n)||cS("Cannot "+t);var oe=(n,e,t)=>(Cw(n,e,"read from private field"),t?t.call(n):e.get(n)),pt=(n,e,t)=>e.has(n)?cS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ye=(n,e,t,r)=>(Cw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Kn=(n,e,t)=>(Cw(n,e,"access private method"),t);var im=(n,e,t,r)=>({set _(s){Ye(n,e,s,t)},get _(){return oe(n,e,r)}});function qL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Fx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function HL(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Aw={exports:{}},hh={},Rw={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function GL(){if(uS)return nt;uS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,_={};function S(W,X,_e){this.props=W,this.context=X,this.refs=_,this.updater=_e||w}S.prototype.isReactComponent={},S.prototype.setState=function(W,X){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,X,"setState")},S.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=S.prototype;function R(W,X,_e){this.props=W,this.context=X,this.refs=_,this.updater=_e||w}var j=R.prototype=new C;j.constructor=R,I(j,S.prototype),j.isPureReactComponent=!0;var D=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(W,X,_e){var we,Re={},De=null,le=null;if(X!=null)for(we in X.ref!==void 0&&(le=X.ref),X.key!==void 0&&(De=""+X.key),X)U.call(X,we)&&!P.hasOwnProperty(we)&&(Re[we]=X[we]);var Se=arguments.length-2;if(Se===1)Re.children=_e;else if(1<Se){for(var Ne=Array(Se),Ve=0;Ve<Se;Ve++)Ne[Ve]=arguments[Ve+2];Re.children=Ne}if(W&&W.defaultProps)for(we in Se=W.defaultProps,Se)Re[we]===void 0&&(Re[we]=Se[we]);return{$$typeof:n,type:W,key:De,ref:le,props:Re,_owner:z.current}}function O(W,X){return{$$typeof:n,type:W.type,key:X,ref:W.ref,props:W.props,_owner:W._owner}}function M(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function F(W){var X={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(_e){return X[_e]})}var $=/\/+/g;function L(W,X){return typeof W=="object"&&W!==null&&W.key!=null?F(""+W.key):X.toString(36)}function ae(W,X,_e,we,Re){var De=typeof W;(De==="undefined"||De==="boolean")&&(W=null);var le=!1;if(W===null)le=!0;else switch(De){case"string":case"number":le=!0;break;case"object":switch(W.$$typeof){case n:case e:le=!0}}if(le)return le=W,Re=Re(le),W=we===""?"."+L(le,0):we,D(Re)?(_e="",W!=null&&(_e=W.replace($,"$&/")+"/"),ae(Re,X,_e,"",function(Ve){return Ve})):Re!=null&&(M(Re)&&(Re=O(Re,_e+(!Re.key||le&&le.key===Re.key?"":(""+Re.key).replace($,"$&/")+"/")+W)),X.push(Re)),1;if(le=0,we=we===""?".":we+":",D(W))for(var Se=0;Se<W.length;Se++){De=W[Se];var Ne=we+L(De,Se);le+=ae(De,X,_e,Ne,Re)}else if(Ne=v(W),typeof Ne=="function")for(W=Ne.call(W),Se=0;!(De=W.next()).done;)De=De.value,Ne=we+L(De,Se++),le+=ae(De,X,_e,Ne,Re);else if(De==="object")throw X=String(W),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return le}function me(W,X,_e){if(W==null)return W;var we=[],Re=0;return ae(W,we,"","",function(De){return X.call(_e,De,Re++)}),we}function xe(W){if(W._status===-1){var X=W._result;X=X(),X.then(function(_e){(W._status===0||W._status===-1)&&(W._status=1,W._result=_e)},function(_e){(W._status===0||W._status===-1)&&(W._status=2,W._result=_e)}),W._status===-1&&(W._status=0,W._result=X)}if(W._status===1)return W._result.default;throw W._result}var ge={current:null},ee={transition:null},K={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ee,ReactCurrentOwner:z};function re(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:me,forEach:function(W,X,_e){me(W,function(){X.apply(this,arguments)},_e)},count:function(W){var X=0;return me(W,function(){X++}),X},toArray:function(W){return me(W,function(X){return X})||[]},only:function(W){if(!M(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},nt.Component=S,nt.Fragment=t,nt.Profiler=s,nt.PureComponent=R,nt.StrictMode=r,nt.Suspense=d,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,nt.act=re,nt.cloneElement=function(W,X,_e){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var we=I({},W.props),Re=W.key,De=W.ref,le=W._owner;if(X!=null){if(X.ref!==void 0&&(De=X.ref,le=z.current),X.key!==void 0&&(Re=""+X.key),W.type&&W.type.defaultProps)var Se=W.type.defaultProps;for(Ne in X)U.call(X,Ne)&&!P.hasOwnProperty(Ne)&&(we[Ne]=X[Ne]===void 0&&Se!==void 0?Se[Ne]:X[Ne])}var Ne=arguments.length-2;if(Ne===1)we.children=_e;else if(1<Ne){Se=Array(Ne);for(var Ve=0;Ve<Ne;Ve++)Se[Ve]=arguments[Ve+2];we.children=Se}return{$$typeof:n,type:W.type,key:Re,ref:De,props:we,_owner:le}},nt.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},nt.createElement=A,nt.createFactory=function(W){var X=A.bind(null,W);return X.type=W,X},nt.createRef=function(){return{current:null}},nt.forwardRef=function(W){return{$$typeof:c,render:W}},nt.isValidElement=M,nt.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:xe}},nt.memo=function(W,X){return{$$typeof:f,type:W,compare:X===void 0?null:X}},nt.startTransition=function(W){var X=ee.transition;ee.transition={};try{W()}finally{ee.transition=X}},nt.unstable_act=re,nt.useCallback=function(W,X){return ge.current.useCallback(W,X)},nt.useContext=function(W){return ge.current.useContext(W)},nt.useDebugValue=function(){},nt.useDeferredValue=function(W){return ge.current.useDeferredValue(W)},nt.useEffect=function(W,X){return ge.current.useEffect(W,X)},nt.useId=function(){return ge.current.useId()},nt.useImperativeHandle=function(W,X,_e){return ge.current.useImperativeHandle(W,X,_e)},nt.useInsertionEffect=function(W,X){return ge.current.useInsertionEffect(W,X)},nt.useLayoutEffect=function(W,X){return ge.current.useLayoutEffect(W,X)},nt.useMemo=function(W,X){return ge.current.useMemo(W,X)},nt.useReducer=function(W,X,_e){return ge.current.useReducer(W,X,_e)},nt.useRef=function(W){return ge.current.useRef(W)},nt.useState=function(W){return ge.current.useState(W)},nt.useSyncExternalStore=function(W,X,_e){return ge.current.useSyncExternalStore(W,X,_e)},nt.useTransition=function(){return ge.current.useTransition()},nt.version="18.3.1",nt}var dS;function Ux(){return dS||(dS=1,Rw.exports=GL()),Rw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS;function KL(){if(hS)return hh;hS=1;var n=Ux(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,f){var p,g={},v=null,w=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(w=d.ref);for(p in d)r.call(d,p)&&!i.hasOwnProperty(p)&&(g[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:c,key:v,ref:w,props:g,_owner:s.current}}return hh.Fragment=t,hh.jsx=a,hh.jsxs=a,hh}var fS;function YL(){return fS||(fS=1,Aw.exports=KL()),Aw.exports}var u=YL(),om={},Nw={exports:{}},_r={},jw={exports:{}},Ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function QL(){return pS||(pS=1,function(n){function e(ee,K){var re=ee.length;ee.push(K);e:for(;0<re;){var W=re-1>>>1,X=ee[W];if(0<s(X,K))ee[W]=K,ee[re]=X,re=W;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var K=ee[0],re=ee.pop();if(re!==K){ee[0]=re;e:for(var W=0,X=ee.length,_e=X>>>1;W<_e;){var we=2*(W+1)-1,Re=ee[we],De=we+1,le=ee[De];if(0>s(Re,re))De<X&&0>s(le,Re)?(ee[W]=le,ee[De]=re,W=De):(ee[W]=Re,ee[we]=re,W=we);else if(De<X&&0>s(le,re))ee[W]=le,ee[De]=re,W=De;else break e}}return K}function s(ee,K){var re=ee.sortIndex-K.sortIndex;return re!==0?re:ee.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var d=[],f=[],p=1,g=null,v=3,w=!1,I=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ee){for(var K=t(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=ee)r(f),K.sortIndex=K.expirationTime,e(d,K);else break;K=t(f)}}function D(ee){if(_=!1,j(ee),!I)if(t(d)!==null)I=!0,xe(U);else{var K=t(f);K!==null&&ge(D,K.startTime-ee)}}function U(ee,K){I=!1,_&&(_=!1,C(A),A=-1),w=!0;var re=v;try{for(j(K),g=t(d);g!==null&&(!(g.expirationTime>K)||ee&&!F());){var W=g.callback;if(typeof W=="function"){g.callback=null,v=g.priorityLevel;var X=W(g.expirationTime<=K);K=n.unstable_now(),typeof X=="function"?g.callback=X:g===t(d)&&r(d),j(K)}else r(d);g=t(d)}if(g!==null)var _e=!0;else{var we=t(f);we!==null&&ge(D,we.startTime-K),_e=!1}return _e}finally{g=null,v=re,w=!1}}var z=!1,P=null,A=-1,O=5,M=-1;function F(){return!(n.unstable_now()-M<O)}function $(){if(P!==null){var ee=n.unstable_now();M=ee;var K=!0;try{K=P(!0,ee)}finally{K?L():(z=!1,P=null)}}else z=!1}var L;if(typeof R=="function")L=function(){R($)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,me=ae.port2;ae.port1.onmessage=$,L=function(){me.postMessage(null)}}else L=function(){S($,0)};function xe(ee){P=ee,z||(z=!0,L())}function ge(ee,K){A=S(function(){ee(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){I||w||(I=!0,xe(U))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var re=v;v=K;try{return ee()}finally{v=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,K){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var re=v;v=ee;try{return K()}finally{v=re}},n.unstable_scheduleCallback=function(ee,K,re){var W=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?W+re:W):re=W,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=re+X,ee={id:p++,callback:K,priorityLevel:ee,startTime:re,expirationTime:X,sortIndex:-1},re>W?(ee.sortIndex=re,e(f,ee),t(d)===null&&ee===t(f)&&(_?(C(A),A=-1):_=!0,ge(D,re-W))):(ee.sortIndex=X,e(d,ee),I||w||(I=!0,xe(U))),ee},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ee){var K=v;return function(){var re=v;v=K;try{return ee.apply(this,arguments)}finally{v=re}}}}(Ow)),Ow}var mS;function JL(){return mS||(mS=1,jw.exports=QL()),jw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function XL(){if(gS)return _r;gS=1;var n=Ux(),e=JL();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(s[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(o){return d.call(g,o)?!0:d.call(p,o)?!1:f.test(o)?g[o]=!0:(p[o]=!0,!1)}function w(o,l,h,y){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function I(o,l,h,y){if(l===null||typeof l>"u"||w(o,l,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(o,l,h,y,x,E,N){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=E,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new _(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];S[l]=new _(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new _(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new _(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new _(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new _(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new _(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new _(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new _(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function R(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(C,R);S[l]=new _(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(C,R);S[l]=new _(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(C,R);S[l]=new _(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new _(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new _(o,1,!1,o.toLowerCase(),null,!0,!0)});function j(o,l,h,y){var x=S.hasOwnProperty(l)?S[l]:null;(x!==null?x.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(I(l,h,x,y)&&(h=null),y||x===null?v(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):x.mustUseProperty?o[x.propertyName]=h===null?x.type===3?!1:"":h:(l=x.attributeName,y=x.attributeNamespace,h===null?o.removeAttribute(l):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,y?o.setAttributeNS(y,l,h):o.setAttribute(l,h))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ee=Symbol.iterator;function K(o){return o===null||typeof o!="object"?null:(o=ee&&o[ee]||o["@@iterator"],typeof o=="function"?o:null)}var re=Object.assign,W;function X(o){if(W===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+o}var _e=!1;function we(o,l){if(!o||_e)return"";_e=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(te){var y=te}Reflect.construct(o,[],l)}else{try{l.call()}catch(te){y=te}o.call(l.prototype)}else{try{throw Error()}catch(te){y=te}o()}}catch(te){if(te&&y&&typeof te.stack=="string"){for(var x=te.stack.split(`
`),E=y.stack.split(`
`),N=x.length-1,B=E.length-1;1<=N&&0<=B&&x[N]!==E[B];)B--;for(;1<=N&&0<=B;N--,B--)if(x[N]!==E[B]){if(N!==1||B!==1)do if(N--,B--,0>B||x[N]!==E[B]){var q=`
`+x[N].replace(" at new "," at ");return o.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",o.displayName)),q}while(1<=N&&0<=B);break}}}finally{_e=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?X(o):""}function Re(o){switch(o.tag){case 5:return X(o.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return o=we(o.type,!1),o;case 11:return o=we(o.type.render,!1),o;case 1:return o=we(o.type,!0),o;default:return""}}function De(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case z:return"Portal";case O:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case ae:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case F:return(o.displayName||"Context")+".Consumer";case M:return(o._context.displayName||"Context")+".Provider";case $:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case me:return l=o.displayName||null,l!==null?l:De(o.type)||"Memo";case xe:l=o._payload,o=o._init;try{return De(o(l))}catch{}}return null}function le(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(l);case 8:return l===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Se(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ne(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ve(o){var l=Ne(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,E=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(N){y=""+N,E.call(this,N)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(N){y=""+N},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function He(o){o._valueTracker||(o._valueTracker=Ve(o))}function Xe(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return o&&(y=Ne(o)?o.checked?"true":"false":o.value),o=y,o!==h?(l.setValue(o),!0):!1}function mt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function zt(o,l){var h=l.checked;return re({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function pr(o,l){var h=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;h=Se(l.value!=null?l.value:h),o._wrapperState={initialChecked:y,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function An(o,l){l=l.checked,l!=null&&j(o,"checked",l,!1)}function Rn(o,l){An(o,l);var h=Se(l.value),y=l.type;if(h!=null)y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?ht(o,l.type,h):l.hasOwnProperty("defaultValue")&&ht(o,l.type,Se(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Cr(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function ht(o,l,h){(l!=="number"||mt(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var jt=Array.isArray;function Nn(o,l,h,y){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&y&&(o[h].defaultSelected=!0)}else{for(h=""+Se(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,y&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function _o(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ar(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(jt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:Se(h)}}function hc(o,l){var h=Se(l.value),y=Se(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),y!=null&&(o.defaultValue=""+y)}function Us(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function bn(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rr(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?bn(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var $s,fc=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,y,x){MSApp.execUnsafeLocalFunction(function(){return o(l,h,y,x)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=$s.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Qr(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wa=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(o){Wa.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Bs[l]=Bs[o]})});function Jr(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Bs.hasOwnProperty(o)&&Bs[o]?(""+l).trim():l+"px"}function Nr(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var y=h.indexOf("--")===0,x=Jr(h,l[h],y);h==="float"&&(h="cssFloat"),y?o.setProperty(h,x):o[h]=x}}var bo=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(o,l){if(l){if(bo[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Eo(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zs=null;function Ai(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Xr=null,ws=null,It=null;function mr(o){if(o=Jd(o)){if(typeof Xr!="function")throw Error(t(280));var l=o.stateNode;l&&(l=xp(l),Xr(o.stateNode,o.type,l))}}function Ws(o){ws?It?It.push(o):It=[o]:ws=o}function Fe(){if(ws){var o=ws,l=It;if(It=ws=null,mr(o),l)for(o=0;o<l.length;o++)mr(l[o])}}function ut(o,l){return o(l)}function xt(){}var Wt=!1;function Un(o,l,h){if(Wt)return o(l,h);Wt=!0;try{return ut(o,l,h)}finally{Wt=!1,(ws!==null||It!==null)&&(xt(),Fe())}}function $n(o,l){var h=o.stateNode;if(h===null)return null;var y=xp(h);if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var Bn=!1;if(c)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{Bn=!1}function jr(o,l,h,y,x,E,N,B,q){var te=Array.prototype.slice.call(arguments,3);try{l.apply(h,te)}catch(ue){this.onError(ue)}}var Ri=!1,qs=null,pc=!1,Zr=null,Xf={onError:function(o){Ri=!0,qs=o}};function Zf(o,l,h,y,x,E,N,B,q){Ri=!1,qs=null,jr.apply(Xf,arguments)}function Sd(o,l,h,y,x,E,N,B,q){if(Zf.apply(this,arguments),Ri){if(Ri){var te=qs;Ri=!1,qs=null}else throw Error(t(198));pc||(pc=!0,Zr=te)}}function xs(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function Id(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function ep(o){if(xs(o)!==o)throw Error(t(188))}function tp(o){var l=o.alternate;if(!l){if(l=xs(o),l===null)throw Error(t(188));return l!==o?null:o}for(var h=o,y=l;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(y=x.return,y!==null){h=y;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return ep(x),o;if(E===y)return ep(x),l;E=E.sibling}throw Error(t(188))}if(h.return!==y.return)h=x,y=E;else{for(var N=!1,B=x.child;B;){if(B===h){N=!0,h=x,y=E;break}if(B===y){N=!0,y=x,h=E;break}B=B.sibling}if(!N){for(B=E.child;B;){if(B===h){N=!0,h=E,y=x;break}if(B===y){N=!0,y=E,h=x;break}B=B.sibling}if(!N)throw Error(t(189))}}if(h.alternate!==y)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?o:l}function np(o){return o=tp(o),o!==null?qa(o):null}function qa(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=qa(o);if(l!==null)return l;o=o.sibling}return null}var kd=e.unstable_scheduleCallback,mc=e.unstable_cancelCallback,Ha=e.unstable_shouldYield,Ni=e.unstable_requestPaint,Ct=e.unstable_now,ov=e.unstable_getCurrentPriorityLevel,gc=e.unstable_ImmediatePriority,Pd=e.unstable_UserBlockingPriority,Ga=e.unstable_NormalPriority,Cd=e.unstable_LowPriority,yc=e.unstable_IdlePriority,Ka=null,Or=null;function rp(o){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(Ka,o,void 0,(o.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:Ya,Hs=Math.log,es=Math.LN2;function Ya(o){return o>>>=0,o===0?32:31-(Hs(o)/es|0)|0}var Gs=64,To=4194304;function gt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ji(o,l){var h=o.pendingLanes;if(h===0)return 0;var y=0,x=o.suspendedLanes,E=o.pingedLanes,N=h&268435455;if(N!==0){var B=N&~x;B!==0?y=gt(B):(E&=N,E!==0&&(y=gt(E)))}else N=h&~x,N!==0?y=gt(N):E!==0&&(y=gt(E));if(y===0)return 0;if(l!==0&&l!==y&&(l&x)===0&&(x=y&-y,E=l&-l,x>=E||x===16&&(E&4194240)!==0))return l;if((y&4)!==0&&(y|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=y;0<l;)h=31-Dr(l),x=1<<h,y|=o[h],l&=~x;return y}function Qa(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(o,l){for(var h=o.suspendedLanes,y=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes;0<E;){var N=31-Dr(E),B=1<<N,q=x[N];q===-1?((B&h)===0||(B&y)!==0)&&(x[N]=Qa(B,l)):q<=l&&(o.expiredLanes|=B),E&=~B}}function Ad(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Rd(){var o=Gs;return Gs<<=1,(Gs&4194240)===0&&(Gs=64),o}function Nd(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Xa(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Dr(l),o[l]=h}function av(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<h;){var x=31-Dr(h),E=1<<x;l[x]=0,y[x]=-1,o[x]=-1,h&=~E}}function jd(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var y=31-Dr(h),x=1<<y;x&l|o[y]&l&&(o[y]|=l),h&=~x}}var ot=0;function Ks(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Od,vc,Dd,Md,Ld,Ys=!1,wc=[],Qs=null,Js=null,jn=null,Za=new Map,Oi=new Map,Mr=[],sp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function So(o,l){switch(o){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Za.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(l.pointerId)}}function _s(o,l,h,y,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:E,targetContainers:[x]},l!==null&&(l=Jd(l),l!==null&&vc(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function ip(o,l,h,y,x){switch(l){case"focusin":return Qs=_s(Qs,o,l,h,y,x),!0;case"dragenter":return Js=_s(Js,o,l,h,y,x),!0;case"mouseover":return jn=_s(jn,o,l,h,y,x),!0;case"pointerover":var E=x.pointerId;return Za.set(E,_s(Za.get(E)||null,o,l,h,y,x)),!0;case"gotpointercapture":return E=x.pointerId,Oi.set(E,_s(Oi.get(E)||null,o,l,h,y,x)),!0}return!1}function xc(o){var l=rl(o.target);if(l!==null){var h=xs(l);if(h!==null){if(l=h.tag,l===13){if(l=Id(h),l!==null){o.blockedOn=l,Ld(o.priority,function(){Dd(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function St(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=_c(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);zs=y,h.target.dispatchEvent(y),zs=null}else return l=Jd(h),l!==null&&vc(l),o.blockedOn=h,!1;l.shift()}return!0}function op(o,l,h){St(o)&&h.delete(l)}function lv(){Ys=!1,Qs!==null&&St(Qs)&&(Qs=null),Js!==null&&St(Js)&&(Js=null),jn!==null&&St(jn)&&(jn=null),Za.forEach(op),Oi.forEach(op)}function Io(o,l){o.blockedOn===l&&(o.blockedOn=null,Ys||(Ys=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lv)))}function ko(o){function l(x){return Io(x,o)}if(0<wc.length){Io(wc[0],o);for(var h=1;h<wc.length;h++){var y=wc[h];y.blockedOn===o&&(y.blockedOn=null)}}for(Qs!==null&&Io(Qs,o),Js!==null&&Io(Js,o),jn!==null&&Io(jn,o),Za.forEach(l),Oi.forEach(l),h=0;h<Mr.length;h++)y=Mr[h],y.blockedOn===o&&(y.blockedOn=null);for(;0<Mr.length&&(h=Mr[0],h.blockedOn===null);)xc(h),h.blockedOn===null&&Mr.shift()}var Di=D.ReactCurrentBatchConfig,Mi=!0;function Xs(o,l,h,y){var x=ot,E=Di.transition;Di.transition=null;try{ot=1,Vd(o,l,h,y)}finally{ot=x,Di.transition=E}}function ap(o,l,h,y){var x=ot,E=Di.transition;Di.transition=null;try{ot=4,Vd(o,l,h,y)}finally{ot=x,Di.transition=E}}function Vd(o,l,h,y){if(Mi){var x=_c(o,l,h,y);if(x===null)wv(o,l,y,Zs,h),So(o,y);else if(ip(x,o,l,h,y))y.stopPropagation();else if(So(o,y),l&4&&-1<sp.indexOf(o)){for(;x!==null;){var E=Jd(x);if(E!==null&&Od(E),E=_c(o,l,h,y),E===null&&wv(o,l,y,Zs,h),E===x)break;x=E}x!==null&&y.stopPropagation()}else wv(o,l,y,null,h)}}var Zs=null;function _c(o,l,h,y){if(Zs=null,o=Ai(y),o=rl(o),o!==null)if(l=xs(o),l===null)o=null;else if(h=l.tag,h===13){if(o=Id(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Zs=o,null}function bc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ov()){case gc:return 1;case Pd:return 4;case Ga:case Cd:return 16;case yc:return 536870912;default:return 16}default:return 16}}var Lr=null,Ec=null,Li=null;function lp(){if(Li)return Li;var o,l=Ec,h=l.length,y,x="value"in Lr?Lr.value:Lr.textContent,E=x.length;for(o=0;o<h&&l[o]===x[o];o++);var N=h-o;for(y=1;y<=N&&l[h-y]===x[E-y];y++);return Li=x.slice(o,1<y?1-y:void 0)}function el(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ei(){return!0}function Fd(){return!1}function zn(o){function l(h,y,x,E,N){this._reactName=h,this._targetInst=x,this.type=y,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(h=o[B],this[B]=h?h(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ei:Fd,this.isPropagationStopped=Fd,this}return re(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),l}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=zn(ti),Po=re({},ti,{view:0,detail:0}),Tc=zn(Po),Sc,Ic,Vr,nl=re({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Vr&&(Vr&&o.type==="mousemove"?(Sc=o.screenX-Vr.screenX,Ic=o.screenY-Vr.screenY):Ic=Sc=0,Vr=o),Sc)},movementY:function(o){return"movementY"in o?o.movementY:Ic}}),Ud=zn(nl),cp=re({},nl,{dataTransfer:0}),up=zn(cp),kc=re({},Po,{relatedTarget:0}),On=zn(kc),dp=re({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),hp=zn(dp),Co=re({},ti,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),m=zn(Co),T=re({},ti,{data:0}),k=zn(T),V={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ve(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=ne[o])?!!l[o]:!1}function Ge(){return ve}var Zt=re({},Po,{key:function(o){if(o.key){var l=V[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=el(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?J[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(o){return o.type==="keypress"?el(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?el(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_t=zn(Zt),rn=re({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fr=zn(rn),Vi=re({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),ni=zn(Vi),ri=re({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pc=zn(ri),$d=re({},nl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),FM=zn($d),UM=[9,13,27,32],cv=c&&"CompositionEvent"in window,Bd=null;c&&"documentMode"in document&&(Bd=document.documentMode);var $M=c&&"TextEvent"in window&&!Bd,tE=c&&(!cv||Bd&&8<Bd&&11>=Bd),nE=" ",rE=!1;function sE(o,l){switch(o){case"keyup":return UM.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Cc=!1;function BM(o,l){switch(o){case"compositionend":return iE(l);case"keypress":return l.which!==32?null:(rE=!0,nE);case"textInput":return o=l.data,o===nE&&rE?null:o;default:return null}}function zM(o,l){if(Cc)return o==="compositionend"||!cv&&sE(o,l)?(o=lp(),Li=Ec=Lr=null,Cc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tE&&l.locale!=="ko"?null:l.data;default:return null}}var WM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!WM[o.type]:l==="textarea"}function aE(o,l,h,y){Ws(y),l=yp(l,"onChange"),0<l.length&&(h=new tl("onChange","change",null,h,y),o.push({event:h,listeners:l}))}var zd=null,Wd=null;function qM(o){SE(o,0)}function fp(o){var l=Oc(o);if(Xe(l))return o}function HM(o,l){if(o==="change")return l}var lE=!1;if(c){var uv;if(c){var dv="oninput"in document;if(!dv){var cE=document.createElement("div");cE.setAttribute("oninput","return;"),dv=typeof cE.oninput=="function"}uv=dv}else uv=!1;lE=uv&&(!document.documentMode||9<document.documentMode)}function uE(){zd&&(zd.detachEvent("onpropertychange",dE),Wd=zd=null)}function dE(o){if(o.propertyName==="value"&&fp(Wd)){var l=[];aE(l,Wd,o,Ai(o)),Un(qM,l)}}function GM(o,l,h){o==="focusin"?(uE(),zd=l,Wd=h,zd.attachEvent("onpropertychange",dE)):o==="focusout"&&uE()}function KM(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return fp(Wd)}function YM(o,l){if(o==="click")return fp(l)}function QM(o,l){if(o==="input"||o==="change")return fp(l)}function JM(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var bs=typeof Object.is=="function"?Object.is:JM;function qd(o,l){if(bs(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var x=h[y];if(!d.call(l,x)||!bs(o[x],l[x]))return!1}return!0}function hE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fE(o,l){var h=hE(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=l&&y>=l)return{node:h,offset:l-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=hE(h)}}function pE(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?pE(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function mE(){for(var o=window,l=mt();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=mt(o.document)}return l}function hv(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function XM(o){var l=mE(),h=o.focusedElem,y=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&pE(h.ownerDocument.documentElement,h)){if(y!==null&&hv(h)){if(l=y.start,o=y.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var x=h.textContent.length,E=Math.min(y.start,x);y=y.end===void 0?E:Math.min(y.end,x),!o.extend&&E>y&&(x=y,y=E,E=x),x=fE(h,E);var N=fE(h,y);x&&N&&(o.rangeCount!==1||o.anchorNode!==x.node||o.anchorOffset!==x.offset||o.focusNode!==N.node||o.focusOffset!==N.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),o.removeAllRanges(),E>y?(o.addRange(l),o.extend(N.node,N.offset)):(l.setEnd(N.node,N.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ZM=c&&"documentMode"in document&&11>=document.documentMode,Ac=null,fv=null,Hd=null,pv=!1;function gE(o,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;pv||Ac==null||Ac!==mt(y)||(y=Ac,"selectionStart"in y&&hv(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Hd&&qd(Hd,y)||(Hd=y,y=yp(fv,"onSelect"),0<y.length&&(l=new tl("onSelect","select",null,l,h),o.push({event:l,listeners:y}),l.target=Ac)))}function pp(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Rc={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},mv={},yE={};c&&(yE=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function mp(o){if(mv[o])return mv[o];if(!Rc[o])return o;var l=Rc[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in yE)return mv[o]=l[h];return o}var vE=mp("animationend"),wE=mp("animationiteration"),xE=mp("animationstart"),_E=mp("transitionend"),bE=new Map,EE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(o,l){bE.set(o,l),i(l,[o])}for(var gv=0;gv<EE.length;gv++){var yv=EE[gv],eL=yv.toLowerCase(),tL=yv[0].toUpperCase()+yv.slice(1);Ao(eL,"on"+tL)}Ao(vE,"onAnimationEnd"),Ao(wE,"onAnimationIteration"),Ao(xE,"onAnimationStart"),Ao("dblclick","onDoubleClick"),Ao("focusin","onFocus"),Ao("focusout","onBlur"),Ao(_E,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function TE(o,l,h){var y=o.type||"unknown-event";o.currentTarget=h,Sd(y,l,void 0,o),o.currentTarget=null}function SE(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],x=y.event;y=y.listeners;e:{var E=void 0;if(l)for(var N=y.length-1;0<=N;N--){var B=y[N],q=B.instance,te=B.currentTarget;if(B=B.listener,q!==E&&x.isPropagationStopped())break e;TE(x,B,te),E=q}else for(N=0;N<y.length;N++){if(B=y[N],q=B.instance,te=B.currentTarget,B=B.listener,q!==E&&x.isPropagationStopped())break e;TE(x,B,te),E=q}}}if(pc)throw o=Zr,pc=!1,Zr=null,o}function At(o,l){var h=l[Sv];h===void 0&&(h=l[Sv]=new Set);var y=o+"__bubble";h.has(y)||(IE(l,o,2,!1),h.add(y))}function vv(o,l,h){var y=0;l&&(y|=4),IE(h,o,y,l)}var gp="_reactListening"+Math.random().toString(36).slice(2);function Kd(o){if(!o[gp]){o[gp]=!0,r.forEach(function(h){h!=="selectionchange"&&(nL.has(h)||vv(h,!1,o),vv(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[gp]||(l[gp]=!0,vv("selectionchange",!1,l))}}function IE(o,l,h,y){switch(bc(l)){case 1:var x=Xs;break;case 4:x=ap;break;default:x=Vd}h=x.bind(null,l,h,o),x=void 0,!Bn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),y?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function wv(o,l,h,y,x){var E=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var N=y.tag;if(N===3||N===4){var B=y.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(N===4)for(N=y.return;N!==null;){var q=N.tag;if((q===3||q===4)&&(q=N.stateNode.containerInfo,q===x||q.nodeType===8&&q.parentNode===x))return;N=N.return}for(;B!==null;){if(N=rl(B),N===null)return;if(q=N.tag,q===5||q===6){y=E=N;continue e}B=B.parentNode}}y=y.return}Un(function(){var te=E,ue=Ai(h),de=[];e:{var ce=bE.get(o);if(ce!==void 0){var Te=tl,ke=o;switch(o){case"keypress":if(el(h)===0)break e;case"keydown":case"keyup":Te=_t;break;case"focusin":ke="focus",Te=On;break;case"focusout":ke="blur",Te=On;break;case"beforeblur":case"afterblur":Te=On;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=ni;break;case vE:case wE:case xE:Te=hp;break;case _E:Te=Pc;break;case"scroll":Te=Tc;break;case"wheel":Te=FM;break;case"copy":case"cut":case"paste":Te=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Fr}var je=(l&4)!==0,en=!je&&o==="scroll",Q=je?ce!==null?ce+"Capture":null:ce;je=[];for(var G=te,Z;G!==null;){Z=G;var pe=Z.stateNode;if(Z.tag===5&&pe!==null&&(Z=pe,Q!==null&&(pe=$n(G,Q),pe!=null&&je.push(Yd(G,pe,Z)))),en)break;G=G.return}0<je.length&&(ce=new Te(ce,ke,null,h,ue),de.push({event:ce,listeners:je}))}}if((l&7)===0){e:{if(ce=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",ce&&h!==zs&&(ke=h.relatedTarget||h.fromElement)&&(rl(ke)||ke[Fi]))break e;if((Te||ce)&&(ce=ue.window===ue?ue:(ce=ue.ownerDocument)?ce.defaultView||ce.parentWindow:window,Te?(ke=h.relatedTarget||h.toElement,Te=te,ke=ke?rl(ke):null,ke!==null&&(en=xs(ke),ke!==en||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(Te=null,ke=te),Te!==ke)){if(je=Ud,pe="onMouseLeave",Q="onMouseEnter",G="mouse",(o==="pointerout"||o==="pointerover")&&(je=Fr,pe="onPointerLeave",Q="onPointerEnter",G="pointer"),en=Te==null?ce:Oc(Te),Z=ke==null?ce:Oc(ke),ce=new je(pe,G+"leave",Te,h,ue),ce.target=en,ce.relatedTarget=Z,pe=null,rl(ue)===te&&(je=new je(Q,G+"enter",ke,h,ue),je.target=Z,je.relatedTarget=en,pe=je),en=pe,Te&&ke)t:{for(je=Te,Q=ke,G=0,Z=je;Z;Z=Nc(Z))G++;for(Z=0,pe=Q;pe;pe=Nc(pe))Z++;for(;0<G-Z;)je=Nc(je),G--;for(;0<Z-G;)Q=Nc(Q),Z--;for(;G--;){if(je===Q||Q!==null&&je===Q.alternate)break t;je=Nc(je),Q=Nc(Q)}je=null}else je=null;Te!==null&&kE(de,ce,Te,je,!1),ke!==null&&en!==null&&kE(de,en,ke,je,!0)}}e:{if(ce=te?Oc(te):window,Te=ce.nodeName&&ce.nodeName.toLowerCase(),Te==="select"||Te==="input"&&ce.type==="file")var Oe=HM;else if(oE(ce))if(lE)Oe=QM;else{Oe=KM;var Ue=GM}else(Te=ce.nodeName)&&Te.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Oe=YM);if(Oe&&(Oe=Oe(o,te))){aE(de,Oe,h,ue);break e}Ue&&Ue(o,ce,te),o==="focusout"&&(Ue=ce._wrapperState)&&Ue.controlled&&ce.type==="number"&&ht(ce,"number",ce.value)}switch(Ue=te?Oc(te):window,o){case"focusin":(oE(Ue)||Ue.contentEditable==="true")&&(Ac=Ue,fv=te,Hd=null);break;case"focusout":Hd=fv=Ac=null;break;case"mousedown":pv=!0;break;case"contextmenu":case"mouseup":case"dragend":pv=!1,gE(de,h,ue);break;case"selectionchange":if(ZM)break;case"keydown":case"keyup":gE(de,h,ue)}var $e;if(cv)e:{switch(o){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Cc?sE(o,h)&&(ze="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(ze="onCompositionStart");ze&&(tE&&h.locale!=="ko"&&(Cc||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Cc&&($e=lp()):(Lr=ue,Ec="value"in Lr?Lr.value:Lr.textContent,Cc=!0)),Ue=yp(te,ze),0<Ue.length&&(ze=new k(ze,o,null,h,ue),de.push({event:ze,listeners:Ue}),$e?ze.data=$e:($e=iE(h),$e!==null&&(ze.data=$e)))),($e=$M?BM(o,h):zM(o,h))&&(te=yp(te,"onBeforeInput"),0<te.length&&(ue=new k("onBeforeInput","beforeinput",null,h,ue),de.push({event:ue,listeners:te}),ue.data=$e))}SE(de,l)})}function Yd(o,l,h){return{instance:o,listener:l,currentTarget:h}}function yp(o,l){for(var h=l+"Capture",y=[];o!==null;){var x=o,E=x.stateNode;x.tag===5&&E!==null&&(x=E,E=$n(o,h),E!=null&&y.unshift(Yd(o,E,x)),E=$n(o,l),E!=null&&y.push(Yd(o,E,x))),o=o.return}return y}function Nc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function kE(o,l,h,y,x){for(var E=l._reactName,N=[];h!==null&&h!==y;){var B=h,q=B.alternate,te=B.stateNode;if(q!==null&&q===y)break;B.tag===5&&te!==null&&(B=te,x?(q=$n(h,E),q!=null&&N.unshift(Yd(h,q,B))):x||(q=$n(h,E),q!=null&&N.push(Yd(h,q,B)))),h=h.return}N.length!==0&&o.push({event:l,listeners:N})}var rL=/\r\n?/g,sL=/\u0000|\uFFFD/g;function PE(o){return(typeof o=="string"?o:""+o).replace(rL,`
`).replace(sL,"")}function vp(o,l,h){if(l=PE(l),PE(o)!==l&&h)throw Error(t(425))}function wp(){}var xv=null,_v=null;function bv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ev=typeof setTimeout=="function"?setTimeout:void 0,iL=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,oL=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(o){return CE.resolve(null).then(o).catch(aL)}:Ev;function aL(o){setTimeout(function(){throw o})}function Tv(o,l){var h=l,y=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(y===0){o.removeChild(x),ko(l);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=x}while(h);ko(l)}function Ro(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function AE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var jc=Math.random().toString(36).slice(2),si="__reactFiber$"+jc,Qd="__reactProps$"+jc,Fi="__reactContainer$"+jc,Sv="__reactEvents$"+jc,lL="__reactListeners$"+jc,cL="__reactHandles$"+jc;function rl(o){var l=o[si];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Fi]||h[si]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=AE(o);o!==null;){if(h=o[si])return h;o=AE(o)}return l}o=h,h=o.parentNode}return null}function Jd(o){return o=o[si]||o[Fi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Oc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function xp(o){return o[Qd]||null}var Iv=[],Dc=-1;function No(o){return{current:o}}function Rt(o){0>Dc||(o.current=Iv[Dc],Iv[Dc]=null,Dc--)}function kt(o,l){Dc++,Iv[Dc]=o.current,o.current=l}var jo={},Wn=No(jo),gr=No(!1),sl=jo;function Mc(o,l){var h=o.type.contextTypes;if(!h)return jo;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var x={},E;for(E in h)x[E]=l[E];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=x),x}function yr(o){return o=o.childContextTypes,o!=null}function _p(){Rt(gr),Rt(Wn)}function RE(o,l,h){if(Wn.current!==jo)throw Error(t(168));kt(Wn,l),kt(gr,h)}function NE(o,l,h){var y=o.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var x in y)if(!(x in l))throw Error(t(108,le(o)||"Unknown",x));return re({},h,y)}function bp(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||jo,sl=Wn.current,kt(Wn,o),kt(gr,gr.current),!0}function jE(o,l,h){var y=o.stateNode;if(!y)throw Error(t(169));h?(o=NE(o,l,sl),y.__reactInternalMemoizedMergedChildContext=o,Rt(gr),Rt(Wn),kt(Wn,o)):Rt(gr),kt(gr,h)}var Ui=null,Ep=!1,kv=!1;function OE(o){Ui===null?Ui=[o]:Ui.push(o)}function uL(o){Ep=!0,OE(o)}function Oo(){if(!kv&&Ui!==null){kv=!0;var o=0,l=ot;try{var h=Ui;for(ot=1;o<h.length;o++){var y=h[o];do y=y(!0);while(y!==null)}Ui=null,Ep=!1}catch(x){throw Ui!==null&&(Ui=Ui.slice(o+1)),kd(gc,Oo),x}finally{ot=l,kv=!1}}return null}var Lc=[],Vc=0,Tp=null,Sp=0,ts=[],ns=0,il=null,$i=1,Bi="";function ol(o,l){Lc[Vc++]=Sp,Lc[Vc++]=Tp,Tp=o,Sp=l}function DE(o,l,h){ts[ns++]=$i,ts[ns++]=Bi,ts[ns++]=il,il=o;var y=$i;o=Bi;var x=32-Dr(y)-1;y&=~(1<<x),h+=1;var E=32-Dr(l)+x;if(30<E){var N=x-x%5;E=(y&(1<<N)-1).toString(32),y>>=N,x-=N,$i=1<<32-Dr(l)+x|h<<x|y,Bi=E+o}else $i=1<<E|h<<x|y,Bi=o}function Pv(o){o.return!==null&&(ol(o,1),DE(o,1,0))}function Cv(o){for(;o===Tp;)Tp=Lc[--Vc],Lc[Vc]=null,Sp=Lc[--Vc],Lc[Vc]=null;for(;o===il;)il=ts[--ns],ts[ns]=null,Bi=ts[--ns],ts[ns]=null,$i=ts[--ns],ts[ns]=null}var Ur=null,$r=null,Ot=!1,Es=null;function ME(o,l){var h=os(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function LE(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Ur=o,$r=Ro(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Ur=o,$r=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=il!==null?{id:$i,overflow:Bi}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=os(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,Ur=o,$r=null,!0):!1;default:return!1}}function Av(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Rv(o){if(Ot){var l=$r;if(l){var h=l;if(!LE(o,l)){if(Av(o))throw Error(t(418));l=Ro(h.nextSibling);var y=Ur;l&&LE(o,l)?ME(y,h):(o.flags=o.flags&-4097|2,Ot=!1,Ur=o)}}else{if(Av(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ot=!1,Ur=o}}}function VE(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Ur=o}function Ip(o){if(o!==Ur)return!1;if(!Ot)return VE(o),Ot=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!bv(o.type,o.memoizedProps)),l&&(l=$r)){if(Av(o))throw FE(),Error(t(418));for(;l;)ME(o,l),l=Ro(l.nextSibling)}if(VE(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){$r=Ro(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}$r=null}}else $r=Ur?Ro(o.stateNode.nextSibling):null;return!0}function FE(){for(var o=$r;o;)o=Ro(o.nextSibling)}function Fc(){$r=Ur=null,Ot=!1}function Nv(o){Es===null?Es=[o]:Es.push(o)}var dL=D.ReactCurrentBatchConfig;function Xd(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var y=h.stateNode}if(!y)throw Error(t(147,o));var x=y,E=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(N){var B=x.refs;N===null?delete B[E]:B[E]=N},l._stringRef=E,l)}if(typeof o!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,o))}return o}function kp(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function UE(o){var l=o._init;return l(o._payload)}function $E(o){function l(Q,G){if(o){var Z=Q.deletions;Z===null?(Q.deletions=[G],Q.flags|=16):Z.push(G)}}function h(Q,G){if(!o)return null;for(;G!==null;)l(Q,G),G=G.sibling;return null}function y(Q,G){for(Q=new Map;G!==null;)G.key!==null?Q.set(G.key,G):Q.set(G.index,G),G=G.sibling;return Q}function x(Q,G){return Q=Bo(Q,G),Q.index=0,Q.sibling=null,Q}function E(Q,G,Z){return Q.index=Z,o?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<G?(Q.flags|=2,G):Z):(Q.flags|=2,G)):(Q.flags|=1048576,G)}function N(Q){return o&&Q.alternate===null&&(Q.flags|=2),Q}function B(Q,G,Z,pe){return G===null||G.tag!==6?(G=Ew(Z,Q.mode,pe),G.return=Q,G):(G=x(G,Z),G.return=Q,G)}function q(Q,G,Z,pe){var Oe=Z.type;return Oe===P?ue(Q,G,Z.props.children,pe,Z.key):G!==null&&(G.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===xe&&UE(Oe)===G.type)?(pe=x(G,Z.props),pe.ref=Xd(Q,G,Z),pe.return=Q,pe):(pe=Jp(Z.type,Z.key,Z.props,null,Q.mode,pe),pe.ref=Xd(Q,G,Z),pe.return=Q,pe)}function te(Q,G,Z,pe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Tw(Z,Q.mode,pe),G.return=Q,G):(G=x(G,Z.children||[]),G.return=Q,G)}function ue(Q,G,Z,pe,Oe){return G===null||G.tag!==7?(G=pl(Z,Q.mode,pe,Oe),G.return=Q,G):(G=x(G,Z),G.return=Q,G)}function de(Q,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Ew(""+G,Q.mode,Z),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case U:return Z=Jp(G.type,G.key,G.props,null,Q.mode,Z),Z.ref=Xd(Q,null,G),Z.return=Q,Z;case z:return G=Tw(G,Q.mode,Z),G.return=Q,G;case xe:var pe=G._init;return de(Q,pe(G._payload),Z)}if(jt(G)||K(G))return G=pl(G,Q.mode,Z,null),G.return=Q,G;kp(Q,G)}return null}function ce(Q,G,Z,pe){var Oe=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Oe!==null?null:B(Q,G,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:return Z.key===Oe?q(Q,G,Z,pe):null;case z:return Z.key===Oe?te(Q,G,Z,pe):null;case xe:return Oe=Z._init,ce(Q,G,Oe(Z._payload),pe)}if(jt(Z)||K(Z))return Oe!==null?null:ue(Q,G,Z,pe,null);kp(Q,Z)}return null}function Te(Q,G,Z,pe,Oe){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Q=Q.get(Z)||null,B(G,Q,""+pe,Oe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case U:return Q=Q.get(pe.key===null?Z:pe.key)||null,q(G,Q,pe,Oe);case z:return Q=Q.get(pe.key===null?Z:pe.key)||null,te(G,Q,pe,Oe);case xe:var Ue=pe._init;return Te(Q,G,Z,Ue(pe._payload),Oe)}if(jt(pe)||K(pe))return Q=Q.get(Z)||null,ue(G,Q,pe,Oe,null);kp(G,pe)}return null}function ke(Q,G,Z,pe){for(var Oe=null,Ue=null,$e=G,ze=G=0,In=null;$e!==null&&ze<Z.length;ze++){$e.index>ze?(In=$e,$e=null):In=$e.sibling;var ft=ce(Q,$e,Z[ze],pe);if(ft===null){$e===null&&($e=In);break}o&&$e&&ft.alternate===null&&l(Q,$e),G=E(ft,G,ze),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft,$e=In}if(ze===Z.length)return h(Q,$e),Ot&&ol(Q,ze),Oe;if($e===null){for(;ze<Z.length;ze++)$e=de(Q,Z[ze],pe),$e!==null&&(G=E($e,G,ze),Ue===null?Oe=$e:Ue.sibling=$e,Ue=$e);return Ot&&ol(Q,ze),Oe}for($e=y(Q,$e);ze<Z.length;ze++)In=Te($e,Q,ze,Z[ze],pe),In!==null&&(o&&In.alternate!==null&&$e.delete(In.key===null?ze:In.key),G=E(In,G,ze),Ue===null?Oe=In:Ue.sibling=In,Ue=In);return o&&$e.forEach(function(zo){return l(Q,zo)}),Ot&&ol(Q,ze),Oe}function je(Q,G,Z,pe){var Oe=K(Z);if(typeof Oe!="function")throw Error(t(150));if(Z=Oe.call(Z),Z==null)throw Error(t(151));for(var Ue=Oe=null,$e=G,ze=G=0,In=null,ft=Z.next();$e!==null&&!ft.done;ze++,ft=Z.next()){$e.index>ze?(In=$e,$e=null):In=$e.sibling;var zo=ce(Q,$e,ft.value,pe);if(zo===null){$e===null&&($e=In);break}o&&$e&&zo.alternate===null&&l(Q,$e),G=E(zo,G,ze),Ue===null?Oe=zo:Ue.sibling=zo,Ue=zo,$e=In}if(ft.done)return h(Q,$e),Ot&&ol(Q,ze),Oe;if($e===null){for(;!ft.done;ze++,ft=Z.next())ft=de(Q,ft.value,pe),ft!==null&&(G=E(ft,G,ze),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft);return Ot&&ol(Q,ze),Oe}for($e=y(Q,$e);!ft.done;ze++,ft=Z.next())ft=Te($e,Q,ze,ft.value,pe),ft!==null&&(o&&ft.alternate!==null&&$e.delete(ft.key===null?ze:ft.key),G=E(ft,G,ze),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft);return o&&$e.forEach(function(WL){return l(Q,WL)}),Ot&&ol(Q,ze),Oe}function en(Q,G,Z,pe){if(typeof Z=="object"&&Z!==null&&Z.type===P&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:e:{for(var Oe=Z.key,Ue=G;Ue!==null;){if(Ue.key===Oe){if(Oe=Z.type,Oe===P){if(Ue.tag===7){h(Q,Ue.sibling),G=x(Ue,Z.props.children),G.return=Q,Q=G;break e}}else if(Ue.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===xe&&UE(Oe)===Ue.type){h(Q,Ue.sibling),G=x(Ue,Z.props),G.ref=Xd(Q,Ue,Z),G.return=Q,Q=G;break e}h(Q,Ue);break}else l(Q,Ue);Ue=Ue.sibling}Z.type===P?(G=pl(Z.props.children,Q.mode,pe,Z.key),G.return=Q,Q=G):(pe=Jp(Z.type,Z.key,Z.props,null,Q.mode,pe),pe.ref=Xd(Q,G,Z),pe.return=Q,Q=pe)}return N(Q);case z:e:{for(Ue=Z.key;G!==null;){if(G.key===Ue)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){h(Q,G.sibling),G=x(G,Z.children||[]),G.return=Q,Q=G;break e}else{h(Q,G);break}else l(Q,G);G=G.sibling}G=Tw(Z,Q.mode,pe),G.return=Q,Q=G}return N(Q);case xe:return Ue=Z._init,en(Q,G,Ue(Z._payload),pe)}if(jt(Z))return ke(Q,G,Z,pe);if(K(Z))return je(Q,G,Z,pe);kp(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,G!==null&&G.tag===6?(h(Q,G.sibling),G=x(G,Z),G.return=Q,Q=G):(h(Q,G),G=Ew(Z,Q.mode,pe),G.return=Q,Q=G),N(Q)):h(Q,G)}return en}var Uc=$E(!0),BE=$E(!1),Pp=No(null),Cp=null,$c=null,jv=null;function Ov(){jv=$c=Cp=null}function Dv(o){var l=Pp.current;Rt(Pp),o._currentValue=l}function Mv(o,l,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===h)break;o=o.return}}function Bc(o,l){Cp=o,jv=$c=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(vr=!0),o.firstContext=null)}function rs(o){var l=o._currentValue;if(jv!==o)if(o={context:o,memoizedValue:l,next:null},$c===null){if(Cp===null)throw Error(t(308));$c=o,Cp.dependencies={lanes:0,firstContext:o}}else $c=$c.next=o;return l}var al=null;function Lv(o){al===null?al=[o]:al.push(o)}function zE(o,l,h,y){var x=l.interleaved;return x===null?(h.next=h,Lv(l)):(h.next=x.next,x.next=h),l.interleaved=h,zi(o,y)}function zi(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Do=!1;function Vv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WE(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Wi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Mo(o,l,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(dt&2)!==0){var x=y.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),y.pending=l,zi(o,h)}return x=y.interleaved,x===null?(l.next=l,Lv(y)):(l.next=x.next,x.next=l),y.interleaved=l,zi(o,h)}function Ap(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,jd(o,h)}}function qE(o,l){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var N={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};E===null?x=E=N:E=E.next=N,h=h.next}while(h!==null);E===null?x=E=l:E=E.next=l}else x=E=l;h={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:y.shared,effects:y.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function Rp(o,l,h,y){var x=o.updateQueue;Do=!1;var E=x.firstBaseUpdate,N=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var q=B,te=q.next;q.next=null,N===null?E=te:N.next=te,N=q;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,B=ue.lastBaseUpdate,B!==N&&(B===null?ue.firstBaseUpdate=te:B.next=te,ue.lastBaseUpdate=q))}if(E!==null){var de=x.baseState;N=0,ue=te=q=null,B=E;do{var ce=B.lane,Te=B.eventTime;if((y&ce)===ce){ue!==null&&(ue=ue.next={eventTime:Te,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var ke=o,je=B;switch(ce=l,Te=h,je.tag){case 1:if(ke=je.payload,typeof ke=="function"){de=ke.call(Te,de,ce);break e}de=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=je.payload,ce=typeof ke=="function"?ke.call(Te,de,ce):ke,ce==null)break e;de=re({},de,ce);break e;case 2:Do=!0}}B.callback!==null&&B.lane!==0&&(o.flags|=64,ce=x.effects,ce===null?x.effects=[B]:ce.push(B))}else Te={eventTime:Te,lane:ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ue===null?(te=ue=Te,q=de):ue=ue.next=Te,N|=ce;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;ce=B,B=ce.next,ce.next=null,x.lastBaseUpdate=ce,x.shared.pending=null}}while(!0);if(ue===null&&(q=de),x.baseState=q,x.firstBaseUpdate=te,x.lastBaseUpdate=ue,l=x.shared.interleaved,l!==null){x=l;do N|=x.lane,x=x.next;while(x!==l)}else E===null&&(x.shared.lanes=0);ul|=N,o.lanes=N,o.memoizedState=de}}function HE(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var y=o[l],x=y.callback;if(x!==null){if(y.callback=null,y=h,typeof x!="function")throw Error(t(191,x));x.call(y)}}}var Zd={},ii=No(Zd),eh=No(Zd),th=No(Zd);function ll(o){if(o===Zd)throw Error(t(174));return o}function Fv(o,l){switch(kt(th,l),kt(eh,o),kt(ii,Zd),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Rr(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Rr(l,o)}Rt(ii),kt(ii,l)}function zc(){Rt(ii),Rt(eh),Rt(th)}function GE(o){ll(th.current);var l=ll(ii.current),h=Rr(l,o.type);l!==h&&(kt(eh,o),kt(ii,h))}function Uv(o){eh.current===o&&(Rt(ii),Rt(eh))}var Vt=No(0);function Np(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var $v=[];function Bv(){for(var o=0;o<$v.length;o++)$v[o]._workInProgressVersionPrimary=null;$v.length=0}var jp=D.ReactCurrentDispatcher,zv=D.ReactCurrentBatchConfig,cl=0,Ft=null,pn=null,Tn=null,Op=!1,nh=!1,rh=0,hL=0;function qn(){throw Error(t(321))}function Wv(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!bs(o[h],l[h]))return!1;return!0}function qv(o,l,h,y,x,E){if(cl=E,Ft=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,jp.current=o===null||o.memoizedState===null?gL:yL,o=h(y,x),nh){E=0;do{if(nh=!1,rh=0,25<=E)throw Error(t(301));E+=1,Tn=pn=null,l.updateQueue=null,jp.current=vL,o=h(y,x)}while(nh)}if(jp.current=Lp,l=pn!==null&&pn.next!==null,cl=0,Tn=pn=Ft=null,Op=!1,l)throw Error(t(300));return o}function Hv(){var o=rh!==0;return rh=0,o}function oi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Ft.memoizedState=Tn=o:Tn=Tn.next=o,Tn}function ss(){if(pn===null){var o=Ft.alternate;o=o!==null?o.memoizedState:null}else o=pn.next;var l=Tn===null?Ft.memoizedState:Tn.next;if(l!==null)Tn=l,pn=o;else{if(o===null)throw Error(t(310));pn=o,o={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},Tn===null?Ft.memoizedState=Tn=o:Tn=Tn.next=o}return Tn}function sh(o,l){return typeof l=="function"?l(o):l}function Gv(o){var l=ss(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=o;var y=pn,x=y.baseQueue,E=h.pending;if(E!==null){if(x!==null){var N=x.next;x.next=E.next,E.next=N}y.baseQueue=x=E,h.pending=null}if(x!==null){E=x.next,y=y.baseState;var B=N=null,q=null,te=E;do{var ue=te.lane;if((cl&ue)===ue)q!==null&&(q=q.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),y=te.hasEagerState?te.eagerState:o(y,te.action);else{var de={lane:ue,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};q===null?(B=q=de,N=y):q=q.next=de,Ft.lanes|=ue,ul|=ue}te=te.next}while(te!==null&&te!==E);q===null?N=y:q.next=B,bs(y,l.memoizedState)||(vr=!0),l.memoizedState=y,l.baseState=N,l.baseQueue=q,h.lastRenderedState=y}if(o=h.interleaved,o!==null){x=o;do E=x.lane,Ft.lanes|=E,ul|=E,x=x.next;while(x!==o)}else x===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Kv(o){var l=ss(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=o;var y=h.dispatch,x=h.pending,E=l.memoizedState;if(x!==null){h.pending=null;var N=x=x.next;do E=o(E,N.action),N=N.next;while(N!==x);bs(E,l.memoizedState)||(vr=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,y]}function KE(){}function YE(o,l){var h=Ft,y=ss(),x=l(),E=!bs(y.memoizedState,x);if(E&&(y.memoizedState=x,vr=!0),y=y.queue,Yv(XE.bind(null,h,y,o),[o]),y.getSnapshot!==l||E||Tn!==null&&Tn.memoizedState.tag&1){if(h.flags|=2048,ih(9,JE.bind(null,h,y,x,l),void 0,null),Sn===null)throw Error(t(349));(cl&30)!==0||QE(h,l,x)}return x}function QE(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Ft.updateQueue,l===null?(l={lastEffect:null,stores:null},Ft.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function JE(o,l,h,y){l.value=h,l.getSnapshot=y,ZE(l)&&eT(o)}function XE(o,l,h){return h(function(){ZE(l)&&eT(o)})}function ZE(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!bs(o,h)}catch{return!0}}function eT(o){var l=zi(o,1);l!==null&&ks(l,o,1,-1)}function tT(o){var l=oi();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:o},l.queue=o,o=o.dispatch=mL.bind(null,Ft,o),[l.memoizedState,o]}function ih(o,l,h,y){return o={tag:o,create:l,destroy:h,deps:y,next:null},l=Ft.updateQueue,l===null?(l={lastEffect:null,stores:null},Ft.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,l.lastEffect=o)),o}function nT(){return ss().memoizedState}function Dp(o,l,h,y){var x=oi();Ft.flags|=o,x.memoizedState=ih(1|l,h,void 0,y===void 0?null:y)}function Mp(o,l,h,y){var x=ss();y=y===void 0?null:y;var E=void 0;if(pn!==null){var N=pn.memoizedState;if(E=N.destroy,y!==null&&Wv(y,N.deps)){x.memoizedState=ih(l,h,E,y);return}}Ft.flags|=o,x.memoizedState=ih(1|l,h,E,y)}function rT(o,l){return Dp(8390656,8,o,l)}function Yv(o,l){return Mp(2048,8,o,l)}function sT(o,l){return Mp(4,2,o,l)}function iT(o,l){return Mp(4,4,o,l)}function oT(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function aT(o,l,h){return h=h!=null?h.concat([o]):null,Mp(4,4,oT.bind(null,l,o),h)}function Qv(){}function lT(o,l){var h=ss();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&Wv(l,y[1])?y[0]:(h.memoizedState=[o,l],o)}function cT(o,l){var h=ss();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&Wv(l,y[1])?y[0]:(o=o(),h.memoizedState=[o,l],o)}function uT(o,l,h){return(cl&21)===0?(o.baseState&&(o.baseState=!1,vr=!0),o.memoizedState=h):(bs(h,l)||(h=Rd(),Ft.lanes|=h,ul|=h,o.baseState=!0),l)}function fL(o,l){var h=ot;ot=h!==0&&4>h?h:4,o(!0);var y=zv.transition;zv.transition={};try{o(!1),l()}finally{ot=h,zv.transition=y}}function dT(){return ss().memoizedState}function pL(o,l,h){var y=Uo(o);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},hT(o))fT(l,h);else if(h=zE(o,l,h,y),h!==null){var x=rr();ks(h,o,y,x),pT(h,l,y)}}function mL(o,l,h){var y=Uo(o),x={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(hT(o))fT(l,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var N=l.lastRenderedState,B=E(N,h);if(x.hasEagerState=!0,x.eagerState=B,bs(B,N)){var q=l.interleaved;q===null?(x.next=x,Lv(l)):(x.next=q.next,q.next=x),l.interleaved=x;return}}catch{}finally{}h=zE(o,l,x,y),h!==null&&(x=rr(),ks(h,o,y,x),pT(h,l,y))}}function hT(o){var l=o.alternate;return o===Ft||l!==null&&l===Ft}function fT(o,l){nh=Op=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function pT(o,l,h){if((h&4194240)!==0){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,jd(o,h)}}var Lp={readContext:rs,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},gL={readContext:rs,useCallback:function(o,l){return oi().memoizedState=[o,l===void 0?null:l],o},useContext:rs,useEffect:rT,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,Dp(4194308,4,oT.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Dp(4194308,4,o,l)},useInsertionEffect:function(o,l){return Dp(4,2,o,l)},useMemo:function(o,l){var h=oi();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var y=oi();return l=h!==void 0?h(l):l,y.memoizedState=y.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},y.queue=o,o=o.dispatch=pL.bind(null,Ft,o),[y.memoizedState,o]},useRef:function(o){var l=oi();return o={current:o},l.memoizedState=o},useState:tT,useDebugValue:Qv,useDeferredValue:function(o){return oi().memoizedState=o},useTransition:function(){var o=tT(!1),l=o[0];return o=fL.bind(null,o[1]),oi().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var y=Ft,x=oi();if(Ot){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),Sn===null)throw Error(t(349));(cl&30)!==0||QE(y,l,h)}x.memoizedState=h;var E={value:h,getSnapshot:l};return x.queue=E,rT(XE.bind(null,y,E,o),[o]),y.flags|=2048,ih(9,JE.bind(null,y,E,h,l),void 0,null),h},useId:function(){var o=oi(),l=Sn.identifierPrefix;if(Ot){var h=Bi,y=$i;h=(y&~(1<<32-Dr(y)-1)).toString(32)+h,l=":"+l+"R"+h,h=rh++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=hL++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},yL={readContext:rs,useCallback:lT,useContext:rs,useEffect:Yv,useImperativeHandle:aT,useInsertionEffect:sT,useLayoutEffect:iT,useMemo:cT,useReducer:Gv,useRef:nT,useState:function(){return Gv(sh)},useDebugValue:Qv,useDeferredValue:function(o){var l=ss();return uT(l,pn.memoizedState,o)},useTransition:function(){var o=Gv(sh)[0],l=ss().memoizedState;return[o,l]},useMutableSource:KE,useSyncExternalStore:YE,useId:dT,unstable_isNewReconciler:!1},vL={readContext:rs,useCallback:lT,useContext:rs,useEffect:Yv,useImperativeHandle:aT,useInsertionEffect:sT,useLayoutEffect:iT,useMemo:cT,useReducer:Kv,useRef:nT,useState:function(){return Kv(sh)},useDebugValue:Qv,useDeferredValue:function(o){var l=ss();return pn===null?l.memoizedState=o:uT(l,pn.memoizedState,o)},useTransition:function(){var o=Kv(sh)[0],l=ss().memoizedState;return[o,l]},useMutableSource:KE,useSyncExternalStore:YE,useId:dT,unstable_isNewReconciler:!1};function Ts(o,l){if(o&&o.defaultProps){l=re({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function Jv(o,l,h,y){l=o.memoizedState,h=h(y,l),h=h==null?l:re({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Vp={isMounted:function(o){return(o=o._reactInternals)?xs(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var y=rr(),x=Uo(o),E=Wi(y,x);E.payload=l,h!=null&&(E.callback=h),l=Mo(o,E,x),l!==null&&(ks(l,o,x,y),Ap(l,o,x))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var y=rr(),x=Uo(o),E=Wi(y,x);E.tag=1,E.payload=l,h!=null&&(E.callback=h),l=Mo(o,E,x),l!==null&&(ks(l,o,x,y),Ap(l,o,x))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=rr(),y=Uo(o),x=Wi(h,y);x.tag=2,l!=null&&(x.callback=l),l=Mo(o,x,y),l!==null&&(ks(l,o,y,h),Ap(l,o,y))}};function mT(o,l,h,y,x,E,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,E,N):l.prototype&&l.prototype.isPureReactComponent?!qd(h,y)||!qd(x,E):!0}function gT(o,l,h){var y=!1,x=jo,E=l.contextType;return typeof E=="object"&&E!==null?E=rs(E):(x=yr(l)?sl:Wn.current,y=l.contextTypes,E=(y=y!=null)?Mc(o,x):jo),l=new l(h,E),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Vp,o.stateNode=l,l._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=x,o.__reactInternalMemoizedMaskedChildContext=E),l}function yT(o,l,h,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==o&&Vp.enqueueReplaceState(l,l.state,null)}function Xv(o,l,h,y){var x=o.stateNode;x.props=h,x.state=o.memoizedState,x.refs={},Vv(o);var E=l.contextType;typeof E=="object"&&E!==null?x.context=rs(E):(E=yr(l)?sl:Wn.current,x.context=Mc(o,E)),x.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Jv(o,l,E,h),x.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&Vp.enqueueReplaceState(x,x.state,null),Rp(o,h,x,y),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308)}function Wc(o,l){try{var h="",y=l;do h+=Re(y),y=y.return;while(y);var x=h}catch(E){x=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:l,stack:x,digest:null}}function Zv(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function ew(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var wL=typeof WeakMap=="function"?WeakMap:Map;function vT(o,l,h){h=Wi(-1,h),h.tag=3,h.payload={element:null};var y=l.value;return h.callback=function(){qp||(qp=!0,mw=y),ew(o,l)},h}function wT(o,l,h){h=Wi(-1,h),h.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var x=l.value;h.payload=function(){return y(x)},h.callback=function(){ew(o,l)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(h.callback=function(){ew(o,l),typeof y!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})}),h}function xT(o,l,h){var y=o.pingCache;if(y===null){y=o.pingCache=new wL;var x=new Set;y.set(l,x)}else x=y.get(l),x===void 0&&(x=new Set,y.set(l,x));x.has(h)||(x.add(h),o=jL.bind(null,o,l,h),l.then(o,o))}function _T(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function bT(o,l,h,y,x){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Wi(-1,1),l.tag=2,Mo(h,l,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=x,o)}var xL=D.ReactCurrentOwner,vr=!1;function nr(o,l,h,y){l.child=o===null?BE(l,null,h,y):Uc(l,o.child,h,y)}function ET(o,l,h,y,x){h=h.render;var E=l.ref;return Bc(l,x),y=qv(o,l,h,y,E,x),h=Hv(),o!==null&&!vr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,qi(o,l,x)):(Ot&&h&&Pv(l),l.flags|=1,nr(o,l,y,x),l.child)}function TT(o,l,h,y,x){if(o===null){var E=h.type;return typeof E=="function"&&!bw(E)&&E.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=E,ST(o,l,E,y,x)):(o=Jp(h.type,null,y,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(E=o.child,(o.lanes&x)===0){var N=E.memoizedProps;if(h=h.compare,h=h!==null?h:qd,h(N,y)&&o.ref===l.ref)return qi(o,l,x)}return l.flags|=1,o=Bo(E,y),o.ref=l.ref,o.return=l,l.child=o}function ST(o,l,h,y,x){if(o!==null){var E=o.memoizedProps;if(qd(E,y)&&o.ref===l.ref)if(vr=!1,l.pendingProps=y=E,(o.lanes&x)!==0)(o.flags&131072)!==0&&(vr=!0);else return l.lanes=o.lanes,qi(o,l,x)}return tw(o,l,h,y,x)}function IT(o,l,h){var y=l.pendingProps,x=y.children,E=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Hc,Br),Br|=h;else{if((h&1073741824)===0)return o=E!==null?E.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,kt(Hc,Br),Br|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:h,kt(Hc,Br),Br|=y}else E!==null?(y=E.baseLanes|h,l.memoizedState=null):y=h,kt(Hc,Br),Br|=y;return nr(o,l,x,h),l.child}function kT(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function tw(o,l,h,y,x){var E=yr(h)?sl:Wn.current;return E=Mc(l,E),Bc(l,x),h=qv(o,l,h,y,E,x),y=Hv(),o!==null&&!vr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,qi(o,l,x)):(Ot&&y&&Pv(l),l.flags|=1,nr(o,l,h,x),l.child)}function PT(o,l,h,y,x){if(yr(h)){var E=!0;bp(l)}else E=!1;if(Bc(l,x),l.stateNode===null)Up(o,l),gT(l,h,y),Xv(l,h,y,x),y=!0;else if(o===null){var N=l.stateNode,B=l.memoizedProps;N.props=B;var q=N.context,te=h.contextType;typeof te=="object"&&te!==null?te=rs(te):(te=yr(h)?sl:Wn.current,te=Mc(l,te));var ue=h.getDerivedStateFromProps,de=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function";de||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==y||q!==te)&&yT(l,N,y,te),Do=!1;var ce=l.memoizedState;N.state=ce,Rp(l,y,N,x),q=l.memoizedState,B!==y||ce!==q||gr.current||Do?(typeof ue=="function"&&(Jv(l,h,ue,y),q=l.memoizedState),(B=Do||mT(l,h,B,y,ce,q,te))?(de||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=q),N.props=y,N.state=q,N.context=te,y=B):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{N=l.stateNode,WE(o,l),B=l.memoizedProps,te=l.type===l.elementType?B:Ts(l.type,B),N.props=te,de=l.pendingProps,ce=N.context,q=h.contextType,typeof q=="object"&&q!==null?q=rs(q):(q=yr(h)?sl:Wn.current,q=Mc(l,q));var Te=h.getDerivedStateFromProps;(ue=typeof Te=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==de||ce!==q)&&yT(l,N,y,q),Do=!1,ce=l.memoizedState,N.state=ce,Rp(l,y,N,x);var ke=l.memoizedState;B!==de||ce!==ke||gr.current||Do?(typeof Te=="function"&&(Jv(l,h,Te,y),ke=l.memoizedState),(te=Do||mT(l,h,te,y,ce,ke,q)||!1)?(ue||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,ke,q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,ke,q)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ke),N.props=y,N.state=ke,N.context=q,y=te):(typeof N.componentDidUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),y=!1)}return nw(o,l,h,y,E,x)}function nw(o,l,h,y,x,E){kT(o,l);var N=(l.flags&128)!==0;if(!y&&!N)return x&&jE(l,h,!1),qi(o,l,E);y=l.stateNode,xL.current=l;var B=N&&typeof h.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,o!==null&&N?(l.child=Uc(l,o.child,null,E),l.child=Uc(l,null,B,E)):nr(o,l,B,E),l.memoizedState=y.state,x&&jE(l,h,!0),l.child}function CT(o){var l=o.stateNode;l.pendingContext?RE(o,l.pendingContext,l.pendingContext!==l.context):l.context&&RE(o,l.context,!1),Fv(o,l.containerInfo)}function AT(o,l,h,y,x){return Fc(),Nv(x),l.flags|=256,nr(o,l,h,y),l.child}var rw={dehydrated:null,treeContext:null,retryLane:0};function sw(o){return{baseLanes:o,cachePool:null,transitions:null}}function RT(o,l,h){var y=l.pendingProps,x=Vt.current,E=!1,N=(l.flags&128)!==0,B;if((B=N)||(B=o!==null&&o.memoizedState===null?!1:(x&2)!==0),B?(E=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(x|=1),kt(Vt,x&1),o===null)return Rv(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(N=y.children,o=y.fallback,E?(y=l.mode,E=l.child,N={mode:"hidden",children:N},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=N):E=Xp(N,y,0,null),o=pl(o,y,h,null),E.return=l,o.return=l,E.sibling=o,l.child=E,l.child.memoizedState=sw(h),l.memoizedState=rw,o):iw(l,N));if(x=o.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return _L(o,l,N,y,B,x,h);if(E){E=y.fallback,N=l.mode,x=o.child,B=x.sibling;var q={mode:"hidden",children:y.children};return(N&1)===0&&l.child!==x?(y=l.child,y.childLanes=0,y.pendingProps=q,l.deletions=null):(y=Bo(x,q),y.subtreeFlags=x.subtreeFlags&14680064),B!==null?E=Bo(B,E):(E=pl(E,N,h,null),E.flags|=2),E.return=l,y.return=l,y.sibling=E,l.child=y,y=E,E=l.child,N=o.child.memoizedState,N=N===null?sw(h):{baseLanes:N.baseLanes|h,cachePool:null,transitions:N.transitions},E.memoizedState=N,E.childLanes=o.childLanes&~h,l.memoizedState=rw,y}return E=o.child,o=E.sibling,y=Bo(E,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=h),y.return=l,y.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=y,l.memoizedState=null,y}function iw(o,l){return l=Xp({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Fp(o,l,h,y){return y!==null&&Nv(y),Uc(l,o.child,null,h),o=iw(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function _L(o,l,h,y,x,E,N){if(h)return l.flags&256?(l.flags&=-257,y=Zv(Error(t(422))),Fp(o,l,N,y)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(E=y.fallback,x=l.mode,y=Xp({mode:"visible",children:y.children},x,0,null),E=pl(E,x,N,null),E.flags|=2,y.return=l,E.return=l,y.sibling=E,l.child=y,(l.mode&1)!==0&&Uc(l,o.child,null,N),l.child.memoizedState=sw(N),l.memoizedState=rw,E);if((l.mode&1)===0)return Fp(o,l,N,null);if(x.data==="$!"){if(y=x.nextSibling&&x.nextSibling.dataset,y)var B=y.dgst;return y=B,E=Error(t(419)),y=Zv(E,y,void 0),Fp(o,l,N,y)}if(B=(N&o.childLanes)!==0,vr||B){if(y=Sn,y!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(y.suspendedLanes|N))!==0?0:x,x!==0&&x!==E.retryLane&&(E.retryLane=x,zi(o,x),ks(y,o,x,-1))}return _w(),y=Zv(Error(t(421))),Fp(o,l,N,y)}return x.data==="$?"?(l.flags|=128,l.child=o.child,l=OL.bind(null,o),x._reactRetry=l,null):(o=E.treeContext,$r=Ro(x.nextSibling),Ur=l,Ot=!0,Es=null,o!==null&&(ts[ns++]=$i,ts[ns++]=Bi,ts[ns++]=il,$i=o.id,Bi=o.overflow,il=l),l=iw(l,y.children),l.flags|=4096,l)}function NT(o,l,h){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),Mv(o.return,l,h)}function ow(o,l,h,y,x){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:x}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=h,E.tailMode=x)}function jT(o,l,h){var y=l.pendingProps,x=y.revealOrder,E=y.tail;if(nr(o,l,y.children,h),y=Vt.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&NT(o,h,l);else if(o.tag===19)NT(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(kt(Vt,y),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&Np(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),ow(l,!1,x,h,E);break;case"backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&Np(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}ow(l,!0,h,null,E);break;case"together":ow(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Up(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function qi(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),ul|=l.lanes,(h&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,h=Bo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Bo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function bL(o,l,h){switch(l.tag){case 3:CT(l),Fc();break;case 5:GE(l);break;case 1:yr(l.type)&&bp(l);break;case 4:Fv(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,x=l.memoizedProps.value;kt(Pp,y._currentValue),y._currentValue=x;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(kt(Vt,Vt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?RT(o,l,h):(kt(Vt,Vt.current&1),o=qi(o,l,h),o!==null?o.sibling:null);kt(Vt,Vt.current&1);break;case 19:if(y=(h&l.childLanes)!==0,(o.flags&128)!==0){if(y)return jT(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),kt(Vt,Vt.current),y)break;return null;case 22:case 23:return l.lanes=0,IT(o,l,h)}return qi(o,l,h)}var OT,aw,DT,MT;OT=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},aw=function(){},DT=function(o,l,h,y){var x=o.memoizedProps;if(x!==y){o=l.stateNode,ll(ii.current);var E=null;switch(h){case"input":x=zt(o,x),y=zt(o,y),E=[];break;case"select":x=re({},x,{value:void 0}),y=re({},y,{value:void 0}),E=[];break;case"textarea":x=_o(o,x),y=_o(o,y),E=[];break;default:typeof x.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=wp)}En(h,y);var N;h=null;for(te in x)if(!y.hasOwnProperty(te)&&x.hasOwnProperty(te)&&x[te]!=null)if(te==="style"){var B=x[te];for(N in B)B.hasOwnProperty(N)&&(h||(h={}),h[N]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(s.hasOwnProperty(te)?E||(E=[]):(E=E||[]).push(te,null));for(te in y){var q=y[te];if(B=x!=null?x[te]:void 0,y.hasOwnProperty(te)&&q!==B&&(q!=null||B!=null))if(te==="style")if(B){for(N in B)!B.hasOwnProperty(N)||q&&q.hasOwnProperty(N)||(h||(h={}),h[N]="");for(N in q)q.hasOwnProperty(N)&&B[N]!==q[N]&&(h||(h={}),h[N]=q[N])}else h||(E||(E=[]),E.push(te,h)),h=q;else te==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,B=B?B.__html:void 0,q!=null&&B!==q&&(E=E||[]).push(te,q)):te==="children"?typeof q!="string"&&typeof q!="number"||(E=E||[]).push(te,""+q):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(s.hasOwnProperty(te)?(q!=null&&te==="onScroll"&&At("scroll",o),E||B===q||(E=[])):(E=E||[]).push(te,q))}h&&(E=E||[]).push("style",h);var te=E;(l.updateQueue=te)&&(l.flags|=4)}},MT=function(o,l,h,y){h!==y&&(l.flags|=4)};function oh(o,l){if(!Ot)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Hn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags&14680064,y|=x.flags&14680064,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=y,o.childLanes=h,l}function EL(o,l,h){var y=l.pendingProps;switch(Cv(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(l),null;case 1:return yr(l.type)&&_p(),Hn(l),null;case 3:return y=l.stateNode,zc(),Rt(gr),Rt(Wn),Bv(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Ip(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Es!==null&&(vw(Es),Es=null))),aw(o,l),Hn(l),null;case 5:Uv(l);var x=ll(th.current);if(h=l.type,o!==null&&l.stateNode!=null)DT(o,l,h,y,x),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return Hn(l),null}if(o=ll(ii.current),Ip(l)){y=l.stateNode,h=l.type;var E=l.memoizedProps;switch(y[si]=l,y[Qd]=E,o=(l.mode&1)!==0,h){case"dialog":At("cancel",y),At("close",y);break;case"iframe":case"object":case"embed":At("load",y);break;case"video":case"audio":for(x=0;x<Gd.length;x++)At(Gd[x],y);break;case"source":At("error",y);break;case"img":case"image":case"link":At("error",y),At("load",y);break;case"details":At("toggle",y);break;case"input":pr(y,E),At("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},At("invalid",y);break;case"textarea":Ar(y,E),At("invalid",y)}En(h,E),x=null;for(var N in E)if(E.hasOwnProperty(N)){var B=E[N];N==="children"?typeof B=="string"?y.textContent!==B&&(E.suppressHydrationWarning!==!0&&vp(y.textContent,B,o),x=["children",B]):typeof B=="number"&&y.textContent!==""+B&&(E.suppressHydrationWarning!==!0&&vp(y.textContent,B,o),x=["children",""+B]):s.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&At("scroll",y)}switch(h){case"input":He(y),Cr(y,E,!0);break;case"textarea":He(y),Us(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=wp)}y=x,l.updateQueue=y,y!==null&&(l.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=bn(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=N.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=N.createElement(h,{is:y.is}):(o=N.createElement(h),h==="select"&&(N=o,y.multiple?N.multiple=!0:y.size&&(N.size=y.size))):o=N.createElementNS(o,h),o[si]=l,o[Qd]=y,OT(o,l,!1,!1),l.stateNode=o;e:{switch(N=Eo(h,y),h){case"dialog":At("cancel",o),At("close",o),x=y;break;case"iframe":case"object":case"embed":At("load",o),x=y;break;case"video":case"audio":for(x=0;x<Gd.length;x++)At(Gd[x],o);x=y;break;case"source":At("error",o),x=y;break;case"img":case"image":case"link":At("error",o),At("load",o),x=y;break;case"details":At("toggle",o),x=y;break;case"input":pr(o,y),x=zt(o,y),At("invalid",o);break;case"option":x=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},x=re({},y,{value:void 0}),At("invalid",o);break;case"textarea":Ar(o,y),x=_o(o,y),At("invalid",o);break;default:x=y}En(h,x),B=x;for(E in B)if(B.hasOwnProperty(E)){var q=B[E];E==="style"?Nr(o,q):E==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&fc(o,q)):E==="children"?typeof q=="string"?(h!=="textarea"||q!=="")&&Qr(o,q):typeof q=="number"&&Qr(o,""+q):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?q!=null&&E==="onScroll"&&At("scroll",o):q!=null&&j(o,E,q,N))}switch(h){case"input":He(o),Cr(o,y,!1);break;case"textarea":He(o),Us(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Se(y.value));break;case"select":o.multiple=!!y.multiple,E=y.value,E!=null?Nn(o,!!y.multiple,E,!1):y.defaultValue!=null&&Nn(o,!!y.multiple,y.defaultValue,!0);break;default:typeof x.onClick=="function"&&(o.onclick=wp)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Hn(l),null;case 6:if(o&&l.stateNode!=null)MT(o,l,o.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(h=ll(th.current),ll(ii.current),Ip(l)){if(y=l.stateNode,h=l.memoizedProps,y[si]=l,(E=y.nodeValue!==h)&&(o=Ur,o!==null))switch(o.tag){case 3:vp(y.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&vp(y.nodeValue,h,(o.mode&1)!==0)}E&&(l.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[si]=l,l.stateNode=y}return Hn(l),null;case 13:if(Rt(Vt),y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ot&&$r!==null&&(l.mode&1)!==0&&(l.flags&128)===0)FE(),Fc(),l.flags|=98560,E=!1;else if(E=Ip(l),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(t(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[si]=l}else Fc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Hn(l),E=!1}else Es!==null&&(vw(Es),Es=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Vt.current&1)!==0?mn===0&&(mn=3):_w())),l.updateQueue!==null&&(l.flags|=4),Hn(l),null);case 4:return zc(),aw(o,l),o===null&&Kd(l.stateNode.containerInfo),Hn(l),null;case 10:return Dv(l.type._context),Hn(l),null;case 17:return yr(l.type)&&_p(),Hn(l),null;case 19:if(Rt(Vt),E=l.memoizedState,E===null)return Hn(l),null;if(y=(l.flags&128)!==0,N=E.rendering,N===null)if(y)oh(E,!1);else{if(mn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(N=Np(o),N!==null){for(l.flags|=128,oh(E,!1),y=N.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=h,h=l.child;h!==null;)E=h,o=y,E.flags&=14680066,N=E.alternate,N===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=N.childLanes,E.lanes=N.lanes,E.child=N.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=N.memoizedProps,E.memoizedState=N.memoizedState,E.updateQueue=N.updateQueue,E.type=N.type,o=N.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return kt(Vt,Vt.current&1|2),l.child}o=o.sibling}E.tail!==null&&Ct()>Gc&&(l.flags|=128,y=!0,oh(E,!1),l.lanes=4194304)}else{if(!y)if(o=Np(N),o!==null){if(l.flags|=128,y=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),oh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!Ot)return Hn(l),null}else 2*Ct()-E.renderingStartTime>Gc&&h!==1073741824&&(l.flags|=128,y=!0,oh(E,!1),l.lanes=4194304);E.isBackwards?(N.sibling=l.child,l.child=N):(h=E.last,h!==null?h.sibling=N:l.child=N,E.last=N)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Ct(),l.sibling=null,h=Vt.current,kt(Vt,y?h&1|2:h&1),l):(Hn(l),null);case 22:case 23:return xw(),y=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Br&1073741824)!==0&&(Hn(l),l.subtreeFlags&6&&(l.flags|=8192)):Hn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function TL(o,l){switch(Cv(l),l.tag){case 1:return yr(l.type)&&_p(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return zc(),Rt(gr),Rt(Wn),Bv(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Uv(l),null;case 13:if(Rt(Vt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Fc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Rt(Vt),null;case 4:return zc(),null;case 10:return Dv(l.type._context),null;case 22:case 23:return xw(),null;case 24:return null;default:return null}}var $p=!1,Gn=!1,SL=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function qc(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){qt(o,l,y)}else h.current=null}function lw(o,l,h){try{h()}catch(y){qt(o,l,y)}}var LT=!1;function IL(o,l){if(xv=Mi,o=mE(),hv(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var x=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var N=0,B=-1,q=-1,te=0,ue=0,de=o,ce=null;t:for(;;){for(var Te;de!==h||x!==0&&de.nodeType!==3||(B=N+x),de!==E||y!==0&&de.nodeType!==3||(q=N+y),de.nodeType===3&&(N+=de.nodeValue.length),(Te=de.firstChild)!==null;)ce=de,de=Te;for(;;){if(de===o)break t;if(ce===h&&++te===x&&(B=N),ce===E&&++ue===y&&(q=N),(Te=de.nextSibling)!==null)break;de=ce,ce=de.parentNode}de=Te}h=B===-1||q===-1?null:{start:B,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(_v={focusedElem:o,selectionRange:h},Mi=!1,Ie=l;Ie!==null;)if(l=Ie,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ie=o;else for(;Ie!==null;){l=Ie;try{var ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var je=ke.memoizedProps,en=ke.memoizedState,Q=l.stateNode,G=Q.getSnapshotBeforeUpdate(l.elementType===l.type?je:Ts(l.type,je),en);Q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Z=l.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){qt(l,l.return,pe)}if(o=l.sibling,o!==null){o.return=l.return,Ie=o;break}Ie=l.return}return ke=LT,LT=!1,ke}function ah(o,l,h){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var x=y=y.next;do{if((x.tag&o)===o){var E=x.destroy;x.destroy=void 0,E!==void 0&&lw(l,h,E)}x=x.next}while(x!==y)}}function Bp(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var y=h.create;h.destroy=y()}h=h.next}while(h!==l)}}function cw(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function VT(o){var l=o.alternate;l!==null&&(o.alternate=null,VT(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[si],delete l[Qd],delete l[Sv],delete l[lL],delete l[cL])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function FT(o){return o.tag===5||o.tag===3||o.tag===4}function UT(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||FT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function uw(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=wp));else if(y!==4&&(o=o.child,o!==null))for(uw(o,l,h),o=o.sibling;o!==null;)uw(o,l,h),o=o.sibling}function dw(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(dw(o,l,h),o=o.sibling;o!==null;)dw(o,l,h),o=o.sibling}var Dn=null,Ss=!1;function Lo(o,l,h){for(h=h.child;h!==null;)$T(o,l,h),h=h.sibling}function $T(o,l,h){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(Ka,h)}catch{}switch(h.tag){case 5:Gn||qc(h,l);case 6:var y=Dn,x=Ss;Dn=null,Lo(o,l,h),Dn=y,Ss=x,Dn!==null&&(Ss?(o=Dn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Dn.removeChild(h.stateNode));break;case 18:Dn!==null&&(Ss?(o=Dn,h=h.stateNode,o.nodeType===8?Tv(o.parentNode,h):o.nodeType===1&&Tv(o,h),ko(o)):Tv(Dn,h.stateNode));break;case 4:y=Dn,x=Ss,Dn=h.stateNode.containerInfo,Ss=!0,Lo(o,l,h),Dn=y,Ss=x;break;case 0:case 11:case 14:case 15:if(!Gn&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){x=y=y.next;do{var E=x,N=E.destroy;E=E.tag,N!==void 0&&((E&2)!==0||(E&4)!==0)&&lw(h,l,N),x=x.next}while(x!==y)}Lo(o,l,h);break;case 1:if(!Gn&&(qc(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(B){qt(h,l,B)}Lo(o,l,h);break;case 21:Lo(o,l,h);break;case 22:h.mode&1?(Gn=(y=Gn)||h.memoizedState!==null,Lo(o,l,h),Gn=y):Lo(o,l,h);break;default:Lo(o,l,h)}}function BT(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new SL),l.forEach(function(y){var x=DL.bind(null,o,y);h.has(y)||(h.add(y),y.then(x,x))})}}function Is(o,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var x=h[y];try{var E=o,N=l,B=N;e:for(;B!==null;){switch(B.tag){case 5:Dn=B.stateNode,Ss=!1;break e;case 3:Dn=B.stateNode.containerInfo,Ss=!0;break e;case 4:Dn=B.stateNode.containerInfo,Ss=!0;break e}B=B.return}if(Dn===null)throw Error(t(160));$T(E,N,x),Dn=null,Ss=!1;var q=x.alternate;q!==null&&(q.return=null),x.return=null}catch(te){qt(x,l,te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)zT(l,o),l=l.sibling}function zT(o,l){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Is(l,o),ai(o),y&4){try{ah(3,o,o.return),Bp(3,o)}catch(je){qt(o,o.return,je)}try{ah(5,o,o.return)}catch(je){qt(o,o.return,je)}}break;case 1:Is(l,o),ai(o),y&512&&h!==null&&qc(h,h.return);break;case 5:if(Is(l,o),ai(o),y&512&&h!==null&&qc(h,h.return),o.flags&32){var x=o.stateNode;try{Qr(x,"")}catch(je){qt(o,o.return,je)}}if(y&4&&(x=o.stateNode,x!=null)){var E=o.memoizedProps,N=h!==null?h.memoizedProps:E,B=o.type,q=o.updateQueue;if(o.updateQueue=null,q!==null)try{B==="input"&&E.type==="radio"&&E.name!=null&&An(x,E),Eo(B,N);var te=Eo(B,E);for(N=0;N<q.length;N+=2){var ue=q[N],de=q[N+1];ue==="style"?Nr(x,de):ue==="dangerouslySetInnerHTML"?fc(x,de):ue==="children"?Qr(x,de):j(x,ue,de,te)}switch(B){case"input":Rn(x,E);break;case"textarea":hc(x,E);break;case"select":var ce=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!E.multiple;var Te=E.value;Te!=null?Nn(x,!!E.multiple,Te,!1):ce!==!!E.multiple&&(E.defaultValue!=null?Nn(x,!!E.multiple,E.defaultValue,!0):Nn(x,!!E.multiple,E.multiple?[]:"",!1))}x[Qd]=E}catch(je){qt(o,o.return,je)}}break;case 6:if(Is(l,o),ai(o),y&4){if(o.stateNode===null)throw Error(t(162));x=o.stateNode,E=o.memoizedProps;try{x.nodeValue=E}catch(je){qt(o,o.return,je)}}break;case 3:if(Is(l,o),ai(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{ko(l.containerInfo)}catch(je){qt(o,o.return,je)}break;case 4:Is(l,o),ai(o);break;case 13:Is(l,o),ai(o),x=o.child,x.flags&8192&&(E=x.memoizedState!==null,x.stateNode.isHidden=E,!E||x.alternate!==null&&x.alternate.memoizedState!==null||(pw=Ct())),y&4&&BT(o);break;case 22:if(ue=h!==null&&h.memoizedState!==null,o.mode&1?(Gn=(te=Gn)||ue,Is(l,o),Gn=te):Is(l,o),ai(o),y&8192){if(te=o.memoizedState!==null,(o.stateNode.isHidden=te)&&!ue&&(o.mode&1)!==0)for(Ie=o,ue=o.child;ue!==null;){for(de=Ie=ue;Ie!==null;){switch(ce=Ie,Te=ce.child,ce.tag){case 0:case 11:case 14:case 15:ah(4,ce,ce.return);break;case 1:qc(ce,ce.return);var ke=ce.stateNode;if(typeof ke.componentWillUnmount=="function"){y=ce,h=ce.return;try{l=y,ke.props=l.memoizedProps,ke.state=l.memoizedState,ke.componentWillUnmount()}catch(je){qt(y,h,je)}}break;case 5:qc(ce,ce.return);break;case 22:if(ce.memoizedState!==null){HT(de);continue}}Te!==null?(Te.return=ce,Ie=Te):HT(de)}ue=ue.sibling}e:for(ue=null,de=o;;){if(de.tag===5){if(ue===null){ue=de;try{x=de.stateNode,te?(E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(B=de.stateNode,q=de.memoizedProps.style,N=q!=null&&q.hasOwnProperty("display")?q.display:null,B.style.display=Jr("display",N))}catch(je){qt(o,o.return,je)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=te?"":de.memoizedProps}catch(je){qt(o,o.return,je)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===o)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===o)break e;for(;de.sibling===null;){if(de.return===null||de.return===o)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Is(l,o),ai(o),y&4&&BT(o);break;case 21:break;default:Is(l,o),ai(o)}}function ai(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(FT(h)){var y=h;break e}h=h.return}throw Error(t(160))}switch(y.tag){case 5:var x=y.stateNode;y.flags&32&&(Qr(x,""),y.flags&=-33);var E=UT(o);dw(o,E,x);break;case 3:case 4:var N=y.stateNode.containerInfo,B=UT(o);uw(o,B,N);break;default:throw Error(t(161))}}catch(q){qt(o,o.return,q)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function kL(o,l,h){Ie=o,WT(o)}function WT(o,l,h){for(var y=(o.mode&1)!==0;Ie!==null;){var x=Ie,E=x.child;if(x.tag===22&&y){var N=x.memoizedState!==null||$p;if(!N){var B=x.alternate,q=B!==null&&B.memoizedState!==null||Gn;B=$p;var te=Gn;if($p=N,(Gn=q)&&!te)for(Ie=x;Ie!==null;)N=Ie,q=N.child,N.tag===22&&N.memoizedState!==null?GT(x):q!==null?(q.return=N,Ie=q):GT(x);for(;E!==null;)Ie=E,WT(E),E=E.sibling;Ie=x,$p=B,Gn=te}qT(o)}else(x.subtreeFlags&8772)!==0&&E!==null?(E.return=x,Ie=E):qT(o)}}function qT(o){for(;Ie!==null;){var l=Ie;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Gn||Bp(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Gn)if(h===null)y.componentDidMount();else{var x=l.elementType===l.type?h.memoizedProps:Ts(l.type,h.memoizedProps);y.componentDidUpdate(x,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&HE(l,E,y);break;case 3:var N=l.updateQueue;if(N!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}HE(l,N,h)}break;case 5:var B=l.stateNode;if(h===null&&l.flags&4){h=B;var q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&h.focus();break;case"img":q.src&&(h.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var te=l.alternate;if(te!==null){var ue=te.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&ko(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gn||l.flags&512&&cw(l)}catch(ce){qt(l,l.return,ce)}}if(l===o){Ie=null;break}if(h=l.sibling,h!==null){h.return=l.return,Ie=h;break}Ie=l.return}}function HT(o){for(;Ie!==null;){var l=Ie;if(l===o){Ie=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Ie=h;break}Ie=l.return}}function GT(o){for(;Ie!==null;){var l=Ie;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Bp(4,l)}catch(q){qt(l,h,q)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var x=l.return;try{y.componentDidMount()}catch(q){qt(l,x,q)}}var E=l.return;try{cw(l)}catch(q){qt(l,E,q)}break;case 5:var N=l.return;try{cw(l)}catch(q){qt(l,N,q)}}}catch(q){qt(l,l.return,q)}if(l===o){Ie=null;break}var B=l.sibling;if(B!==null){B.return=l.return,Ie=B;break}Ie=l.return}}var PL=Math.ceil,zp=D.ReactCurrentDispatcher,hw=D.ReactCurrentOwner,is=D.ReactCurrentBatchConfig,dt=0,Sn=null,sn=null,Mn=0,Br=0,Hc=No(0),mn=0,lh=null,ul=0,Wp=0,fw=0,ch=null,wr=null,pw=0,Gc=1/0,Hi=null,qp=!1,mw=null,Vo=null,Hp=!1,Fo=null,Gp=0,uh=0,gw=null,Kp=-1,Yp=0;function rr(){return(dt&6)!==0?Ct():Kp!==-1?Kp:Kp=Ct()}function Uo(o){return(o.mode&1)===0?1:(dt&2)!==0&&Mn!==0?Mn&-Mn:dL.transition!==null?(Yp===0&&(Yp=Rd()),Yp):(o=ot,o!==0||(o=window.event,o=o===void 0?16:bc(o.type)),o)}function ks(o,l,h,y){if(50<uh)throw uh=0,gw=null,Error(t(185));Xa(o,h,y),((dt&2)===0||o!==Sn)&&(o===Sn&&((dt&2)===0&&(Wp|=h),mn===4&&$o(o,Mn)),xr(o,y),h===1&&dt===0&&(l.mode&1)===0&&(Gc=Ct()+500,Ep&&Oo()))}function xr(o,l){var h=o.callbackNode;Ja(o,l);var y=ji(o,o===Sn?Mn:0);if(y===0)h!==null&&mc(h),o.callbackNode=null,o.callbackPriority=0;else if(l=y&-y,o.callbackPriority!==l){if(h!=null&&mc(h),l===1)o.tag===0?uL(YT.bind(null,o)):OE(YT.bind(null,o)),oL(function(){(dt&6)===0&&Oo()}),h=null;else{switch(Ks(y)){case 1:h=gc;break;case 4:h=Pd;break;case 16:h=Ga;break;case 536870912:h=yc;break;default:h=Ga}h=rS(h,KT.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function KT(o,l){if(Kp=-1,Yp=0,(dt&6)!==0)throw Error(t(327));var h=o.callbackNode;if(Kc()&&o.callbackNode!==h)return null;var y=ji(o,o===Sn?Mn:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||l)l=Qp(o,y);else{l=y;var x=dt;dt|=2;var E=JT();(Sn!==o||Mn!==l)&&(Hi=null,Gc=Ct()+500,hl(o,l));do try{RL();break}catch(B){QT(o,B)}while(!0);Ov(),zp.current=E,dt=x,sn!==null?l=0:(Sn=null,Mn=0,l=mn)}if(l!==0){if(l===2&&(x=Ad(o),x!==0&&(y=x,l=yw(o,x))),l===1)throw h=lh,hl(o,0),$o(o,y),xr(o,Ct()),h;if(l===6)$o(o,y);else{if(x=o.current.alternate,(y&30)===0&&!CL(x)&&(l=Qp(o,y),l===2&&(E=Ad(o),E!==0&&(y=E,l=yw(o,E))),l===1))throw h=lh,hl(o,0),$o(o,y),xr(o,Ct()),h;switch(o.finishedWork=x,o.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:fl(o,wr,Hi);break;case 3:if($o(o,y),(y&130023424)===y&&(l=pw+500-Ct(),10<l)){if(ji(o,0)!==0)break;if(x=o.suspendedLanes,(x&y)!==y){rr(),o.pingedLanes|=o.suspendedLanes&x;break}o.timeoutHandle=Ev(fl.bind(null,o,wr,Hi),l);break}fl(o,wr,Hi);break;case 4:if($o(o,y),(y&4194240)===y)break;for(l=o.eventTimes,x=-1;0<y;){var N=31-Dr(y);E=1<<N,N=l[N],N>x&&(x=N),y&=~E}if(y=x,y=Ct()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*PL(y/1960))-y,10<y){o.timeoutHandle=Ev(fl.bind(null,o,wr,Hi),y);break}fl(o,wr,Hi);break;case 5:fl(o,wr,Hi);break;default:throw Error(t(329))}}}return xr(o,Ct()),o.callbackNode===h?KT.bind(null,o):null}function yw(o,l){var h=ch;return o.current.memoizedState.isDehydrated&&(hl(o,l).flags|=256),o=Qp(o,l),o!==2&&(l=wr,wr=h,l!==null&&vw(l)),o}function vw(o){wr===null?wr=o:wr.push.apply(wr,o)}function CL(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var x=h[y],E=x.getSnapshot;x=x.value;try{if(!bs(E(),x))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function $o(o,l){for(l&=~fw,l&=~Wp,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-Dr(l),y=1<<h;o[h]=-1,l&=~y}}function YT(o){if((dt&6)!==0)throw Error(t(327));Kc();var l=ji(o,0);if((l&1)===0)return xr(o,Ct()),null;var h=Qp(o,l);if(o.tag!==0&&h===2){var y=Ad(o);y!==0&&(l=y,h=yw(o,y))}if(h===1)throw h=lh,hl(o,0),$o(o,l),xr(o,Ct()),h;if(h===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,fl(o,wr,Hi),xr(o,Ct()),null}function ww(o,l){var h=dt;dt|=1;try{return o(l)}finally{dt=h,dt===0&&(Gc=Ct()+500,Ep&&Oo())}}function dl(o){Fo!==null&&Fo.tag===0&&(dt&6)===0&&Kc();var l=dt;dt|=1;var h=is.transition,y=ot;try{if(is.transition=null,ot=1,o)return o()}finally{ot=y,is.transition=h,dt=l,(dt&6)===0&&Oo()}}function xw(){Br=Hc.current,Rt(Hc)}function hl(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,iL(h)),sn!==null)for(h=sn.return;h!==null;){var y=h;switch(Cv(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&_p();break;case 3:zc(),Rt(gr),Rt(Wn),Bv();break;case 5:Uv(y);break;case 4:zc();break;case 13:Rt(Vt);break;case 19:Rt(Vt);break;case 10:Dv(y.type._context);break;case 22:case 23:xw()}h=h.return}if(Sn=o,sn=o=Bo(o.current,null),Mn=Br=l,mn=0,lh=null,fw=Wp=ul=0,wr=ch=null,al!==null){for(l=0;l<al.length;l++)if(h=al[l],y=h.interleaved,y!==null){h.interleaved=null;var x=y.next,E=h.pending;if(E!==null){var N=E.next;E.next=x,y.next=N}h.pending=y}al=null}return o}function QT(o,l){do{var h=sn;try{if(Ov(),jp.current=Lp,Op){for(var y=Ft.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}Op=!1}if(cl=0,Tn=pn=Ft=null,nh=!1,rh=0,hw.current=null,h===null||h.return===null){mn=1,lh=l,sn=null;break}e:{var E=o,N=h.return,B=h,q=l;if(l=Mn,B.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var te=q,ue=B,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ce=ue.alternate;ce?(ue.updateQueue=ce.updateQueue,ue.memoizedState=ce.memoizedState,ue.lanes=ce.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Te=_T(N);if(Te!==null){Te.flags&=-257,bT(Te,N,B,E,l),Te.mode&1&&xT(E,te,l),l=Te,q=te;var ke=l.updateQueue;if(ke===null){var je=new Set;je.add(q),l.updateQueue=je}else ke.add(q);break e}else{if((l&1)===0){xT(E,te,l),_w();break e}q=Error(t(426))}}else if(Ot&&B.mode&1){var en=_T(N);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),bT(en,N,B,E,l),Nv(Wc(q,B));break e}}E=q=Wc(q,B),mn!==4&&(mn=2),ch===null?ch=[E]:ch.push(E),E=N;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var Q=vT(E,q,l);qE(E,Q);break e;case 1:B=q;var G=E.type,Z=E.stateNode;if((E.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Vo===null||!Vo.has(Z)))){E.flags|=65536,l&=-l,E.lanes|=l;var pe=wT(E,B,l);qE(E,pe);break e}}E=E.return}while(E!==null)}ZT(h)}catch(Oe){l=Oe,sn===h&&h!==null&&(sn=h=h.return);continue}break}while(!0)}function JT(){var o=zp.current;return zp.current=Lp,o===null?Lp:o}function _w(){(mn===0||mn===3||mn===2)&&(mn=4),Sn===null||(ul&268435455)===0&&(Wp&268435455)===0||$o(Sn,Mn)}function Qp(o,l){var h=dt;dt|=2;var y=JT();(Sn!==o||Mn!==l)&&(Hi=null,hl(o,l));do try{AL();break}catch(x){QT(o,x)}while(!0);if(Ov(),dt=h,zp.current=y,sn!==null)throw Error(t(261));return Sn=null,Mn=0,mn}function AL(){for(;sn!==null;)XT(sn)}function RL(){for(;sn!==null&&!Ha();)XT(sn)}function XT(o){var l=nS(o.alternate,o,Br);o.memoizedProps=o.pendingProps,l===null?ZT(o):sn=l,hw.current=null}function ZT(o){var l=o;do{var h=l.alternate;if(o=l.return,(l.flags&32768)===0){if(h=EL(h,l,Br),h!==null){sn=h;return}}else{if(h=TL(h,l),h!==null){h.flags&=32767,sn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{mn=6,sn=null;return}}if(l=l.sibling,l!==null){sn=l;return}sn=l=o}while(l!==null);mn===0&&(mn=5)}function fl(o,l,h){var y=ot,x=is.transition;try{is.transition=null,ot=1,NL(o,l,h,y)}finally{is.transition=x,ot=y}return null}function NL(o,l,h,y){do Kc();while(Fo!==null);if((dt&6)!==0)throw Error(t(327));h=o.finishedWork;var x=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var E=h.lanes|h.childLanes;if(av(o,E),o===Sn&&(sn=Sn=null,Mn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Hp||(Hp=!0,rS(Ga,function(){return Kc(),null})),E=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||E){E=is.transition,is.transition=null;var N=ot;ot=1;var B=dt;dt|=4,hw.current=null,IL(o,h),zT(h,o),XM(_v),Mi=!!xv,_v=xv=null,o.current=h,kL(h),Ni(),dt=B,ot=N,is.transition=E}else o.current=h;if(Hp&&(Hp=!1,Fo=o,Gp=x),E=o.pendingLanes,E===0&&(Vo=null),rp(h.stateNode),xr(o,Ct()),l!==null)for(y=o.onRecoverableError,h=0;h<l.length;h++)x=l[h],y(x.value,{componentStack:x.stack,digest:x.digest});if(qp)throw qp=!1,o=mw,mw=null,o;return(Gp&1)!==0&&o.tag!==0&&Kc(),E=o.pendingLanes,(E&1)!==0?o===gw?uh++:(uh=0,gw=o):uh=0,Oo(),null}function Kc(){if(Fo!==null){var o=Ks(Gp),l=is.transition,h=ot;try{if(is.transition=null,ot=16>o?16:o,Fo===null)var y=!1;else{if(o=Fo,Fo=null,Gp=0,(dt&6)!==0)throw Error(t(331));var x=dt;for(dt|=4,Ie=o.current;Ie!==null;){var E=Ie,N=E.child;if((Ie.flags&16)!==0){var B=E.deletions;if(B!==null){for(var q=0;q<B.length;q++){var te=B[q];for(Ie=te;Ie!==null;){var ue=Ie;switch(ue.tag){case 0:case 11:case 15:ah(8,ue,E)}var de=ue.child;if(de!==null)de.return=ue,Ie=de;else for(;Ie!==null;){ue=Ie;var ce=ue.sibling,Te=ue.return;if(VT(ue),ue===te){Ie=null;break}if(ce!==null){ce.return=Te,Ie=ce;break}Ie=Te}}}var ke=E.alternate;if(ke!==null){var je=ke.child;if(je!==null){ke.child=null;do{var en=je.sibling;je.sibling=null,je=en}while(je!==null)}}Ie=E}}if((E.subtreeFlags&2064)!==0&&N!==null)N.return=E,Ie=N;else e:for(;Ie!==null;){if(E=Ie,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:ah(9,E,E.return)}var Q=E.sibling;if(Q!==null){Q.return=E.return,Ie=Q;break e}Ie=E.return}}var G=o.current;for(Ie=G;Ie!==null;){N=Ie;var Z=N.child;if((N.subtreeFlags&2064)!==0&&Z!==null)Z.return=N,Ie=Z;else e:for(N=G;Ie!==null;){if(B=Ie,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Bp(9,B)}}catch(Oe){qt(B,B.return,Oe)}if(B===N){Ie=null;break e}var pe=B.sibling;if(pe!==null){pe.return=B.return,Ie=pe;break e}Ie=B.return}}if(dt=x,Oo(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(Ka,o)}catch{}y=!0}return y}finally{ot=h,is.transition=l}}return!1}function eS(o,l,h){l=Wc(h,l),l=vT(o,l,1),o=Mo(o,l,1),l=rr(),o!==null&&(Xa(o,1,l),xr(o,l))}function qt(o,l,h){if(o.tag===3)eS(o,o,h);else for(;l!==null;){if(l.tag===3){eS(l,o,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Vo===null||!Vo.has(y))){o=Wc(h,o),o=wT(l,o,1),l=Mo(l,o,1),o=rr(),l!==null&&(Xa(l,1,o),xr(l,o));break}}l=l.return}}function jL(o,l,h){var y=o.pingCache;y!==null&&y.delete(l),l=rr(),o.pingedLanes|=o.suspendedLanes&h,Sn===o&&(Mn&h)===h&&(mn===4||mn===3&&(Mn&130023424)===Mn&&500>Ct()-pw?hl(o,0):fw|=h),xr(o,l)}function tS(o,l){l===0&&((o.mode&1)===0?l=1:(l=To,To<<=1,(To&130023424)===0&&(To=4194304)));var h=rr();o=zi(o,l),o!==null&&(Xa(o,l,h),xr(o,h))}function OL(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),tS(o,h)}function DL(o,l){var h=0;switch(o.tag){case 13:var y=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),tS(o,h)}var nS;nS=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||gr.current)vr=!0;else{if((o.lanes&h)===0&&(l.flags&128)===0)return vr=!1,bL(o,l,h);vr=(o.flags&131072)!==0}else vr=!1,Ot&&(l.flags&1048576)!==0&&DE(l,Sp,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Up(o,l),o=l.pendingProps;var x=Mc(l,Wn.current);Bc(l,h),x=qv(null,l,y,o,x,h);var E=Hv();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,yr(y)?(E=!0,bp(l)):E=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Vv(l),x.updater=Vp,l.stateNode=x,x._reactInternals=l,Xv(l,y,o,h),l=nw(null,l,y,!0,E,h)):(l.tag=0,Ot&&E&&Pv(l),nr(null,l,x,h),l=l.child),l;case 16:y=l.elementType;e:{switch(Up(o,l),o=l.pendingProps,x=y._init,y=x(y._payload),l.type=y,x=l.tag=LL(y),o=Ts(y,o),x){case 0:l=tw(null,l,y,o,h);break e;case 1:l=PT(null,l,y,o,h);break e;case 11:l=ET(null,l,y,o,h);break e;case 14:l=TT(null,l,y,Ts(y.type,o),h);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ts(y,x),tw(o,l,y,x,h);case 1:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ts(y,x),PT(o,l,y,x,h);case 3:e:{if(CT(l),o===null)throw Error(t(387));y=l.pendingProps,E=l.memoizedState,x=E.element,WE(o,l),Rp(l,y,null,h);var N=l.memoizedState;if(y=N.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){x=Wc(Error(t(423)),l),l=AT(o,l,y,h,x);break e}else if(y!==x){x=Wc(Error(t(424)),l),l=AT(o,l,y,h,x);break e}else for($r=Ro(l.stateNode.containerInfo.firstChild),Ur=l,Ot=!0,Es=null,h=BE(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Fc(),y===x){l=qi(o,l,h);break e}nr(o,l,y,h)}l=l.child}return l;case 5:return GE(l),o===null&&Rv(l),y=l.type,x=l.pendingProps,E=o!==null?o.memoizedProps:null,N=x.children,bv(y,x)?N=null:E!==null&&bv(y,E)&&(l.flags|=32),kT(o,l),nr(o,l,N,h),l.child;case 6:return o===null&&Rv(l),null;case 13:return RT(o,l,h);case 4:return Fv(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=Uc(l,null,y,h):nr(o,l,y,h),l.child;case 11:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ts(y,x),ET(o,l,y,x,h);case 7:return nr(o,l,l.pendingProps,h),l.child;case 8:return nr(o,l,l.pendingProps.children,h),l.child;case 12:return nr(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(y=l.type._context,x=l.pendingProps,E=l.memoizedProps,N=x.value,kt(Pp,y._currentValue),y._currentValue=N,E!==null)if(bs(E.value,N)){if(E.children===x.children&&!gr.current){l=qi(o,l,h);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var B=E.dependencies;if(B!==null){N=E.child;for(var q=B.firstContext;q!==null;){if(q.context===y){if(E.tag===1){q=Wi(-1,h&-h),q.tag=2;var te=E.updateQueue;if(te!==null){te=te.shared;var ue=te.pending;ue===null?q.next=q:(q.next=ue.next,ue.next=q),te.pending=q}}E.lanes|=h,q=E.alternate,q!==null&&(q.lanes|=h),Mv(E.return,h,l),B.lanes|=h;break}q=q.next}}else if(E.tag===10)N=E.type===l.type?null:E.child;else if(E.tag===18){if(N=E.return,N===null)throw Error(t(341));N.lanes|=h,B=N.alternate,B!==null&&(B.lanes|=h),Mv(N,h,l),N=E.sibling}else N=E.child;if(N!==null)N.return=E;else for(N=E;N!==null;){if(N===l){N=null;break}if(E=N.sibling,E!==null){E.return=N.return,N=E;break}N=N.return}E=N}nr(o,l,x.children,h),l=l.child}return l;case 9:return x=l.type,y=l.pendingProps.children,Bc(l,h),x=rs(x),y=y(x),l.flags|=1,nr(o,l,y,h),l.child;case 14:return y=l.type,x=Ts(y,l.pendingProps),x=Ts(y.type,x),TT(o,l,y,x,h);case 15:return ST(o,l,l.type,l.pendingProps,h);case 17:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ts(y,x),Up(o,l),l.tag=1,yr(y)?(o=!0,bp(l)):o=!1,Bc(l,h),gT(l,y,x),Xv(l,y,x,h),nw(null,l,y,!0,o,h);case 19:return jT(o,l,h);case 22:return IT(o,l,h)}throw Error(t(156,l.tag))};function rS(o,l){return kd(o,l)}function ML(o,l,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(o,l,h,y){return new ML(o,l,h,y)}function bw(o){return o=o.prototype,!(!o||!o.isReactComponent)}function LL(o){if(typeof o=="function")return bw(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===me)return 14}return 2}function Bo(o,l){var h=o.alternate;return h===null?(h=os(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Jp(o,l,h,y,x,E){var N=2;if(y=o,typeof o=="function")bw(o)&&(N=1);else if(typeof o=="string")N=5;else e:switch(o){case P:return pl(h.children,x,E,l);case A:N=8,x|=8;break;case O:return o=os(12,h,l,x|2),o.elementType=O,o.lanes=E,o;case L:return o=os(13,h,l,x),o.elementType=L,o.lanes=E,o;case ae:return o=os(19,h,l,x),o.elementType=ae,o.lanes=E,o;case ge:return Xp(h,x,E,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:N=10;break e;case F:N=9;break e;case $:N=11;break e;case me:N=14;break e;case xe:N=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=os(N,h,l,x),l.elementType=o,l.type=y,l.lanes=E,l}function pl(o,l,h,y){return o=os(7,o,y,l),o.lanes=h,o}function Xp(o,l,h,y){return o=os(22,o,y,l),o.elementType=ge,o.lanes=h,o.stateNode={isHidden:!1},o}function Ew(o,l,h){return o=os(6,o,null,l),o.lanes=h,o}function Tw(o,l,h){return l=os(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function VL(o,l,h,y,x){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nd(0),this.expirationTimes=Nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nd(0),this.identifierPrefix=y,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Sw(o,l,h,y,x,E,N,B,q){return o=new VL(o,l,h,B,q),l===1?(l=1,E===!0&&(l|=8)):l=0,E=os(3,null,null,l),o.current=E,E.stateNode=o,E.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vv(E),o}function FL(o,l,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:o,containerInfo:l,implementation:h}}function sS(o){if(!o)return jo;o=o._reactInternals;e:{if(xs(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(yr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var h=o.type;if(yr(h))return NE(o,h,l)}return l}function iS(o,l,h,y,x,E,N,B,q){return o=Sw(h,y,!0,o,x,E,N,B,q),o.context=sS(null),h=o.current,y=rr(),x=Uo(h),E=Wi(y,x),E.callback=l??null,Mo(h,E,x),o.current.lanes=x,Xa(o,x,y),xr(o,y),o}function Zp(o,l,h,y){var x=l.current,E=rr(),N=Uo(x);return h=sS(h),l.context===null?l.context=h:l.pendingContext=h,l=Wi(E,N),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=Mo(x,l,N),o!==null&&(ks(o,x,N,E),Ap(o,x,N)),N}function em(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function oS(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function Iw(o,l){oS(o,l),(o=o.alternate)&&oS(o,l)}function UL(){return null}var aS=typeof reportError=="function"?reportError:function(o){console.error(o)};function kw(o){this._internalRoot=o}tm.prototype.render=kw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Zp(o,l,null,null)},tm.prototype.unmount=kw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;dl(function(){Zp(null,o,null,null)}),l[Fi]=null}};function tm(o){this._internalRoot=o}tm.prototype.unstable_scheduleHydration=function(o){if(o){var l=Md();o={blockedOn:null,target:o,priority:l};for(var h=0;h<Mr.length&&l!==0&&l<Mr[h].priority;h++);Mr.splice(h,0,o),h===0&&xc(o)}};function Pw(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function nm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function lS(){}function $L(o,l,h,y,x){if(x){if(typeof y=="function"){var E=y;y=function(){var te=em(N);E.call(te)}}var N=iS(l,y,o,0,null,!1,!1,"",lS);return o._reactRootContainer=N,o[Fi]=N.current,Kd(o.nodeType===8?o.parentNode:o),dl(),N}for(;x=o.lastChild;)o.removeChild(x);if(typeof y=="function"){var B=y;y=function(){var te=em(q);B.call(te)}}var q=Sw(o,0,!1,null,null,!1,!1,"",lS);return o._reactRootContainer=q,o[Fi]=q.current,Kd(o.nodeType===8?o.parentNode:o),dl(function(){Zp(l,q,h,y)}),q}function rm(o,l,h,y,x){var E=h._reactRootContainer;if(E){var N=E;if(typeof x=="function"){var B=x;x=function(){var q=em(N);B.call(q)}}Zp(l,N,o,x)}else N=$L(h,l,o,x,y);return em(N)}Od=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=gt(l.pendingLanes);h!==0&&(jd(l,h|1),xr(l,Ct()),(dt&6)===0&&(Gc=Ct()+500,Oo()))}break;case 13:dl(function(){var y=zi(o,1);if(y!==null){var x=rr();ks(y,o,1,x)}}),Iw(o,1)}},vc=function(o){if(o.tag===13){var l=zi(o,134217728);if(l!==null){var h=rr();ks(l,o,134217728,h)}Iw(o,134217728)}},Dd=function(o){if(o.tag===13){var l=Uo(o),h=zi(o,l);if(h!==null){var y=rr();ks(h,o,l,y)}Iw(o,l)}},Md=function(){return ot},Ld=function(o,l){var h=ot;try{return ot=o,l()}finally{ot=h}},Xr=function(o,l,h){switch(l){case"input":if(Rn(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==o&&y.form===o.form){var x=xp(y);if(!x)throw Error(t(90));Xe(y),Rn(y,x)}}}break;case"textarea":hc(o,h);break;case"select":l=h.value,l!=null&&Nn(o,!!h.multiple,l,!1)}},ut=ww,xt=dl;var BL={usingClientEntryPoint:!1,Events:[Jd,Oc,xp,Ws,Fe,ww]},dh={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zL={bundleType:dh.bundleType,version:dh.version,rendererPackageName:dh.rendererPackageName,rendererConfig:dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=np(o),o===null?null:o.stateNode},findFiberByHostInstance:dh.findFiberByHostInstance||UL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sm.isDisabled&&sm.supportsFiber)try{Ka=sm.inject(zL),Or=sm}catch{}}return _r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BL,_r.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pw(l))throw Error(t(200));return FL(o,l,null,h)},_r.createRoot=function(o,l){if(!Pw(o))throw Error(t(299));var h=!1,y="",x=aS;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Sw(o,1,!1,null,null,h,!1,y,x),o[Fi]=l.current,Kd(o.nodeType===8?o.parentNode:o),new kw(l)},_r.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=np(l),o=o===null?null:o.stateNode,o},_r.flushSync=function(o){return dl(o)},_r.hydrate=function(o,l,h){if(!nm(l))throw Error(t(200));return rm(null,o,l,!0,h)},_r.hydrateRoot=function(o,l,h){if(!Pw(o))throw Error(t(405));var y=h!=null&&h.hydratedSources||null,x=!1,E="",N=aS;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),l=iS(l,null,o,1,h??null,x,!1,E,N),o[Fi]=l.current,Kd(o),y)for(o=0;o<y.length;o++)h=y[o],x=h._getVersion,x=x(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,x]:l.mutableSourceEagerHydrationData.push(h,x);return new tm(l)},_r.render=function(o,l,h){if(!nm(l))throw Error(t(200));return rm(null,o,l,!1,h)},_r.unmountComponentAtNode=function(o){if(!nm(o))throw Error(t(40));return o._reactRootContainer?(dl(function(){rm(null,null,o,!1,function(){o._reactRootContainer=null,o[Fi]=null})}),!0):!1},_r.unstable_batchedUpdates=ww,_r.unstable_renderSubtreeIntoContainer=function(o,l,h,y){if(!nm(h))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return rm(o,l,h,!1,y)},_r.version="18.3.1-next-f1338f8080-20240426",_r}var yS;function dP(){if(yS)return Nw.exports;yS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nw.exports=XL(),Nw.exports}var vS;function ZL(){if(vS)return om;vS=1;var n=dP();return om.createRoot=n.createRoot,om.hydrateRoot=n.hydrateRoot,om}var e4=ZL(),b=Ux();const H=Fx(b),hP=qL({__proto__:null,default:H},[b]);function Ji(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function wS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Af(...n){return e=>{let t=!1;const r=n.map(s=>{const i=wS(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():wS(n[s],null)}}}}function Qe(...n){return b.useCallback(Af(...n),n)}function t4(n,e){const t=b.createContext(e),r=i=>{const{children:a,...c}=i,d=b.useMemo(()=>c,Object.values(c));return u.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function s(i){const a=b.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function gs(n,e=[]){let t=[];function r(i,a){const c=b.createContext(a),d=t.length;t=[...t,a];const f=g=>{var C;const{scope:v,children:w,...I}=g,_=((C=v==null?void 0:v[n])==null?void 0:C[d])||c,S=b.useMemo(()=>I,Object.values(I));return u.jsx(_.Provider,{value:S,children:w})};f.displayName=i+"Provider";function p(g,v){var _;const w=((_=v==null?void 0:v[n])==null?void 0:_[d])||c,I=b.useContext(w);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[f,p]}const s=()=>{const i=t.map(a=>b.createContext(a));return function(c){const d=(c==null?void 0:c[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return s.scopeName=n,[r,n4(s,...e)]}function n4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((c,{useScope:d,scopeName:f})=>{const g=d(i)[`__scope${f}`];return{...c,...g}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var od=dP();const fP=Fx(od);function r4(n){const e=s4(n),t=b.forwardRef((r,s)=>{const{children:i,...a}=r,c=b.Children.toArray(i),d=c.find(o4);if(d){const f=d.props.children,p=c.map(g=>g===d?b.Children.count(f)>1?b.Children.only(null):b.isValidElement(f)?f.props.children:null:g);return u.jsx(e,{...a,ref:s,children:b.isValidElement(f)?b.cloneElement(f,void 0,p):null})}return u.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function s4(n){const e=b.forwardRef((t,r)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const a=l4(s),c=a4(i,s.props);return s.type!==b.Fragment&&(c.ref=r?Af(r,a):a),b.cloneElement(s,c)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var pP=Symbol("radix.slottable");function i4(n){const e=({children:t})=>u.jsx(u.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=pP,e}function o4(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===pP}function a4(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...c)=>{const d=i(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function l4(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var c4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rc=c4.reduce((n,e)=>{const t=r4(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:a,...c}=s,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(d,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function u4(n,e){n&&od.flushSync(()=>n.dispatchEvent(e))}function Ut(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function mP(n,e=globalThis==null?void 0:globalThis.document){const t=Ut(n);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var d4="DismissableLayer",E0="dismissableLayer.update",h4="dismissableLayer.pointerDownOutside",f4="dismissableLayer.focusOutside",xS,gP=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yP=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:c,...d}=n,f=b.useContext(gP),[p,g]=b.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=b.useState({}),I=Qe(e,P=>g(P)),_=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(S),R=p?_.indexOf(p):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,D=R>=C,U=g4(P=>{const A=P.target,O=[...f.branches].some(M=>M.contains(A));!D||O||(s==null||s(P),a==null||a(P),P.defaultPrevented||c==null||c())},v),z=y4(P=>{const A=P.target;[...f.branches].some(M=>M.contains(A))||(i==null||i(P),a==null||a(P),P.defaultPrevented||c==null||c())},v);return mP(P=>{R===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&c&&(P.preventDefault(),c()))},v),b.useEffect(()=>{if(p)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(xS=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),_S(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=xS)}},[p,v,t,f]),b.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),_S())},[p,f]),b.useEffect(()=>{const P=()=>w({});return document.addEventListener(E0,P),()=>document.removeEventListener(E0,P)},[]),u.jsx(rc.div,{...d,ref:I,style:{pointerEvents:j?D?"auto":"none":void 0,...n.style},onFocusCapture:Ji(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Ji(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ji(n.onPointerDownCapture,U.onPointerDownCapture)})});yP.displayName=d4;var p4="DismissableLayerBranch",m4=b.forwardRef((n,e)=>{const t=b.useContext(gP),r=b.useRef(null),s=Qe(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),u.jsx(rc.div,{...n,ref:s})});m4.displayName=p4;function g4(n,e=globalThis==null?void 0:globalThis.document){const t=Ut(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let d=function(){vP(h4,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function y4(n,e=globalThis==null?void 0:globalThis.document){const t=Ut(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&vP(f4,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _S(){const n=new CustomEvent(E0);document.dispatchEvent(n)}function vP(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?u4(s,i):s.dispatchEvent(i)}var Bt=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},v4=hP[" useId ".trim().toString()]||(()=>{}),w4=0;function so(n){const[e,t]=b.useState(v4());return Bt(()=>{t(r=>r??String(w4++))},[n]),e?`radix-${e}`:""}const x4=["top","right","bottom","left"],_a=Math.min,Wr=Math.max,Zm=Math.round,am=Math.floor,vi=n=>({x:n,y:n}),_4={left:"right",right:"left",bottom:"top",top:"bottom"},b4={start:"end",end:"start"};function T0(n,e,t){return Wr(n,_a(e,t))}function oo(n,e){return typeof n=="function"?n(e):n}function ao(n){return n.split("-")[0]}function ad(n){return n.split("-")[1]}function $x(n){return n==="x"?"y":"x"}function Bx(n){return n==="y"?"height":"width"}function ba(n){return["top","bottom"].includes(ao(n))?"y":"x"}function zx(n){return $x(ba(n))}function E4(n,e,t){t===void 0&&(t=!1);const r=ad(n),s=zx(n),i=Bx(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=eg(a)),[a,eg(a)]}function T4(n){const e=eg(n);return[S0(n),e,S0(e)]}function S0(n){return n.replace(/start|end/g,e=>b4[e])}function S4(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function I4(n,e,t,r){const s=ad(n);let i=S4(ao(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(S0)))),i}function eg(n){return n.replace(/left|right|bottom|top/g,e=>_4[e])}function k4(n){return{top:0,right:0,bottom:0,left:0,...n}}function wP(n){return typeof n!="number"?k4(n):{top:n,right:n,bottom:n,left:n}}function tg(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function bS(n,e,t){let{reference:r,floating:s}=n;const i=ba(e),a=zx(e),c=Bx(a),d=ao(e),f=i==="y",p=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,v=r[c]/2-s[c]/2;let w;switch(d){case"top":w={x:p,y:r.y-s.height};break;case"bottom":w={x:p,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(ad(e)){case"start":w[a]-=v*(t&&f?-1:1);break;case"end":w[a]+=v*(t&&f?-1:1);break}return w}const P4=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,c=i.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let f=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:p,y:g}=bS(f,r,d),v=r,w={},I=0;for(let _=0;_<c.length;_++){const{name:S,fn:C}=c[_],{x:R,y:j,data:D,reset:U}=await C({x:p,y:g,initialPlacement:r,placement:v,strategy:s,middlewareData:w,rects:f,platform:a,elements:{reference:n,floating:e}});p=R??p,g=j??g,w={...w,[S]:{...w[S],...D}},U&&I<=50&&(I++,typeof U=="object"&&(U.placement&&(v=U.placement),U.rects&&(f=U.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):U.rects),{x:p,y:g}=bS(f,v,d)),_=-1)}return{x:p,y:g,placement:v,strategy:s,middlewareData:w}};async function Xh(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:c,strategy:d}=n,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:v=!1,padding:w=0}=oo(e,n),I=wP(w),S=c[v?g==="floating"?"reference":"floating":g],C=tg(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(S)))==null||t?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:f,rootBoundary:p,strategy:d})),R=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),D=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},U=tg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:R,offsetParent:j,strategy:d}):R);return{top:(C.top-U.top+I.top)/D.y,bottom:(U.bottom-C.bottom+I.bottom)/D.y,left:(C.left-U.left+I.left)/D.x,right:(U.right-C.right+I.right)/D.x}}const C4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:c,middlewareData:d}=e,{element:f,padding:p=0}=oo(n,e)||{};if(f==null)return{};const g=wP(p),v={x:t,y:r},w=zx(s),I=Bx(w),_=await a.getDimensions(f),S=w==="y",C=S?"top":"left",R=S?"bottom":"right",j=S?"clientHeight":"clientWidth",D=i.reference[I]+i.reference[w]-v[w]-i.floating[I],U=v[w]-i.reference[w],z=await(a.getOffsetParent==null?void 0:a.getOffsetParent(f));let P=z?z[j]:0;(!P||!await(a.isElement==null?void 0:a.isElement(z)))&&(P=c.floating[j]||i.floating[I]);const A=D/2-U/2,O=P/2-_[I]/2-1,M=_a(g[C],O),F=_a(g[R],O),$=M,L=P-_[I]-F,ae=P/2-_[I]/2+A,me=T0($,ae,L),xe=!d.arrow&&ad(s)!=null&&ae!==me&&i.reference[I]/2-(ae<$?M:F)-_[I]/2<0,ge=xe?ae<$?ae-$:ae-L:0;return{[w]:v[w]+ge,data:{[w]:me,centerOffset:ae-me-ge,...xe&&{alignmentOffset:ge}},reset:xe}}}),A4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:c,platform:d,elements:f}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:_=!0,...S}=oo(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const C=ao(s),R=ba(c),j=ao(c)===c,D=await(d.isRTL==null?void 0:d.isRTL(f.floating)),U=v||(j||!_?[eg(c)]:T4(c)),z=I!=="none";!v&&z&&U.push(...I4(c,_,I,D));const P=[c,...U],A=await Xh(e,S),O=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(p&&O.push(A[C]),g){const ae=E4(s,a,D);O.push(A[ae[0]],A[ae[1]])}if(M=[...M,{placement:s,overflows:O}],!O.every(ae=>ae<=0)){var F,$;const ae=(((F=i.flip)==null?void 0:F.index)||0)+1,me=P[ae];if(me)return{data:{index:ae,overflows:M},reset:{placement:me}};let xe=($=M.filter(ge=>ge.overflows[0]<=0).sort((ge,ee)=>ge.overflows[1]-ee.overflows[1])[0])==null?void 0:$.placement;if(!xe)switch(w){case"bestFit":{var L;const ge=(L=M.filter(ee=>{if(z){const K=ba(ee.placement);return K===R||K==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(K=>K>0).reduce((K,re)=>K+re,0)]).sort((ee,K)=>ee[1]-K[1])[0])==null?void 0:L[0];ge&&(xe=ge);break}case"initialPlacement":xe=c;break}if(s!==xe)return{reset:{placement:xe}}}return{}}}};function ES(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function TS(n){return x4.some(e=>n[e]>=0)}const R4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=oo(n,e);switch(r){case"referenceHidden":{const i=await Xh(e,{...s,elementContext:"reference"}),a=ES(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:TS(a)}}}case"escaped":{const i=await Xh(e,{...s,altBoundary:!0}),a=ES(i,t.floating);return{data:{escapedOffsets:a,escaped:TS(a)}}}default:return{}}}}};async function N4(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ao(t),c=ad(t),d=ba(t)==="y",f=["left","top"].includes(a)?-1:1,p=i&&d?-1:1,g=oo(e,n);let{mainAxis:v,crossAxis:w,alignmentAxis:I}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof I=="number"&&(w=c==="end"?I*-1:I),d?{x:w*p,y:v*f}:{x:v*f,y:w*p}}const j4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:c}=e,d=await N4(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:a}}}}},O4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:c={fn:S=>{let{x:C,y:R}=S;return{x:C,y:R}}},...d}=oo(n,e),f={x:t,y:r},p=await Xh(e,d),g=ba(ao(s)),v=$x(g);let w=f[v],I=f[g];if(i){const S=v==="y"?"top":"left",C=v==="y"?"bottom":"right",R=w+p[S],j=w-p[C];w=T0(R,w,j)}if(a){const S=g==="y"?"top":"left",C=g==="y"?"bottom":"right",R=I+p[S],j=I-p[C];I=T0(R,I,j)}const _=c.fn({...e,[v]:w,[g]:I});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[v]:i,[g]:a}}}}}},D4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=oo(n,e),p={x:t,y:r},g=ba(s),v=$x(g);let w=p[v],I=p[g];const _=oo(c,e),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const j=v==="y"?"height":"width",D=i.reference[v]-i.floating[j]+S.mainAxis,U=i.reference[v]+i.reference[j]-S.mainAxis;w<D?w=D:w>U&&(w=U)}if(f){var C,R;const j=v==="y"?"width":"height",D=["top","left"].includes(ao(s)),U=i.reference[g]-i.floating[j]+(D&&((C=a.offset)==null?void 0:C[g])||0)+(D?0:S.crossAxis),z=i.reference[g]+i.reference[j]+(D?0:((R=a.offset)==null?void 0:R[g])||0)-(D?S.crossAxis:0);I<U?I=U:I>z&&(I=z)}return{[v]:w,[g]:I}}}},M4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:c}=e,{apply:d=()=>{},...f}=oo(n,e),p=await Xh(e,f),g=ao(s),v=ad(s),w=ba(s)==="y",{width:I,height:_}=i.floating;let S,C;g==="top"||g==="bottom"?(S=g,C=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(C=g,S=v==="end"?"top":"bottom");const R=_-p.top-p.bottom,j=I-p.left-p.right,D=_a(_-p[S],R),U=_a(I-p[C],j),z=!e.middlewareData.shift;let P=D,A=U;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=R),z&&!v){const M=Wr(p.left,0),F=Wr(p.right,0),$=Wr(p.top,0),L=Wr(p.bottom,0);w?A=I-2*(M!==0||F!==0?M+F:Wr(p.left,p.right)):P=_-2*($!==0||L!==0?$+L:Wr(p.top,p.bottom))}await d({...e,availableWidth:A,availableHeight:P});const O=await a.getDimensions(c.floating);return I!==O.width||_!==O.height?{reset:{rects:!0}}:{}}}};function $g(){return typeof window<"u"}function ld(n){return xP(n)?(n.nodeName||"").toLowerCase():"#document"}function Gr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ki(n){var e;return(e=(xP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function xP(n){return $g()?n instanceof Node||n instanceof Gr(n).Node:!1}function Ms(n){return $g()?n instanceof Element||n instanceof Gr(n).Element:!1}function Ei(n){return $g()?n instanceof HTMLElement||n instanceof Gr(n).HTMLElement:!1}function SS(n){return!$g()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Gr(n).ShadowRoot}function Rf(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Ls(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function L4(n){return["table","td","th"].includes(ld(n))}function Bg(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Wx(n){const e=qx(),t=Ms(n)?Ls(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function V4(n){let e=Ea(n);for(;Ei(e)&&!Uu(e);){if(Wx(e))return e;if(Bg(e))return null;e=Ea(e)}return null}function qx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uu(n){return["html","body","#document"].includes(ld(n))}function Ls(n){return Gr(n).getComputedStyle(n)}function zg(n){return Ms(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ea(n){if(ld(n)==="html")return n;const e=n.assignedSlot||n.parentNode||SS(n)&&n.host||ki(n);return SS(e)?e.host:e}function _P(n){const e=Ea(n);return Uu(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ei(e)&&Rf(e)?e:_P(e)}function Zh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=_P(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=Gr(s);if(i){const c=I0(a);return e.concat(a,a.visualViewport||[],Rf(s)?s:[],c&&t?Zh(c):[])}return e.concat(s,Zh(s,[],t))}function I0(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function bP(n){const e=Ls(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ei(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,c=Zm(t)!==i||Zm(r)!==a;return c&&(t=i,r=a),{width:t,height:r,$:c}}function Hx(n){return Ms(n)?n:n.contextElement}function _u(n){const e=Hx(n);if(!Ei(e))return vi(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=bP(e);let a=(i?Zm(t.width):t.width)/r,c=(i?Zm(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const F4=vi(0);function EP(n){const e=Gr(n);return!qx()||!e.visualViewport?F4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function U4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Gr(n)?!1:e}function Fl(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=Hx(n);let a=vi(1);e&&(r?Ms(r)&&(a=_u(r)):a=_u(n));const c=U4(i,t,r)?EP(i):vi(0);let d=(s.left+c.x)/a.x,f=(s.top+c.y)/a.y,p=s.width/a.x,g=s.height/a.y;if(i){const v=Gr(i),w=r&&Ms(r)?Gr(r):r;let I=v,_=I0(I);for(;_&&r&&w!==I;){const S=_u(_),C=_.getBoundingClientRect(),R=Ls(_),j=C.left+(_.clientLeft+parseFloat(R.paddingLeft))*S.x,D=C.top+(_.clientTop+parseFloat(R.paddingTop))*S.y;d*=S.x,f*=S.y,p*=S.x,g*=S.y,d+=j,f+=D,I=Gr(_),_=I0(I)}}return tg({width:p,height:g,x:d,y:f})}function Gx(n,e){const t=zg(n).scrollLeft;return e?e.left+t:Fl(ki(n)).left+t}function TP(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:Gx(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function $4(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=ki(r),c=e?Bg(e.floating):!1;if(r===a||c&&i)return t;let d={scrollLeft:0,scrollTop:0},f=vi(1);const p=vi(0),g=Ei(r);if((g||!g&&!i)&&((ld(r)!=="body"||Rf(a))&&(d=zg(r)),Ei(r))){const w=Fl(r);f=_u(r),p.x=w.x+r.clientLeft,p.y=w.y+r.clientTop}const v=a&&!g&&!i?TP(a,d,!0):vi(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+p.x+v.x,y:t.y*f.y-d.scrollTop*f.y+p.y+v.y}}function B4(n){return Array.from(n.getClientRects())}function z4(n){const e=ki(n),t=zg(n),r=n.ownerDocument.body,s=Wr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Wr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+Gx(n);const c=-t.scrollTop;return Ls(r).direction==="rtl"&&(a+=Wr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:c}}function W4(n,e){const t=Gr(n),r=ki(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,c=0,d=0;if(s){i=s.width,a=s.height;const f=qx();(!f||f&&e==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}return{width:i,height:a,x:c,y:d}}function q4(n,e){const t=Fl(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Ei(n)?_u(n):vi(1),a=n.clientWidth*i.x,c=n.clientHeight*i.y,d=s*i.x,f=r*i.y;return{width:a,height:c,x:d,y:f}}function IS(n,e,t){let r;if(e==="viewport")r=W4(n,t);else if(e==="document")r=z4(ki(n));else if(Ms(e))r=q4(e,t);else{const s=EP(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return tg(r)}function SP(n,e){const t=Ea(n);return t===e||!Ms(t)||Uu(t)?!1:Ls(t).position==="fixed"||SP(t,e)}function H4(n,e){const t=e.get(n);if(t)return t;let r=Zh(n,[],!1).filter(c=>Ms(c)&&ld(c)!=="body"),s=null;const i=Ls(n).position==="fixed";let a=i?Ea(n):n;for(;Ms(a)&&!Uu(a);){const c=Ls(a),d=Wx(a);!d&&c.position==="fixed"&&(s=null),(i?!d&&!s:!d&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Rf(a)&&!d&&SP(n,a))?r=r.filter(p=>p!==a):s=c,a=Ea(a)}return e.set(n,r),r}function G4(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?Bg(e)?[]:H4(e,this._c):[].concat(t),r],c=a[0],d=a.reduce((f,p)=>{const g=IS(e,p,s);return f.top=Wr(g.top,f.top),f.right=_a(g.right,f.right),f.bottom=_a(g.bottom,f.bottom),f.left=Wr(g.left,f.left),f},IS(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function K4(n){const{width:e,height:t}=bP(n);return{width:e,height:t}}function Y4(n,e,t){const r=Ei(e),s=ki(e),i=t==="fixed",a=Fl(n,!0,i,e);let c={scrollLeft:0,scrollTop:0};const d=vi(0);if(r||!r&&!i)if((ld(e)!=="body"||Rf(s))&&(c=zg(e)),r){const v=Fl(e,!0,i,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else s&&(d.x=Gx(s));const f=s&&!r&&!i?TP(s,c):vi(0),p=a.left+c.scrollLeft-d.x-f.x,g=a.top+c.scrollTop-d.y-f.y;return{x:p,y:g,width:a.width,height:a.height}}function Dw(n){return Ls(n).position==="static"}function kS(n,e){if(!Ei(n)||Ls(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ki(n)===t&&(t=t.ownerDocument.body),t}function IP(n,e){const t=Gr(n);if(Bg(n))return t;if(!Ei(n)){let s=Ea(n);for(;s&&!Uu(s);){if(Ms(s)&&!Dw(s))return s;s=Ea(s)}return t}let r=kS(n,e);for(;r&&L4(r)&&Dw(r);)r=kS(r,e);return r&&Uu(r)&&Dw(r)&&!Wx(r)?t:r||V4(n)||t}const Q4=async function(n){const e=this.getOffsetParent||IP,t=this.getDimensions,r=await t(n.floating);return{reference:Y4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function J4(n){return Ls(n).direction==="rtl"}const X4={convertOffsetParentRelativeRectToViewportRelativeRect:$4,getDocumentElement:ki,getClippingRect:G4,getOffsetParent:IP,getElementRects:Q4,getClientRects:B4,getDimensions:K4,getScale:_u,isElement:Ms,isRTL:J4};function kP(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Z4(n,e){let t=null,r;const s=ki(n);function i(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function a(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const f=n.getBoundingClientRect(),{left:p,top:g,width:v,height:w}=f;if(c||e(),!v||!w)return;const I=am(g),_=am(s.clientWidth-(p+v)),S=am(s.clientHeight-(g+w)),C=am(p),j={rootMargin:-I+"px "+-_+"px "+-S+"px "+-C+"px",threshold:Wr(0,_a(1,d))||1};let D=!0;function U(z){const P=z[0].intersectionRatio;if(P!==d){if(!D)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!kP(f,n.getBoundingClientRect())&&a(),D=!1}try{t=new IntersectionObserver(U,{...j,root:s.ownerDocument})}catch{t=new IntersectionObserver(U,j)}t.observe(n)}return a(!0),i}function PP(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=Hx(n),p=s||i?[...f?Zh(f):[],...Zh(e)]:[];p.forEach(C=>{s&&C.addEventListener("scroll",t,{passive:!0}),i&&C.addEventListener("resize",t)});const g=f&&c?Z4(f,t):null;let v=-1,w=null;a&&(w=new ResizeObserver(C=>{let[R]=C;R&&R.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=w)==null||j.observe(e)})),t()}),f&&!d&&w.observe(f),w.observe(e));let I,_=d?Fl(n):null;d&&S();function S(){const C=Fl(n);_&&!kP(_,C)&&t(),_=C,I=requestAnimationFrame(S)}return t(),()=>{var C;p.forEach(R=>{s&&R.removeEventListener("scroll",t),i&&R.removeEventListener("resize",t)}),g==null||g(),(C=w)==null||C.disconnect(),w=null,d&&cancelAnimationFrame(I)}}const eV=j4,tV=O4,nV=A4,rV=M4,sV=R4,PS=C4,iV=D4,oV=(n,e,t)=>{const r=new Map,s={platform:X4,...t},i={...s.platform,_c:r};return P4(n,e,{...s,platform:i})};var Nm=typeof document<"u"?b.useLayoutEffect:b.useEffect;function ng(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!ng(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!ng(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function CP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function CS(n,e){const t=CP(n);return Math.round(e*t)/t}function Mw(n){const e=b.useRef(n);return Nm(()=>{e.current=n}),e}function AP(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:c=!0,whileElementsMounted:d,open:f}=n,[p,g]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=b.useState(r);ng(v,r)||w(r);const[I,_]=b.useState(null),[S,C]=b.useState(null),R=b.useCallback(ee=>{ee!==z.current&&(z.current=ee,_(ee))},[]),j=b.useCallback(ee=>{ee!==P.current&&(P.current=ee,C(ee))},[]),D=i||I,U=a||S,z=b.useRef(null),P=b.useRef(null),A=b.useRef(p),O=d!=null,M=Mw(d),F=Mw(s),$=Mw(f),L=b.useCallback(()=>{if(!z.current||!P.current)return;const ee={placement:e,strategy:t,middleware:v};F.current&&(ee.platform=F.current),oV(z.current,P.current,ee).then(K=>{const re={...K,isPositioned:$.current!==!1};ae.current&&!ng(A.current,re)&&(A.current=re,od.flushSync(()=>{g(re)}))})},[v,e,t,F,$]);Nm(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,g(ee=>({...ee,isPositioned:!1})))},[f]);const ae=b.useRef(!1);Nm(()=>(ae.current=!0,()=>{ae.current=!1}),[]),Nm(()=>{if(D&&(z.current=D),U&&(P.current=U),D&&U){if(M.current)return M.current(D,U,L);L()}},[D,U,L,M,O]);const me=b.useMemo(()=>({reference:z,floating:P,setReference:R,setFloating:j}),[R,j]),xe=b.useMemo(()=>({reference:D,floating:U}),[D,U]),ge=b.useMemo(()=>{const ee={position:t,left:0,top:0};if(!xe.floating)return ee;const K=CS(xe.floating,p.x),re=CS(xe.floating,p.y);return c?{...ee,transform:"translate("+K+"px, "+re+"px)",...CP(xe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:re}},[t,c,xe.floating,p.x,p.y]);return b.useMemo(()=>({...p,update:L,refs:me,elements:xe,floatingStyles:ge}),[p,L,me,xe,ge])}const aV=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?PS({element:r.current,padding:s}).fn(t):{}:r?PS({element:r,padding:s}).fn(t):{}}}},RP=(n,e)=>({...eV(n),options:[n,e]}),NP=(n,e)=>({...tV(n),options:[n,e]}),jP=(n,e)=>({...iV(n),options:[n,e]}),OP=(n,e)=>({...nV(n),options:[n,e]}),DP=(n,e)=>({...rV(n),options:[n,e]}),MP=(n,e)=>({...sV(n),options:[n,e]}),LP=(n,e)=>({...aV(n),options:[n,e]});var lV="Arrow",VP=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return u.jsx(rc.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});VP.displayName=lV;var cV=VP;function FP(n){const[e,t]=b.useState(void 0);return Bt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,c;if("borderBoxSize"in i){const d=i.borderBoxSize,f=Array.isArray(d)?d[0]:d;a=f.inlineSize,c=f.blockSize}else a=n.offsetWidth,c=n.offsetHeight;t({width:a,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var UP="Popper",[$P,BP]=gs(UP),[FZ,zP]=$P(UP),WP="PopperAnchor",qP=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=zP(WP,t),a=b.useRef(null),c=Qe(e,a),d=b.useRef(null);return b.useEffect(()=>{const f=d.current;d.current=(r==null?void 0:r.current)||a.current,f!==d.current&&i.onAnchorChange(d.current)}),r?null:u.jsx(rc.div,{...s,ref:c})});qP.displayName=WP;var Kx="PopperContent",[uV,dV]=$P(Kx),HP=b.forwardRef((n,e)=>{var le,Se,Ne,Ve,He,Xe;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:I,..._}=n,S=zP(Kx,t),[C,R]=b.useState(null),j=Qe(e,mt=>R(mt)),[D,U]=b.useState(null),z=FP(D),P=(z==null?void 0:z.width)??0,A=(z==null?void 0:z.height)??0,O=r+(i!=="center"?"-"+i:""),M=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},F=Array.isArray(f)?f:[f],$=F.length>0,L={padding:M,boundary:F.filter(fV),altBoundary:$},{refs:ae,floatingStyles:me,placement:xe,isPositioned:ge,middlewareData:ee}=AP({strategy:"fixed",placement:O,whileElementsMounted:(...mt)=>PP(...mt,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[RP({mainAxis:s+A,alignmentAxis:a}),d&&NP({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?jP():void 0,...L}),d&&OP({...L}),DP({...L,apply:({elements:mt,rects:zt,availableWidth:pr,availableHeight:An})=>{const{width:Rn,height:Cr}=zt.reference,ht=mt.floating.style;ht.setProperty("--radix-popper-available-width",`${pr}px`),ht.setProperty("--radix-popper-available-height",`${An}px`),ht.setProperty("--radix-popper-anchor-width",`${Rn}px`),ht.setProperty("--radix-popper-anchor-height",`${Cr}px`)}}),D&&LP({element:D,padding:c}),pV({arrowWidth:P,arrowHeight:A}),v&&MP({strategy:"referenceHidden",...L})]}),[K,re]=YP(xe),W=Ut(I);Bt(()=>{ge&&(W==null||W())},[ge,W]);const X=(le=ee.arrow)==null?void 0:le.x,_e=(Se=ee.arrow)==null?void 0:Se.y,we=((Ne=ee.arrow)==null?void 0:Ne.centerOffset)!==0,[Re,De]=b.useState();return Bt(()=>{C&&De(window.getComputedStyle(C).zIndex)},[C]),u.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:ge?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(Ve=ee.transformOrigin)==null?void 0:Ve.x,(He=ee.transformOrigin)==null?void 0:He.y].join(" "),...((Xe=ee.hide)==null?void 0:Xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:u.jsx(uV,{scope:t,placedSide:K,onArrowChange:U,arrowX:X,arrowY:_e,shouldHideArrow:we,children:u.jsx(rc.div,{"data-side":K,"data-align":re,..._,ref:j,style:{..._.style,animation:ge?void 0:"none"}})})})});HP.displayName=Kx;var GP="PopperArrow",hV={top:"bottom",right:"left",bottom:"top",left:"right"},KP=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=dV(GP,r),a=hV[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(cV,{...s,ref:t,style:{...s.style,display:"block"}})})});KP.displayName=GP;function fV(n){return n!==null}var pV=n=>({name:"transformOrigin",options:n,fn(e){var S,C,R;const{placement:t,rects:r,middlewareData:s}=e,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,c=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[f,p]=YP(t),g={start:"0%",center:"50%",end:"100%"}[p],v=(((C=s.arrow)==null?void 0:C.x)??0)+c/2,w=(((R=s.arrow)==null?void 0:R.y)??0)+d/2;let I="",_="";return f==="bottom"?(I=a?g:`${v}px`,_=`${-d}px`):f==="top"?(I=a?g:`${v}px`,_=`${r.floating.height+d}px`):f==="right"?(I=`${-d}px`,_=a?g:`${w}px`):f==="left"&&(I=`${r.floating.width+d}px`,_=a?g:`${w}px`),{data:{x:I,y:_}}}});function YP(n){const[e,t="center"]=n.split("-");return[e,t]}var mV=qP,gV=HP,yV=KP;function vV(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var QP=n=>{const{present:e,children:t}=n,r=wV(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=Qe(r.ref,xV(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};QP.displayName="Presence";function wV(n){const[e,t]=b.useState(),r=b.useRef(null),s=b.useRef(n),i=b.useRef("none"),a=n?"mounted":"unmounted",[c,d]=vV(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const f=lm(r.current);i.current=c==="mounted"?f:"none"},[c]),Bt(()=>{const f=r.current,p=s.current;if(p!==n){const v=i.current,w=lm(f);n?d("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(p&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Bt(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,g=w=>{const _=lm(r.current).includes(CSS.escape(w.animationName));if(w.target===e&&_&&(d("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},v=w=>{w.target===e&&(i.current=lm(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:b.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function lm(n){return(n==null?void 0:n.animationName)||"none"}function xV(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var _V=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bV="VisuallyHidden",JP=b.forwardRef((n,e)=>u.jsx(rc.span,{...n,ref:e,style:{..._V,...n.style}}));JP.displayName=bV;var EV=JP,[Wg,UZ]=gs("Tooltip",[BP]),Yx=BP(),XP="TooltipProvider",TV=700,AS="tooltip.open",[SV,ZP]=Wg(XP),eC=n=>{const{__scopeTooltip:e,delayDuration:t=TV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,a=b.useRef(!0),c=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),u.jsx(SV,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),a.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:b.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:i})};eC.displayName=XP;var tC="Tooltip",[$Z,qg]=Wg(tC),k0="TooltipTrigger",IV=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=qg(k0,t),i=ZP(k0,t),a=Yx(t),c=b.useRef(null),d=Qe(e,c,s.onTriggerChange),f=b.useRef(!1),p=b.useRef(!1),g=b.useCallback(()=>f.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),u.jsx(mV,{asChild:!0,...a,children:u.jsx(rc.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:d,onPointerMove:Ji(n.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ji(n.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Ji(n.onPointerDown,()=>{s.open&&s.onClose(),f.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Ji(n.onFocus,()=>{f.current||s.onOpen()}),onBlur:Ji(n.onBlur,s.onClose),onClick:Ji(n.onClick,s.onClose)})})});IV.displayName=k0;var kV="TooltipPortal",[BZ,PV]=Wg(kV,{forceMount:void 0}),$u="TooltipContent",nC=b.forwardRef((n,e)=>{const t=PV($u,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,a=qg($u,n.__scopeTooltip);return u.jsx(QP,{present:r||a.open,children:a.disableHoverableContent?u.jsx(rC,{side:s,...i,ref:e}):u.jsx(CV,{side:s,...i,ref:e})})}),CV=b.forwardRef((n,e)=>{const t=qg($u,n.__scopeTooltip),r=ZP($u,n.__scopeTooltip),s=b.useRef(null),i=Qe(e,s),[a,c]=b.useState(null),{trigger:d,onClose:f}=t,p=s.current,{onPointerInTransitChange:g}=r,v=b.useCallback(()=>{c(null),g(!1)},[g]),w=b.useCallback((I,_)=>{const S=I.currentTarget,C={x:I.clientX,y:I.clientY},R=OV(C,S.getBoundingClientRect()),j=DV(C,R),D=MV(_.getBoundingClientRect()),U=VV([...j,...D]);c(U),g(!0)},[g]);return b.useEffect(()=>()=>v(),[v]),b.useEffect(()=>{if(d&&p){const I=S=>w(S,p),_=S=>w(S,d);return d.addEventListener("pointerleave",I),p.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",I),p.removeEventListener("pointerleave",_)}}},[d,p,w,v]),b.useEffect(()=>{if(a){const I=_=>{const S=_.target,C={x:_.clientX,y:_.clientY},R=(d==null?void 0:d.contains(S))||(p==null?void 0:p.contains(S)),j=!LV(C,a);R?v():j&&(v(),f())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[d,p,a,f,v]),u.jsx(rC,{...n,ref:i})}),[AV,RV]=Wg(tC,{isInside:!1}),NV=i4("TooltipContent"),rC=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...c}=n,d=qg($u,t),f=Yx(t),{onClose:p}=d;return b.useEffect(()=>(document.addEventListener(AS,p),()=>document.removeEventListener(AS,p)),[p]),b.useEffect(()=>{if(d.trigger){const g=v=>{const w=v.target;w!=null&&w.contains(d.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[d.trigger,p]),u.jsx(yP,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:u.jsxs(gV,{"data-state":d.stateAttribute,...f,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(NV,{children:r}),u.jsx(AV,{scope:t,isInside:!0,children:u.jsx(EV,{id:d.contentId,role:"tooltip",children:s||r})})]})})});nC.displayName=$u;var sC="TooltipArrow",jV=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Yx(t);return RV(sC,t).isInside?null:u.jsx(yV,{...s,...r,ref:e})});jV.displayName=sC;function OV(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function DV(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function MV(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function LV(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const c=e[i],d=e[a],f=c.x,p=c.y,g=d.x,v=d.y;p>r!=v>r&&t<(g-f)*(r-p)/(v-p)+f&&(s=!s)}return s}function VV(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),FV(e)}function FV(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var UV=eC,iC=nC;function oC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=oC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function aC(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=oC(n))&&(r&&(r+=" "),r+=e);return r}const Qx="-",$V=n=>{const e=zV(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const c=a.split(Qx);return c[0]===""&&c.length!==1&&c.shift(),lC(c,e)||BV(a)},getConflictingClassGroupIds:(a,c)=>{const d=t[a]||[];return c&&r[a]?[...d,...r[a]]:d}}},lC=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?lC(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(Qx);return(a=e.validators.find(({validator:c})=>c(i)))==null?void 0:a.classGroupId},RS=/^\[(.+)\]$/,BV=n=>{if(RS.test(n)){const e=RS.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},zV=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return qV(Object.entries(n.classGroups),t).forEach(([i,a])=>{P0(a,r,i,e)}),r},P0=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:NS(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(WV(s)){P0(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{P0(a,NS(e,i),t,r)})})},NS=(n,e)=>{let t=n;return e.split(Qx).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},WV=n=>n.isThemeGetter,qV=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,c])=>[e+a,c])):i);return[t,s]}):n,HV=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},cC="!",GV=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=c=>{const d=[];let f=0,p=0,g;for(let S=0;S<c.length;S++){let C=c[S];if(f===0){if(C===s&&(r||c.slice(S,S+i)===e)){d.push(c.slice(p,S)),p=S+i;continue}if(C==="/"){g=S;continue}}C==="["?f++:C==="]"&&f--}const v=d.length===0?c:c.substring(p),w=v.startsWith(cC),I=w?v.substring(1):v,_=g&&g>p?g-p:void 0;return{modifiers:d,hasImportantModifier:w,baseClassName:I,maybePostfixModifierPosition:_}};return t?c=>t({className:c,parseClassName:a}):a},KV=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},YV=n=>({cache:HV(n.cacheSize),parseClassName:GV(n),...$V(n)}),QV=/\s+/,JV=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split(QV);let c="";for(let d=a.length-1;d>=0;d-=1){const f=a[d],{modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=t(f);let I=!!w,_=r(I?v.substring(0,w):v);if(!_){if(!I){c=f+(c.length>0?" "+c:c);continue}if(_=r(v),!_){c=f+(c.length>0?" "+c:c);continue}I=!1}const S=KV(p).join(":"),C=g?S+cC:S,R=C+_;if(i.includes(R))continue;i.push(R);const j=s(_,I);for(let D=0;D<j.length;++D){const U=j[D];i.push(C+U)}c=f+(c.length>0?" "+c:c)}return c};function XV(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=uC(e))&&(r&&(r+=" "),r+=t);return r}const uC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=uC(n[r]))&&(t&&(t+=" "),t+=e);return t};function ZV(n,...e){let t,r,s,i=a;function a(d){const f=e.reduce((p,g)=>g(p),n());return t=YV(f),r=t.cache.get,s=t.cache.set,i=c,c(d)}function c(d){const f=r(d);if(f)return f;const p=JV(d,t);return s(d,p),p}return function(){return i(XV.apply(null,arguments))}}const Nt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},dC=/^\[(?:([a-z-]+):)?(.+)\]$/i,eF=/^\d+\/\d+$/,tF=new Set(["px","full","screen"]),nF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gi=n=>bu(n)||tF.has(n)||eF.test(n),Wo=n=>cd(n,"length",pF),bu=n=>!!n&&!Number.isNaN(Number(n)),Lw=n=>cd(n,"number",bu),fh=n=>!!n&&Number.isInteger(Number(n)),aF=n=>n.endsWith("%")&&bu(n.slice(0,-1)),Ze=n=>dC.test(n),qo=n=>nF.test(n),lF=new Set(["length","size","percentage"]),cF=n=>cd(n,lF,hC),uF=n=>cd(n,"position",hC),dF=new Set(["image","url"]),hF=n=>cd(n,dF,gF),fF=n=>cd(n,"",mF),ph=()=>!0,cd=(n,e,t)=>{const r=dC.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},pF=n=>rF.test(n)&&!sF.test(n),hC=()=>!1,mF=n=>iF.test(n),gF=n=>oF.test(n),yF=()=>{const n=Nt("colors"),e=Nt("spacing"),t=Nt("blur"),r=Nt("brightness"),s=Nt("borderColor"),i=Nt("borderRadius"),a=Nt("borderSpacing"),c=Nt("borderWidth"),d=Nt("contrast"),f=Nt("grayscale"),p=Nt("hueRotate"),g=Nt("invert"),v=Nt("gap"),w=Nt("gradientColorStops"),I=Nt("gradientColorStopPositions"),_=Nt("inset"),S=Nt("margin"),C=Nt("opacity"),R=Nt("padding"),j=Nt("saturate"),D=Nt("scale"),U=Nt("sepia"),z=Nt("skew"),P=Nt("space"),A=Nt("translate"),O=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ze,e],$=()=>[Ze,e],L=()=>["",Gi,Wo],ae=()=>["auto",bu,Ze],me=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],xe=()=>["solid","dashed","dotted","double","none"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",Ze],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[bu,Ze];return{cacheSize:500,separator:":",theme:{colors:[ph],spacing:[Gi,Wo],blur:["none","",qo,Ze],brightness:W(),borderColor:[n],borderRadius:["none","","full",qo,Ze],borderSpacing:$(),borderWidth:L(),contrast:W(),grayscale:K(),hueRotate:W(),invert:K(),gap:$(),gradientColorStops:[n],gradientColorStopPositions:[aF,Wo],inset:F(),margin:F(),opacity:W(),padding:$(),saturate:W(),scale:W(),sepia:K(),skew:W(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...me(),Ze]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fh,Ze]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",fh,Ze]}],"grid-cols":[{"grid-cols":[ph]}],"col-start-end":[{col:["auto",{span:["full",fh,Ze]},Ze]}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":[ph]}],"row-start-end":[{row:["auto",{span:[fh,Ze]},Ze]}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...ee()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ee(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ee(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[R]}],px:[{px:[R]}],py:[{py:[R]}],ps:[{ps:[R]}],pe:[{pe:[R]}],pt:[{pt:[R]}],pr:[{pr:[R]}],pb:[{pb:[R]}],pl:[{pl:[R]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,e]}],"min-w":[{"min-w":[Ze,e,"min","max","fit"]}],"max-w":[{"max-w":[Ze,e,"none","full","min","max","fit","prose",{screen:[qo]},qo]}],h:[{h:[Ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qo,Wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lw]}],"font-family":[{font:[ph]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",bu,Lw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gi,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gi,Wo]}],"underline-offset":[{"underline-offset":["auto",Gi,Ze]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...me(),uF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hF]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...xe(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:xe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...xe()]}],"outline-offset":[{"outline-offset":[Gi,Ze]}],"outline-w":[{outline:[Gi,Wo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Gi,Wo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",qo,fF]}],"shadow-color":[{shadow:[ph]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ge()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",qo,Ze]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[j]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[fh,Ze]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Gi,Wo,Lw]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vF=ZV(yF);function Ae(...n){return vF(aC(n))}const wF=UV,xF=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>u.jsx(iC,{ref:r,sideOffset:e,className:Ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));xF.displayName=iC.displayName;var Hg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gg=typeof window>"u"||"Deno"in globalThis;function As(){}function _F(n,e){return typeof n=="function"?n(e):n}function bF(n){return typeof n=="number"&&n>=0&&n!==1/0}function EF(n,e){return Math.max(n+(e||0)-Date.now(),0)}function jS(n,e){return typeof n=="function"?n(e):n}function TF(n,e){return typeof n=="function"?n(e):n}function OS(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:c}=n;if(a){if(r){if(e.queryHash!==Jx(a,e.options))return!1}else if(!tf(e.queryKey,a))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||i&&!i(e))}function DS(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(ef(e.options.mutationKey)!==ef(i))return!1}else if(!tf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jx(n,e){return((e==null?void 0:e.queryKeyHashFn)||ef)(n)}function ef(n){return JSON.stringify(n,(e,t)=>C0(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function tf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>tf(n[t],e[t])):!1}function fC(n,e){if(n===e)return n;const t=MS(n)&&MS(e);if(t||C0(n)&&C0(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),a=i.length,c=t?[]:{};let d=0;for(let f=0;f<a;f++){const p=t?f:i[f];(!t&&r.includes(p)||t)&&n[p]===void 0&&e[p]===void 0?(c[p]=void 0,d++):(c[p]=fC(n[p],e[p]),c[p]===n[p]&&n[p]!==void 0&&d++)}return s===a&&d===s?n:c}return e}function MS(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function C0(n){if(!LS(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!LS(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function LS(n){return Object.prototype.toString.call(n)==="[object Object]"}function SF(n){return new Promise(e=>{setTimeout(e,n)})}function IF(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?fC(n,e):e}function kF(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function PF(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Xx=Symbol();function pC(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Xx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Pl,oa,Ru,rP,CF=(rP=class extends Hg{constructor(){super();pt(this,Pl);pt(this,oa);pt(this,Ru);Ye(this,Ru,e=>{if(!Gg&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){oe(this,oa)||this.setEventListener(oe(this,Ru))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,oa))==null||e.call(this),Ye(this,oa,void 0))}setEventListener(e){var t;Ye(this,Ru,e),(t=oe(this,oa))==null||t.call(this),Ye(this,oa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){oe(this,Pl)!==e&&(Ye(this,Pl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof oe(this,Pl)=="boolean"?oe(this,Pl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pl=new WeakMap,oa=new WeakMap,Ru=new WeakMap,rP),mC=new CF,Nu,aa,ju,sP,AF=(sP=class extends Hg{constructor(){super();pt(this,Nu,!0);pt(this,aa);pt(this,ju);Ye(this,ju,e=>{if(!Gg&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){oe(this,aa)||this.setEventListener(oe(this,ju))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,aa))==null||e.call(this),Ye(this,aa,void 0))}setEventListener(e){var t;Ye(this,ju,e),(t=oe(this,aa))==null||t.call(this),Ye(this,aa,e(this.setOnline.bind(this)))}setOnline(e){oe(this,Nu)!==e&&(Ye(this,Nu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return oe(this,Nu)}},Nu=new WeakMap,aa=new WeakMap,ju=new WeakMap,sP),rg=new AF;function RF(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function NF(n){return Math.min(1e3*2**n,3e4)}function gC(n){return(n??"online")==="online"?rg.isOnline():!0}var yC=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Vw(n){return n instanceof yC}function vC(n){let e=!1,t=0,r=!1,s;const i=RF(),a=_=>{var S;r||(v(new yC(_)),(S=n.abort)==null||S.call(n))},c=()=>{e=!0},d=()=>{e=!1},f=()=>mC.isFocused()&&(n.networkMode==="always"||rg.isOnline())&&n.canRun(),p=()=>gC(n.networkMode)&&n.canRun(),g=_=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,_),s==null||s(),i.resolve(_))},v=_=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,_),s==null||s(),i.reject(_))},w=()=>new Promise(_=>{var S;s=C=>{(r||f())&&_(C)},(S=n.onPause)==null||S.call(n)}).then(()=>{var _;s=void 0,r||(_=n.onContinue)==null||_.call(n)}),I=()=>{if(r)return;let _;const S=t===0?n.initialPromise:void 0;try{_=S??n.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(g).catch(C=>{var z;if(r)return;const R=n.retry??(Gg?0:3),j=n.retryDelay??NF,D=typeof j=="function"?j(t,C):j,U=R===!0||typeof R=="number"&&t<R||typeof R=="function"&&R(t,C);if(e||!U){v(C);return}t++,(z=n.onFail)==null||z.call(n,t,C),SF(D).then(()=>f()?void 0:w()).then(()=>{e?v(C):I()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:c,continueRetry:d,canStart:p,start:()=>(p()?I():w().then(I),i)}}var jF=n=>setTimeout(n,0);function OF(){let n=[],e=0,t=c=>{c()},r=c=>{c()},s=jF;const i=c=>{e?n.push(c):s(()=>{t(c)})},a=()=>{const c=n;n=[],c.length&&s(()=>{r(()=>{c.forEach(d=>{t(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||a()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var or=OF(),Cl,iP,wC=(iP=class{constructor(){pt(this,Cl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bF(this.gcTime)&&Ye(this,Cl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Gg?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Cl)&&(clearTimeout(oe(this,Cl)),Ye(this,Cl,void 0))}},Cl=new WeakMap,iP),Ou,Du,ls,Al,Qn,Pf,Rl,Rs,Ki,oP,DF=(oP=class extends wC{constructor(t){super();pt(this,Rs);pt(this,Ou);pt(this,Du);pt(this,ls);pt(this,Al);pt(this,Qn);pt(this,Pf);pt(this,Rl);Ye(this,Rl,!1),Ye(this,Pf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ye(this,Al,t.client),Ye(this,ls,oe(this,Al).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ye(this,Ou,LF(this.options)),this.state=t.state??oe(this,Ou),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=oe(this,Qn))==null?void 0:t.promise}setOptions(t){this.options={...oe(this,Pf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,ls).remove(this)}setData(t,r){const s=IF(this.state.data,t,this.options);return Kn(this,Rs,Ki).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Kn(this,Rs,Ki).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,i;const r=(s=oe(this,Qn))==null?void 0:s.promise;return(i=oe(this,Qn))==null||i.cancel(t),r?r.then(As).catch(As):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Ou))}isActive(){return this.observers.some(t=>TF(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!EF(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,Qn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,Qn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),oe(this,ls).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(oe(this,Qn)&&(oe(this,Rl)?oe(this,Qn).cancel({revert:!0}):oe(this,Qn).cancelRetry()),this.scheduleGc()),oe(this,ls).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Kn(this,Rs,Ki).call(this,{type:"invalidate"})}fetch(t,r){var f,p,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,Qn))return oe(this,Qn).continueRetry(),oe(this,Qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const s=new AbortController,i=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ye(this,Rl,!0),s.signal)})},a=()=>{const v=pC(this.options,r),w={client:oe(this,Al),queryKey:this.queryKey,meta:this.meta};return i(w),Ye(this,Rl,!1),this.options.persister?this.options.persister(v,w,this):v(w)},c={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,Al),state:this.state,fetchFn:a};i(c),(f=this.options.behavior)==null||f.onFetch(c,this),Ye(this,Du,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&Kn(this,Rs,Ki).call(this,{type:"fetch",meta:(g=c.fetchOptions)==null?void 0:g.meta});const d=v=>{var w,I,_,S;Vw(v)&&v.silent||Kn(this,Rs,Ki).call(this,{type:"error",error:v}),Vw(v)||((I=(w=oe(this,ls).config).onError)==null||I.call(w,v,this),(S=(_=oe(this,ls).config).onSettled)==null||S.call(_,this.state.data,v,this)),this.scheduleGc()};return Ye(this,Qn,vC({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:v=>{var w,I,_,S;if(v===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(C){d(C);return}(I=(w=oe(this,ls).config).onSuccess)==null||I.call(w,v,this),(S=(_=oe(this,ls).config).onSettled)==null||S.call(_,v,this.state.error,this),this.scheduleGc()},onError:d,onFail:(v,w)=>{Kn(this,Rs,Ki).call(this,{type:"failed",failureCount:v,error:w})},onPause:()=>{Kn(this,Rs,Ki).call(this,{type:"pause"})},onContinue:()=>{Kn(this,Rs,Ki).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),oe(this,Qn).start()}},Ou=new WeakMap,Du=new WeakMap,ls=new WeakMap,Al=new WeakMap,Qn=new WeakMap,Pf=new WeakMap,Rl=new WeakMap,Rs=new WeakSet,Ki=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...MF(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Vw(i)&&i.revert&&oe(this,Du)?{...oe(this,Du),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),or.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),oe(this,ls).notify({query:this,type:"updated",action:t})})},oP);function MF(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function LF(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var di,aP,VF=(aP=class extends Hg{constructor(e={}){super();pt(this,di);this.config=e,Ye(this,di,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??Jx(s,t);let a=this.get(i);return a||(a=new DF({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){oe(this,di).has(e.queryHash)||(oe(this,di).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=oe(this,di).get(e.queryHash);t&&(e.destroy(),t===e&&oe(this,di).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){or.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,di).get(e)}getAll(){return[...oe(this,di).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>OS(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>OS(e,r)):t}notify(e){or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){or.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){or.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},di=new WeakMap,aP),hi,ir,Nl,fi,Jo,lP,FF=(lP=class extends wC{constructor(t){super();pt(this,fi);pt(this,hi);pt(this,ir);pt(this,Nl);this.mutationId=t.mutationId,Ye(this,ir,t.mutationCache),Ye(this,hi,[]),this.state=t.state||UF(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){oe(this,hi).includes(t)||(oe(this,hi).push(t),this.clearGcTimeout(),oe(this,ir).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ye(this,hi,oe(this,hi).filter(r=>r!==t)),this.scheduleGc(),oe(this,ir).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){oe(this,hi).length||(this.state.status==="pending"?this.scheduleGc():oe(this,ir).remove(this))}continue(){var t;return((t=oe(this,Nl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,c,d,f,p,g,v,w,I,_,S,C,R,j,D,U,z,P,A,O;const r=()=>{Kn(this,fi,Jo).call(this,{type:"continue"})};Ye(this,Nl,vC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,F)=>{Kn(this,fi,Jo).call(this,{type:"failed",failureCount:M,error:F})},onPause:()=>{Kn(this,fi,Jo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,ir).canRun(this)}));const s=this.state.status==="pending",i=!oe(this,Nl).canStart();try{if(s)r();else{Kn(this,fi,Jo).call(this,{type:"pending",variables:t,isPaused:i}),await((c=(a=oe(this,ir).config).onMutate)==null?void 0:c.call(a,t,this));const F=await((f=(d=this.options).onMutate)==null?void 0:f.call(d,t));F!==this.state.context&&Kn(this,fi,Jo).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const M=await oe(this,Nl).start();return await((g=(p=oe(this,ir).config).onSuccess)==null?void 0:g.call(p,M,t,this.state.context,this)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,M,t,this.state.context)),await((_=(I=oe(this,ir).config).onSettled)==null?void 0:_.call(I,M,null,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,M,null,t,this.state.context)),Kn(this,fi,Jo).call(this,{type:"success",data:M}),M}catch(M){try{throw await((j=(R=oe(this,ir).config).onError)==null?void 0:j.call(R,M,t,this.state.context,this)),await((U=(D=this.options).onError)==null?void 0:U.call(D,M,t,this.state.context)),await((P=(z=oe(this,ir).config).onSettled)==null?void 0:P.call(z,void 0,M,this.state.variables,this.state.context,this)),await((O=(A=this.options).onSettled)==null?void 0:O.call(A,void 0,M,t,this.state.context)),M}finally{Kn(this,fi,Jo).call(this,{type:"error",error:M})}}finally{oe(this,ir).runNext(this)}}},hi=new WeakMap,ir=new WeakMap,Nl=new WeakMap,fi=new WeakSet,Jo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),or.batch(()=>{oe(this,hi).forEach(s=>{s.onMutationUpdate(t)}),oe(this,ir).notify({mutation:this,type:"updated",action:t})})},lP);function UF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xi,Ns,Cf,cP,$F=(cP=class extends Hg{constructor(e={}){super();pt(this,Xi);pt(this,Ns);pt(this,Cf);this.config=e,Ye(this,Xi,new Set),Ye(this,Ns,new Map),Ye(this,Cf,0)}build(e,t,r){const s=new FF({mutationCache:this,mutationId:++im(this,Cf)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){oe(this,Xi).add(e);const t=cm(e);if(typeof t=="string"){const r=oe(this,Ns).get(t);r?r.push(e):oe(this,Ns).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,Xi).delete(e)){const t=cm(e);if(typeof t=="string"){const r=oe(this,Ns).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&oe(this,Ns).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=cm(e);if(typeof t=="string"){const r=oe(this,Ns).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=cm(e);if(typeof t=="string"){const s=(r=oe(this,Ns).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){or.batch(()=>{oe(this,Xi).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,Xi).clear(),oe(this,Ns).clear()})}getAll(){return Array.from(oe(this,Xi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>DS(t,r))}findAll(e={}){return this.getAll().filter(t=>DS(e,t))}notify(e){or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return or.batch(()=>Promise.all(e.map(t=>t.continue().catch(As))))}},Xi=new WeakMap,Ns=new WeakMap,Cf=new WeakMap,cP);function cm(n){var e;return(e=n.options.scope)==null?void 0:e.id}function VS(n){return{onFetch:(e,t)=>{var p,g,v,w,I;const r=e.options,s=(v=(g=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:v.direction,i=((w=e.state.data)==null?void 0:w.pages)||[],a=((I=e.state.data)==null?void 0:I.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const f=async()=>{let _=!1;const S=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},C=pC(e.options,e.fetchOptions),R=async(j,D,U)=>{if(_)return Promise.reject();if(D==null&&j.pages.length)return Promise.resolve(j);const z={client:e.client,queryKey:e.queryKey,pageParam:D,direction:U?"backward":"forward",meta:e.options.meta};S(z);const P=await C(z),{maxPages:A}=e.options,O=U?PF:kF;return{pages:O(j.pages,P,A),pageParams:O(j.pageParams,D,A)}};if(s&&i.length){const j=s==="backward",D=j?BF:FS,U={pages:i,pageParams:a},z=D(r,U);c=await R(U,z,j)}else{const j=n??i.length;do{const D=d===0?a[0]??r.initialPageParam:FS(r,c);if(d>0&&D==null)break;c=await R(c,D),d++}while(d<j)}return c};e.options.persister?e.fetchFn=()=>{var _,S;return(S=(_=e.options).persister)==null?void 0:S.call(_,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function FS(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function BF(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ht,la,ca,Mu,Lu,ua,Vu,Fu,uP,zF=(uP=class{constructor(n={}){pt(this,Ht);pt(this,la);pt(this,ca);pt(this,Mu);pt(this,Lu);pt(this,ua);pt(this,Vu);pt(this,Fu);Ye(this,Ht,n.queryCache||new VF),Ye(this,la,n.mutationCache||new $F),Ye(this,ca,n.defaultOptions||{}),Ye(this,Mu,new Map),Ye(this,Lu,new Map),Ye(this,ua,0)}mount(){im(this,ua)._++,oe(this,ua)===1&&(Ye(this,Vu,mC.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Ht).onFocus())})),Ye(this,Fu,rg.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Ht).onOnline())})))}unmount(){var n,e;im(this,ua)._--,oe(this,ua)===0&&((n=oe(this,Vu))==null||n.call(this),Ye(this,Vu,void 0),(e=oe(this,Fu))==null||e.call(this),Ye(this,Fu,void 0))}isFetching(n){return oe(this,Ht).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return oe(this,la).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=oe(this,Ht).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=oe(this,Ht).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(jS(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return oe(this,Ht).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=oe(this,Ht).get(r.queryHash),i=s==null?void 0:s.state.data,a=_F(e,i);if(a!==void 0)return oe(this,Ht).build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return or.batch(()=>oe(this,Ht).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=oe(this,Ht).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=oe(this,Ht);or.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=oe(this,Ht);return or.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=or.batch(()=>oe(this,Ht).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(As).catch(As)}invalidateQueries(n,e={}){return or.batch(()=>(oe(this,Ht).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=or.batch(()=>oe(this,Ht).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(As)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(As)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=oe(this,Ht).build(this,e);return t.isStaleByTime(jS(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(As).catch(As)}fetchInfiniteQuery(n){return n.behavior=VS(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(As).catch(As)}ensureInfiniteQueryData(n){return n.behavior=VS(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return rg.isOnline()?oe(this,la).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Ht)}getMutationCache(){return oe(this,la)}getDefaultOptions(){return oe(this,ca)}setDefaultOptions(n){Ye(this,ca,n)}setQueryDefaults(n,e){oe(this,Mu).set(ef(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...oe(this,Mu).values()],t={};return e.forEach(r=>{tf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){oe(this,Lu).set(ef(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...oe(this,Lu).values()],t={};return e.forEach(r=>{tf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...oe(this,ca).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Xx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...oe(this,ca).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){oe(this,Ht).clear(),oe(this,la).clear()}},Ht=new WeakMap,la=new WeakMap,ca=new WeakMap,Mu=new WeakMap,Lu=new WeakMap,ua=new WeakMap,Vu=new WeakMap,Fu=new WeakMap,uP),WF=b.createContext(void 0),qF=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),u.jsx(WF.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nf.apply(this,arguments)}var da;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(da||(da={}));const US="popstate";function HF(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return A0("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:sg(s)}return KF(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GF(){return Math.random().toString(36).substr(2,8)}function $S(n,e){return{usr:n.state,key:n.key,idx:e}}function A0(n,e,t,r){return t===void 0&&(t=null),nf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ud(e):e,{state:t,key:e&&e.key||r||GF()})}function sg(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ud(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function KF(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=da.Pop,d=null,f=p();f==null&&(f=0,a.replaceState(nf({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function g(){c=da.Pop;let S=p(),C=S==null?null:S-f;f=S,d&&d({action:c,location:_.location,delta:C})}function v(S,C){c=da.Push;let R=A0(_.location,S,C);f=p()+1;let j=$S(R,f),D=_.createHref(R);try{a.pushState(j,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(D)}i&&d&&d({action:c,location:_.location,delta:1})}function w(S,C){c=da.Replace;let R=A0(_.location,S,C);f=p();let j=$S(R,f),D=_.createHref(R);a.replaceState(j,"",D),i&&d&&d({action:c,location:_.location,delta:0})}function I(S){let C=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof S=="string"?S:sg(S);return R=R.replace(/ $/,"%20"),Jt(C,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,C)}let _={get action(){return c},get location(){return n(s,a)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(US,g),d=S,()=>{s.removeEventListener(US,g),d=null}},createHref(S){return e(s,S)},createURL:I,encodeLocation(S){let C=I(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:w,go(S){return a.go(S)}};return _}var BS;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(BS||(BS={}));function YF(n,e,t){return t===void 0&&(t="/"),QF(n,e,t)}function QF(n,e,t,r){let s=typeof e=="string"?ud(e):e,i=Bu(s.pathname||"/",t);if(i==null)return null;let a=_C(n);JF(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=lU(i);c=oU(a[d],f)}return c}function _C(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};d.relativePath.startsWith("/")&&(Jt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=pa([r,d.relativePath]),p=t.concat(d);i.children&&i.children.length>0&&(Jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),_C(i.children,e,p,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:sU(f,i.index),routesMeta:p})};return n.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let d of bC(i.path))s(i,a,d)}),e}function bC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=bC(r.join("/")),c=[];return c.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...a),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function JF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iU(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const XF=/^:[\w-]+$/,ZF=3,eU=2,tU=1,nU=10,rU=-2,zS=n=>n==="*";function sU(n,e){let t=n.split("/"),r=t.length;return t.some(zS)&&(r+=rU),e&&(r+=eU),t.filter(s=>!zS(s)).reduce((s,i)=>s+(XF.test(i)?ZF:i===""?tU:nU),r)}function iU(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function oU(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",g=R0({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:pa([i,g.pathname]),pathnameBase:hU(pa([i,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(i=pa([i,g.pathnameBase]))}return a}function R0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aU(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,p,g)=>{let{paramName:v,isOptional:w}=p;if(v==="*"){let _=c[g]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const I=c[g];return w&&!I?f[v]=void 0:f[v]=(I||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:a,pattern:n}}function aU(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lU(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function cU(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ud(n):n;return{pathname:t?t.startsWith("/")?t:uU(t,e):e,search:fU(r),hash:pU(s)}}function uU(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Fw(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dU(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function EC(n,e){let t=dU(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function TC(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=ud(n):(s=nf({},n),Jt(!s.pathname||!s.pathname.includes("?"),Fw("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),Fw("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),Fw("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}c=g>=0?e[g]:"/"}let d=cU(s,c),f=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}const pa=n=>n.join("/").replace(/\/\/+/g,"/"),hU=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),fU=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pU=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mU(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const SC=["post","put","patch","delete"];new Set(SC);const gU=["get",...SC];new Set(gU);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rf.apply(this,arguments)}const Kg=b.createContext(null),IC=b.createContext(null),Ca=b.createContext(null),Yg=b.createContext(null),Aa=b.createContext({outlet:null,matches:[],isDataRoute:!1}),kC=b.createContext(null);function yU(n,e){let{relative:t}=e===void 0?{}:e;Nf()||Jt(!1);let{basename:r,navigator:s}=b.useContext(Ca),{hash:i,pathname:a,search:c}=Qg(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:pa([r,a])),s.createHref({pathname:d,search:c,hash:i})}function Nf(){return b.useContext(Yg)!=null}function dd(){return Nf()||Jt(!1),b.useContext(Yg).location}function PC(n){b.useContext(Ca).static||b.useLayoutEffect(n)}function hn(){let{isDataRoute:n}=b.useContext(Aa);return n?AU():vU()}function vU(){Nf()||Jt(!1);let n=b.useContext(Kg),{basename:e,future:t,navigator:r}=b.useContext(Ca),{matches:s}=b.useContext(Aa),{pathname:i}=dd(),a=JSON.stringify(EC(s,t.v7_relativeSplatPath)),c=b.useRef(!1);return PC(()=>{c.current=!0}),b.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let g=TC(f,JSON.parse(a),i,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:pa([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,a,i,n])}function CC(){let{matches:n}=b.useContext(Aa),e=n[n.length-1];return e?e.params:{}}function Qg(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=b.useContext(Ca),{matches:s}=b.useContext(Aa),{pathname:i}=dd(),a=JSON.stringify(EC(s,r.v7_relativeSplatPath));return b.useMemo(()=>TC(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function wU(n,e){return xU(n,e)}function xU(n,e,t,r){Nf()||Jt(!1);let{navigator:s,static:i}=b.useContext(Ca),{matches:a}=b.useContext(Aa),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=dd(),g;if(e){var v;let C=typeof e=="string"?ud(e):e;f==="/"||(v=C.pathname)!=null&&v.startsWith(f)||Jt(!1),g=C}else g=p;let w=g.pathname||"/",I=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=YF(n,{pathname:I}),S=SU(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:pa([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:pa([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,r);return e&&S?b.createElement(Yg.Provider,{value:{location:rf({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:da.Pop}},S):S}function _U(){let n=CU(),e=mU(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const bU=b.createElement(_U,null);class EU extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(Aa.Provider,{value:this.props.routeContext},b.createElement(kC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TU(n){let{routeContext:e,match:t,children:r}=n,s=b.useContext(Kg);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Aa.Provider,{value:e},r)}function SU(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=(s=t)==null?void 0:s.errors;if(c!=null){let p=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);p>=0||Jt(!1),a=a.slice(0,Math.min(a.length,p+1))}let d=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:v,errors:w}=t,I=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,g,v)=>{let w,I=!1,_=null,S=null;t&&(w=c&&g.route.id?c[g.route.id]:void 0,_=g.route.errorElement||bU,d&&(f<0&&v===0?(RU("route-fallback"),I=!0,S=null):f===v&&(I=!0,S=g.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),R=()=>{let j;return w?j=_:I?j=S:g.route.Component?j=b.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,b.createElement(TU,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:j})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?b.createElement(EU,{location:t.location,revalidation:t.revalidation,component:_,error:w,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):R()},null)}var AC=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(AC||{}),RC=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(RC||{});function IU(n){let e=b.useContext(Kg);return e||Jt(!1),e}function kU(n){let e=b.useContext(IC);return e||Jt(!1),e}function PU(n){let e=b.useContext(Aa);return e||Jt(!1),e}function NC(n){let e=PU(),t=e.matches[e.matches.length-1];return t.route.id||Jt(!1),t.route.id}function CU(){var n;let e=b.useContext(kC),t=kU(),r=NC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function AU(){let{router:n}=IU(AC.UseNavigateStable),e=NC(RC.UseNavigateStable),t=b.useRef(!1);return PC(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,rf({fromRouteId:e},i)))},[n,e])}const WS={};function RU(n,e,t){WS[n]||(WS[n]=!0)}function NU(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function gn(n){Jt(!1)}function jU(n){let{basename:e="/",children:t=null,location:r,navigationType:s=da.Pop,navigator:i,static:a=!1,future:c}=n;Nf()&&Jt(!1);let d=e.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:d,navigator:i,static:a,future:rf({v7_relativeSplatPath:!1},c)}),[d,c,i,a]);typeof r=="string"&&(r=ud(r));let{pathname:p="/",search:g="",hash:v="",state:w=null,key:I="default"}=r,_=b.useMemo(()=>{let S=Bu(p,d);return S==null?null:{location:{pathname:S,search:g,hash:v,state:w,key:I},navigationType:s}},[d,p,g,v,w,I,s]);return _==null?null:b.createElement(Ca.Provider,{value:f},b.createElement(Yg.Provider,{children:t,value:_}))}function OU(n){let{children:e,location:t}=n;return wU(N0(e),t)}new Promise(()=>{});function N0(n,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(n,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){t.push.apply(t,N0(r.props.children,i));return}r.type!==gn&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=N0(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ig(){return ig=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ig.apply(this,arguments)}function jC(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function DU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MU(n,e){return n.button===0&&(!e||e==="_self")&&!DU(n)}const LU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VU=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],FU="6";try{window.__reactRouterVersion=FU}catch{}const UU=b.createContext({isTransitioning:!1}),$U="startTransition",qS=hP[$U];function BU(n){let{basename:e,children:t,future:r,window:s}=n,i=b.useRef();i.current==null&&(i.current=HF({window:s,v5Compat:!0}));let a=i.current,[c,d]=b.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=b.useCallback(g=>{f&&qS?qS(()=>d(g)):d(g)},[d,f]);return b.useLayoutEffect(()=>a.listen(p),[a,p]),b.useEffect(()=>NU(r),[r]),b.createElement(jU,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:a,future:r})}const zU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=b.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:d,to:f,preventScrollReset:p,viewTransition:g}=e,v=jC(e,LU),{basename:w}=b.useContext(Ca),I,_=!1;if(typeof f=="string"&&WU.test(f)&&(I=f,zU))try{let j=new URL(window.location.href),D=f.startsWith("//")?new URL(j.protocol+f):new URL(f),U=Bu(D.pathname,w);D.origin===j.origin&&U!=null?f=U+D.search+D.hash:_=!0}catch{}let S=yU(f,{relative:s}),C=HU(f,{replace:a,state:c,target:d,preventScrollReset:p,relative:s,viewTransition:g});function R(j){r&&r(j),j.defaultPrevented||C(j)}return b.createElement("a",ig({},v,{href:I||S,onClick:_||i?r:R,ref:t,target:d}))}),um=b.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:c,to:d,viewTransition:f,children:p}=e,g=jC(e,VU),v=Qg(d,{relative:g.relative}),w=dd(),I=b.useContext(IC),{navigator:_,basename:S}=b.useContext(Ca),C=I!=null&&GU(v)&&f===!0,R=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,j=w.pathname,D=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;s||(j=j.toLowerCase(),D=D?D.toLowerCase():null,R=R.toLowerCase()),D&&S&&(D=Bu(D,S)||D);const U=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let z=j===R||!a&&j.startsWith(R)&&j.charAt(U)==="/",P=D!=null&&(D===R||!a&&D.startsWith(R)&&D.charAt(R.length)==="/"),A={isActive:z,isPending:P,isTransitioning:C},O=z?r:void 0,M;typeof i=="function"?M=i(A):M=[i,z?"active":null,P?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let F=typeof c=="function"?c(A):c;return b.createElement(Xn,ig({},g,{"aria-current":O,className:M,ref:t,style:F,to:d,viewTransition:f}),typeof p=="function"?p(A):p)});var j0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(j0||(j0={}));var HS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(HS||(HS={}));function qU(n){let e=b.useContext(Kg);return e||Jt(!1),e}function HU(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,d=hn(),f=dd(),p=Qg(n,{relative:a});return b.useCallback(g=>{if(MU(g,t)){g.preventDefault();let v=r!==void 0?r:sg(f)===sg(p);d(n,{replace:v,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[f,d,p,r,s,t,n,i,a,c])}function GU(n,e){e===void 0&&(e={});let t=b.useContext(UU);t==null&&Jt(!1);let{basename:r}=qU(j0.useViewTransitionState),s=Qg(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Bu(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Bu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return R0(s.pathname,a)!=null||R0(s.pathname,i)!=null}function Ul(n){const e=YU(n),t=b.forwardRef((r,s)=>{const{children:i,...a}=r,c=b.Children.toArray(i),d=c.find(JU);if(d){const f=d.props.children,p=c.map(g=>g===d?b.Children.count(f)>1?b.Children.only(null):b.isValidElement(f)?f.props.children:null:g);return u.jsx(e,{...a,ref:s,children:b.isValidElement(f)?b.cloneElement(f,void 0,p):null})}return u.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var KU=Ul("Slot");function YU(n){const e=b.forwardRef((t,r)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const a=ZU(s),c=XU(i,s.props);return s.type!==b.Fragment&&(c.ref=r?Af(r,a):a),b.cloneElement(s,c)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var OC=Symbol("radix.slottable");function QU(n){const e=({children:t})=>u.jsx(u.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=OC,e}function JU(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===OC}function XU(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...c)=>{i(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function ZU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const GS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,KS=aC,Zx=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return KS(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(f=>{const p=t==null?void 0:t[f],g=i==null?void 0:i[f];if(p===null)return null;const v=GS(p)||GS(g);return s[f][v]}),c=t&&Object.entries(t).reduce((f,p)=>{let[g,v]=p;return v===void 0||(f[g]=v),f},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:g,className:v,...w}=p;return Object.entries(w).every(I=>{let[_,S]=I;return Array.isArray(S)?S.includes({...i,...c}[_]):{...i,...c}[_]===S})?[...f,g,v]:f},[]);return KS(n,a,d,t==null?void 0:t.class,t==null?void 0:t.className)},e_=Zx("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fe=b.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?KU:"button";return u.jsx(a,{className:Ae(e_({variant:e,size:t,className:n})),ref:i,...s})});fe.displayName="Button";/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=()=>{};var YS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},t6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],d=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},MC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,p=i>>2,g=(i&3)<<4|c>>4;let v=(c&15)<<2|f>>6,w=f&63;d||(w=64,a||(v=64)),r.push(t[p],t[g],t[v],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):t6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const g=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||f==null||g==null)throw new n6;const v=i<<2|c>>4;if(r.push(v),f!==64){const w=c<<4&240|f>>2;if(r.push(w),g!==64){const I=f<<6&192|g;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class n6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r6=function(n){const e=DC(n);return MC.encodeByteArray(e,!0)},og=function(n){return r6(n).replace(/\./g,"")},LC=function(n){try{return MC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=()=>VC().__FIREBASE_DEFAULTS__,i6=()=>{if(typeof process>"u"||typeof YS>"u")return;const n=YS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},o6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LC(n[1]);return e&&JSON.parse(e)},Jg=()=>{try{return e6()||s6()||i6()||o6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FC=n=>{var e,t;return(t=(e=Jg())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},UC=n=>{const e=FC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$C=()=>{var n;return(n=Jg())==null?void 0:n.config},BC=n=>{var e;return(e=Jg())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a6=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function t_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[og(JSON.stringify(t)),og(JSON.stringify(a)),""].join(".")}const Oh={};function l6(){const n={prod:[],emulator:[]};for(const e of Object.keys(Oh))Oh[e]?n.emulator.push(e):n.prod.push(e);return n}function c6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let QS=!1;function n_(n,e){if(typeof window>"u"||typeof document>"u"||!Ra(window.location.host)||Oh[n]===e||Oh[n]||QS)return;Oh[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=l6().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{QS=!0,a()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=c6(r),w=t("text"),I=document.getElementById(w)||document.createElement("span"),_=t("learnmore"),S=document.getElementById(_)||document.createElement("a"),C=t("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const j=v.element;c(j),p(S,_);const D=f();d(R,C),j.append(R,I,S,D),document.body.appendChild(j)}i?(I.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function WC(){var e;const n=(e=Jg())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h6(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function f6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p6(){const n=vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qC(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){return!WC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function GC(){try{return typeof indexedDB=="object"}catch{return!1}}function m6(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="FirebaseError";class Pi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=g6,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jf.prototype.create)}}class jf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?y6(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Pi(s,c,r)}}function y6(n,e){return n.replace(v6,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const v6=/\{\$([^}]+)}/g;function w6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $l(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(JS(i)&&JS(a)){if(!$l(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function JS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Th(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function x6(n,e){const t=new _6(n,e);return t.subscribe.bind(t)}class _6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");b6(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Uw),s.error===void 0&&(s.error=Uw),s.complete===void 0&&(s.complete=Uw);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b6(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Uw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n){return n&&n._delegate?n._delegate:n}class Ta{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new a6;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S6(e))try{this.getOrInitializeService({instanceIdentifier:vl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vl){return this.instances.has(e)}getOptions(e=vl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vl){return this.component?this.component.multipleInstances?e:vl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T6(n){return n===vl?void 0:n}function S6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new E6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const k6={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},P6=st.INFO,C6={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},A6=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=C6[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r_{constructor(e){this.name=e,this._logLevel=P6,this._logHandler=A6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const R6=(n,e)=>e.some(t=>n instanceof t);let XS,ZS;function N6(){return XS||(XS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j6(){return ZS||(ZS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KC=new WeakMap,O0=new WeakMap,YC=new WeakMap,$w=new WeakMap,s_=new WeakMap;function O6(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(ma(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&KC.set(t,n)}).catch(()=>{}),s_.set(e,n),e}function D6(n){if(O0.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});O0.set(n,e)}let D0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return O0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ma(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function M6(n){D0=n(D0)}function L6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bw(this),e,...t);return YC.set(r,e.sort?e.sort():[e]),ma(r)}:j6().includes(n)?function(...e){return n.apply(Bw(this),e),ma(KC.get(this))}:function(...e){return ma(n.apply(Bw(this),e))}}function V6(n){return typeof n=="function"?L6(n):(n instanceof IDBTransaction&&D6(n),R6(n,N6())?new Proxy(n,D0):n)}function ma(n){if(n instanceof IDBRequest)return O6(n);if($w.has(n))return $w.get(n);const e=V6(n);return e!==n&&($w.set(n,e),s_.set(e,n)),e}const Bw=n=>s_.get(n);function F6(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=ma(a);return r&&a.addEventListener("upgradeneeded",d=>{r(ma(a.result),d.oldVersion,d.newVersion,ma(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const U6=["get","getKey","getAll","getAllKeys","count"],$6=["put","add","delete","clear"],zw=new Map;function eI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zw.get(e))return zw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=$6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||U6.includes(t)))return;const i=async function(a,...c){const d=this.transaction(a,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&d.done]))[0]};return zw.set(e,i),i}M6(n=>({...n,get:(e,t,r)=>eI(e,t)||n.get(e,t,r),has:(e,t)=>!!eI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z6(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function z6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const M0="@firebase/app",tI="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new r_("@firebase/app"),W6="@firebase/app-compat",q6="@firebase/analytics-compat",H6="@firebase/analytics",G6="@firebase/app-check-compat",K6="@firebase/app-check",Y6="@firebase/auth",Q6="@firebase/auth-compat",J6="@firebase/database",X6="@firebase/data-connect",Z6="@firebase/database-compat",e3="@firebase/functions",t3="@firebase/functions-compat",n3="@firebase/installations",r3="@firebase/installations-compat",s3="@firebase/messaging",i3="@firebase/messaging-compat",o3="@firebase/performance",a3="@firebase/performance-compat",l3="@firebase/remote-config",c3="@firebase/remote-config-compat",u3="@firebase/storage",d3="@firebase/storage-compat",h3="@firebase/firestore",f3="@firebase/ai",p3="@firebase/firestore-compat",m3="firebase",g3="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="[DEFAULT]",y3={[M0]:"fire-core",[W6]:"fire-core-compat",[H6]:"fire-analytics",[q6]:"fire-analytics-compat",[K6]:"fire-app-check",[G6]:"fire-app-check-compat",[Y6]:"fire-auth",[Q6]:"fire-auth-compat",[J6]:"fire-rtdb",[X6]:"fire-data-connect",[Z6]:"fire-rtdb-compat",[e3]:"fire-fn",[t3]:"fire-fn-compat",[n3]:"fire-iid",[r3]:"fire-iid-compat",[s3]:"fire-fcm",[i3]:"fire-fcm-compat",[o3]:"fire-perf",[a3]:"fire-perf-compat",[l3]:"fire-rc",[c3]:"fire-rc-compat",[u3]:"fire-gcs",[d3]:"fire-gcs-compat",[h3]:"fire-fst",[p3]:"fire-fst-compat",[f3]:"fire-vertex","fire-js":"fire-js",[m3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new Map,v3=new Map,V0=new Map;function nI(n,e){try{n.container.addComponent(e)}catch(t){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bl(n){const e=n.name;if(V0.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;V0.set(e,n);for(const t of ag.values())nI(t,n);for(const t of v3.values())nI(t,n);return!0}function Xg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ga=new jf("app","Firebase",w3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ga.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=g3;function QC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:L0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ga.create("bad-app-name",{appName:String(s)});if(t||(t=$C()),!t)throw ga.create("no-options");const i=ag.get(s);if(i){if($l(t,i.options)&&$l(r,i.config))return i;throw ga.create("duplicate-app",{appName:s})}const a=new I6(s);for(const d of V0.values())a.addComponent(d);const c=new x3(t,r,a);return ag.set(s,c),c}function i_(n=L0){const e=ag.get(n);if(!e&&n===L0&&$C())return QC();if(!e)throw ga.create("no-app",{appName:n});return e}function wi(n,e,t){let r=y3[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(a.join(" "));return}Bl(new Ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="firebase-heartbeat-database",b3=1,sf="firebase-heartbeat-store";let Ww=null;function JC(){return Ww||(Ww=F6(_3,b3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ga.create("idb-open",{originalErrorMessage:n.message})})),Ww}async function E3(n){try{const t=(await JC()).transaction(sf),r=await t.objectStore(sf).get(XC(n));return await t.done,r}catch(e){if(e instanceof Pi)lo.warn(e.message);else{const t=ga.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lo.warn(t.message)}}}async function rI(n,e){try{const r=(await JC()).transaction(sf,"readwrite");await r.objectStore(sf).put(e,XC(n)),await r.done}catch(t){if(t instanceof Pi)lo.warn(t.message);else{const r=ga.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});lo.warn(r.message)}}}function XC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1024,S3=30;class I3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new P3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S3){const a=C3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){lo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sI(),{heartbeatsToSend:r,unsentEntries:s}=k3(this._heartbeatsCache.heartbeats),i=og(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return lo.warn(t),""}}}function sI(){return new Date().toISOString().substring(0,10)}function k3(n,e=T3){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),iI(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),iI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class P3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GC()?m6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await E3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iI(n){return og(JSON.stringify({version:2,heartbeats:n})).length}function C3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(n){Bl(new Ta("platform-logger",e=>new B6(e),"PRIVATE")),Bl(new Ta("heartbeat",e=>new I3(e),"PRIVATE")),wi(M0,tI,n),wi(M0,tI,"esm2020"),wi("fire-js","")}A3("");function ZC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R3=ZC,eA=new jf("auth","Firebase",ZC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new r_("@firebase/auth");function N3(n,...e){lg.logLevel<=st.WARN&&lg.warn(`Auth (${sc}): ${n}`,...e)}function jm(n,...e){lg.logLevel<=st.ERROR&&lg.error(`Auth (${sc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(n,...e){throw a_(n,...e)}function Pr(n,...e){return a_(n,...e)}function o_(n,e,t){const r={...R3(),[e]:t};return new jf("auth","Firebase",r).create(e,{appName:n.name})}function lr(n){return o_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zg(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ps(n,"argument-error"),o_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function a_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eA.create(n,...e)}function be(n,e,...t){if(!n)throw a_(e,...t)}function eo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jm(e),new Error(e)}function co(n,e){n||eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function l_(){return oI()==="http:"||oI()==="https:"}function oI(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l_()||h6()||"connection"in navigator)?navigator.onLine:!0}function O3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=u6()||f6()}get(){return j3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n,e){co(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L3=new Of(3e4,6e4);function wn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xn(n,e,t,r,s={}){return nA(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=hd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...i};return d6()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ra(n.emulatorConfig.host)&&(f.credentials="include"),tA.fetch()(await rA(n,n.config.apiHost,t,c),f)})}async function nA(n,e,t){n._canInitEmulator=!1;const r={...D3,...e};try{const s=new F3(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Sh(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Sh(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Sh(n,"user-disabled",a);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw o_(n,p,f);ps(n,p)}}catch(s){if(s instanceof Pi)throw s;ps(n,"network-request-failed",{message:String(s)})}}async function mo(n,e,t,r,s={}){const i=await xn(n,e,t,r,s);return"mfaPendingCredential"in i&&ps(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function rA(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?c_(n.config,s):`${n.config.apiScheme}://${s}`;return M3.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function V3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),L3.get())})}}function Sh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Pr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){return n!==void 0&&n.getResponse!==void 0}function lI(n){return n!==void 0&&n.enterprise!==void 0}class sA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(n){return(await xn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function iA(n,e){return xn(n,"GET","/v2/recaptchaConfig",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(n,e){return xn(n,"POST","/v1/accounts:delete",e)}async function B3(n,e){return xn(n,"POST","/v1/accounts:update",e)}async function cg(n,e){return xn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z3(n,e=!1){const t=et(n),r=await t.getIdToken(e),s=ey(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Dh(qw(s.auth_time)),issuedAtTime:Dh(qw(s.iat)),expirationTime:Dh(qw(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qw(n){return Number(n)*1e3}function ey(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jm("JWT malformed, contained fewer than 3 sections"),null;try{const s=LC(t);return s?JSON.parse(s):(jm("Failed to decode base64 JWT payload"),null)}catch(s){return jm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cI(n){const e=ey(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pi&&W3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function W3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dh(this.lastLoginAt),this.creationTime=Dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var g;const e=n.auth,t=await n.getIdToken(),r=await zl(n,cg(e,{idToken:t}));be(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=(g=s.providerUserInfo)!=null&&g.length?oA(s.providerUserInfo):[],a=G3(n.providerData,i),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new F0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function H3(n){const e=et(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G3(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function oA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(n,e){const t=await nA(n,{},async()=>{const r=hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await rA(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return n.emulatorConfig&&Ra(n.emulatorConfig.host)&&(d.credentials="include"),tA.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y3(n,e){return xn(n,"POST","/v2/accounts:revokeToken",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=cI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await K3(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new Eu;return r&&(be(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(be(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eu,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ds{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new q3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new F0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zl(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z3(this,e)}reload(){return H3(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ds({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await zl(this,$3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:w,providerData:I,stsTokenManager:_}=t;be(g&&_,e,"internal-error");const S=Eu.fromJSON(this.name,_);be(typeof g=="string",e,"internal-error"),Ho(r,e.name),Ho(s,e.name),be(typeof v=="boolean",e,"internal-error"),be(typeof w=="boolean",e,"internal-error"),Ho(i,e.name),Ho(a,e.name),Ho(c,e.name),Ho(d,e.name),Ho(f,e.name),Ho(p,e.name);const C=new Ds({uid:g,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:S,createdAt:f,lastLoginAt:p});return I&&Array.isArray(I)&&(C.providerData=I.map(R=>({...R}))),d&&(C._redirectEventId=d),C}static async _fromIdTokenResponse(e,t,r=!1){const s=new Eu;s.updateFromServerResponse(t);const i=new Ds({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await af(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?oA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Eu;c.updateFromIdToken(r);const d=new Ds({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new F0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new Map;function to(n){co(n instanceof Function,"Expected a class definition");let e=uI.get(n);return e?(co(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aA.type="NONE";const dI=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e,t){return`firebase:${n}:${e}:${t}`}class Tu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Om(this.userKey,s.apiKey,i),this.fullPersistenceKey=Om("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cg(this.auth,{idToken:e}).catch(()=>{});return t?Ds._fromGetAccountInfoResponse(this.auth,t,e):null}return Ds._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Tu(to(dI),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let i=s[0]||to(dI);const a=Om(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const p=await f._get(a);if(p){let g;if(typeof p=="string"){const v=await cg(e,{idToken:p}).catch(()=>{});if(!v)break;g=await Ds._fromGetAccountInfoResponse(e,v,p)}else g=Ds._fromJSON(e,p);f!==i&&(c=g),i=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Tu(i,e,r):(i=d[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==i)try{await f._remove(a)}catch{}})),new Tu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fA(e))return"Blackberry";if(pA(e))return"Webos";if(cA(e))return"Safari";if((e.includes("chrome/")||uA(e))&&!e.includes("edge/"))return"Chrome";if(hA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lA(n=vn()){return/firefox\//i.test(n)}function cA(n=vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uA(n=vn()){return/crios\//i.test(n)}function dA(n=vn()){return/iemobile/i.test(n)}function hA(n=vn()){return/android/i.test(n)}function fA(n=vn()){return/blackberry/i.test(n)}function pA(n=vn()){return/webos/i.test(n)}function u_(n=vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Q3(n=vn()){var e;return u_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function J3(){return p6()&&document.documentMode===10}function mA(n=vn()){return u_(n)||hA(n)||pA(n)||fA(n)||/windows phone/i.test(n)||dA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e=[]){let t;switch(n){case"Browser":t=hI(vn());break;case"Worker":t=`${hI(vn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const d=e(i);a(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(n,e={}){return xn(n,"GET","/v2/passwordPolicy",wn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=6;class t5{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fI(this),this.idTokenSubscription=new fI(this),this.beforeStateQueue=new X3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=to(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Tu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cg(this,{idToken:e}),r=await Ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(lr(this));const t=e?et(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(to(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z3(this),t=new t5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Y3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&to(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Tu.create(this,[to(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&N3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Cn(n){return et(n)}class fI{constructor(e){this.auth=e,this.observer=null,this.addObserver=x6(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r5(n){Df=n}function d_(n){return Df.loadJS(n)}function s5(){return Df.recaptchaV2Script}function i5(){return Df.recaptchaEnterpriseScript}function o5(){return Df.gapiScript}function yA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=500,l5=6e4,dm=1e12;class c5{constructor(e){this.auth=e,this.counter=dm,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new h5(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||dm;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||dm;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||dm;return(r=this._widgets.get(t))==null||r.execute(),""}}class u5{constructor(){this.enterprise=new d5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class h5{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;be(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=f5(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},l5)},a5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function f5(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const p5="recaptcha-enterprise",Mh="NO_RECAPTCHA";class vA{constructor(e){this.type=p5,this.auth=Cn(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{iA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new sA(d);return i.tenantId==null?i._agentRecaptchaConfig=f:i._tenantRecaptchaConfigs[i.tenantId]=f,a(f.siteKey)}}).catch(d=>{c(d)})})}function s(i,a,c){const d=window.grecaptcha;lI(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(f=>{a(f)}).catch(()=>{a(Mh)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u5().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!t&&lI(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=i5();d.length!==0&&(d+=c),d_(d).then(()=>{s(c,i,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})}}async function mh(n,e,t,r=!1,s=!1){const i=new vA(n);let a;if(s)a=Mh;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ya(n,e,t,r,s){var i,a;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=n._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mh(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await mh(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)});else if(s==="PHONE_PROVIDER")if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const c=await mh(n,e,t);return r(n,c).catch(async d=>{var f;if(((f=n._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await mh(n,e,t,!1,!0);return r(n,p)}return Promise.reject(d)})}else{const c=await mh(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(s+" provider is not supported.")}async function m5(n){const e=Cn(n),t=await iA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new sA(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new vA(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n,e){const t=Xg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if($l(i,e??{}))return s;ps(s,"already-initialized")}return t.initialize({options:e})}function y5(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(to);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v5(n,e,t){const r=Cn(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=wA(e),{host:a,port:c}=w5(e),d=c===null?"":`:${c}`,f={url:`${i}//${a}${d}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be($l(f,r.config.emulator)&&$l(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ra(a)?(t_(`${i}//${a}${d}`),n_("Auth",!0)):x5()}function wA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w5(n){const e=wA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:pI(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:pI(a)}}}function pI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function x5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return eo("not implemented")}_getIdTokenResponse(e){return eo("not implemented")}_linkToIdToken(e,t){return eo("not implemented")}_getReauthenticationResolver(e){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(n,e){return xn(n,"POST","/v1/accounts:resetPassword",wn(n,e))}async function b5(n,e){return xn(n,"POST","/v1/accounts:update",e)}async function E5(n,e){return xn(n,"POST","/v1/accounts:signUp",e)}async function T5(n,e){return xn(n,"POST","/v1/accounts:update",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e){return mo(n,"POST","/v1/accounts:signInWithPassword",wn(n,e))}async function ny(n,e){return xn(n,"POST","/v1/accounts:sendOobCode",wn(n,e))}async function I5(n,e){return ny(n,e)}async function k5(n,e){return ny(n,e)}async function P5(n,e){return ny(n,e)}async function C5(n,e){return ny(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(n,e){return mo(n,"POST","/v1/accounts:signInWithEmailLink",wn(n,e))}async function R5(n,e){return mo(n,"POST","/v1/accounts:signInWithEmailLink",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends ty{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new lf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new lf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ya(e,t,"signInWithPassword",S5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return A5(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ya(e,r,"signUpPassword",E5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return R5(e,{idToken:t,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(n,e){return mo(n,"POST","/v1/accounts:signInWithIdp",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="http://localhost";class uo extends ty{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new uo(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Su(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Su(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Su(e,t)}buildRequest(){const e={requestUri:N5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(n,e){return xn(n,"POST","/v1/accounts:sendVerificationCode",wn(n,e))}async function j5(n,e){return mo(n,"POST","/v1/accounts:signInWithPhoneNumber",wn(n,e))}async function O5(n,e){const t=await mo(n,"POST","/v1/accounts:signInWithPhoneNumber",wn(n,e));if(t.temporaryProof)throw Sh(n,"account-exists-with-different-credential",t);return t}const D5={USER_NOT_FOUND:"user-not-found"};async function M5(n,e){const t={...e,operation:"REAUTH"};return mo(n,"POST","/v1/accounts:signInWithPhoneNumber",wn(n,t),D5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends ty{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Lh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Lh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return j5(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return O5(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return M5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!t&&!s&&!i?null:new Lh({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V5(n){const e=Eh(Th(n)).link,t=e?Eh(Th(e)).deep_link_id:null,r=Eh(Th(n)).deep_link_id;return(r?Eh(Th(r)).link:null)||r||t||e||n}class ry{constructor(e){const t=Eh(Th(e)),r=t.apiKey??null,s=t.oobCode??null,i=L5(t.mode??null);be(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=V5(e);try{return new ry(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.providerId=ic.PROVIDER_ID}static credential(e,t){return lf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ry.parseLink(t);return be(r,"argument-error"),lf._fromEmailAndCode(e,r.code,r.tenantId)}}ic.PROVIDER_ID="password";ic.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ic.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends fd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dm extends pd{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return be("providerId"in t&&"signInMethod"in t,"argument-error"),uo._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return be(e.idToken||e.accessToken,"argument-error"),uo._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Dm.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dm.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:a,providerId:c}=e;if(!r&&!s&&!t&&!i||!c)return null;try{return new Dm(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends pd{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Zi.credential(t,r)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends pd{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends pd{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return na.credential(t,r)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(n,e){return mo(n,"POST","/v1/accounts:signUp",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Ds._fromIdTokenResponse(e,r,s),a=gI(r);return new Ti({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=gI(r);return new Ti({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function gI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HZ(n){var s;if(cn(n.app))return Promise.reject(lr(n));const e=Cn(n);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Ti({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await xA(e,{returnSecureToken:!0}),r=await Ti._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends Pi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new ug(e,t,r,s)}}function _A(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(n,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GZ(n,e){const t=et(n);await sy(!0,t,e);const{providerUserInfo:r}=await B3(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=bA(r||[]);return t.providerData=t.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function EA(n,e,t=!1){const r=await zl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ti._forOperation(n,"link",r)}async function sy(n,e,t){await af(e);const r=bA(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";be(r.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(n,e,t=!1){const{auth:r}=n;if(cn(r.app))return Promise.reject(lr(r));const s="reauthenticate";try{const i=await zl(n,_A(r,s,e,n),t);be(i.idToken,r,"internal-error");const a=ey(i.idToken);be(a,r,"internal-error");const{sub:c}=a;return be(n.uid===c,r,"user-mismatch"),Ti._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e,t=!1){if(cn(n.app))return Promise.reject(lr(n));const r="signIn",s=await _A(n,r,e),i=await Ti._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function iy(n,e){return TA(Cn(n),e)}async function U5(n,e){const t=et(n);return await sy(!1,t,e.providerId),EA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(n,e){return mo(n,"POST","/v1/accounts:signInWithCustomToken",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KZ(n,e){if(cn(n.app))return Promise.reject(lr(n));const t=Cn(n),r=await $5(t,{token:e,returnSecureToken:!0}),s=await Ti._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n,e,t){var r;be(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),be(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),be(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(be(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(be(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(n){const e=Cn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YZ(n,e,t){const r=Cn(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&oy(r,s,t),await ya(r,s,"getOobCode",k5,"EMAIL_PASSWORD_PROVIDER")}async function QZ(n,e,t){await _5(et(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&h_(n),r})}async function JZ(n,e){await T5(et(n),{oobCode:e})}async function B5(n,e,t){if(cn(n.app))return Promise.reject(lr(n));const r=Cn(n),a=await ya(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xA,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&h_(n),d}),c=await Ti._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function z5(n,e,t){return cn(n.app)?Promise.reject(lr(n)):iy(et(n),ic.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&h_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(n,e,t){const r=Cn(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(a,c){be(c.handleCodeInApp,r,"argument-error"),c&&oy(r,a,c)}i(s,t),await ya(r,s,"getOobCode",P5,"EMAIL_PASSWORD_PROVIDER")}function q5(n,e){const t=ry.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function H5(n,e,t){if(cn(n.app))return Promise.reject(lr(n));const r=et(n),s=ic.credentialWithLink(e,t||of());return be(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),iy(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(n,e){return xn(n,"POST","/v1/accounts:createAuthUri",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XZ(n,e){const t=l_()?of():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:s}=await G5(et(n),r);return s||[]}async function yI(n,e){const t=et(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&oy(t.auth,s,e);const{email:i}=await I5(t.auth,s);i!==n.email&&await n.reload()}async function ZZ(n,e,t){const r=et(n),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&oy(r.auth,i,t);const{email:a}=await C5(r.auth,i);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(n,e){return xn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=et(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await zl(r,K5(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function eee(n,e){const t=et(n);return cn(t.auth.app)?Promise.reject(lr(t.auth)):SA(t,e,null)}function tee(n,e){return SA(et(n),null,e)}async function SA(n,e,t){const{auth:r}=n,i={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(i.email=e),t&&(i.password=t);const a=await zl(n,b5(r,i));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(n){var s,i;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const a=(i=(s=ey(n.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(a){const c=a!=="anonymous"&&a!=="custom"?a:null;return new Iu(r,c)}}if(!e)return null;switch(e){case"facebook.com":return new Q5(r,t);case"github.com":return new J5(r,t);case"google.com":return new X5(r,t);case"twitter.com":return new Z5(r,t,n.screenName||null);case"custom":case"anonymous":return new Iu(r,null);default:return new Iu(r,e,t)}}class Iu{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class IA extends Iu{constructor(e,t,r,s){super(e,t,r),this.username=s}}class Q5 extends Iu{constructor(e,t){super(e,"facebook.com",t)}}class J5 extends IA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class X5 extends Iu{constructor(e,t){super(e,"google.com",t)}}class Z5 extends IA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function nee(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Y5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ree(n,e){return et(n).setPersistence(e)}function e$(n,e,t,r){return et(n).onIdTokenChanged(e,t,r)}function t$(n,e,t){return et(n).beforeAuthStateChanged(e,t)}function n$(n){return et(n).signOut()}function see(n,e){return Cn(n).revokeAccessToken(e)}async function iee(n){return et(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n,e){return xn(n,"POST","/v2/accounts/mfaEnrollment:start",wn(n,e))}const dg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$=1e3,s$=10;class PA extends kA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);J3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,s$):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PA.type="LOCAL";const i$=PA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA extends kA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CA.type="SESSION";const AA=CA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ay(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async f=>f(t.origin,i)),d=await o$(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ay.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,d)=>{const f=ly("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(v.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return window}function l$(n){ln().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}async function c$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u$(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function d$(){return f_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firebaseLocalStorageDb",h$=1,hg="firebaseLocalStorage",NA="fbase_key";class Mf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cy(n,e){return n.transaction([hg],e?"readwrite":"readonly").objectStore(hg)}function f$(){const n=indexedDB.deleteDatabase(RA);return new Mf(n).toPromise()}function U0(){const n=indexedDB.open(RA,h$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hg,{keyPath:NA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hg)?e(r):(r.close(),await f$(),e(await U0()))})})}async function xI(n,e,t){const r=cy(n,!0).put({[NA]:e,value:t});return new Mf(r).toPromise()}async function p$(n,e){const t=cy(n,!1).get(e),r=await new Mf(t).toPromise();return r===void 0?null:r.value}function _I(n,e){const t=cy(n,!0).delete(e);return new Mf(t).toPromise()}const m$=800,g$=3;class jA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>g$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ay._getInstance(d$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await c$(),!this.activeServiceWorker)return;this.sender=new a$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U0();return await xI(e,dg,"1"),await _I(e,dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>p$(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_I(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cy(s,!1).getAll();return new Mf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jA.type="LOCAL";const y$=jA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n,e){return xn(n,"POST","/v2/accounts/mfaSignIn:start",wn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=yA("rcb"),v$=new Of(3e4,6e4);class w${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=ln().grecaptcha)!=null&&e.render)}load(e,t=""){return be(x$(t),e,"argument-error"),this.shouldResolveImmediately(t)&&aI(ln().grecaptcha)?Promise.resolve(ln().grecaptcha):new Promise((r,s)=>{const i=ln().setTimeout(()=>{s(Pr(e,"network-request-failed"))},v$.get());ln()[Hw]=()=>{ln().clearTimeout(i),delete ln()[Hw];const c=ln().grecaptcha;if(!c||!aI(c)){s(Pr(e,"internal-error"));return}const d=c.render;c.render=(f,p)=>{const g=d(f,p);return this.counter++,g},this.hostLanguage=t,r(c)};const a=`${s5()}?${hd({onload:Hw,render:"explicit",hl:t})}`;d_(a).catch(()=>{clearTimeout(i),s(Pr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=ln().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function x$(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class _${async load(e){return new c5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="recaptcha",b$={theme:"light",type:"image"};class oee{constructor(e,t,r={...b$}){this.parameters=r,this.type=Vh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(e),this.isInvisible=this.parameters.size==="invisible",be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;be(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _$:new w$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(s=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),s(a))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=ln()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){be(l_()&&!f_(),this.auth,"internal-error"),await E$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await U3(this.auth);be(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function E$(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Lh._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function aee(n,e,t){if(cn(n.app))return Promise.reject(lr(n));const r=Cn(n),s=await DA(r,e,et(t));return new OA(s,i=>iy(r,i))}async function lee(n,e,t){const r=et(n);await sy(!1,r,"phone");const s=await DA(r.auth,e,et(t));return new OA(s,i=>U5(r,i))}async function DA(n,e,t){var r;if(!n._getRecaptchaConfig())try{await m5(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){be(i.type==="enroll",n,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ya(n,a,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Mh){be((t==null?void 0:t.type)===Vh,p,"argument-error");const v=await Gw(p,g,t);return wI(p,v)}return wI(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{be(i.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;be(a,n,"missing-multi-factor-info");const c={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ya(n,c,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===Mh){be((t==null?void 0:t.type)===Vh,g,"argument-error");const w=await Gw(g,v,t);return bI(g,w)}return bI(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ya(n,i,"sendVerificationCode",async(f,p)=>{if(p.captchaResponse===Mh){be((t==null?void 0:t.type)===Vh,f,"argument-error");const g=await Gw(f,p,t);return mI(f,g)}return mI(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t==null||t._reset()}}async function Gw(n,e,t){be(t.type===Vh,n,"argument-error");const r=await t.verify();be(typeof r=="string",n,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,a=s.phoneEnrollmentInfo.captchaResponse,c=s.phoneEnrollmentInfo.clientType,d=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:a,clientType:c,recaptchaVersion:d}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,a=s.phoneSignInInfo.clientType,c=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:a,recaptchaVersion:c}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n,e){return e?to(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_ extends ty{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Su(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Su(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Su(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function T$(n){return TA(n.auth,new p_(n),n.bypassAuthState)}function S$(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),F5(t,new p_(n),n.bypassAuthState)}async function I$(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),EA(t,new p_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T$;case"linkViaPopup":case"linkViaRedirect":return I$;case"reauthViaPopup":case"reauthViaRedirect":return S$;default:ps(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=new Of(2e3,1e4);async function cee(n,e,t){if(cn(n.app))return Promise.reject(Pr(n,"operation-not-supported-in-this-environment"));const r=Cn(n);Zg(n,e,fd);const s=Lf(r,t);return new ha(r,"signInViaPopup",e,s).executeNotNull()}async function uee(n,e,t){const r=et(n);Zg(r.auth,e,fd);const s=Lf(r.auth,t);return new ha(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class ha extends MA{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){co(this.filter.length===1,"Popup operations only handle one event");const e=ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k$.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$="pendingRedirect",Mm=new Map;class C$ extends MA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Mm.get(this.auth._key());if(!e){try{const r=await A$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mm.set(this.auth._key(),e)}return this.bypassAuthState||Mm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A$(n,e){const t=FA(e),r=VA(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function LA(n,e){return VA(n)._set(FA(e),"true")}function R$(n,e){Mm.set(n._key(),e)}function VA(n){return to(n._redirectPersistence)}function FA(n){return Om(P$,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dee(n,e,t){return N$(n,e,t)}async function N$(n,e,t){if(cn(n.app))return Promise.reject(lr(n));const r=Cn(n);Zg(n,e,fd),await r._initializationPromise;const s=Lf(r,t);return await LA(s,r),s._openRedirect(r,e,"signInViaRedirect")}function hee(n,e,t){return j$(n,e,t)}async function j$(n,e,t){const r=et(n);Zg(r.auth,e,fd),await r.auth._initializationPromise;const s=Lf(r.auth,t);await sy(!1,r,e.providerId),await LA(s,r.auth);const i=await O$(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function fee(n,e){return await Cn(n)._initializationPromise,UA(n,e,!1)}async function UA(n,e,t=!1){if(cn(n.app))return Promise.reject(lr(n));const r=Cn(n),s=Lf(r,e),a=await new C$(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function O$(n){const e=ly(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=10*60*1e3;class M${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$A(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D$&&this.cachedEventUids.clear(),this.cachedEventUids.has(EI(e))}saveEventToCache(e){this.cachedEventUids.add(EI(e)),this.lastProcessedEventTime=Date.now()}}function EI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $A({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V$(n,e={}){return xn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U$=/^https?/;async function $$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await V$(n);for(const t of e)try{if(B$(t))return}catch{}ps(n,"unauthorized-domain")}function B$(n){const e=of(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!U$.test(t))return!1;if(F$.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=new Of(3e4,6e4);function TI(){const n=ln().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function W$(n){return new Promise((e,t)=>{var s,i,a;function r(){TI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TI(),t(Pr(n,"network-request-failed"))},timeout:z$.get()})}if((i=(s=ln().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=ln().gapi)!=null&&a.load)r();else{const c=yA("iframefcb");return ln()[c]=()=>{gapi.load?r():t(Pr(n,"network-request-failed"))},d_(`${o5()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Lm=null,e})}let Lm=null;function q$(n){return Lm=Lm||W$(n),Lm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=new Of(5e3,15e3),G$="__/auth/iframe",K$="emulator/auth/iframe",Y$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J$(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?c_(e,K$):`https://${n.config.authDomain}/${G$}`,r={apiKey:e.apiKey,appName:n.name,v:sc},s=Q$.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${hd(r).slice(1)}`}async function X$(n){const e=await q$(n),t=ln().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:J$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y$,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Pr(n,"network-request-failed"),c=ln().setTimeout(()=>{i(a)},H$.get());function d(){ln().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eB=500,tB=600,nB="_blank",rB="http://localhost";class SI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sB(n,e,t,r=eB,s=tB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d={...Z$,width:r.toString(),height:s.toString(),top:i,left:a},f=vn().toLowerCase();t&&(c=uA(f)?nB:t),lA(f)&&(e=e||rB,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[w,I])=>`${v}${w}=${I},`,"");if(Q3(f)&&c!=="_self")return iB(e||"",c),new SI(null);const g=window.open(e||"",c,p);be(g,n,"popup-blocked");try{g.focus()}catch{}return new SI(g)}function iB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="__/auth/handler",aB="emulator/auth/handler",lB=encodeURIComponent("fac");async function II(n,e,t,r,s,i){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sc,eventId:s};if(e instanceof fd){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",w6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof pd){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await n._getAppCheckToken(),f=d?`#${lB}=${encodeURIComponent(d)}`:"";return`${cB(n)}?${hd(c).slice(1)}${f}`}function cB({config:n}){return n.emulator?c_(n,aB):`https://${n.authDomain}/${oB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="webStorageSupport";class uB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AA,this._completeRedirectFn=UA,this._overrideRedirectResult=R$}async _openPopup(e,t,r,s){var a;co((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await II(e,t,r,of(),s);return sB(e,i,ly())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await II(e,t,r,of(),s);return l$(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(co(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await X$(e),r=new M$(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kw,{type:Kw},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Kw];i!==void 0&&t(!!i),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mA()||cA()||u_()}}const dB=uB;var kI="@firebase/auth",PI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pB(n){Bl(new Ta("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gA(n)},f=new n5(r,s,i,d);return y5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bl(new Ta("auth-internal",e=>{const t=Cn(e.getProvider("auth").getImmediate());return(r=>new hB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(kI,PI,fB(n)),wi(kI,PI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=5*60,gB=BC("authIdTokenMaxAge")||mB;let CI=null;const yB=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>gB)return;const s=t==null?void 0:t.token;CI!==s&&(CI=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vB(n=i_()){const e=Xg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=g5(n,{popupRedirectResolver:dB,persistence:[y$,i$,AA]}),r=BC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=yB(i.toString());t$(t,a,()=>a(t.currentUser)),e$(t,c=>a(c))}}const s=FC("auth");return s&&v5(t,`http://${s}`),t}function wB(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}r5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Pr("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",wB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pB("Browser");var xB=n=>{switch(n){case"success":return EB;case"info":return SB;case"warning":return TB;case"error":return IB;default:return null}},_B=Array(12).fill(0),bB=({visible:n,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},H.createElement("div",{className:"sonner-spinner"},_B.map((t,r)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),EB=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TB=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SB=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),IB=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kB=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),PB=()=>{let[n,e]=H.useState(document.hidden);return H.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},$0=1,CB=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:$0++,a=this.toasts.find(d=>d.id===i),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...e,id:i,title:r}),{...d,...e,id:i,dismissible:c,title:r}):d):this.addToast({title:r,...s,dismissible:c,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,a,c=s.then(async f=>{if(a=["resolve",f],H.isValidElement(f))i=!1,this.create({id:r,type:"default",message:f});else if(RB(f)&&!f.ok){i=!1;let p=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description;this.create({id:r,type:"error",message:p,description:g})}else if(t.success!==void 0){i=!1;let p=typeof t.success=="function"?await t.success(f):t.success,g=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"success",message:p,description:g})}}).catch(async f=>{if(a=["reject",f],t.error!==void 0){i=!1;let p=typeof t.error=="function"?await t.error(f):t.error,g=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"error",message:p,description:g})}}).finally(()=>{var f;i&&(this.dismiss(r),r=void 0),(f=t.finally)==null||f.call(t)}),d=()=>new Promise((f,p)=>c.then(()=>a[0]==="reject"?p(a[1]):f(a[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||$0++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Er=new CB,AB=(n,e)=>{let t=(e==null?void 0:e.id)||$0++;return Er.addToast({title:n,...e,id:t}),t},RB=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",NB=AB,jB=()=>Er.toasts,OB=()=>Er.getActiveToasts(),ie=Object.assign(NB,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:jB,getToasts:OB});function DB(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}DB(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function hm(n){return n.label!==void 0}var MB=3,LB="32px",VB="16px",AI=4e3,FB=356,UB=14,$B=20,BB=200;function Ps(...n){return n.filter(Boolean).join(" ")}function zB(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var WB=n=>{var e,t,r,s,i,a,c,d,f,p,g;let{invert:v,toast:w,unstyled:I,interacting:_,setHeights:S,visibleToasts:C,heights:R,index:j,toasts:D,expanded:U,removeToast:z,defaultRichColors:P,closeButton:A,style:O,cancelButtonStyle:M,actionButtonStyle:F,className:$="",descriptionClassName:L="",duration:ae,position:me,gap:xe,loadingIcon:ge,expandByDefault:ee,classNames:K,icons:re,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:X}=n,[_e,we]=H.useState(null),[Re,De]=H.useState(null),[le,Se]=H.useState(!1),[Ne,Ve]=H.useState(!1),[He,Xe]=H.useState(!1),[mt,zt]=H.useState(!1),[pr,An]=H.useState(!1),[Rn,Cr]=H.useState(0),[ht,jt]=H.useState(0),Nn=H.useRef(w.duration||ae||AI),_o=H.useRef(null),Ar=H.useRef(null),hc=j===0,Us=j+1<=C,bn=w.type,Rr=w.dismissible!==!1,$s=w.className||"",fc=w.descriptionClassName||"",Qr=H.useMemo(()=>R.findIndex(Fe=>Fe.toastId===w.id)||0,[R,w.id]),Bs=H.useMemo(()=>{var Fe;return(Fe=w.closeButton)!=null?Fe:A},[w.closeButton,A]),Wa=H.useMemo(()=>w.duration||ae||AI,[w.duration,ae]),Jr=H.useRef(0),Nr=H.useRef(0),bo=H.useRef(0),En=H.useRef(null),[Eo,zs]=me.split("-"),Ai=H.useMemo(()=>R.reduce((Fe,ut,xt)=>xt>=Qr?Fe:Fe+ut.height,0),[R,Qr]),Xr=PB(),ws=w.invert||v,It=bn==="loading";Nr.current=H.useMemo(()=>Qr*xe+Ai,[Qr,Ai]),H.useEffect(()=>{Nn.current=Wa},[Wa]),H.useEffect(()=>{Se(!0)},[]),H.useEffect(()=>{let Fe=Ar.current;if(Fe){let ut=Fe.getBoundingClientRect().height;return jt(ut),S(xt=>[{toastId:w.id,height:ut,position:w.position},...xt]),()=>S(xt=>xt.filter(Wt=>Wt.toastId!==w.id))}},[S,w.id]),H.useLayoutEffect(()=>{if(!le)return;let Fe=Ar.current,ut=Fe.style.height;Fe.style.height="auto";let xt=Fe.getBoundingClientRect().height;Fe.style.height=ut,jt(xt),S(Wt=>Wt.find(Un=>Un.toastId===w.id)?Wt.map(Un=>Un.toastId===w.id?{...Un,height:xt}:Un):[{toastId:w.id,height:xt,position:w.position},...Wt])},[le,w.title,w.description,S,w.id]);let mr=H.useCallback(()=>{Ve(!0),Cr(Nr.current),S(Fe=>Fe.filter(ut=>ut.toastId!==w.id)),setTimeout(()=>{z(w)},BB)},[w,z,S,Nr]);H.useEffect(()=>{if(w.promise&&bn==="loading"||w.duration===1/0||w.type==="loading")return;let Fe;return U||_||X&&Xr?(()=>{if(bo.current<Jr.current){let ut=new Date().getTime()-Jr.current;Nn.current=Nn.current-ut}bo.current=new Date().getTime()})():Nn.current!==1/0&&(Jr.current=new Date().getTime(),Fe=setTimeout(()=>{var ut;(ut=w.onAutoClose)==null||ut.call(w,w),mr()},Nn.current)),()=>clearTimeout(Fe)},[U,_,w,bn,X,Xr,mr]),H.useEffect(()=>{w.delete&&mr()},[mr,w.delete]);function Ws(){var Fe,ut,xt;return re!=null&&re.loading?H.createElement("div",{className:Ps(K==null?void 0:K.loader,(Fe=w==null?void 0:w.classNames)==null?void 0:Fe.loader,"sonner-loader"),"data-visible":bn==="loading"},re.loading):ge?H.createElement("div",{className:Ps(K==null?void 0:K.loader,(ut=w==null?void 0:w.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":bn==="loading"},ge):H.createElement(bB,{className:Ps(K==null?void 0:K.loader,(xt=w==null?void 0:w.classNames)==null?void 0:xt.loader),visible:bn==="loading"})}return H.createElement("li",{tabIndex:0,ref:Ar,className:Ps($,$s,K==null?void 0:K.toast,(e=w==null?void 0:w.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[bn],(t=w==null?void 0:w.classNames)==null?void 0:t[bn]),"data-sonner-toast":"","data-rich-colors":(r=w.richColors)!=null?r:P,"data-styled":!(w.jsx||w.unstyled||I),"data-mounted":le,"data-promise":!!w.promise,"data-swiped":pr,"data-removed":Ne,"data-visible":Us,"data-y-position":Eo,"data-x-position":zs,"data-index":j,"data-front":hc,"data-swiping":He,"data-dismissible":Rr,"data-type":bn,"data-invert":ws,"data-swipe-out":mt,"data-swipe-direction":Re,"data-expanded":!!(U||ee&&le),style:{"--index":j,"--toasts-before":j,"--z-index":D.length-j,"--offset":`${Ne?Rn:Nr.current}px`,"--initial-height":ee?"auto":`${ht}px`,...O,...w.style},onDragEnd:()=>{Xe(!1),we(null),En.current=null},onPointerDown:Fe=>{It||!Rr||(_o.current=new Date,Cr(Nr.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(Xe(!0),En.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,ut,xt,Wt;if(mt||!Rr)return;En.current=null;let Un=Number(((Fe=Ar.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$n=Number(((ut=Ar.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Bn=new Date().getTime()-((xt=_o.current)==null?void 0:xt.getTime()),nn=_e==="x"?Un:$n,jr=Math.abs(nn)/Bn;if(Math.abs(nn)>=$B||jr>.11){Cr(Nr.current),(Wt=w.onDismiss)==null||Wt.call(w,w),De(_e==="x"?Un>0?"right":"left":$n>0?"down":"up"),mr(),zt(!0),An(!1);return}Xe(!1),we(null)},onPointerMove:Fe=>{var ut,xt,Wt,Un;if(!En.current||!Rr||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;let $n=Fe.clientY-En.current.y,Bn=Fe.clientX-En.current.x,nn=(xt=n.swipeDirections)!=null?xt:zB(me);!_e&&(Math.abs(Bn)>1||Math.abs($n)>1)&&we(Math.abs(Bn)>Math.abs($n)?"x":"y");let jr={x:0,y:0};_e==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&$n<0||nn.includes("bottom")&&$n>0)&&(jr.y=$n):_e==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&Bn<0||nn.includes("right")&&Bn>0)&&(jr.x=Bn),(Math.abs(jr.x)>0||Math.abs(jr.y)>0)&&An(!0),(Wt=Ar.current)==null||Wt.style.setProperty("--swipe-amount-x",`${jr.x}px`),(Un=Ar.current)==null||Un.style.setProperty("--swipe-amount-y",`${jr.y}px`)}},Bs&&!w.jsx?H.createElement("button",{"aria-label":W,"data-disabled":It,"data-close-button":!0,onClick:It||!Rr?()=>{}:()=>{var Fe;mr(),(Fe=w.onDismiss)==null||Fe.call(w,w)},className:Ps(K==null?void 0:K.closeButton,(s=w==null?void 0:w.classNames)==null?void 0:s.closeButton)},(i=re==null?void 0:re.close)!=null?i:kB):null,w.jsx||b.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:H.createElement(H.Fragment,null,bn||w.icon||w.promise?H.createElement("div",{"data-icon":"",className:Ps(K==null?void 0:K.icon,(a=w==null?void 0:w.classNames)==null?void 0:a.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||Ws():null,w.type!=="loading"?w.icon||(re==null?void 0:re[bn])||xB(bn):null):null,H.createElement("div",{"data-content":"",className:Ps(K==null?void 0:K.content,(c=w==null?void 0:w.classNames)==null?void 0:c.content)},H.createElement("div",{"data-title":"",className:Ps(K==null?void 0:K.title,(d=w==null?void 0:w.classNames)==null?void 0:d.title)},typeof w.title=="function"?w.title():w.title),w.description?H.createElement("div",{"data-description":"",className:Ps(L,fc,K==null?void 0:K.description,(f=w==null?void 0:w.classNames)==null?void 0:f.description)},typeof w.description=="function"?w.description():w.description):null),b.isValidElement(w.cancel)?w.cancel:w.cancel&&hm(w.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||M,onClick:Fe=>{var ut,xt;hm(w.cancel)&&Rr&&((xt=(ut=w.cancel).onClick)==null||xt.call(ut,Fe),mr())},className:Ps(K==null?void 0:K.cancelButton,(p=w==null?void 0:w.classNames)==null?void 0:p.cancelButton)},w.cancel.label):null,b.isValidElement(w.action)?w.action:w.action&&hm(w.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||F,onClick:Fe=>{var ut,xt;hm(w.action)&&((xt=(ut=w.action).onClick)==null||xt.call(ut,Fe),!Fe.defaultPrevented&&mr())},className:Ps(K==null?void 0:K.actionButton,(g=w==null?void 0:w.classNames)==null?void 0:g.actionButton)},w.action.label):null))};function RI(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function qB(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",c=i?VB:LB;function d(f){["top","right","bottom","left"].forEach(p=>{t[`${a}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?t[`${a}-${f}`]=c:t[`${a}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(c)}),t}var HB=b.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:c,offset:d,mobileOffset:f,theme:p="light",richColors:g,duration:v,style:w,visibleToasts:I=MB,toastOptions:_,dir:S=RI(),gap:C=UB,loadingIcon:R,icons:j,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:U}=n,[z,P]=H.useState([]),A=H.useMemo(()=>Array.from(new Set([r].concat(z.filter(X=>X.position).map(X=>X.position)))),[z,r]),[O,M]=H.useState([]),[F,$]=H.useState(!1),[L,ae]=H.useState(!1),[me,xe]=H.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ge=H.useRef(null),ee=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=H.useRef(null),re=H.useRef(!1),W=H.useCallback(X=>{P(_e=>{var we;return(we=_e.find(Re=>Re.id===X.id))!=null&&we.delete||Er.dismiss(X.id),_e.filter(({id:Re})=>Re!==X.id)})},[]);return H.useEffect(()=>Er.subscribe(X=>{if(X.dismiss){P(_e=>_e.map(we=>we.id===X.id?{...we,delete:!0}:we));return}setTimeout(()=>{fP.flushSync(()=>{P(_e=>{let we=_e.findIndex(Re=>Re.id===X.id);return we!==-1?[..._e.slice(0,we),{..._e[we],...X},..._e.slice(we+1)]:[X,..._e]})})})}),[]),H.useEffect(()=>{if(p!=="system"){xe(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?xe("dark"):xe("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:_e})=>{xe(_e?"dark":"light")})}catch{X.addListener(({matches:we})=>{try{xe(we?"dark":"light")}catch(Re){console.error(Re)}})}},[p]),H.useEffect(()=>{z.length<=1&&$(!1)},[z]),H.useEffect(()=>{let X=_e=>{var we,Re;s.every(De=>_e[De]||_e.code===De)&&($(!0),(we=ge.current)==null||we.focus()),_e.code==="Escape"&&(document.activeElement===ge.current||(Re=ge.current)!=null&&Re.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[s]),H.useEffect(()=>{if(ge.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,re.current=!1)}},[ge.current]),H.createElement("section",{ref:e,"aria-label":`${D} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((X,_e)=>{var we;let[Re,De]=X.split("-");return z.length?H.createElement("ol",{key:X,dir:S==="auto"?RI():S,tabIndex:-1,ref:ge,className:c,"data-sonner-toaster":!0,"data-theme":me,"data-y-position":Re,"data-lifted":F&&z.length>1&&!i,"data-x-position":De,style:{"--front-toast-height":`${((we=O[0])==null?void 0:we.height)||0}px`,"--width":`${FB}px`,"--gap":`${C}px`,...w,...qB(d,f)},onBlur:le=>{re.current&&!le.currentTarget.contains(le.relatedTarget)&&(re.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||re.current||(re.current=!0,K.current=le.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{L||$(!1)},onDragEnd:()=>$(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||ae(!0)},onPointerUp:()=>ae(!1)},z.filter(le=>!le.position&&_e===0||le.position===X).map((le,Se)=>{var Ne,Ve;return H.createElement(WB,{key:le.id,icons:j,index:Se,toast:le,defaultRichColors:g,duration:(Ne=_==null?void 0:_.duration)!=null?Ne:v,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:t,visibleToasts:I,closeButton:(Ve=_==null?void 0:_.closeButton)!=null?Ve:a,interacting:L,position:X,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:W,toasts:z.filter(He=>He.position==le.position),heights:O.filter(He=>He.position==le.position),setHeights:M,expandByDefault:i,gap:C,loadingIcon:R,expanded:F,pauseWhenPageIsHidden:U,swipeDirections:n.swipeDirections})})):null}))});const GB="modulepreload",KB=function(n){return"/"+n},NI={},md=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let a=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=a(t.map(f=>{if(f=KB(f),f in NI)return;NI[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":GB,p||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),p)return new Promise((w,I)=>{v.addEventListener("load",w),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var zu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(zu||(zu={}));class Yw extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const YB=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},QB=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:YB(n),i=()=>s()!=="web",a=g=>{const v=f.get(g);return!!(v!=null&&v.platforms.has(s())||c(g))},c=g=>{var v;return(v=t.PluginHeaders)===null||v===void 0?void 0:v.find(w=>w.name===g)},d=g=>n.console.error(g),f=new Map,p=(g,v={})=>{const w=f.get(g);if(w)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),w.proxy;const I=s(),_=c(g);let S;const C=async()=>(!S&&I in v?S=typeof v[I]=="function"?S=await v[I]():S=v[I]:e!==null&&!S&&"web"in v&&(S=typeof v.web=="function"?S=await v.web():S=v.web),S),R=(A,O)=>{var M,F;if(_){const $=_==null?void 0:_.methods.find(L=>O===L.name);if($)return $.rtype==="promise"?L=>t.nativePromise(g,O.toString(),L):(L,ae)=>t.nativeCallback(g,O.toString(),L,ae);if(A)return(M=A[O])===null||M===void 0?void 0:M.bind(A)}else{if(A)return(F=A[O])===null||F===void 0?void 0:F.bind(A);throw new Yw(`"${g}" plugin is not implemented on ${I}`,zu.Unimplemented)}},j=A=>{let O;const M=(...F)=>{const $=C().then(L=>{const ae=R(L,A);if(ae){const me=ae(...F);return O=me==null?void 0:me.remove,me}else throw new Yw(`"${g}.${A}()" is not implemented on ${I}`,zu.Unimplemented)});return A==="addListener"&&($.remove=async()=>O()),$};return M.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:A,writable:!1,configurable:!1}),M},D=j("addListener"),U=j("removeListener"),z=(A,O)=>{const M=D({eventName:A},O),F=async()=>{const L=await M;U({eventName:A,callbackId:L},O)},$=new Promise(L=>M.then(()=>L({remove:F})));return $.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},$},P=new Proxy({},{get(A,O){switch(O){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _?z:D;case"removeListener":return U;default:return j(O)}}});return r[g]=P,f.set(g,{name:g,proxy:P,platforms:new Set([...Object.keys(v),..._?[I]:[]])}),P};return t.convertFileSrc||(t.convertFileSrc=g=>g),t.getPlatform=s,t.handleError=d,t.isNativePlatform=i,t.isPluginAvailable=a,t.registerPlugin=p,t.Exception=Yw,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},JB=n=>n.Capacitor=QB(n),B0=JB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),m_=B0.registerPlugin;class BA{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new B0.Exception(e,zu.Unimplemented)}unavailable(e="not available"){return new B0.Exception(e,zu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const s=r.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const jI=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),OI=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class XB extends BA{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=OI(s).trim(),i=OI(i).trim(),t[s]=i}),t}async setCookie(e){try{const t=jI(e.key),r=jI(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${s}; path=${i}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}m_("CapacitorCookies",{web:()=>new XB});const ZB=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>t(s),r.readAsDataURL(n)}),e8=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,i,a)=>(s[i]=n[e[a]],s),{})},t8=(n,e=!0)=>n?Object.entries(n).reduce((r,s)=>{const[i,a]=s;let c,d;return Array.isArray(a)?(d="",a.forEach(f=>{c=e?encodeURIComponent(f):f,d+=`${i}=${c}&`}),d.slice(0,-1)):(c=e?encodeURIComponent(a):a,d=`${i}=${c}`),`${r}&${d}`},"").substr(1):null,n8=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=e8(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,c]of Object.entries(n.data||{}))i.set(a,c);t.body=i.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const i=new FormData;if(n.data instanceof FormData)n.data.forEach((c,d)=>{i.append(d,c)});else for(const c of Object.keys(n.data))i.append(c,n.data[c]);t.body=i;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class r8 extends BA{async request(e){const t=n8(e,e.webFetchExtra),r=t8(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,t),a=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?e:{};a.includes("application/json")&&(c="json");let d,f;switch(c){case"arraybuffer":case"blob":f=await i.blob(),d=await ZB(f);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const p={};return i.headers.forEach((g,v)=>{p[v]=g}),{data:d,headers:p,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}m_("CapacitorHttp",{web:()=>new r8});var DI;(function(n){n.IndexedDbLocal="INDEXED_DB_LOCAL",n.InMemory="IN_MEMORY",n.BrowserLocal="BROWSER_LOCAL",n.BrowserSession="BROWSER_SESSION"})(DI||(DI={}));var MI;(function(n){n.APPLE="apple.com",n.FACEBOOK="facebook.com",n.GAME_CENTER="gc.apple.com",n.GITHUB="github.com",n.GOOGLE="google.com",n.MICROSOFT="microsoft.com",n.PLAY_GAMES="playgames.google.com",n.TWITTER="twitter.com",n.YAHOO="yahoo.com",n.PASSWORD="password",n.PHONE="phone"})(MI||(MI={}));const s8=m_("FirebaseAuthentication",{web:()=>md(()=>import("./web-BLdjVx8V.js"),[]).then(n=>new n.FirebaseAuthenticationWeb)});var i8="firebase",o8="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(i8,o8,"app");var LI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var va,zA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function O(){}O.prototype=A.prototype,P.F=A.prototype,P.prototype=new O,P.prototype.constructor=P,P.D=function(M,F,$){for(var L=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)L[ae-2]=arguments[ae];return A.prototype[F].apply(M,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,A,O){O||(O=0);const M=Array(16);if(typeof A=="string")for(var F=0;F<16;++F)M[F]=A.charCodeAt(O++)|A.charCodeAt(O++)<<8|A.charCodeAt(O++)<<16|A.charCodeAt(O++)<<24;else for(F=0;F<16;++F)M[F]=A[O++]|A[O++]<<8|A[O++]<<16|A[O++]<<24;A=P.g[0],O=P.g[1],F=P.g[2];let $=P.g[3],L;L=A+($^O&(F^$))+M[0]+3614090360&4294967295,A=O+(L<<7&4294967295|L>>>25),L=$+(F^A&(O^F))+M[1]+3905402710&4294967295,$=A+(L<<12&4294967295|L>>>20),L=F+(O^$&(A^O))+M[2]+606105819&4294967295,F=$+(L<<17&4294967295|L>>>15),L=O+(A^F&($^A))+M[3]+3250441966&4294967295,O=F+(L<<22&4294967295|L>>>10),L=A+($^O&(F^$))+M[4]+4118548399&4294967295,A=O+(L<<7&4294967295|L>>>25),L=$+(F^A&(O^F))+M[5]+1200080426&4294967295,$=A+(L<<12&4294967295|L>>>20),L=F+(O^$&(A^O))+M[6]+2821735955&4294967295,F=$+(L<<17&4294967295|L>>>15),L=O+(A^F&($^A))+M[7]+4249261313&4294967295,O=F+(L<<22&4294967295|L>>>10),L=A+($^O&(F^$))+M[8]+1770035416&4294967295,A=O+(L<<7&4294967295|L>>>25),L=$+(F^A&(O^F))+M[9]+2336552879&4294967295,$=A+(L<<12&4294967295|L>>>20),L=F+(O^$&(A^O))+M[10]+4294925233&4294967295,F=$+(L<<17&4294967295|L>>>15),L=O+(A^F&($^A))+M[11]+2304563134&4294967295,O=F+(L<<22&4294967295|L>>>10),L=A+($^O&(F^$))+M[12]+1804603682&4294967295,A=O+(L<<7&4294967295|L>>>25),L=$+(F^A&(O^F))+M[13]+4254626195&4294967295,$=A+(L<<12&4294967295|L>>>20),L=F+(O^$&(A^O))+M[14]+2792965006&4294967295,F=$+(L<<17&4294967295|L>>>15),L=O+(A^F&($^A))+M[15]+1236535329&4294967295,O=F+(L<<22&4294967295|L>>>10),L=A+(F^$&(O^F))+M[1]+4129170786&4294967295,A=O+(L<<5&4294967295|L>>>27),L=$+(O^F&(A^O))+M[6]+3225465664&4294967295,$=A+(L<<9&4294967295|L>>>23),L=F+(A^O&($^A))+M[11]+643717713&4294967295,F=$+(L<<14&4294967295|L>>>18),L=O+($^A&(F^$))+M[0]+3921069994&4294967295,O=F+(L<<20&4294967295|L>>>12),L=A+(F^$&(O^F))+M[5]+3593408605&4294967295,A=O+(L<<5&4294967295|L>>>27),L=$+(O^F&(A^O))+M[10]+38016083&4294967295,$=A+(L<<9&4294967295|L>>>23),L=F+(A^O&($^A))+M[15]+3634488961&4294967295,F=$+(L<<14&4294967295|L>>>18),L=O+($^A&(F^$))+M[4]+3889429448&4294967295,O=F+(L<<20&4294967295|L>>>12),L=A+(F^$&(O^F))+M[9]+568446438&4294967295,A=O+(L<<5&4294967295|L>>>27),L=$+(O^F&(A^O))+M[14]+3275163606&4294967295,$=A+(L<<9&4294967295|L>>>23),L=F+(A^O&($^A))+M[3]+4107603335&4294967295,F=$+(L<<14&4294967295|L>>>18),L=O+($^A&(F^$))+M[8]+1163531501&4294967295,O=F+(L<<20&4294967295|L>>>12),L=A+(F^$&(O^F))+M[13]+2850285829&4294967295,A=O+(L<<5&4294967295|L>>>27),L=$+(O^F&(A^O))+M[2]+4243563512&4294967295,$=A+(L<<9&4294967295|L>>>23),L=F+(A^O&($^A))+M[7]+1735328473&4294967295,F=$+(L<<14&4294967295|L>>>18),L=O+($^A&(F^$))+M[12]+2368359562&4294967295,O=F+(L<<20&4294967295|L>>>12),L=A+(O^F^$)+M[5]+4294588738&4294967295,A=O+(L<<4&4294967295|L>>>28),L=$+(A^O^F)+M[8]+2272392833&4294967295,$=A+(L<<11&4294967295|L>>>21),L=F+($^A^O)+M[11]+1839030562&4294967295,F=$+(L<<16&4294967295|L>>>16),L=O+(F^$^A)+M[14]+4259657740&4294967295,O=F+(L<<23&4294967295|L>>>9),L=A+(O^F^$)+M[1]+2763975236&4294967295,A=O+(L<<4&4294967295|L>>>28),L=$+(A^O^F)+M[4]+1272893353&4294967295,$=A+(L<<11&4294967295|L>>>21),L=F+($^A^O)+M[7]+4139469664&4294967295,F=$+(L<<16&4294967295|L>>>16),L=O+(F^$^A)+M[10]+3200236656&4294967295,O=F+(L<<23&4294967295|L>>>9),L=A+(O^F^$)+M[13]+681279174&4294967295,A=O+(L<<4&4294967295|L>>>28),L=$+(A^O^F)+M[0]+3936430074&4294967295,$=A+(L<<11&4294967295|L>>>21),L=F+($^A^O)+M[3]+3572445317&4294967295,F=$+(L<<16&4294967295|L>>>16),L=O+(F^$^A)+M[6]+76029189&4294967295,O=F+(L<<23&4294967295|L>>>9),L=A+(O^F^$)+M[9]+3654602809&4294967295,A=O+(L<<4&4294967295|L>>>28),L=$+(A^O^F)+M[12]+3873151461&4294967295,$=A+(L<<11&4294967295|L>>>21),L=F+($^A^O)+M[15]+530742520&4294967295,F=$+(L<<16&4294967295|L>>>16),L=O+(F^$^A)+M[2]+3299628645&4294967295,O=F+(L<<23&4294967295|L>>>9),L=A+(F^(O|~$))+M[0]+4096336452&4294967295,A=O+(L<<6&4294967295|L>>>26),L=$+(O^(A|~F))+M[7]+1126891415&4294967295,$=A+(L<<10&4294967295|L>>>22),L=F+(A^($|~O))+M[14]+2878612391&4294967295,F=$+(L<<15&4294967295|L>>>17),L=O+($^(F|~A))+M[5]+4237533241&4294967295,O=F+(L<<21&4294967295|L>>>11),L=A+(F^(O|~$))+M[12]+1700485571&4294967295,A=O+(L<<6&4294967295|L>>>26),L=$+(O^(A|~F))+M[3]+2399980690&4294967295,$=A+(L<<10&4294967295|L>>>22),L=F+(A^($|~O))+M[10]+4293915773&4294967295,F=$+(L<<15&4294967295|L>>>17),L=O+($^(F|~A))+M[1]+2240044497&4294967295,O=F+(L<<21&4294967295|L>>>11),L=A+(F^(O|~$))+M[8]+1873313359&4294967295,A=O+(L<<6&4294967295|L>>>26),L=$+(O^(A|~F))+M[15]+4264355552&4294967295,$=A+(L<<10&4294967295|L>>>22),L=F+(A^($|~O))+M[6]+2734768916&4294967295,F=$+(L<<15&4294967295|L>>>17),L=O+($^(F|~A))+M[13]+1309151649&4294967295,O=F+(L<<21&4294967295|L>>>11),L=A+(F^(O|~$))+M[4]+4149444226&4294967295,A=O+(L<<6&4294967295|L>>>26),L=$+(O^(A|~F))+M[11]+3174756917&4294967295,$=A+(L<<10&4294967295|L>>>22),L=F+(A^($|~O))+M[2]+718787259&4294967295,F=$+(L<<15&4294967295|L>>>17),L=O+($^(F|~A))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(F+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+$&4294967295}r.prototype.v=function(P,A){A===void 0&&(A=P.length);const O=A-this.blockSize,M=this.C;let F=this.h,$=0;for(;$<A;){if(F==0)for(;$<=O;)s(this,P,$),$+=this.blockSize;if(typeof P=="string"){for(;$<A;)if(M[F++]=P.charCodeAt($++),F==this.blockSize){s(this,M),F=0;break}}else for(;$<A;)if(M[F++]=P[$++],F==this.blockSize){s(this,M),F=0;break}}this.h=F,this.o+=A},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var O=P.length-8;O<P.length;++O)P[O]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,O=0;O<4;++O)for(let M=0;M<32;M+=8)P[A++]=this.g[O]>>>M&255;return P};function i(P,A){var O=c;return Object.prototype.hasOwnProperty.call(O,P)?O[P]:O[P]=A(P)}function a(P,A){this.h=A;const O=[];let M=!0;for(let F=P.length-1;F>=0;F--){const $=P[F]|0;M&&$==A||(O[F]=$,M=!1)}this.g=O}var c={};function d(P){return-128<=P&&P<128?i(P,function(A){return new a([A|0],A<0?-1:0)}):new a([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return g;if(P<0)return S(f(-P));const A=[];let O=1;for(let M=0;P>=O;M++)A[M]=P/O|0,O*=4294967296;return new a(A,0)}function p(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return S(p(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=f(Math.pow(A,8));let M=g;for(let $=0;$<P.length;$+=8){var F=Math.min(8,P.length-$);const L=parseInt(P.substring($,$+F),A);F<8?(F=f(Math.pow(A,F)),M=M.j(F).add(f(L))):(M=M.j(O),M=M.add(f(L)))}return M}var g=d(0),v=d(1),w=d(16777216);n=a.prototype,n.m=function(){if(_(this))return-S(this).m();let P=0,A=1;for(let O=0;O<this.g.length;O++){const M=this.i(O);P+=(M>=0?M:4294967296+M)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(I(this))return"0";if(_(this))return"-"+S(this).toString(P);const A=f(Math.pow(P,6));var O=this;let M="";for(;;){const F=D(O,A).g;O=C(O,F.j(A));let $=((O.g.length>0?O.g[0]:O.h)>>>0).toString(P);if(O=F,I(O))return $+M;for(;$.length<6;)$="0"+$;M=$+M}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function I(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=C(this,P),_(P)?-1:I(P)?0:1};function S(P){const A=P.g.length,O=[];for(let M=0;M<A;M++)O[M]=~P.g[M];return new a(O,~P.h).add(v)}n.abs=function(){return _(this)?S(this):this},n.add=function(P){const A=Math.max(this.g.length,P.g.length),O=[];let M=0;for(let F=0;F<=A;F++){let $=M+(this.i(F)&65535)+(P.i(F)&65535),L=($>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);M=L>>>16,$&=65535,L&=65535,O[F]=L<<16|$}return new a(O,O[O.length-1]&-2147483648?-1:0)};function C(P,A){return P.add(S(A))}n.j=function(P){if(I(this)||I(P))return g;if(_(this))return _(P)?S(this).j(S(P)):S(S(this).j(P));if(_(P))return S(this.j(S(P)));if(this.l(w)<0&&P.l(w)<0)return f(this.m()*P.m());const A=this.g.length+P.g.length,O=[];for(var M=0;M<2*A;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(let F=0;F<P.g.length;F++){const $=this.i(M)>>>16,L=this.i(M)&65535,ae=P.i(F)>>>16,me=P.i(F)&65535;O[2*M+2*F]+=L*me,R(O,2*M+2*F),O[2*M+2*F+1]+=$*me,R(O,2*M+2*F+1),O[2*M+2*F+1]+=L*ae,R(O,2*M+2*F+1),O[2*M+2*F+2]+=$*ae,R(O,2*M+2*F+2)}for(P=0;P<A;P++)O[P]=O[2*P+1]<<16|O[2*P];for(P=A;P<2*A;P++)O[P]=0;return new a(O,0)};function R(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function j(P,A){this.g=P,this.h=A}function D(P,A){if(I(A))throw Error("division by zero");if(I(P))return new j(g,g);if(_(P))return A=D(S(P),A),new j(S(A.g),S(A.h));if(_(A))return A=D(P,S(A)),new j(S(A.g),A.h);if(P.g.length>30){if(_(P)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var O=v,M=A;M.l(P)<=0;)O=U(O),M=U(M);var F=z(O,1),$=z(M,1);for(M=z(M,2),O=z(O,2);!I(M);){var L=$.add(M);L.l(P)<=0&&(F=F.add(O),$=L),M=z(M,1),O=z(O,1)}return A=C(P,F.j(A)),new j(F,A)}for(F=g;P.l(A)>=0;){for(O=Math.max(1,Math.floor(P.m()/A.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),$=f(O),L=$.j(A);_(L)||L.l(P)>0;)O-=M,$=f(O),L=$.j(A);I($)&&($=v),F=F.add($),P=C(P,L)}return new j(F,P)}n.B=function(P){return D(this,P).h},n.and=function(P){const A=Math.max(this.g.length,P.g.length),O=[];for(let M=0;M<A;M++)O[M]=this.i(M)&P.i(M);return new a(O,this.h&P.h)},n.or=function(P){const A=Math.max(this.g.length,P.g.length),O=[];for(let M=0;M<A;M++)O[M]=this.i(M)|P.i(M);return new a(O,this.h|P.h)},n.xor=function(P){const A=Math.max(this.g.length,P.g.length),O=[];for(let M=0;M<A;M++)O[M]=this.i(M)^P.i(M);return new a(O,this.h^P.h)};function U(P){const A=P.g.length+1,O=[];for(let M=0;M<A;M++)O[M]=P.i(M)<<1|P.i(M-1)>>>31;return new a(O,P.h)}function z(P,A){const O=A>>5;A%=32;const M=P.g.length-O,F=[];for(let $=0;$<M;$++)F[$]=A>0?P.i($+O)>>>A|P.i($+O+1)<<32-A:P.i($+O);return new a(F,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zA=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,va=a}).apply(typeof LI<"u"?LI:typeof self<"u"?self:typeof window<"u"?window:{});var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WA,Ih,qA,Vm,z0,HA,GA,KA;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof fm=="object"&&fm];for(var T=0;T<m.length;++T){var k=m[T];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=t(this);function s(m,T){if(T)e:{var k=r;m=m.split(".");for(var V=0;V<m.length-1;V++){var J=m[V];if(!(J in k))break e;k=k[J]}m=m[m.length-1],V=k[m],T=T(V),T!=V&&T!=null&&e(k,m,{configurable:!0,writable:!0,value:T})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(T){var k=[],V;for(V in T)Object.prototype.hasOwnProperty.call(T,V)&&k.push([V,T[V]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function d(m,T,k){return m.call.apply(m.bind,arguments)}function f(m,T,k){return f=d,f.apply(null,arguments)}function p(m,T){var k=Array.prototype.slice.call(arguments,1);return function(){var V=k.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function g(m,T){function k(){}k.prototype=T.prototype,m.Z=T.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(V,J,ne){for(var ve=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ve[Ge-2]=arguments[Ge];return T.prototype[J].apply(V,ve)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const T=m.length;if(T>0){const k=Array(T);for(let V=0;V<T;V++)k[V]=m[V];return k}return[]}function I(m,T){for(let V=1;V<arguments.length;V++){const J=arguments[V];var k=typeof J;if(k=k!="object"?k:J?Array.isArray(J)?"array":k:"null",k=="array"||k=="object"&&typeof J.length=="number"){k=m.length||0;const ne=J.length||0;m.length=k+ne;for(let ve=0;ve<ne;ve++)m[k+ve]=J[ve]}else m.push(J)}}class _{constructor(T,k){this.i=T,this.j=k,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function S(m){a.setTimeout(()=>{throw m},0)}function C(){var m=P;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class R{constructor(){this.h=this.g=null}add(T,k){const V=j.get();V.set(T,k),this.h?this.h.next=V:this.g=V,this.h=V}}var j=new _(()=>new D,m=>m.reset());class D{constructor(){this.next=this.g=this.h=null}set(T,k){this.h=T,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let U,z=!1,P=new R,A=()=>{const m=Promise.resolve(void 0);U=()=>{m.then(O)}};function O(){for(var m;m=C();){try{m.h.call(m.g)}catch(k){S(k)}var T=j;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}z=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};a.addEventListener("test",k,T),a.removeEventListener("test",k,T)}catch{}return m}();function L(m){return/^[\s\xa0]*$/.test(m)}function ae(m,T){F.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}g(ae,F),ae.prototype.init=function(m,T){const k=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(k=="mouseover"?T=m.fromElement:k=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),xe=0;function ge(m,T,k,V,J){this.listener=m,this.proxy=null,this.src=T,this.type=k,this.capture=!!V,this.ha=J,this.key=++xe,this.da=this.fa=!1}function ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function K(m,T,k){for(const V in m)T.call(k,m[V],V,m)}function re(m,T){for(const k in m)T.call(void 0,m[k],k,m)}function W(m){const T={};for(const k in m)T[k]=m[k];return T}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(m,T){let k,V;for(let J=1;J<arguments.length;J++){V=arguments[J];for(k in V)m[k]=V[k];for(let ne=0;ne<X.length;ne++)k=X[ne],Object.prototype.hasOwnProperty.call(V,k)&&(m[k]=V[k])}}function we(m){this.src=m,this.g={},this.h=0}we.prototype.add=function(m,T,k,V,J){const ne=m.toString();m=this.g[ne],m||(m=this.g[ne]=[],this.h++);const ve=De(m,T,V,J);return ve>-1?(T=m[ve],k||(T.fa=!1)):(T=new ge(T,this.src,ne,!!V,J),T.fa=k,m.push(T)),T};function Re(m,T){const k=T.type;if(k in m.g){var V=m.g[k],J=Array.prototype.indexOf.call(V,T,void 0),ne;(ne=J>=0)&&Array.prototype.splice.call(V,J,1),ne&&(ee(T),m.g[k].length==0&&(delete m.g[k],m.h--))}}function De(m,T,k,V){for(let J=0;J<m.length;++J){const ne=m[J];if(!ne.da&&ne.listener==T&&ne.capture==!!k&&ne.ha==V)return J}return-1}var le="closure_lm_"+(Math.random()*1e6|0),Se={};function Ne(m,T,k,V,J){if(Array.isArray(T)){for(let ne=0;ne<T.length;ne++)Ne(m,T[ne],k,V,J);return null}return k=Cr(k),m&&m[me]?m.J(T,k,c(V)?!!V.capture:!1,J):Ve(m,T,k,!1,V,J)}function Ve(m,T,k,V,J,ne){if(!T)throw Error("Invalid event type");const ve=c(J)?!!J.capture:!!J;let Ge=An(m);if(Ge||(m[le]=Ge=new we(m)),k=Ge.add(T,k,V,ve,ne),k.proxy)return k;if(V=He(),k.proxy=V,V.src=m,V.listener=k,m.addEventListener)$||(J=ve),J===void 0&&(J=!1),m.addEventListener(T.toString(),V,J);else if(m.attachEvent)m.attachEvent(zt(T.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return k}function He(){function m(k){return T.call(m.src,m.listener,k)}const T=pr;return m}function Xe(m,T,k,V,J){if(Array.isArray(T))for(var ne=0;ne<T.length;ne++)Xe(m,T[ne],k,V,J);else V=c(V)?!!V.capture:!!V,k=Cr(k),m&&m[me]?(m=m.i,ne=String(T).toString(),ne in m.g&&(T=m.g[ne],k=De(T,k,V,J),k>-1&&(ee(T[k]),Array.prototype.splice.call(T,k,1),T.length==0&&(delete m.g[ne],m.h--)))):m&&(m=An(m))&&(T=m.g[T.toString()],m=-1,T&&(m=De(T,k,V,J)),(k=m>-1?T[m]:null)&&mt(k))}function mt(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[me])Re(T.i,m);else{var k=m.type,V=m.proxy;T.removeEventListener?T.removeEventListener(k,V,m.capture):T.detachEvent?T.detachEvent(zt(k),V):T.addListener&&T.removeListener&&T.removeListener(V),(k=An(T))?(Re(k,m),k.h==0&&(k.src=null,T[le]=null)):ee(m)}}}function zt(m){return m in Se?Se[m]:Se[m]="on"+m}function pr(m,T){if(m.da)m=!0;else{T=new ae(T,this);const k=m.listener,V=m.ha||m.src;m.fa&&mt(m),m=k.call(V,T)}return m}function An(m){return m=m[le],m instanceof we?m:null}var Rn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cr(m){return typeof m=="function"?m:(m[Rn]||(m[Rn]=function(T){return m.handleEvent(T)}),m[Rn])}function ht(){M.call(this),this.i=new we(this),this.M=this,this.G=null}g(ht,M),ht.prototype[me]=!0,ht.prototype.removeEventListener=function(m,T,k,V){Xe(this,m,T,k,V)};function jt(m,T){var k,V=m.G;if(V)for(k=[];V;V=V.G)k.push(V);if(m=m.M,V=T.type||T,typeof T=="string")T=new F(T,m);else if(T instanceof F)T.target=T.target||m;else{var J=T;T=new F(V,m),_e(T,J)}J=!0;let ne,ve;if(k)for(ve=k.length-1;ve>=0;ve--)ne=T.g=k[ve],J=Nn(ne,V,!0,T)&&J;if(ne=T.g=m,J=Nn(ne,V,!0,T)&&J,J=Nn(ne,V,!1,T)&&J,k)for(ve=0;ve<k.length;ve++)ne=T.g=k[ve],J=Nn(ne,V,!1,T)&&J}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const k=m.g[T];for(let V=0;V<k.length;V++)ee(k[V]);delete m.g[T],m.h--}}this.G=null},ht.prototype.J=function(m,T,k,V){return this.i.add(String(m),T,!1,k,V)},ht.prototype.K=function(m,T,k,V){return this.i.add(String(m),T,!0,k,V)};function Nn(m,T,k,V){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let J=!0;for(let ne=0;ne<T.length;++ne){const ve=T[ne];if(ve&&!ve.da&&ve.capture==k){const Ge=ve.listener,Zt=ve.ha||ve.src;ve.fa&&Re(m.i,ve),J=Ge.call(Zt,V)!==!1&&J}}return J&&!V.defaultPrevented}function _o(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:a.setTimeout(m,T||0)}function Ar(m){m.g=_o(()=>{m.g=null,m.i&&(m.i=!1,Ar(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class hc extends M{constructor(T,k){super(),this.m=T,this.l=k,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(m){M.call(this),this.h=m,this.g={}}g(Us,M);var bn=[];function Rr(m){K(m.g,function(T,k){this.g.hasOwnProperty(k)&&mt(T)},m),m.g={}}Us.prototype.N=function(){Us.Z.N.call(this),Rr(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $s=a.JSON.stringify,fc=a.JSON.parse,Qr=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function Bs(){}function Wa(){}var Jr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nr(){F.call(this,"d")}g(Nr,F);function bo(){F.call(this,"c")}g(bo,F);var En={},Eo=null;function zs(){return Eo=Eo||new ht}En.Ia="serverreachability";function Ai(m){F.call(this,En.Ia,m)}g(Ai,F);function Xr(m){const T=zs();jt(T,new Ai(T))}En.STAT_EVENT="statevent";function ws(m,T){F.call(this,En.STAT_EVENT,m),this.stat=T}g(ws,F);function It(m){const T=zs();jt(T,new ws(T,m))}En.Ja="timingevent";function mr(m,T){F.call(this,En.Ja,m),this.size=T}g(mr,F);function Ws(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},T)}function Fe(){this.g=!0}Fe.prototype.ua=function(){this.g=!1};function ut(m,T,k,V,J,ne){m.info(function(){if(m.g)if(ne){var ve="",Ge=ne.split("&");for(let _t=0;_t<Ge.length;_t++){var Zt=Ge[_t].split("=");if(Zt.length>1){const rn=Zt[0];Zt=Zt[1];const Fr=rn.split("_");ve=Fr.length>=2&&Fr[1]=="type"?ve+(rn+"="+Zt+"&"):ve+(rn+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+V+") [attempt "+J+"]: "+T+`
`+k+`
`+ve})}function xt(m,T,k,V,J,ne,ve){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+J+"]: "+T+`
`+k+`
`+ne+" "+ve})}function Wt(m,T,k,V){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+$n(m,k)+(V?" "+V:"")})}function Un(m,T){m.info(function(){return"TIMEOUT: "+T})}Fe.prototype.info=function(){};function $n(m,T){if(!m.g)return T;if(!T)return null;try{const ne=JSON.parse(T);if(ne){for(m=0;m<ne.length;m++)if(Array.isArray(ne[m])){var k=ne[m];if(!(k.length<2)){var V=k[1];if(Array.isArray(V)&&!(V.length<1)){var J=V[0];if(J!="noop"&&J!="stop"&&J!="close")for(let ve=1;ve<V.length;ve++)V[ve]=""}}}}return $s(ne)}catch{return T}}var Bn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jr;function Ri(){}g(Ri,Bs),Ri.prototype.g=function(){return new XMLHttpRequest},jr=new Ri;function qs(m){return encodeURIComponent(String(m))}function pc(m){var T=1;m=m.split(":");const k=[];for(;T>0&&m.length;)k.push(m.shift()),T--;return m.length&&k.push(m.join(":")),k}function Zr(m,T,k,V){this.j=m,this.i=T,this.l=k,this.S=V||1,this.V=new Us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xf}function Xf(){this.i=null,this.g="",this.h=!1}var Zf={},Sd={};function xs(m,T,k){m.M=1,m.A=ji(es(T)),m.u=k,m.R=!0,Id(m,null)}function Id(m,T){m.F=Date.now(),qa(m),m.B=es(m.A);var k=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),Md(k.i,"t",V),m.C=0,k=m.j.L,m.h=new Xf,m.g=cp(m.j,k?T:null,!m.u),m.P>0&&(m.O=new hc(f(m.Y,m,m.g),m.P)),T=m.V,k=m.g,V=m.ba;var J="readystatechange";Array.isArray(J)||(J&&(bn[0]=J.toString()),J=bn);for(let ne=0;ne<J.length;ne++){const ve=Ne(k,J[ne],V||T.handleEvent,!1,T.h||T);if(!ve)break;T.g[ve.key]=ve}T=m.J?W(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),Xr(),ut(m.i,m.v,m.B,m.l,m.S,m.u)}Zr.prototype.ba=function(m){m=m.target;const T=this.O;T&&Xs(m)==3?T.j():this.Y(m)},Zr.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=Xs(this.g),Zt=this.g.ya(),_t=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||ap(this.g)))){this.K||Ge!=4||Zt==7||(Zt==8||_t<=0?Xr(3):Xr(2)),mc(this);var T=this.g.ca();this.X=T;var k=ep(this);if(this.o=T==200,xt(this.i,this.v,this.B,this.l,this.S,Ge,T),this.o){if(this.U&&!this.L){t:{if(this.g){var V,J=this.g;if((V=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(V)){var ne=V;break t}}ne=null}if(m=ne)Wt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ct(this,m);else{this.o=!1,this.m=3,It(12),Ni(this),Ha(this);break e}}if(this.R){m=!0;let rn;for(;!this.K&&this.C<k.length;)if(rn=np(this,k),rn==Sd){Ge==4&&(this.m=4,It(14),m=!1),Wt(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Zf){this.m=4,It(15),Wt(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else Wt(this.i,this.l,rn,null),Ct(this,rn);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||k.length!=0||this.h.h||(this.m=1,It(16),m=!1),this.o=this.o&&m,!m)Wt(this.i,this.l,k,"[Invalid Chunked Response]"),Ni(this),Ha(this);else if(k.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),tl(ve),ve.P=!0,It(11))}}else Wt(this.i,this.l,k,null),Ct(this,k);Ge==4&&Ni(this),this.o&&!this.K&&(Ge==4?Sc(this.j,this):(this.o=!1,qa(this)))}else Vd(this.g),T==400&&k.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Ni(this),Ha(this)}}}catch{}finally{}};function ep(m){if(!tp(m))return m.g.la();const T=ap(m.g);if(T==="")return"";let k="";const V=T.length,J=Xs(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ni(m),Ha(m),"";m.h.i=new a.TextDecoder}for(let ne=0;ne<V;ne++)m.h.h=!0,k+=m.h.i.decode(T[ne],{stream:!(J&&ne==V-1)});return T.length=0,m.h.g+=k,m.C=0,m.h.g}function tp(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function np(m,T){var k=m.C,V=T.indexOf(`
`,k);return V==-1?Sd:(k=Number(T.substring(k,V)),isNaN(k)?Zf:(V+=1,V+k>T.length?Sd:(T=T.slice(V,V+k),m.C=V+k,T)))}Zr.prototype.cancel=function(){this.K=!0,Ni(this)};function qa(m){m.T=Date.now()+m.H,kd(m,m.H)}function kd(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ws(f(m.aa,m),T)}function mc(m){m.D&&(a.clearTimeout(m.D),m.D=null)}Zr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Un(this.i,this.B),this.M!=2&&(Xr(),It(17)),Ni(this),this.m=2,Ha(this)):kd(this,this.T-m)};function Ha(m){m.j.I==0||m.K||Sc(m.j,m)}function Ni(m){mc(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Rr(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function Ct(m,T){try{var k=m.j;if(k.I!=0&&(k.g==m||Cd(k.h,m))){if(!m.L&&Cd(k.h,m)&&k.I==3){try{var V=k.Ba.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var J=V;if(J[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)Tc(k),Lr(k);else break e;ti(k),It(18)}}else k.xa=J[1],0<k.xa-k.K&&J[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Ws(f(k.Va,k),6e3));Ga(k.h)<=1&&k.ta&&(k.ta=void 0)}else Vr(k,11)}else if((m.L||k.g==m)&&Tc(k),!L(T))for(J=k.Ba.g.parse(T),T=0;T<J.length;T++){let _t=J[T];const rn=_t[0];if(!(rn<=k.K))if(k.K=rn,_t=_t[1],k.I==2)if(_t[0]=="c"){k.M=_t[1],k.ba=_t[2];const Fr=_t[3];Fr!=null&&(k.ka=Fr,k.j.info("VER="+k.ka));const Vi=_t[4];Vi!=null&&(k.za=Vi,k.j.info("SVER="+k.za));const ni=_t[5];ni!=null&&typeof ni=="number"&&ni>0&&(V=1.5*ni,k.O=V,k.j.info("backChannelRequestTimeoutMs_="+V)),V=k;const ri=m.g;if(ri){const Pc=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pc){var ne=V.h;ne.g||Pc.indexOf("spdy")==-1&&Pc.indexOf("quic")==-1&&Pc.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(yc(ne,ne.h),ne.h=null))}if(V.G){const $d=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;$d&&(V.wa=$d,gt(V.J,V.G,$d))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),V=k;var ve=m;if(V.na=Ud(V,V.L?V.ba:null,V.W),ve.L){Ka(V.h,ve);var Ge=ve,Zt=V.O;Zt&&(Ge.H=Zt),Ge.D&&(mc(Ge),qa(Ge)),V.g=ve}else zn(V);k.i.length>0&&Li(k)}else _t[0]!="stop"&&_t[0]!="close"||Vr(k,7);else k.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Vr(k,7):bc(k):_t[0]!="noop"&&k.l&&k.l.qa(_t),k.A=0)}}Xr(4)}catch{}}var ov=class{constructor(m,T){this.g=m,this.map=T}};function gc(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pd(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ga(m){return m.h?1:m.g?m.g.size:0}function Cd(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function yc(m,T){m.g?m.g.add(T):m.h=T}function Ka(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}gc.prototype.cancel=function(){if(this.i=Or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Or(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const k of m.g.values())T=T.concat(k.G);return T}return w(m.i)}var rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dr(m,T){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const V=m[k].indexOf("=");let J,ne=null;V>=0?(J=m[k].substring(0,V),ne=m[k].substring(V+1)):J=m[k],T(J,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Hs(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof Hs?(this.l=m.l,Ya(this,m.j),this.o=m.o,this.g=m.g,Gs(this,m.u),this.h=m.h,To(this,Ld(m.i)),this.m=m.m):m&&(T=String(m).match(rp))?(this.l=!1,Ya(this,T[1]||"",!0),this.o=Qa(T[2]||""),this.g=Qa(T[3]||"",!0),Gs(this,T[4]),this.h=Qa(T[5]||"",!0),To(this,T[6]||"",!0),this.m=Qa(T[7]||"")):(this.l=!1,this.i=new ot(null,this.l))}Hs.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(Ja(T,Rd,!0),":");var k=this.g;return(k||T=="file")&&(m.push("//"),(T=this.o)&&m.push(Ja(T,Rd,!0),"@"),m.push(qs(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Ja(k,k.charAt(0)=="/"?Xa:Nd,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Ja(k,jd)),m.join("")},Hs.prototype.resolve=function(m){const T=es(this);let k=!!m.j;k?Ya(T,m.j):k=!!m.o,k?T.o=m.o:k=!!m.g,k?T.g=m.g:k=m.u!=null;var V=m.h;if(k)Gs(T,m.u);else if(k=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var J=T.h.lastIndexOf("/");J!=-1&&(V=T.h.slice(0,J+1)+V)}if(J=V,J==".."||J==".")V="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){V=J.lastIndexOf("/",0)==0,J=J.split("/");const ne=[];for(let ve=0;ve<J.length;){const Ge=J[ve++];Ge=="."?V&&ve==J.length&&ne.push(""):Ge==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),V&&ve==J.length&&ne.push("")):(ne.push(Ge),V=!0)}V=ne.join("/")}else V=J}return k?T.h=V:k=m.i.toString()!=="",k?To(T,Ld(m.i)):k=!!m.m,k&&(T.m=m.m),T};function es(m){return new Hs(m)}function Ya(m,T,k){m.j=k?Qa(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Gs(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function To(m,T,k){T instanceof ot?(m.i=T,wc(m.i,m.l)):(k||(T=Ja(T,av)),m.i=new ot(T,m.l))}function gt(m,T,k){m.i.set(T,k)}function ji(m){return gt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qa(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ja(m,T,k){return typeof m=="string"?(m=encodeURI(m).replace(T,Ad),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ad(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Rd=/[#\/\?@]/g,Nd=/[#\?:]/g,Xa=/[#\?]/g,av=/[#\?@]/g,jd=/#/g;function ot(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Ks(m){m.g||(m.g=new Map,m.h=0,m.i&&Dr(m.i,function(T,k){m.add(decodeURIComponent(T.replace(/\+/g," ")),k)}))}n=ot.prototype,n.add=function(m,T){Ks(this),this.i=null,m=Ys(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(T),this.h+=1,this};function Od(m,T){Ks(m),T=Ys(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function vc(m,T){return Ks(m),T=Ys(m,T),m.g.has(T)}n.forEach=function(m,T){Ks(this),this.g.forEach(function(k,V){k.forEach(function(J){m.call(T,J,V,this)},this)},this)};function Dd(m,T){Ks(m);let k=[];if(typeof T=="string")vc(m,T)&&(k=k.concat(m.g.get(Ys(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)k=k.concat(m[T]);return k}n.set=function(m,T){return Ks(this),this.i=null,m=Ys(this,m),vc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=Dd(this,m),m.length>0?String(m[0]):T):T};function Md(m,T,k){Od(m,T),k.length>0&&(m.i=null,m.g.set(Ys(m,T),w(k)),m.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let V=0;V<T.length;V++){var k=T[V];const J=qs(k);k=Dd(this,k);for(let ne=0;ne<k.length;ne++){let ve=J;k[ne]!==""&&(ve+="="+qs(k[ne])),m.push(ve)}}return this.i=m.join("&")};function Ld(m){const T=new ot;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function Ys(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function wc(m,T){T&&!m.j&&(Ks(m),m.i=null,m.g.forEach(function(k,V){const J=V.toLowerCase();V!=J&&(Od(this,V),Md(this,J,k))},m)),m.j=T}function Qs(m,T){const k=new Fe;if(a.Image){const V=new Image;V.onload=p(jn,k,"TestLoadImage: loaded",!0,T,V),V.onerror=p(jn,k,"TestLoadImage: error",!1,T,V),V.onabort=p(jn,k,"TestLoadImage: abort",!1,T,V),V.ontimeout=p(jn,k,"TestLoadImage: timeout",!1,T,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else T(!1)}function Js(m,T){const k=new Fe,V=new AbortController,J=setTimeout(()=>{V.abort(),jn(k,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:V.signal}).then(ne=>{clearTimeout(J),ne.ok?jn(k,"TestPingServer: ok",!0,T):jn(k,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(J),jn(k,"TestPingServer: error",!1,T)})}function jn(m,T,k,V,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),V(k)}catch{}}function Za(){this.g=new Qr}function Oi(m){this.i=m.Sb||null,this.h=m.ab||!1}g(Oi,Bs),Oi.prototype.g=function(){return new Mr(this.i,this.h)};function Mr(m,T){ht.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Mr,ht),n=Mr.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,_s(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||a).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sp(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function sp(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?So(this):_s(this),this.readyState==3&&sp(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,So(this))},n.Na=function(m){this.g&&(this.response=m,So(this))},n.ga=function(){this.g&&So(this)};function So(m){m.readyState=4,m.l=null,m.j=null,m.B=null,_s(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var k=T.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=T.next();return m.join(`\r
`)};function _s(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ip(m){let T="";return K(m,function(k,V){T+=V,T+=":",T+=k,T+=`\r
`}),T}function xc(m,T,k){e:{for(V in k){var V=!1;break e}V=!0}V||(k=ip(k),typeof m=="string"?k!=null&&qs(k):gt(m,T,k))}function St(m){ht.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(St,ht);var op=/^https?$/i,lv=["POST","PUT"];n=St.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,k,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jr.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(ne){Io(this,ne);return}if(m=k||"",k=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var J in V)k.set(J,V[J]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ne of V.keys())k.set(ne,V.get(ne));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(k.keys()).find(ne=>ne.toLowerCase()=="content-type"),J=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(lv,T,void 0)>=0)||V||J||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of k)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ne){Io(this,ne)}};function Io(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,ko(m),Mi(m)}function ko(m){m.A||(m.A=!0,jt(m,"complete"),jt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,jt(this,"complete"),jt(this,"abort"),Mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mi(this,!0)),St.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Di(this):this.Xa())},n.Xa=function(){Di(this)};function Di(m){if(m.h&&typeof i<"u"){if(m.v&&Xs(m)==4)setTimeout(m.Ca.bind(m),0);else if(jt(m,"readystatechange"),Xs(m)==4){m.h=!1;try{const ne=m.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var k;if(!(k=T)){var V;if(V=ne===0){let ve=String(m.D).match(rp)[1]||null;!ve&&a.self&&a.self.location&&(ve=a.self.location.protocol.slice(0,-1)),V=!op.test(ve?ve.toLowerCase():"")}k=V}if(k)jt(m,"complete"),jt(m,"success");else{m.o=6;try{var J=Xs(m)>2?m.g.statusText:""}catch{J=""}m.l=J+" ["+m.ca()+"]",ko(m)}}finally{Mi(m)}}}}function Mi(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,T||jt(m,"ready");try{k.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Xs(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Xs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),fc(T)}};function ap(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Vd(m){const T={};m=(m.g&&Xs(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(L(m[V]))continue;var k=pc(m[V]);const J=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ne=T[J]||[];T[J]=ne,ne.push(k)}re(T,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(m,T,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||T}function _c(m){this.za=0,this.i=[],this.j=new Fe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,m),this.Za=Zs("retryDelaySeedMs",1e4,m),this.Ta=Zs("forwardChannelMaxRetries",2,m),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new gc(m&&m.concurrentRequestLimit),this.Ba=new Za,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_c.prototype,n.ka=8,n.I=1,n.connect=function(m,T,k,V){It(0),this.W=m,this.H=T||{},k&&V!==void 0&&(this.H.OSID=k,this.H.OAID=V),this.F=this.X,this.J=Ud(this,null,this.W),Li(this)};function bc(m){if(Ec(m),m.I==3){var T=m.V++,k=es(m.J);if(gt(k,"SID",m.M),gt(k,"RID",T),gt(k,"TYPE","terminate"),ei(m,k),T=new Zr(m,m.j,T),T.M=2,T.A=ji(es(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(T.A.toString(),"")}catch{}!k&&a.Image&&(new Image().src=T.A,k=!0),k||(T.g=cp(T.j,null),T.g.ea(T.A)),T.F=Date.now(),qa(T)}nl(m)}function Lr(m){m.g&&(tl(m),m.g.cancel(),m.g=null)}function Ec(m){Lr(m),m.v&&(a.clearTimeout(m.v),m.v=null),Tc(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function Li(m){if(!Pd(m.h)&&!m.m){m.m=!0;var T=m.Ea;U||A(),z||(U(),z=!0),P.add(T,m),m.D=0}}function lp(m,T){return Ga(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ws(f(m.Ea,m,T),Ic(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const J=new Zr(this,this.j,m);let ne=this.o;if(this.U&&(ne?(ne=W(ne),_e(ne,this.U)):ne=this.U),this.u!==null||this.R||(J.J=ne,ne=null),this.S)e:{for(var T=0,k=0;k<this.i.length;k++){t:{var V=this.i[k];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,T>4096){T=k;break e}if(T===4096||k===this.i.length-1){T=k+1;break e}}T=1e3}else T=1e3;T=Fd(this,J,T),k=es(this.J),gt(k,"RID",m),gt(k,"CVER",22),this.G&&gt(k,"X-HTTP-Session-Id",this.G),ei(this,k),ne&&(this.R?T="headers="+qs(ip(ne))+"&"+T:this.u&&xc(k,this.u,ne)),yc(this.h,J),this.Ra&&gt(k,"TYPE","init"),this.S?(gt(k,"$req",T),gt(k,"SID","null"),J.U=!0,xs(J,k,null)):xs(J,k,T),this.I=2}}else this.I==3&&(m?el(this,m):this.i.length==0||Pd(this.h)||el(this))};function el(m,T){var k;T?k=T.l:k=m.V++;const V=es(m.J);gt(V,"SID",m.M),gt(V,"RID",k),gt(V,"AID",m.K),ei(m,V),m.u&&m.o&&xc(V,m.u,m.o),k=new Zr(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),T&&(m.i=T.G.concat(m.i)),T=Fd(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),yc(m.h,k),xs(k,V,T)}function ei(m,T){m.H&&K(m.H,function(k,V){gt(T,V,k)}),m.l&&K({},function(k,V){gt(T,V,k)})}function Fd(m,T,k){k=Math.min(m.i.length,k);const V=m.l?f(m.l.Ka,m.l,m):null;e:{var J=m.i;let Ge=-1;for(;;){const Zt=["count="+k];Ge==-1?k>0?(Ge=J[0].g,Zt.push("ofs="+Ge)):Ge=0:Zt.push("ofs="+Ge);let _t=!0;for(let rn=0;rn<k;rn++){var ne=J[rn].g;const Fr=J[rn].map;if(ne-=Ge,ne<0)Ge=Math.max(0,J[rn].g-100),_t=!1;else try{ne="req"+ne+"_"||"";try{var ve=Fr instanceof Map?Fr:Object.entries(Fr);for(const[Vi,ni]of ve){let ri=ni;c(ni)&&(ri=$s(ni)),Zt.push(ne+Vi+"="+encodeURIComponent(ri))}}catch(Vi){throw Zt.push(ne+"type="+encodeURIComponent("_badmap")),Vi}}catch{V&&V(Fr)}}if(_t){ve=Zt.join("&");break e}}ve=void 0}return m=m.i.splice(0,k),T.G=m,ve}function zn(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;U||A(),z||(U(),z=!0),P.add(T,m),m.A=0}}function ti(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ws(f(m.Da,m),Ic(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Po(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ws(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Lr(this),Po(this))};function tl(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function Po(m){m.g=new Zr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=es(m.na);gt(T,"RID","rpc"),gt(T,"SID",m.M),gt(T,"AID",m.K),gt(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&gt(T,"TO",m.ia),gt(T,"TYPE","xmlhttp"),ei(m,T),m.u&&m.o&&xc(T,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=ji(es(T)),k.u=null,k.R=!0,Id(k,m)}n.Va=function(){this.C!=null&&(this.C=null,Lr(this),ti(this),It(19))};function Tc(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function Sc(m,T){var k=null;if(m.g==T){Tc(m),tl(m),m.g=null;var V=2}else if(Cd(m.h,T))k=T.G,Ka(m.h,T),V=1;else return;if(m.I!=0){if(T.o)if(V==1){k=T.u?T.u.length:0,T=Date.now()-T.F;var J=m.D;V=zs(),jt(V,new mr(V,k)),Li(m)}else zn(m);else if(J=T.m,J==3||J==0&&T.X>0||!(V==1&&lp(m,T)||V==2&&ti(m)))switch(k&&k.length>0&&(T=m.h,T.i=T.i.concat(k)),J){case 1:Vr(m,5);break;case 4:Vr(m,10);break;case 3:Vr(m,6);break;default:Vr(m,2)}}}function Ic(m,T){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*T}function Vr(m,T){if(m.j.info("Error code "+T),T==2){var k=f(m.bb,m),V=m.Ua;const J=!V;V=new Hs(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ya(V,"https"),ji(V),J?Qs(V.toString(),k):Js(V.toString(),k)}else It(2);m.I=0,m.l&&m.l.pa(T),nl(m),Ec(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function nl(m){if(m.I=0,m.ja=[],m.l){const T=Or(m.h);(T.length!=0||m.i.length!=0)&&(I(m.ja,T),I(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Ud(m,T,k){var V=k instanceof Hs?es(k):new Hs(k);if(V.g!="")T&&(V.g=T+"."+V.g),Gs(V,V.u);else{var J=a.location;V=J.protocol,T=T?T+"."+J.hostname:J.hostname,J=+J.port;const ne=new Hs(null);V&&Ya(ne,V),T&&(ne.g=T),J&&Gs(ne,J),k&&(ne.h=k),V=ne}return k=m.G,T=m.wa,k&&T&&gt(V,k,T),gt(V,"VER",m.ka),ei(m,V),V}function cp(m,T,k){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new St(new Oi({ab:k})):new St(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function up(){}n=up.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function kc(){}kc.prototype.g=function(m,T){return new On(m,T)};function On(m,T){ht.call(this),this.g=new _c(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!L(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!L(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Co(this)}g(On,ht),On.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){bc(this.g)},On.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=$s(m),m=k);T.i.push(new ov(T.Ya++,m)),T.I==3&&Li(T)},On.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,On.Z.N.call(this)};function dp(m){Nr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const k in T){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}g(dp,Nr);function hp(){bo.call(this),this.status=1}g(hp,bo);function Co(m){this.g=m}g(Co,up),Co.prototype.ra=function(){jt(this.g,"a")},Co.prototype.qa=function(m){jt(this.g,new dp(m))},Co.prototype.pa=function(m){jt(this.g,new hp)},Co.prototype.oa=function(){jt(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,KA=function(){return new kc},GA=function(){return zs()},HA=En,z0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,Vm=Bn,nn.COMPLETE="complete",qA=nn,Wa.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Ih=Wa,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,WA=St}).apply(typeof fm<"u"?fm:typeof self<"u"?self:typeof window<"u"?window:{});const VI="@firebase/firestore",FI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new r_("@firebase/firestore");function pu(){return Wl.logLevel}function he(n,...e){if(Wl.logLevel<=st.DEBUG){const t=e.map(g_);Wl.debug(`Firestore (${gd}): ${n}`,...t)}}function ar(n,...e){if(Wl.logLevel<=st.ERROR){const t=e.map(g_);Wl.error(`Firestore (${gd}): ${n}`,...t)}}function ql(n,...e){if(Wl.logLevel<=st.WARN){const t=e.map(g_);Wl.warn(`Firestore (${gd}): ${n}`,...t)}}function g_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YA(n,r,t)}function YA(n,e,t){let r=`FIRESTORE (${gd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ar(r),new Error(r)}function Me(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||YA(e,s,r)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ln.UNAUTHENTICATED))}shutdown(){}}class l8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c8{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Me(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let i=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=i;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new QA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class u8{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class d8{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new u8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Me(this.o===void 0,3512);const r=i=>{i.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,he("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new UI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new UI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=f8(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function W0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Qw(s)===Qw(i)?We(s,i):Qw(s)?1:-1}return We(n.length,e.length)}const p8=55296,m8=57343;function Qw(n){const e=n.charCodeAt(0);return e>=p8&&e<=m8}function Wu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function JA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="__name__";class ui{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=ui.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return We(e.length,t.length)}static compareSegments(e,t){const r=ui.isNumericId(e),s=ui.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ui.extractNumericId(e).compare(ui.extractNumericId(t)):W0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return va.fromString(e.substring(4,e.length-2))}}class vt extends ui{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new vt(t)}static emptyPath(){return new vt([])}}const g8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends ui{construct(e,t,r){return new $t(e,t,r)}static isValidIdentifier(e){return g8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$I}static keyField(){return new $t([$I])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ye(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ye(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new ye(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(vt.fromString(e))}static fromName(e){return new Ee(vt.fromString(e).popFirst(5))}static empty(){return new Ee(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e,t){if(!t)throw new ye(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y8(n,e,t,r){if(e===!0&&r===!0)throw new ye(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BI(n){if(!Ee.isDocumentKey(n))throw new ye(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zI(n){if(Ee.isDocumentKey(n))throw new ye(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uy(n);throw new ye(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vf(n,e){if(!ZA(n))throw new ye(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new ye(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=-62135596800,qI=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*qI);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<WI)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qI}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vf(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-WI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:un("string",wt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new wt(0,0))}static max(){return new Le(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=-1;class fg{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function q0(n){return n.fields.find(e=>e.kind===2)}function wl(n){return n.fields.filter(e=>e.kind!==2)}fg.UNKNOWN_ID=-1;class Fm{constructor(e,t){this.fieldPath=e,this.kind=t}}class uf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uf(0,Kr.min())}}function v8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new Kr(s,Ee.empty(),e)}function eR(n){return new Kr(n.readTime,n.key,cf)}class Kr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Kr(Le.min(),Ee.empty(),cf)}static max(){return new Kr(Le.max(),Ee.empty(),cf)}}function v_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==tR)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&t()},d=>r(d))}),a=!0,i===s&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(s=>s?Y.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let d=0;d<i;d++){const f=d;t(e[f]).next(p=>{a[f]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,t){return new Y((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SimpleDb";class dy{static open(e,t,r,s){try{return new dy(t,e.transaction(s,r))}catch(i){throw new Fh(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new xi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Fh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=w_(r.target.error);this.S.reject(new Fh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(he(zr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new x8(t)}}class wa{static delete(e){return he(zr,"Removing database:",e),bl(VC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!GC())return!1;if(wa.F())return!0;const e=vn(),t=wa.M(e),r=0<t&&t<10,s=rR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,wa.M(vn())===12.2&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(he(zr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;t(a)},s.onblocked=()=>{r(new Fh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new ye(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ye(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Fh(e,a))},s.onupgradeneeded=i=>{he(zr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,s.transaction,i.oldVersion,this.version).next(()=>{he(zr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const c=dy.open(this.db,e,i?"readonly":"readwrite",r),d=s(c).next(f=>(c.C(),f)).catch(f=>(c.abort(f),Y.reject(f))).toPromise();return d.catch(()=>{}),await c.D,d}catch(c){const d=c,f=d.name!=="FirebaseError"&&a<3;if(he(zr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function rR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class w8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bl(this.U.delete())}}class Fh extends ye{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(n){return n.name==="IndexedDbTransactionError"}class x8{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(he(zr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(he(zr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bl(r)}add(e){return he(zr,"ADD",this.store.name,e,e),bl(this.store.add(e))}get(e){return bl(this.store.get(e)).next(t=>(t===void 0&&(t=null),he(zr,"GET",this.store.name,e,t),t))}delete(e){return he(zr,"DELETE",this.store.name,e),bl(this.store.delete(e))}count(){return he(zr,"COUNT",this.store.name),bl(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new Y((a,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}{const i=this.cursor(r),a=[];return this.H(i,(c,d)=>{a.push(d)}).next(()=>a)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Y((s,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}Z(e,t){he(zr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(i,a,c)=>c.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new Y((r,s)=>{t.onerror=i=>{const a=w_(i.target.error);s(a)},t.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}H(e,t){const r=[];return new Y((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void s();const d=new w8(c),f=t(c.primaryKey,c.value,d);if(f instanceof Y){const p=f.catch(g=>(d.done(),Y.reject(g)));r.push(p)}d.isDone?s():d.G===null?c.continue():c.continue(d.G)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bl(n){return new Y((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=w_(r.target.error);t(s)}})}let HI=!1;function w_(n){const e=wa.M(vn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HI||(HI=!0,setTimeout(()=>{throw r},0)),r}}return n}const Uh="IndexBackfiller";class _8{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){he(Uh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();he(Uh,`Documents written: ${t}`)}catch(t){Na(t)?he(Uh,"Ignoring IndexedDB error during index backfill: ",t):await oc(t)}await this.re(6e4)})}}class b8{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let s=t,i=!0;return Y.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return he(Uh,`Processing collection: ${a}`),this.oe(e,a,s).next(c=>{s-=c,r.add(a)});i=!1})).next(()=>t-s)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(s,i)).next(c=>(he(Uh,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}_e(e,t){let r=e;return t.changes.forEach((s,i)=>{const a=eR(i);v_(a,r)>0&&(r=a)}),new Kr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ds.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=-1;function hy(n){return n==null}function df(n){return n===0&&1/n==-1/0}function E8(n){return typeof n=="number"&&Number.isInteger(n)&&!df(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="";function tr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GI(e)),e=T8(n.get(t),e);return GI(e)}function T8(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case pg:t+="";break;default:t+=i}}return t}function GI(n){return n+pg+""}function mi(n){const e=n.length;if(Me(e>=2,64408,{path:n}),e===2)return Me(n.charAt(0)===pg&&n.charAt(1)==="",56145,{path:n}),vt.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const a=n.indexOf(pg,i);switch((a<0||a>t)&&Ce(50515,{path:n}),n.charAt(a+1)){case"":const c=n.substring(i,a);let d;s.length===0?d=c:(s+=c,d=s,s=""),r.push(d);break;case"":s+=n.substring(i,a),s+="\0";break;case"":s+=n.substring(i,a+1);break;default:Ce(61167,{path:n})}i=a+2}return new vt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="remoteDocuments",Ff="owner",Yc="owner",hf="mutationQueues",S8="userId",js="mutations",KI="batchId",kl="userMutationsIndex",YI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){return[n,tr(e)]}function sR(n,e,t){return[n,tr(e),t]}const I8={},qu="documentMutations",mg="remoteDocumentsV14",k8=["prefixPath","collectionGroup","readTime","documentId"],$m="documentKeyIndex",P8=["prefixPath","collectionGroup","documentId"],iR="collectionGroupIndex",C8=["collectionGroup","readTime","prefixPath","documentId"],ff="remoteDocumentGlobal",H0="remoteDocumentGlobalKey",Hu="targets",oR="queryTargetsIndex",A8=["canonicalId","targetId"],Gu="targetDocuments",R8=["targetId","path"],x_="documentTargetsIndex",N8=["path","targetId"],gg="targetGlobalKey",Ol="targetGlobal",pf="collectionParents",j8=["collectionId","parent"],Ku="clientMetadata",O8="clientId",fy="bundles",D8="bundleId",py="namedQueries",M8="name",__="indexConfiguration",L8="indexId",G0="collectionGroupIndex",V8="collectionGroup",$h="indexState",F8=["indexId","uid"],aR="sequenceNumberIndex",U8=["uid","sequenceNumber"],Bh="indexEntries",$8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lR="documentKeyIndex",B8=["indexId","uid","orderedDocumentKey"],my="documentOverlays",z8=["userId","collectionPath","documentId"],K0="collectionPathOverlayIndex",W8=["userId","collectionPath","largestBatchId"],cR="collectionGroupOverlayIndex",q8=["userId","collectionGroup","largestBatchId"],b_="globals",H8="name",uR=[hf,js,qu,xl,Hu,Ff,Ol,Gu,Ku,ff,pf,fy,py],G8=[...uR,my],dR=[hf,js,qu,mg,Hu,Ff,Ol,Gu,Ku,ff,pf,fy,py,my],hR=dR,E_=[...hR,__,$h,Bh],K8=E_,fR=[...E_,b_],Y8=fR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends nR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function _n(n,e){const t=qe(n);return wa.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ja(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pm(this.root,e,this.comparator,!0)}}class pm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Vn.RED,this.left=s??Vn.EMPTY,this.right=i??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Vn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JI(this.data.getIterator())}getIteratorFrom(e){return new JI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class JI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new Tt($t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mR("Invalid base64 string: "+i):i}}(e);return new dn(t)}static fromUint8Array(e){const t=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const Q8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(n){if(Me(!!n,39018),typeof n=="string"){let e=0;const t=Q8.exec(n);if(Me(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fo(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="server_timestamp",yR="__type__",vR="__previous_value__",wR="__local_write_time__";function T_(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[yR])==null?void 0:r.stringValue)===gR}function gy(n){const e=n.mapValue.fields[vR];return T_(e)?gy(e):e}function mf(n){const e=ho(n.mapValue.fields[wR].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,t,r,s,i,a,c,d,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const yg="(default)";class Hl{constructor(e,t){this.projectId=e,this.database=t||yg}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database===yg}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="__type__",xR="__max__",fa={mapValue:{fields:{__type__:{stringValue:xR}}}},I_="__vector__",Yu="value",Bm={nullValue:"NULL_VALUE"};function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?T_(n)?4:_R(n)?9007199254740991:yy(n)?10:11:Ce(28295,{value:n})}function Si(n,e){if(n===e)return!0;const t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ho(s.timestampValue),c=ho(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return fo(s.bytesValue).isEqual(fo(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Dt(s.doubleValue),c=Dt(i.doubleValue);return a===c?df(a)===df(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Wu(n.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(QI(a)!==QI(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!Si(a[d],c[d])))return!1;return!0}(n,e);default:return Ce(52216,{left:n})}}function gf(n,e){return(n.values||[]).find(t=>Si(t,e))!==void 0}function Ia(n,e){if(n===e)return 0;const t=Sa(n),r=Sa(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Dt(i.integerValue||i.doubleValue),d=Dt(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return XI(n.timestampValue,e.timestampValue);case 4:return XI(mf(n),mf(e));case 5:return W0(n.stringValue,e.stringValue);case 6:return function(i,a){const c=fo(i),d=fo(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=We(c[f],d[f]);if(p!==0)return p}return We(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=We(Dt(i.latitude),Dt(a.latitude));return c!==0?c:We(Dt(i.longitude),Dt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZI(n.arrayValue,e.arrayValue);case 10:return function(i,a){var v,w,I,_;const c=i.fields||{},d=a.fields||{},f=(v=c[Yu])==null?void 0:v.arrayValue,p=(w=d[Yu])==null?void 0:w.arrayValue,g=We(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((_=p==null?void 0:p.values)==null?void 0:_.length)||0);return g!==0?g:ZI(f,p)}(n.mapValue,e.mapValue);case 11:return function(i,a){if(i===fa.mapValue&&a===fa.mapValue)return 0;if(i===fa.mapValue)return 1;if(a===fa.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),f=a.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let g=0;g<d.length&&g<p.length;++g){const v=W0(d[g],p[g]);if(v!==0)return v;const w=Ia(c[d[g]],f[p[g]]);if(w!==0)return w}return We(d.length,p.length)}(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function XI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ho(n),r=ho(e),s=We(t.seconds,r.seconds);return s!==0?s:We(t.nanos,r.nanos)}function ZI(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ia(t[s],r[s]);if(i)return i}return We(t.length,r.length)}function Qu(n){return Q0(n)}function Q0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ho(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return fo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Q0(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Q0(t.fields[a])}`;return s+"}"}(n.mapValue):Ce(61005,{value:n})}function zm(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gy(n);return e?16+zm(e):16;case 5:return 2*n.stringValue.length;case 6:return fo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+zm(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ja(r.fields,(i,a)=>{s+=i.length+zm(a)}),s}(n.mapValue);default:throw Ce(13486,{value:n})}}function yf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function J0(n){return!!n&&"integerValue"in n}function vf(n){return!!n&&"arrayValue"in n}function ek(n){return!!n&&"nullValue"in n}function tk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wm(n){return!!n&&"mapValue"in n}function yy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[S_])==null?void 0:r.stringValue)===I_}function zh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ja(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zh(n.arrayValue.values[t]);return e}return{...n}}function _R(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}const bR={mapValue:{fields:{[S_]:{stringValue:I_},[Yu]:{arrayValue:{}}}}};function X8(n){return"nullValue"in n?Bm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yf(Hl.empty(),Ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yy(n)?bR:{mapValue:{}}:Ce(35942,{value:n})}function Z8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yf(Hl.empty(),Ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?bR:"mapValue"in n?yy(n)?{mapValue:{}}:fa:Ce(61959,{value:n})}function nk(n,e){const t=Ia(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rk(n,e){const t=Ia(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(t)}setAll(e){let t=$t.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=zh(a):s.push(c.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Wm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ja(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Zn(zh(this.value))}}function ER(n){const e=[];return ja(n.fields,(t,r)=>{const s=new $t([t]);if(Wm(r)){const i=ER(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Kt(e,0,Le.min(),Le.min(),Le.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,s){return new Kt(e,1,t,Le.min(),r,s,0)}static newNoDocument(e,t){return new Kt(e,2,t,Le.min(),Le.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Le.min(),Le.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.position=e,this.inclusive=t}}function sk(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=Ee.comparator(Ee.fromName(a.referenceValue),t.key):r=Ia(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ik(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t="asc"){this.field=e,this.dir=t}}function e9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TR=class{};class it extends TR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new t9(e,t,r):t==="array-contains"?new s9(e,r):t==="in"?new AR(e,r):t==="not-in"?new i9(e,r):t==="array-contains-any"?new o9(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new n9(e,r):new r9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends TR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return Xu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xu(n){return n.op==="and"}function X0(n){return n.op==="or"}function k_(n){return SR(n)&&Xu(n)}function SR(n){for(const e of n.filters)if(e instanceof Et)return!1;return!0}function Z0(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Qu(n.value);if(k_(n))return n.filters.map(e=>Z0(e)).join(",");{const e=n.filters.map(t=>Z0(t)).join(",");return`${n.op}(${e})`}}function IR(n,e){return n instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&Si(r.value,s.value)}(n,e):n instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&IR(a,s.filters[c]),!0):!1}(n,e):void Ce(19439)}function kR(n,e){const t=n.filters.concat(e);return Et.create(t,n.op)}function PR(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${Qu(t.value)}`}(n):n instanceof Et?function(t){return t.op.toString()+" {"+t.getFilters().map(PR).join(" ,")+"}"}(n):"Filter"}class t9 extends it{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class n9 extends it{constructor(e,t){super(e,"in",t),this.keys=CR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class r9 extends it{constructor(e,t){super(e,"not-in",t),this.keys=CR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class s9 extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vf(t)&&gf(t.arrayValue,this.value)}}class AR extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gf(this.value.arrayValue,t)}}class i9 extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gf(this.value.arrayValue,t)}}class o9 extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function ex(n,e=null,t=[],r=[],s=null,i=null,a=null){return new a9(n,e,t,r,s,i,a)}function Gl(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Z0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),hy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qu(r)).join(",")),e.Te=t}return e.Te}function Uf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!e9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ik(n.startAt,e.startAt)&&ik(n.endAt,e.endAt)}function vg(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function wg(n,e){return n.filters.filter(t=>t instanceof it&&t.field.isEqual(e))}function ok(n,e,t){let r=Bm,s=!0;for(const i of wg(n,e)){let a=Bm,c=!0;switch(i.op){case"<":case"<=":a=X8(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,c=!1;break;case"!=":case"not-in":a=Bm}nk({value:r,inclusive:s},{value:a,inclusive:c})<0&&(r=a,s=c)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const a=t.position[i];nk({value:r,inclusive:s},{value:a,inclusive:t.inclusive})<0&&(r=a,s=t.inclusive);break}}return{value:r,inclusive:s}}function ak(n,e,t){let r=fa,s=!0;for(const i of wg(n,e)){let a=fa,c=!0;switch(i.op){case">=":case">":a=Z8(i.value),c=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,c=!1;break;case"!=":case"not-in":a=fa}rk({value:r,inclusive:s},{value:a,inclusive:c})>0&&(r=a,s=c)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const a=t.position[i];rk({value:r,inclusive:s},{value:a,inclusive:t.inclusive})>0&&(r=a,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function l9(n,e,t,r,s,i,a,c){return new yd(n,e,t,r,s,i,a,c)}function $f(n){return new yd(n)}function lk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RR(n){return n.collectionGroup!==null}function Wh(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Tt($t.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new wf(i,r))}),t.has($t.keyField().canonicalString())||e.Ie.push(new wf($t.keyField(),r))}return e.Ie}function hs(n){const e=qe(n);return e.Ee||(e.Ee=c9(e,Wh(n))),e.Ee}function c9(n,e){if(n.limitType==="F")return ex(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wf(s.field,i)});const t=n.endAt?new Ju(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ju(n.startAt.position,n.startAt.inclusive):null;return ex(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tx(n,e){const t=n.filters.concat([e]);return new yd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xg(n,e,t){return new yd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vy(n,e){return Uf(hs(n),hs(e))&&n.limitType===e.limitType}function NR(n){return`${Gl(hs(n))}|lt:${n.limitType}`}function mu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>PR(s)).join(", ")}]`),hy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Qu(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Qu(s)).join(",")),`Target(${r})`}(hs(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Wh(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(a,c,d){const f=sk(a,c,d);return a.inclusive?f<=0:f<0}(r.startAt,Wh(r),s)||r.endAt&&!function(a,c,d){const f=sk(a,c,d);return a.inclusive?f>=0:f>0}(r.endAt,Wh(r),s))}(n,e)}function u9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jR(n){return(e,t)=>{let r=!1;for(const s of Wh(n)){const i=d9(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function d9(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(i,a,c){const d=a.data.field(i),f=c.data.field(i);return d!==null&&f!==null?Ia(d,f):Ce(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new Lt(Ee.comparator);function qr(){return h9}const OR=new Lt(Ee.comparator);function kh(...n){let e=OR;for(const t of n)e=e.insert(t.key,t);return e}function DR(n){let e=OR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gi(){return qh()}function MR(){return qh()}function qh(){return new go(n=>n.toString(),(n,e)=>n.isEqual(e))}const f9=new Lt(Ee.comparator),p9=new Tt(Ee.comparator);function tt(...n){let e=p9;for(const t of n)e=e.add(t);return e}const m9=new Tt(We);function g9(){return m9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:df(e)?"-0":e}}function LR(n){return{integerValue:""+n}}function y9(n,e){return E8(e)?LR(e):P_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this._=void 0}}function v9(n,e,t){return n instanceof Zu?function(s,i){const a={fields:{[yR]:{stringValue:gR},[wR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&T_(i)&&(i=gy(i)),i&&(a.fields[vR]=i),{mapValue:a}}(t,e):n instanceof ed?FR(n,e):n instanceof td?UR(n,e):function(s,i){const a=VR(s,i),c=ck(a)+ck(s.Ae);return J0(a)&&J0(s.Ae)?LR(c):P_(s.serializer,c)}(n,e)}function w9(n,e,t){return n instanceof ed?FR(n,e):n instanceof td?UR(n,e):t}function VR(n,e){return n instanceof xf?function(r){return J0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Zu extends wy{}class ed extends wy{constructor(e){super(),this.elements=e}}function FR(n,e){const t=$R(e);for(const r of n.elements)t.some(s=>Si(s,r))||t.push(r);return{arrayValue:{values:t}}}class td extends wy{constructor(e){super(),this.elements=e}}function UR(n,e){let t=$R(e);for(const r of n.elements)t=t.filter(s=>!Si(s,r));return{arrayValue:{values:t}}}class xf extends wy{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ck(n){return Dt(n.integerValue||n.doubleValue)}function $R(n){return vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.field=e,this.transform=t}}function x9(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof ed&&s instanceof ed||r instanceof td&&s instanceof td?Wu(r.elements,s.elements,Si):r instanceof xf&&s instanceof xf?Si(r.Ae,s.Ae):r instanceof Zu&&s instanceof Zu}(n.transform,e.transform)}class _9{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xy{}function zR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _y(n.key,er.none()):new vd(n.key,n.data,er.none());{const t=n.data,r=Zn.empty();let s=new Tt($t.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new yo(n.key,r,new Tr(s.toArray()),er.none())}}function b9(n,e,t){n instanceof vd?function(s,i,a){const c=s.value.clone(),d=dk(s.fieldTransforms,i,a.transformResults);c.setAll(d),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof yo?function(s,i,a){if(!qm(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=dk(s.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(WR(s)),d.setAll(c),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Hh(n,e,t,r){return n instanceof vd?function(i,a,c,d){if(!qm(i.precondition,a))return c;const f=i.value.clone(),p=hk(i.fieldTransforms,d,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof yo?function(i,a,c,d){if(!qm(i.precondition,a))return c;const f=hk(i.fieldTransforms,d,a),p=a.data;return p.setAll(WR(i)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(i,a,c){return qm(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function E9(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=VR(r.transform,s||null);i!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,i))}return t||null}function uk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wu(r,s,(i,a)=>x9(i,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vd extends xy{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yo extends xy{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dk(n,e,t){const r=new Map;Me(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,w9(a,c,t[s]))}return r}function hk(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,v9(i,a,e))}return r}class _y extends xy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qR extends xy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&b9(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MR();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const d=zR(a,c);d!==null&&r.set(s.key,d),a.isValidDocument()||a.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tt())}isEqual(e){return this.batchId===e.batchId&&Wu(this.mutations,e.mutations,(t,r)=>uk(t,r))&&Wu(this.baseMutations,e.baseMutations,(t,r)=>uk(t,r))}}class A_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return f9}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new A_(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,at;function S9(n){switch(n){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function HR(n){if(n===void 0)return ar("GRPC error has no .code"),se.UNKNOWN;switch(n){case on.OK:return se.OK;case on.CANCELLED:return se.CANCELLED;case on.UNKNOWN:return se.UNKNOWN;case on.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case on.INTERNAL:return se.INTERNAL;case on.UNAVAILABLE:return se.UNAVAILABLE;case on.UNAUTHENTICATED:return se.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case on.NOT_FOUND:return se.NOT_FOUND;case on.ALREADY_EXISTS:return se.ALREADY_EXISTS;case on.PERMISSION_DENIED:return se.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case on.ABORTED:return se.ABORTED;case on.OUT_OF_RANGE:return se.OUT_OF_RANGE;case on.UNIMPLEMENTED:return se.UNIMPLEMENTED;case on.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:n})}}(at=on||(on={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=new va([4294967295,4294967295],0);function fk(n){const e=I9().encode(n),t=new zA;return t.update(e),new Uint8Array(t.digest())}function pk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new va([t,r],0),new va([s,i],0)]}class N_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ph(`Invalid padding: ${t}`);if(r<0)throw new Ph(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ph(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ph(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=va.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(va.fromNumber(r)));return s.compare(k9)===1&&(s=new va([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fk(e),[r,s]=pk(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new N_(i,s,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const t=fk(e),[r,s]=pk(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ph extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new by(Le.min(),s,new Lt(We),qr(),tt())}}class zf{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zf(r,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class GR{constructor(e,t){this.targetId=e,this.Ce=t}}class KR{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class mk{constructor(){this.ve=0,this.Fe=gk(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),r=tt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:i})}}),new zf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=gk()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P9{constructor(e){this.Ge=e,this.ze=new Map,this.je=qr(),this.Je=mm(),this.He=mm(),this.Ye=new Lt(We)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(vg(i))if(r===0){const a=new Ee(i.path);this.et(t,a,Kt.newNoDocument(a,Le.min()))}else Me(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),d=c?this.ct(c,e,a):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=fo(r).toUint8Array()}catch(d){if(d instanceof mR)return ql("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new N_(a,s,i)}catch(d){return ql(d instanceof Ph?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&vg(c.target)){const d=new Ee(c.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Kt.newNoDocument(d,e))}i.Be&&(t.set(a,i.ke()),i.qe())}});let r=tt();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new by(e,t,this.Ye,this.je,r);return this.je=qr(),this.Je=mm(),this.He=mm(),this.Ye=new Lt(We),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mk,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(We),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(We),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mk),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mm(){return new Lt(Ee.comparator)}function gk(){return new Lt(Ee.comparator)}const C9={asc:"ASCENDING",desc:"DESCENDING"},A9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},R9={and:"AND",or:"OR"};class N9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nx(n,e){return n.useProto3Json||hy(e)?e:{value:e}}function nd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j9(n,e){return nd(n,e.toTimestamp())}function ur(n){return Me(!!n,49232),Le.fromTimestamp(function(t){const r=ho(t);return new wt(r.seconds,r.nanos)}(n))}function j_(n,e){return rx(n,e).canonicalString()}function rx(n,e){const t=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QR(n){const e=vt.fromString(n);return Me(iN(e),10190,{key:e.toString()}),e}function _g(n,e){return j_(n.databaseId,e.path)}function Dl(n,e){const t=QR(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(ZR(t))}function JR(n,e){return j_(n.databaseId,e)}function XR(n){const e=QR(n);return e.length===4?vt.emptyPath():ZR(e)}function sx(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZR(n){return Me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yk(n,e,t){return{name:_g(n,e),fields:t.value.mapValue.fields}}function O9(n,e,t){const r=Dl(n,e.name),s=ur(e.updateTime),i=e.createTime?ur(e.createTime):Le.min(),a=new Zn({mapValue:{fields:e.fields}}),c=Kt.newFoundDocument(r,s,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function D9(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ce(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(f,p){return f.useProto3Json?(Me(p===void 0||typeof p=="string",58123),dn.fromBase64String(p||"")):(Me(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),dn.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){const p=f.code===void 0?se.UNKNOWN:HR(f.code);return new ye(p,f.message||"")}(a);t=new KR(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Dl(n,r.document.name),i=ur(r.document.updateTime),a=r.document.createTime?ur(r.document.createTime):Le.min(),c=new Zn({mapValue:{fields:r.document.fields}}),d=Kt.newFoundDocument(s,i,a,c),f=r.targetIds||[],p=r.removedTargetIds||[];t=new Hm(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Dl(n,r.document),i=r.readTime?ur(r.readTime):Le.min(),a=Kt.newNoDocument(s,i),c=r.removedTargetIds||[];t=new Hm([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Dl(n,r.document),i=r.removedTargetIds||[];t=new Hm([],i,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new T9(s,i),c=r.targetId;t=new GR(c,a)}}return t}function bg(n,e){let t;if(e instanceof vd)t={update:yk(n,e.key,e.value)};else if(e instanceof _y)t={delete:_g(n,e.key)};else if(e instanceof yo)t={update:yk(n,e.key,e.data),updateMask:$9(e.fieldMask)};else{if(!(e instanceof qR))return Ce(16599,{Vt:e.type});t={verify:_g(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Zu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ed)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof td)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xf)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Ce(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:j9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ce(27497)}(n,e.precondition)),t}function ix(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?er.updateTime(ur(i.updateTime)):i.exists!==void 0?er.exists(i.exists):er.none()}(e.currentDocument):er.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(a,c){let d=null;if("setToServerValue"in c)Me(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),d=new Zu;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new ed(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new td(p)}else"increment"in c?d=new xf(a,c.increment):Ce(16584,{proto:c});const f=$t.fromServerFormat(c.fieldPath);return new BR(f,d)}(n,s)):[];if(e.update){e.update.name;const s=Dl(n,e.update.name),i=new Zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(d){const f=d.fieldPaths||[];return new Tr(f.map(p=>$t.fromServerFormat(p)))}(e.updateMask);return new yo(s,i,a,t,r)}return new vd(s,i,t,r)}if(e.delete){const s=Dl(n,e.delete);return new _y(s,t)}if(e.verify){const s=Dl(n,e.verify);return new qR(s,t)}return Ce(1463,{proto:e})}function M9(n,e){return n&&n.length>0?(Me(e!==void 0,14353),n.map(t=>function(s,i){let a=s.updateTime?ur(s.updateTime):ur(i);return a.isEqual(Le.min())&&(a=ur(i)),new _9(a,s.transformResults||[])}(t,e))):[]}function eN(n,e){return{documents:[JR(n,e.path)]}}function tN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JR(n,s);const i=function(f){if(f.length!==0)return sN(Et.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:gu(v.field),direction:V9(v.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=nx(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:t,parent:s}}function nN(n){let e=XR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Me(r===1,65062);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];t.where&&(i=function(g){const v=rN(g);return v instanceof Et&&k_(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(v=>function(I){return new wf(yu(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(g){let v;return v=typeof g=="object"?g.value:g,hy(v)?null:v}(t.limit));let d=null;t.startAt&&(d=function(g){const v=!!g.before,w=g.values||[];return new Ju(w,v)}(t.startAt));let f=null;return t.endAt&&(f=function(g){const v=!g.before,w=g.values||[];return new Ju(w,v)}(t.endAt)),l9(e,s,a,i,c,"F",d,f)}function L9(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yu(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yu(t.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yu(t.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=yu(t.unaryFilter.field);return it.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(n):n.fieldFilter!==void 0?function(t){return it.create(yu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Et.create(t.compositeFilter.filters.map(r=>rN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(n):Ce(30097,{filter:n})}function V9(n){return C9[n]}function F9(n){return A9[n]}function U9(n){return R9[n]}function gu(n){return{fieldPath:n.canonicalString()}}function yu(n){return $t.fromServerFormat(n.fieldPath)}function sN(n){return n instanceof it?function(t){if(t.op==="=="){if(tk(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NAN"}};if(ek(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tk(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NOT_NAN"}};if(ek(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gu(t.field),op:F9(t.op),value:t.value}}}(n):n instanceof Et?function(t){const r=t.getFilters().map(s=>sN(s));return r.length===1?r[0]:{compositeFilter:{op:U9(t.op),filters:r}}}(n):Ce(54877,{filter:n})}function $9(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r,s,i=Le.min(),a=Le.min(),c=dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.yt=e}}function B9(n,e){let t;if(e.document)t=O9(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),s=Yl(e.noDocument.readTime);t=Kt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce(56709);{const r=Ee.fromSegments(e.unknownDocument.path),s=Yl(e.unknownDocument.version);t=Kt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const i=new wt(s[0],s[1]);return Le.fromTimestamp(i)}(e.readTime)),t}function vk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,a){return{name:_g(i,a.key),fields:a.data.value.mapValue.fields,updateTime:nd(i,a.version.toTimestamp()),createTime:nd(i,a.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kl(e.version)};else{if(!e.isUnknownDocument())return Ce(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Kl(e.version)}}return r}function Eg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yl(n){const e=new wt(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function El(n,e){const t=(e.baseMutations||[]).map(i=>ix(n.yt,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>ix(n.yt,i)),s=wt.fromMillis(e.localWriteTimeMs);return new C_(e.batchId,s,t,r)}function Ch(n){const e=Yl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yl(n.lastLimboFreeSnapshotVersion):Le.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const a=i.documents.length;return Me(a===1,1966,{count:a}),hs($f(XR(i.documents[0])))}(n.query):function(i){return hs(nN(i))}(n.query),new no(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,dn.fromBase64String(n.resumeToken))}function aN(n,e){const t=Kl(e.snapshotVersion),r=Kl(e.lastLimboFreeSnapshotVersion);let s;s=vg(e.target)?eN(n.yt,e.target):tN(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gl(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function lN(n){const e=nN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xg(e,e.limit,"L"):e}function Jw(n,e){return new R_(e.largestBatchId,ix(n.yt,e.overlayMutation))}function wk(n,e){const t=e.path.lastSegment();return[n,tr(e.path.popLast()),t]}function xk(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Kl(r.readTime),documentKey:tr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{getBundleMetadata(e,t){return _k(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Yl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return _k(e).put(function(s){return{bundleId:s.id,createTime:Kl(ur(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return bk(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:lN(i.bundledQuery),readTime:Yl(i.readTime)}}(r)})}saveNamedQuery(e,t){return bk(e).put(function(s){return{name:s.name,readTime:Kl(ur(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function _k(n){return _n(n,fy)}function bk(n){return _n(n,py)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Ey(e,r)}getOverlay(e,t){return gh(e).get(wk(this.userId,t)).next(r=>r?Jw(this.serializer,r):null)}getOverlays(e,t){const r=gi();return Y.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((i,a)=>{const c=new R_(t,a);s.push(this.St(e,c))}),Y.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(a=>s.add(tr(a.getCollectionPath())));const i=[];return s.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(gh(e).Z(K0,c))}),Y.waitFor(i)}getOverlaysForCollection(e,t,r){const s=gi(),i=tr(t),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return gh(e).J(K0,a).next(c=>{for(const d of c){const f=Jw(this.serializer,d);s.set(f.getKey(),f)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const i=gi();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gh(e).ee({index:cR,range:c},(d,f,p)=>{const g=Jw(this.serializer,f);i.size()<s||g.largestBatchId===a?(i.set(g.getKey(),g),a=g.largestBatchId):p.done()}).next(()=>i)}St(e,t){return gh(e).put(function(s,i,a){const[c,d,f]=wk(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:bg(s.yt,a.mutation)}}(this.serializer,this.userId,t))}}function gh(n){return _n(n,my)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{bt(e){return _n(e,b_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?dn.fromUint8Array(r):dn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Dt(e.integerValue));else if("doubleValue"in e){const r=Dt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),df(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ho(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(fo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?_R(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):yy(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ce(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){var a,c;const r=e.fields||{};this.Ft(t,53);const s=Yu,i=((c=(a=r[s].arrayValue)==null?void 0:a.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Dt(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Tl.Kt=new Tl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=255;function q9(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Ek(n){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const a=q9(255&r[i]);if(s+=a,a!==8)break}return s}(n);return Math.ceil(e/8)}class H9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=Ek(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=Ek(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Jc),this.sn(255)}_n(){this.an(Jc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Jc?(this.sn(Jc),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Jc?(this.an(Jc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class G9{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class K9{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yh{constructor(){this.cn=new H9,this.ln=new G9(this.cn),this.hn=new K9(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Sl(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Gm(this.En),directionalValue:Gm(this.dn),orderedDocumentKey:Gm(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Go(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Tk(n.En,e.En),t!==0?t:(t=Tk(n.dn,e.dn),t!==0?t:Ee.comparator(n.In,e.In)))}function Tk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Gm(n){return HC()?function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r}(n):n}function Sk(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(n)}class Ik{constructor(e){this.mn=new Tt((t,r)=>$t.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=q0(e);if(t!==void 0&&!this.wn(t))return!1;const r=wl(e);let s=new Set,i=0,a=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const d=r[i];if(!this.Sn(c,d)||!this.bn(this.fn[a++],d))return!1}++i}for(;i<r.length;++i){const c=r[i];if(a>=this.fn.length||!this.bn(this.fn[a++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt($t.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Fm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Fm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Fm(r.field,r.dir==="asc"?0:1)));return new fg(fg.UNKNOWN_ID,this.collectionId,t,uf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){var t,r;if(Me(n instanceof it||n instanceof Et,20012),n instanceof it){if(n instanceof AR){const s=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(i=>it.create(n.field,"==",i)))||[];return Et.create(s,"or")}return n}const e=n.filters.map(s=>cN(s));return Et.create(e,n.op)}function Y9(n){if(n.getFilters().length===0)return[];const e=lx(cN(n));return Me(uN(e),7391),ox(e)||ax(e)?[e]:e.getFilters()}function ox(n){return n instanceof it}function ax(n){return n instanceof Et&&k_(n)}function uN(n){return ox(n)||ax(n)||function(t){if(t instanceof Et&&X0(t)){for(const r of t.getFilters())if(!ox(r)&&!ax(r))return!1;return!0}return!1}(n)}function lx(n){if(Me(n instanceof it||n instanceof Et,34018),n instanceof it)return n;if(n.filters.length===1)return lx(n.filters[0]);const e=n.filters.map(r=>lx(r));let t=Et.create(e,n.op);return t=Tg(t),uN(t)?t:(Me(t instanceof Et,64498),Me(Xu(t),40251),Me(t.filters.length>1,57927),t.filters.reduce((r,s)=>O_(r,s)))}function O_(n,e){let t;return Me(n instanceof it||n instanceof Et,38388),Me(e instanceof it||e instanceof Et,25473),t=n instanceof it?e instanceof it?function(s,i){return Et.create([s,i],"and")}(n,e):kk(n,e):e instanceof it?kk(e,n):function(s,i){if(Me(s.filters.length>0&&i.filters.length>0,48005),Xu(s)&&Xu(i))return kR(s,i.getFilters());const a=X0(s)?s:i,c=X0(s)?i:s,d=a.filters.map(f=>O_(f,c));return Et.create(d,"or")}(n,e),Tg(t)}function kk(n,e){if(Xu(e))return kR(e,n.getFilters());{const t=e.filters.map(r=>O_(n,r));return Et.create(t,"or")}}function Tg(n){if(Me(n instanceof it||n instanceof Et,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return Tg(e[0]);if(SR(n))return n;const t=e.map(s=>Tg(s)),r=[];return t.forEach(s=>{s instanceof it?r.push(s):s instanceof Et&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(){this.Cn=new D_}addToCollectionParentIndex(e,t){return this.Cn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Kr.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class D_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Tt(vt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Tt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="IndexedDbIndexManager",gm=new Uint8Array(0);class J9{constructor(e,t){this.databaseId=t,this.vn=new D_,this.Fn=new go(r=>Gl(r),(r,s)=>Uf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:r,parent:tr(s)};return Ck(e).put(i)}return Y.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[JA(t),""],!1,!0);return Ck(e).J(s).next(i=>{for(const a of i){if(a.collectionId!==t)break;r.push(mi(a.parent))}return r})}addFieldIndex(e,t){const r=vh(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const i=r.add(s);if(t.indexState){const a=Zc(e);return i.next(c=>{a.put(xk(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=vh(e),s=Zc(e),i=Xc(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=vh(e),r=Xc(e),s=Zc(e);return t.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,t){return Y.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Ik(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const r=Xc(e);let s=!0;const i=new Map;return Y.forEach(this.Mn(t),a=>this.xn(e,a).next(c=>{s&&(s=!!c),i.set(a,c)})).next(()=>{if(s){let a=tt();const c=[];return Y.forEach(i,(d,f)=>{he(Pk,`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(d)} to execute ${Gl(t)}`);const p=function(j,D){const U=q0(D);if(U===void 0)return null;for(const z of wg(j,U.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(f,d),g=function(j,D){const U=new Map;for(const z of wl(D))for(const P of wg(j,z.fieldPath))switch(P.op){case"==":case"in":U.set(z.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return U.set(z.fieldPath.canonicalString(),P.value),Array.from(U.values())}return null}(f,d),v=function(j,D){const U=[];let z=!0;for(const P of wl(D)){const A=P.kind===0?ok(j,P.fieldPath,j.startAt):ak(j,P.fieldPath,j.startAt);U.push(A.value),z&&(z=A.inclusive)}return new Ju(U,z)}(f,d),w=function(j,D){const U=[];let z=!0;for(const P of wl(D)){const A=P.kind===0?ak(j,P.fieldPath,j.endAt):ok(j,P.fieldPath,j.endAt);U.push(A.value),z&&(z=A.inclusive)}return new Ju(U,z)}(f,d),I=this.On(d,f,v),_=this.On(d,f,w),S=this.Nn(d,f,g),C=this.Bn(d.indexId,p,I,v.inclusive,_,w.inclusive,S);return Y.forEach(C,R=>r.Y(R,t.limit).next(j=>{j.forEach(D=>{const U=Ee.fromSegments(D.documentKey);a.has(U)||(a=a.add(U),c.push(U))})}))}).next(()=>c)}return Y.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Y9(Et.create(e.filters,"and")).map(r=>ex(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,a,c){const d=(t!=null?t.length:1)*Math.max(r.length,i.length),f=d/(t!=null?t.length:1),p=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/f]):gm,w=this.kn(e,v,r[g%f],s),I=this.qn(e,v,i[g%f],a),_=c.map(S=>this.kn(e,v,S,!0));p.push(...this.createRange(w,I,_))}return p}kn(e,t,r,s){const i=new Sl(e,Ee.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new Sl(e,Ee.empty(),t,r);return s?i.An():i}xn(e,t){const r=new Ik(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const c of i)r.yn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const s=this.Mn(t);return Y.forEach(s,i=>this.xn(e,i).next(a=>{a?r!==0&&a.fields.length<function(d){let f=new Tt($t.comparator),p=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:f=f.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&s.length>1&&r===2?1:r)}Qn(e,t){const r=new yh;for(const s of wl(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const a=r.Pn(s.kind);Tl.Kt.Dt(i,a)}return r.un()}Ln(e){const t=new yh;return Tl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new yh;return Tl.Kt.Dt(yf(this.databaseId,t),r.Pn(function(i){const a=wl(i);return a.length===0?0:a[a.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new yh);let i=0;for(const a of wl(e)){const c=r[i++];for(const d of s)if(this.Un(t,a.fieldPath)&&vf(c))s=this.Kn(s,a,c);else{const f=d.Pn(a.kind);Tl.Kt.Dt(c,f)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const a of r.arrayValue.values||[])for(const c of s){const d=new yh;d.seed(c.un()),Tl.Kt.Dt(a,d.Pn(t.kind)),i.push(d)}return i}Un(e,t){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=vh(e),s=Zc(e);return(t?r.J(G0,IDBKeyRange.bound(t,t)):r.J()).next(i=>{const a=[];return Y.forEach(i,c=>s.get([c.indexId,this.uid]).next(d=>{a.push(function(p,g){const v=g?new uf(g.sequenceNumber,new Kr(Yl(g.readTime),new Ee(mi(g.documentKey)),g.largestBatchId)):uf.empty(),w=p.fields.map(([I,_])=>new Fm($t.fromServerFormat(I),_));return new fg(p.indexId,p.collectionGroup,w,v)}(c,d))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:We(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=vh(e),i=Zc(e);return this.Gn(e).next(a=>s.J(G0,IDBKeyRange.bound(t,t)).next(c=>Y.forEach(c,d=>i.put(xk(d.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(s,i)=>{const a=r.get(s.collectionGroup);return(a?Y.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(c=>(r.set(s.collectionGroup,c),Y.forEach(c,d=>this.zn(e,s,d).next(f=>{const p=this.jn(i,d);return f.isEqual(p)?Y.resolve():this.Jn(e,i,d,f,p)}))))})}Hn(e,t,r,s){return Xc(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return Xc(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=Xc(e);let i=new Tt(Go);return s.ee({index:lR,range:IDBKeyRange.only([r.indexId,this.uid,Gm(this.$n(r,t))])},(a,c)=>{i=i.add(new Sl(r.indexId,t,Sk(c.arrayValue),Sk(c.directionalValue)))}).next(()=>i)}jn(e,t){let r=new Tt(Go);const s=this.Qn(t,e);if(s==null)return r;const i=q0(t);if(i!=null){const a=e.data.field(i.fieldPath);if(vf(a))for(const c of a.arrayValue.values||[])r=r.add(new Sl(t.indexId,e.key,this.Ln(c),s))}else r=r.add(new Sl(t.indexId,e.key,gm,s));return r}Jn(e,t,r,s,i){he(Pk,"Updating index entries for document '%s'",t.key);const a=[];return function(d,f,p,g,v){const w=d.getIterator(),I=f.getIterator();let _=Qc(w),S=Qc(I);for(;_||S;){let C=!1,R=!1;if(_&&S){const j=p(_,S);j<0?R=!0:j>0&&(C=!0)}else _!=null?R=!0:C=!0;C?(g(S),S=Qc(I)):R?(v(_),_=Qc(w)):(_=Qc(w),S=Qc(I))}}(s,i,Go,c=>{a.push(this.Hn(e,t,r,c))},c=>{a.push(this.Yn(e,t,r,c))}),Y.waitFor(a)}Gn(e){let t=1;return Zc(e).ee({index:aR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>Go(a,c)).filter((a,c,d)=>!c||Go(a,d[c-1])!==0);const s=[];s.push(e);for(const a of r){const c=Go(a,e),d=Go(a,t);if(c===0)s[0]=e.An();else if(c>0&&d<0)s.push(a),s.push(a.An());else if(d>0)break}s.push(t);const i=[];for(let a=0;a<s.length;a+=2){if(this.Zn(s[a],s[a+1]))return[];const c=s[a].Vn(this.uid,gm,Ee.empty()),d=s[a+1].Vn(this.uid,gm,Ee.empty());i.push(IDBKeyRange.bound(c,d))}return i}Zn(e,t){return Go(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ak)}getMinOffset(e,t){return Y.mapArray(this.Mn(t),r=>this.xn(e,r).next(s=>s||Ce(44426))).next(Ak)}}function Ck(n){return _n(n,pf)}function Xc(n){return _n(n,Bh)}function vh(n){return _n(n,__)}function Zc(n){return _n(n,$h)}function Ak(n){Me(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;v_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Kr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dN=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n,e,t){const r=n.store(js),s=n.store(qu),i=[],a=IDBKeyRange.only(t.batchId);let c=0;const d=r.ee({range:a},(p,g,v)=>(c++,v.delete()));i.push(d.next(()=>{Me(c===1,47070,{batchId:t.batchId})}));const f=[];for(const p of t.mutations){const g=sR(e,p.key.path,t.batchId);i.push(s.delete(g)),f.push(p.key)}return Y.waitFor(i).next(()=>f)}function Sg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ce(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(dN,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);class Ty{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){Me(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Ty(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).ee({index:kl,range:r},(s,i,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const i=vu(e),a=Ko(e);return a.add({}).next(c=>{Me(typeof c=="number",49019);const d=new C_(c,t,r,s),f=function(w,I,_){const S=_.baseMutations.map(R=>bg(w.yt,R)),C=_.mutations.map(R=>bg(w.yt,R));return{userId:I,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:S,mutations:C}}(this.serializer,this.userId,d),p=[];let g=new Tt((v,w)=>We(v.canonicalString(),w.canonicalString()));for(const v of s){const w=sR(this.userId,v.key.path,c);g=g.add(v.key.path.popLast()),p.push(a.put(f)),p.push(i.put(w,I8))}return g.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Xn[c]=d.keys()}),Y.waitFor(p).next(()=>d)})}lookupMutationBatch(e,t){return Ko(e).get(t).next(r=>r?(Me(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),El(this.serializer,r)):null)}er(e,t){return this.Xn[t]?Y.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ko(e).ee({index:kl,range:s},(a,c,d)=>{c.userId===this.userId&&(Me(c.batchId>=r,47524,{tr:r}),i=El(this.serializer,c)),d.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=jl;return Ko(e).ee({index:kl,range:t,reverse:!0},(s,i,a)=>{r=i.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,jl],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).J(kl,t).next(r=>r.map(s=>El(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Um(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return vu(e).ee({range:s},(a,c,d)=>{const[f,p,g]=a,v=mi(p);if(f===this.userId&&t.path.isEqual(v))return Ko(e).get(g).next(w=>{if(!w)throw Ce(61480,{nr:a,batchId:g});Me(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:g}),i.push(El(this.serializer,w))});d.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(We);const s=[];return t.forEach(i=>{const a=Um(this.userId,i.path),c=IDBKeyRange.lowerBound(a),d=vu(e).ee({range:c},(f,p,g)=>{const[v,w,I]=f,_=mi(w);v===this.userId&&i.path.isEqual(_)?r=r.add(I):g.done()});s.push(d)}),Y.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Um(this.userId,r),a=IDBKeyRange.lowerBound(i);let c=new Tt(We);return vu(e).ee({range:a},(d,f,p)=>{const[g,v,w]=d,I=mi(v);g===this.userId&&r.isPrefixOf(I)?I.length===s&&(c=c.add(w)):p.done()}).next(()=>this.rr(e,c))}rr(e,t){const r=[],s=[];return t.forEach(i=>{s.push(Ko(e).get(i).next(a=>{if(a===null)throw Ce(35274,{batchId:i});Me(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),r.push(El(this.serializer,a))}))}),Y.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return hN(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),Y.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return vu(e).ee({range:r},(i,a,c)=>{if(i[0]===this.userId){const d=mi(i[1]);s.push(d)}else c.done()}).next(()=>{Me(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return fN(e,this.userId,t)}_r(e){return pN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:jl,lastStreamToken:""})}}function fN(n,e,t){const r=Um(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return vu(n).ee({range:i,X:!0},(c,d,f)=>{const[p,g,v]=c;p===e&&g===s&&(a=!0),f.done()}).next(()=>a)}function Ko(n){return _n(n,js)}function vu(n){return _n(n,qu)}function pN(n){return _n(n,hf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Ql(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>Le.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>eu(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(Me(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let s=0;const i=[];return eu(e).ee((a,c)=>{const d=Ch(c);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,i.push(this.removeTargetData(e,d)))}).next(()=>Y.waitFor(i)).next(()=>s)}forEachTarget(e,t){return eu(e).ee((r,s)=>{const i=Ch(s);t(i)})}lr(e){return Nk(e).get(gg).next(t=>(Me(t!==null,2888),t))}hr(e,t){return Nk(e).put(gg,t)}Pr(e,t){return eu(e).put(aN(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gl(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return eu(e).ee({range:s,index:oR},(a,c,d)=>{const f=Ch(c);Uf(t,f.target)&&(i=f,d.done())}).next(()=>i)}addMatchingKeys(e,t,r){const s=[],i=ra(e);return t.forEach(a=>{const c=tr(a.path);s.push(i.put({targetId:r,path:c})),s.push(this.referenceDelegate.addReference(e,r,a))}),Y.waitFor(s)}removeMatchingKeys(e,t,r){const s=ra(e);return Y.forEach(t,i=>{const a=tr(i.path);return Y.waitFor([s.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=ra(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ra(e);let i=tt();return s.ee({range:r,X:!0},(a,c,d)=>{const f=mi(a[1]),p=new Ee(f);i=i.add(p)}).next(()=>i)}containsKey(e,t){const r=tr(t.path),s=IDBKeyRange.bound([r],[JA(r)],!1,!0);let i=0;return ra(e).ee({index:x_,X:!0,range:s},([a,c],d,f)=>{a!==0&&(i++,f.done())}).next(()=>i>0)}At(e,t){return eu(e).get(t).next(r=>r?Ch(r):null)}}function eu(n){return _n(n,Hu)}function Nk(n){return _n(n,Ol)}function ra(n){return _n(n,Gu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="LruGarbageCollector",Z9=1048576;function Ok([n,e],[t,r]){const s=We(n,t);return s===0?We(e,r):s}class ez{constructor(e){this.Ir=e,this.buffer=new Tt(Ok),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ok(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(jk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?he(jk,"Ignoring IndexedDB error during garbage collection: ",t):await oc(t)}await this.Vr(3e5)})}}class tz{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(ds.ce);const r=new ez(t);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Rk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rk):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,a,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(f=Date.now(),pu()<=st.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${g} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g})))}}function gN(n,e){return new tz(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,t){this.db=e,this.garbageCollector=gN(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,s)=>t(s))}addReference(e,t,r){return ym(e,r)}removeReference(e,t,r){return ym(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ym(e,t)}br(e,t){return function(s,i){let a=!1;return pN(s).te(c=>fN(s,c,i).next(d=>(d&&(a=!0),Y.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(a,c)=>{if(c<=t){const d=this.br(e,a).next(f=>{if(!f)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Le.min()),ra(e).delete(function(g){return[0,tr(g.path)]}(a))))});s.push(d)}}).next(()=>Y.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ym(e,t)}Sr(e,t){const r=ra(e);let s,i=ds.ce;return r.ee({index:x_},([a,c],{path:d,sequenceNumber:f})=>{a===0?(i!==ds.ce&&t(new Ee(mi(s)),i),i=f,s=d):i=ds.ce}).next(()=>{i!==ds.ce&&t(new Ee(mi(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ym(n,e){return ra(n).put(function(r,s){return{targetId:0,path:tr(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.changes=new go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ml(e).put(r)}removeEntry(e,t,r){return ml(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Eg(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=Kt.newInvalidDocument(t);return ml(e).ee({index:$m,range:IDBKeyRange.only(wh(t))},(s,i)=>{r=this.Cr(t,i)}).next(()=>r)}vr(e,t){let r={size:0,document:Kt.newInvalidDocument(t)};return ml(e).ee({index:$m,range:IDBKeyRange.only(wh(t))},(s,i)=>{r={document:this.Cr(t,i),size:Sg(i)}}).next(()=>r)}getEntries(e,t){let r=qr();return this.Fr(e,t,(s,i)=>{const a=this.Cr(s,i);r=r.insert(s,a)}).next(()=>r)}Mr(e,t){let r=qr(),s=new Lt(Ee.comparator);return this.Fr(e,t,(i,a)=>{const c=this.Cr(i,a);r=r.insert(i,c),s=s.insert(i,Sg(a))}).next(()=>({documents:r,Or:s}))}Fr(e,t,r){if(t.isEmpty())return Y.resolve();let s=new Tt(Lk);t.forEach(d=>s=s.add(d));const i=IDBKeyRange.bound(wh(s.first()),wh(s.last())),a=s.getIterator();let c=a.getNext();return ml(e).ee({index:$m,range:i},(d,f,p)=>{const g=Ee.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&Lk(c,g)<0;)r(c,null),c=a.getNext();c&&c.isEqual(g)&&(r(c,f),c=a.hasNext()?a.getNext():null),c?p.j(wh(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Eg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ml(e).J(IDBKeyRange.bound(c,d,!0)).next(f=>{i==null||i.incrementDocumentReadCount(f.length);let p=qr();for(const g of f){const v=this.Cr(Ee.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Bf(t,v)||s.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,r,s){let i=qr();const a=Mk(t,r),c=Mk(t,Kr.max());return ml(e).ee({index:iR,range:IDBKeyRange.bound(a,c,!0)},(d,f,p)=>{const g=this.Cr(Ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);i=i.insert(g.key,g),i.size===s&&p.done()}).next(()=>i)}newChangeBuffer(e){return new sz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Dk(e).get(H0).next(t=>(Me(!!t,20021),t))}Dr(e,t){return Dk(e).put(H0,t)}Cr(e,t){if(t){const r=B9(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return Kt.newInvalidDocument(e)}}function vN(n){return new rz(n)}class sz extends yN{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new go(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Tt((i,a)=>We(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const c=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,c.readTime)),a.isValidDocument()){const d=vk(this.Nr.serializer,a);s=s.add(i.path.popLast());const f=Sg(d);r+=f-c.size,t.push(this.Nr.addEntry(e,i,d))}else if(r-=c.size,this.trackRemovals){const d=vk(this.Nr.serializer,a.convertToNoDocument(Le.min()));t.push(this.Nr.addEntry(e,i,d))}}),s.forEach(i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Nr.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:s})=>(s.forEach((i,a)=>{this.Br.set(i,{size:a,readTime:r.get(i).readTime})}),r))}}function Dk(n){return _n(n,ff)}function ml(n){return _n(n,mg)}function wh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mk(n,e){const t=e.documentKey.path.toArray();return[n,Eg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lk(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=We(t[i],r[i]),s)return s;return s=We(t.length,r.length),s||(s=We(t[t.length-2],r[r.length-2]),s||We(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Hh(r.mutation,s,Tr.empty(),wt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tt()){const s=gi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let a=kh();return i.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=gi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tt()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,s){let i=qr();const a=qh(),c=function(){return qh()}();return t.forEach((d,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof yo)?i=i.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),Hh(p.mutation,f,p.mutation.getFieldMask(),wt.now())):a.set(f.key,Tr.empty())}),this.recalculateAndSaveOverlays(e,i).next(d=>(d.forEach((f,p)=>a.set(f,p)),t.forEach((f,p)=>c.set(f,new iz(p,a.get(f)??null))),c))}recalculateAndSaveOverlays(e,t){const r=qh();let s=new Lt((a,c)=>a-c),i=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let p=r.get(d)||Tr.empty();p=c.applyToLocalView(f,p),r.set(d,p);const g=(s.get(c.batchId)||tt()).add(d);s=s.insert(c.batchId,g)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,g=MR();p.forEach(v=>{if(!i.has(v)){const w=zR(t.get(v),r.get(v));w!==null&&g.set(v,w),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Y.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(a){return Ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):Y.resolve(gi());let c=cf,d=i;return a.next(f=>Y.forEach(f,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{d=d.insert(p,v)}))).next(()=>this.populateOverlays(e,f,i)).next(()=>this.computeViews(e,d,f,tt())).next(p=>({batchId:c,changes:DR(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let s=kh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=kh();return this.indexManager.getCollectionParents(e,i).next(c=>Y.forEach(c,d=>{const f=function(g,v){return new yd(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(a=>{i.forEach((d,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,Kt.newInvalidDocument(p)))});let c=kh();return a.forEach((d,f)=>{const p=i.get(d);p!==void 0&&Hh(p.mutation,f,Tr.empty(),wt.now()),Bf(t,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(s){return{name:s.name,query:lN(s.bundledQuery),readTime:ur(s.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.overlays=new Lt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gi();return Y.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const s=gi(),i=t.length+1,a=new Ee(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===i&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Lt((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=i.get(f.largestBatchId);p===null&&(p=gi(),i=i.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=gi(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=s)););return Y.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new R_(t,r));let i=this.qr.get(t);i===void 0&&(i=tt(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.Qr=new Tt(Pn.$r),this.Ur=new Tt(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ee(new vt([])),r=new Pn(t,e),s=new Pn(t,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new vt([])),r=new Pn(t,e),s=new Pn(t,e+1);let i=tt();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new Pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||We(e.Yr,t.Yr)}static Kr(e,t){return We(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Pn.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new C_(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Pn(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,t){return Y.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?jl:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),s=new Pn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(We);return t.forEach(s=>{const i=new Pn(s,0),a=new Pn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{r=r.add(c.Yr)})}),Y.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Ee.isDocumentKey(i)||(i=i.child(""));const a=new Pn(new Ee(i),0);let c=new Tt(We);return this.Zr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Yr)),!0)},a),Y.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Y.forEach(t.mutations,s=>{const i=new Pn(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Pn(t,0),s=this.Zr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.ri=e,this.docs=function(){return new Lt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let r=qr();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Kt.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=qr();const a=t.path,c=new Ee(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||v_(eR(p),r)<=0||(s.has(p.key)||Bf(t,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,t,r,s){Ce(9500)}ii(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dz(this)}getSize(e){return Y.resolve(this.size)}}class dz extends yN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e){this.persistence=e,this.si=new go(t=>Gl(t),Uf),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new M_,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,t){return this.si.forEach((r,s)=>t(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Y.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Pr(t),Y.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),Y.waitFor(i).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t){this.ui={},this.overlays={},this.ci=new ds(0),this.li=!1,this.li=!0,this.hi=new lz,this.referenceDelegate=e(this),this.Pi=new hz(this),this.indexManager=new Q9,this.remoteDocumentCache=function(s){return new uz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new oN(t),this.Ii=new oz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new az,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new cz(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new fz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,t){return Y.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class fz extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class Sy{constructor(e){this.persistence=e,this.Ri=new M_,this.Vi=null}static mi(e){return new Sy(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,r=>{const s=Ee.fromPath(r);return this.gi(e,s).next(i=>{i||t.removeEntry(s,Le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ig{constructor(e,t){this.persistence=e,this.pi=new go(r=>tr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gN(this,t)}static mi(e,t){return new Ig(e,t)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return Y.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?Y.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,t).next(c=>{c||(r++,i.removeEntry(a,Le.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zm(e.data.value)),t}br(e,t,r){return Y.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return Y.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.serializer=e}k(e,t,r,s){const i=new dy("createOrUpgrade",t);r<1&&s>=1&&(function(d){d.createObjectStore(Ff)}(e),function(d){d.createObjectStore(hf,{keyPath:S8}),d.createObjectStore(js,{keyPath:KI,autoIncrement:!0}).createIndex(kl,YI,{unique:!0}),d.createObjectStore(qu)}(e),Vk(e),function(d){d.createObjectStore(xl)}(e));let a=Y.resolve();return r<3&&s>=3&&(r!==0&&(function(d){d.deleteObjectStore(Gu),d.deleteObjectStore(Hu),d.deleteObjectStore(Ol)}(e),Vk(e)),a=a.next(()=>function(d){const f=d.store(Ol),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return f.put(gg,p)}(i))),r<4&&s>=4&&(r!==0&&(a=a.next(()=>function(d,f){return f.store(js).J().next(g=>{d.deleteObjectStore(js),d.createObjectStore(js,{keyPath:KI,autoIncrement:!0}).createIndex(kl,YI,{unique:!0});const v=f.store(js),w=g.map(I=>v.put(I));return Y.waitFor(w)})}(e,i))),a=a.next(()=>{(function(d){d.createObjectStore(Ku,{keyPath:O8})})(e)})),r<5&&s>=5&&(a=a.next(()=>this.yi(i))),r<6&&s>=6&&(a=a.next(()=>(function(d){d.createObjectStore(ff)}(e),this.wi(i)))),r<7&&s>=7&&(a=a.next(()=>this.Si(i))),r<8&&s>=8&&(a=a.next(()=>this.bi(e,i))),r<9&&s>=9&&(a=a.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(a=a.next(()=>this.Di(i))),r<11&&s>=11&&(a=a.next(()=>{(function(d){d.createObjectStore(fy,{keyPath:D8})})(e),function(d){d.createObjectStore(py,{keyPath:M8})}(e)})),r<12&&s>=12&&(a=a.next(()=>{(function(d){const f=d.createObjectStore(my,{keyPath:z8});f.createIndex(K0,W8,{unique:!1}),f.createIndex(cR,q8,{unique:!1})})(e)})),r<13&&s>=13&&(a=a.next(()=>function(d){const f=d.createObjectStore(mg,{keyPath:k8});f.createIndex($m,P8),f.createIndex(iR,C8)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(xl))),r<14&&s>=14&&(a=a.next(()=>this.Fi(e,i))),r<15&&s>=15&&(a=a.next(()=>function(d){d.createObjectStore(__,{keyPath:L8,autoIncrement:!0}).createIndex(G0,V8,{unique:!1}),d.createObjectStore($h,{keyPath:F8}).createIndex(aR,U8,{unique:!1}),d.createObjectStore(Bh,{keyPath:$8}).createIndex(lR,B8,{unique:!1})}(e))),r<16&&s>=16&&(a=a.next(()=>{t.objectStore($h).clear()}).next(()=>{t.objectStore(Bh).clear()})),r<17&&s>=17&&(a=a.next(()=>{(function(d){d.createObjectStore(b_,{keyPath:H8})})(e)})),r<18&&s>=18&&HC()&&(a=a.next(()=>{t.objectStore($h).clear()}).next(()=>{t.objectStore(Bh).clear()})),a}wi(e){let t=0;return e.store(xl).ee((r,s)=>{t+=Sg(s)}).next(()=>{const r={byteSize:t};return e.store(ff).put(H0,r)})}yi(e){const t=e.store(hf),r=e.store(js);return t.J().next(s=>Y.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,jl],[i.userId,i.lastAcknowledgedBatchId]);return r.J(kl,a).next(c=>Y.forEach(c,d=>{Me(d.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=El(this.serializer,d);return hN(e,i.userId,f).next(()=>{})}))}))}Si(e){const t=e.store(Gu),r=e.store(xl);return e.store(Ol).get(gg).next(s=>{const i=[];return r.ee((a,c)=>{const d=new vt(a),f=function(g){return[0,tr(g)]}(d);i.push(t.get(f).next(p=>p?Y.resolve():(g=>t.put({targetId:0,path:tr(g),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>Y.waitFor(i))})}bi(e,t){e.createObjectStore(pf,{keyPath:j8});const r=t.store(pf),s=new D_,i=a=>{if(s.add(a)){const c=a.lastSegment(),d=a.popLast();return r.put({collectionId:c,parent:tr(d)})}};return t.store(xl).ee({X:!0},(a,c)=>{const d=new vt(a);return i(d.popLast())}).next(()=>t.store(qu).ee({X:!0},([a,c,d],f)=>{const p=mi(c);return i(p.popLast())}))}Di(e){const t=e.store(Hu);return t.ee((r,s)=>{const i=Ch(s),a=aN(this.serializer,i);return t.put(a)})}Ci(e,t){const r=t.store(xl),s=[];return r.ee((i,a)=>{const c=t.store(mg),d=function(g){return g.document?new Ee(vt.fromString(g.document.name).popFirst(5)):g.noDocument?Ee.fromSegments(g.noDocument.path):g.unknownDocument?Ee.fromSegments(g.unknownDocument.path):Ce(36783)}(a).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(c.put(f))}).next(()=>Y.waitFor(s))}Fi(e,t){const r=t.store(js),s=vN(this.serializer),i=new L_(Sy.mi,this.serializer.yt);return r.J().next(a=>{const c=new Map;return a.forEach(d=>{let f=c.get(d.userId)??tt();El(this.serializer,d).keys().forEach(p=>f=f.add(p)),c.set(d.userId,f)}),Y.forEach(c,(d,f)=>{const p=new Ln(f),g=Ey.wt(this.serializer,p),v=i.getIndexManager(p),w=Ty.wt(p,this.serializer,v,i.referenceDelegate);return new wN(s,w,g,v).recalculateAndSaveOverlaysForDocumentKeys(new Y0(t,ds.ce),d).next()})})}}function Vk(n){n.createObjectStore(Gu,{keyPath:R8}).createIndex(x_,N8,{unique:!0}),n.createObjectStore(Hu,{keyPath:"targetId"}).createIndex(oR,A8,{unique:!0}),n.createObjectStore(Ol)}const Yo="IndexedDbPersistence",Xw=18e5,Zw=5e3,e0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mz="main";class V_{constructor(e,t,r,s,i,a,c,d,f,p,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=a,this.document=c,this.xi=f,this.Oi=p,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!V_.v())throw new ye(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nz(this,s),this.$i=t+mz,this.serializer=new oN(d),this.Ui=new wa(this.$i,this.Ni,new pz(this.serializer)),this.hi=new W9,this.Pi=new X9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vN(this.serializer),this.Ii=new z9,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&ar(Yo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(se.FAILED_PRECONDITION,e0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new ds(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Na(e))return he(Yo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he(Yo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return xh(e).get(Yc).next(t=>Y.resolve(this.es(t)))}ts(e){return vm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Xw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=_n(t,Ku);return r.J().next(s=>{const i=this.ss(s,Xw),a=s.filter(c=>i.indexOf(c)===-1);return Y.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Y.resolve(!0):xh(e).get(Yc).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zw)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ye(se.FAILED_PRECONDITION,e0);return!1}}return!(!this.networkEnabled||!this.inForeground)||vm(e).J().next(r=>this.ss(r,Zw).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(i||a&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&he(Yo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ff,Ku],e=>{const t=new Y0(e,ds.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>vm(e).J().next(t=>this.ss(t,Xw).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ty.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new J9(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ey.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){he(Yo,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(d){return d===18?Y8:d===17?fR:d===16?K8:d===15?E_:d===14?hR:d===13?dR:d===12?G8:d===11?uR:void Ce(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,s,i,c=>(a=new Y0(c,this.ci?this.ci.next():ds.ce),t==="readwrite-primary"?this.Hi(a).next(d=>!!d||this.Yi(a)).next(d=>{if(!d)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ye(se.FAILED_PRECONDITION,tR);return r(a)}).next(d=>this.Xi(a).next(()=>d)):this.Is(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Is(e){return xh(e).get(Yc).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zw)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(se.FAILED_PRECONDITION,e0)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xh(e).put(Yc,t)}static v(){return wa.v()}Zi(e){const t=xh(e);return t.get(Yc).next(r=>this.es(r)?(he(Yo,"Releasing primary lease."),t.delete(Yc)):Y.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(ar(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;qC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return he(Yo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar(Yo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xh(n){return _n(n,Ff)}function vm(n){return _n(n,Ku)}function gz(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=tt(),s=tt();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new F_(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qC()?8:rR(vn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,t,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new yz;return this.Ss(e,t,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,t,a,c.size)})}).next(()=>i.result)}bs(e,t,r,s){return r.documentReadCount<this.fs?(pu()<=st.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",mu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(pu()<=st.DEBUG&&he("QueryEngine","Query:",mu(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(pu()<=st.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",mu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(t))):Y.resolve())}ys(e,t){if(lk(t))return Y.resolve(null);let r=hs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=xg(t,null,"F"),r=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=tt(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.Ds(t,c);return this.Cs(t,f,a,d.readTime)?this.ys(e,xg(t,null,"F")):this.vs(e,f,t,d)}))})))}ws(e,t,r,s){return lk(t)||s.isEqual(Le.min())?Y.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(t,i);return this.Cs(t,a,r,s)?Y.resolve(null):(pu()<=st.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mu(t)),this.vs(e,a,t,v8(s,cf)).next(c=>c))})}Ds(e,t){let r=new Tt(jR(e));return t.forEach((s,i)=>{Bf(e,i)&&(r=r.add(i))}),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return pu()<=st.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",mu(t)),this.ps.getDocumentsMatchingQuery(e,t,Kr.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="LocalStore",vz=3e8;class wz{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Lt(We),this.xs=new go(i=>Gl(i),Uf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _N(n,e,t,r){return new wz(n,e,t,r)}async function bN(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let d=tt();for(const f of s){a.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of i){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(r,d).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:c}))})})}function xz(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,f,p){const g=f.batch,v=g.keys();let w=Y.resolve();return v.forEach(I=>{w=w.next(()=>p.getEntry(d,I)).next(_=>{const S=f.docVersions.get(I);Me(S!==null,48541),_.version.compareTo(S)<0&&(g.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),p.addEntry(_)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(d,g))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=tt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function EN(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function _z(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach((p,g)=>{const v=s.get(g);if(!v)return;c.push(t.Pi.removeMatchingKeys(i,p.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(i,p.addedDocuments,g)));let w=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(dn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),s=s.insert(g,w),function(_,S,C){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=vz?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,w,p)&&c.push(t.Pi.updateTargetData(i,w))});let d=qr(),f=tt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(bz(i,a,e.documentUpdates).next(p=>{d=p.ks,f=p.qs})),!r.isEqual(Le.min())){const p=t.Pi.getLastRemoteSnapshotVersion(i).next(g=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return Y.waitFor(c).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,d,f)).next(()=>d)}).then(i=>(t.Ms=s,i))}function bz(n,e,t){let r=tt(),s=tt();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=qr();return t.forEach((c,d)=>{const f=i.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Le.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):he(U_,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{ks:a,qs:s}})}function Ez(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jl),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tz(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Pi.getTargetData(r,e).next(i=>i?(s=i,Y.resolve(s)):t.Pi.allocateTargetId(r).next(a=>(s=new no(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function cx(n,e,t){const r=qe(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Na(a))throw a;he(U_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Fk(n,e,t){const r=qe(n);let s=Le.min(),i=tt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,p){const g=qe(d),v=g.xs.get(p);return v!==void 0?Y.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,p)}(r,a,hs(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(d=>{i=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,t?s:Le.min(),t?i:tt())).next(c=>(Sz(r,u9(e),c),{documents:c,Qs:i})))}function Sz(n,e,t){let r=n.Os.get(e)||Le.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Os.set(e,r)}class Uk{constructor(){this.activeTargetIds=g9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TN{constructor(){this.Mo=new Uk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="ConnectivityMonitor";class Bk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he($k,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he($k,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm=null;function ux(){return wm===null?wm=function(){return 268435456+Math.round(2147483648*Math.random())}():wm++,"0x"+wm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="RestConnection",kz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===yg?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const a=ux(),c=this.zo(e,t.toUriEncodedString());he(t0,`Sending RPC '${e}' ${a}:`,c,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,i);const{host:f}=new URL(c),p=Ra(f);return this.Jo(e,c,d,r,p).then(g=>(he(t0,`Received RPC '${e}' ${a}: `,g),g),g=>{throw ql(t0,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,s,i,a){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,t){const r=kz[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class Az extends Pz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const a=ux();return new Promise((c,d)=>{const f=new WA;f.setWithCredentials(!0),f.listenOnce(qA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vm.NO_ERROR:const g=f.getResponseJson();he(Yn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Vm.TIMEOUT:he(Yn,`RPC '${e}' ${a} timed out`),d(new ye(se.DEADLINE_EXCEEDED,"Request time out"));break;case Vm.HTTP_ERROR:const v=f.getStatus();if(he(Yn,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w==null?void 0:w.error;if(I&&I.status&&I.message){const _=function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(R)>=0?R:se.UNKNOWN}(I.status);d(new ye(_,I.message))}else d(new ye(se.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ye(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{he(Yn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);he(Yn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",p,r,15)})}T_(e,t,r){const s=ux(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KA(),c=GA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");he(Yn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const g=a.createWebChannel(p,d);this.I_(g);let v=!1,w=!1;const I=new Cz({Yo:S=>{w?he(Yn,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(v||(he(Yn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),he(Yn,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},Zo:()=>g.close()}),_=(S,C,R)=>{S.listen(C,j=>{try{R(j)}catch(D){setTimeout(()=>{throw D},0)}})};return _(g,Ih.EventType.OPEN,()=>{w||(he(Yn,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),_(g,Ih.EventType.CLOSE,()=>{w||(w=!0,he(Yn,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(g))}),_(g,Ih.EventType.ERROR,S=>{w||(w=!0,ql(Yn,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),I.a_(new ye(se.UNAVAILABLE,"The operation could not be completed")))}),_(g,Ih.EventType.MESSAGE,S=>{var C;if(!w){const R=S.data[0];Me(!!R,16349);const j=R,D=(j==null?void 0:j.error)||((C=j[0])==null?void 0:C.error);if(D){he(Yn,`RPC '${e}' stream ${s} received error:`,D);const U=D.status;let z=function(O){const M=on[O];if(M!==void 0)return HR(M)}(U),P=D.message;z===void 0&&(z=se.INTERNAL,P="Unknown error status: "+U+" with message "+D.message),w=!0,I.a_(new ye(z,P)),g.close()}else he(Yn,`RPC '${e}' stream ${s} received:`,R),I.u_(R)}}),_(c,HA.STAT_EVENT,S=>{S.stat===z0.PROXY?he(Yn,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===z0.NOPROXY&&he(Yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(){return typeof window<"u"?window:null}function Km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n){return new N9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="PersistentStream";class IN{constructor(e,t,r,s,i,a,c,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===t&&this.G_(r,s)},r=>{e(()=>{const s=new ye(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return he(zk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(he(zk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nz extends IN{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=D9(this.serializer,e),r=function(i){if(!("targetChange"in i))return Le.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Le.min():a.readTime?ur(a.readTime):Le.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=sx(this.serializer),t.addTarget=function(i,a){let c;const d=a.target;if(c=vg(d)?{documents:eN(i,d)}:{query:tN(i,d).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=YR(i,a.resumeToken);const f=nx(i,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(Le.min())>0){c.readTime=nd(i,a.snapshotVersion.toTimestamp());const f=nx(i,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=L9(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=sx(this.serializer),t.removeTarget=e,this.q_(t)}}class jz extends IN{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=M9(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=sx(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bg(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{}class Dz extends Oz{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,rx(t,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(se.UNKNOWN,i.toString())})}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,rx(t,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(se.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="RemoteStore";class Lz{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ac(this)&&(he(Jl,"Restarting streams for network reachability change."),await async function(d){const f=qe(d);f.Ea.add(4),await Wf(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ky(f)}(this))})}),this.Ra=new Mz(r,s)}}async function ky(n){if(ac(n))for(const e of n.da)await e(!0)}async function Wf(n){for(const e of n.da)await e(!1)}function kN(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),W_(t)?z_(t):wd(t).O_()&&B_(t,e))}function $_(n,e){const t=qe(n),r=wd(t);t.Ia.delete(e),r.O_()&&PN(t,e),t.Ia.size===0&&(r.O_()?r.L_():ac(t)&&t.Ra.set("Unknown"))}function B_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wd(n).Y_(e)}function PN(n,e){n.Va.Ue(e),wd(n).Z_(e)}function z_(n){n.Va=new P9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),wd(n).start(),n.Ra.ua()}function W_(n){return ac(n)&&!wd(n).x_()&&n.Ia.size>0}function ac(n){return qe(n).Ea.size===0}function CN(n){n.Va=void 0}async function Vz(n){n.Ra.set("Online")}async function Fz(n){n.Ia.forEach((e,t)=>{B_(n,e)})}async function Uz(n,e){CN(n),W_(n)?(n.Ra.ha(e),z_(n)):n.Ra.set("Unknown")}async function $z(n,e,t){if(n.Ra.set("Online"),e instanceof KR&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(n,e)}catch(r){he(Jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kg(n,r)}else if(e instanceof Hm?n.Va.Ze(e):e instanceof GR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const r=await EN(n.localStore);t.compareTo(r)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.Ia.get(f);p&&i.Ia.set(f,p.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{const p=i.Ia.get(d);if(!p)return;i.Ia.set(d,p.withResumeToken(dn.EMPTY_BYTE_STRING,p.snapshotVersion)),PN(i,d);const g=new no(p.target,d,f,p.sequenceNumber);B_(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){he(Jl,"Failed to raise snapshot:",r),await kg(n,r)}}async function kg(n,e,t){if(!Na(e))throw e;n.Ea.add(1),await Wf(n),n.Ra.set("Offline"),t||(t=()=>EN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(Jl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ky(n)})}function AN(n,e){return e().catch(t=>kg(n,t,e))}async function qf(n){const e=qe(n),t=ka(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jl;for(;Bz(e);)try{const s=await Ez(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,zz(e,s)}catch(s){await kg(e,s)}RN(e)&&NN(e)}function Bz(n){return ac(n)&&n.Ta.length<10}function zz(n,e){n.Ta.push(e);const t=ka(n);t.O_()&&t.X_&&t.ea(e.mutations)}function RN(n){return ac(n)&&!ka(n).x_()&&n.Ta.length>0}function NN(n){ka(n).start()}async function Wz(n){ka(n).ra()}async function qz(n){const e=ka(n);for(const t of n.Ta)e.ea(t.mutations)}async function Hz(n,e,t){const r=n.Ta.shift(),s=A_.from(r,e,t);await AN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await qf(n)}async function Gz(n,e){e&&ka(n).X_&&await async function(r,s){if(function(a){return S9(a)&&a!==se.ABORTED}(s.code)){const i=r.Ta.shift();ka(r).B_(),await AN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qf(r)}}(n,e),RN(n)&&NN(n)}async function Wk(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),he(Jl,"RemoteStore received new credentials");const r=ac(t);t.Ea.add(3),await Wf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ky(t)}async function Kz(n,e){const t=qe(n);e?(t.Ea.delete(2),await ky(t)):e||(t.Ea.add(2),await Wf(t),t.Ra.set("Unknown"))}function wd(n){return n.ma||(n.ma=function(t,r,s){const i=qe(t);return i.sa(),new Nz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Xo:Vz.bind(null,n),t_:Fz.bind(null,n),r_:Uz.bind(null,n),H_:$z.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),W_(n)?z_(n):n.Ra.set("Unknown")):(await n.ma.stop(),CN(n))})),n.ma}function ka(n){return n.fa||(n.fa=function(t,r,s){const i=qe(t);return i.sa(),new jz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wz.bind(null,n),r_:Gz.bind(null,n),ta:qz.bind(null,n),na:Hz.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await qf(n)):(await n.fa.stop(),n.Ta.length>0&&(he(Jl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new q_(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(n,e){if(ar("AsyncQueue",`${e}: ${n}`),Na(n))return new ye(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{static emptySet(e){return new ku(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=kh(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ku)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ku;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.ga=new Lt(Ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class rd{constructor(e,t,r,s,i,a,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new rd(e,t,ku.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Qz{constructor(){this.queries=Hk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=qe(t),i=s.queries;s.queries=Hk(),i.forEach((a,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new ye(se.ABORTED,"Firestore shutting down"))}}function Hk(){return new go(n=>NR(n),vy)}async function G_(n,e){const t=qe(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Yz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=H_(a,`Initialization of query '${mu(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Y_(t)}async function K_(n,e){const t=qe(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Jz(n,e){const t=qe(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&Y_(t)}function Xz(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function Y_(n){n.Ca.forEach(e=>{e.next()})}var dx,Gk;(Gk=dx||(dx={})).Ma="default",Gk.Cache="cache";class Q_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new rd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.key=e}}class ON{constructor(e){this.key=e}}class Zz{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=jR(e),this.tu=new ku(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new qk,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const v=s.get(p),w=Bf(this.query,g)?g:null,I=!!v&&this.mutatedKeys.has(v.key),_=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;v&&w?v.data.isEqual(w.data)?I!==_&&(r.track({type:3,doc:w}),S=!0):this.su(v,w)||(r.track({type:2,doc:w}),S=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(c=!0)):!v&&w?(r.track({type:0,doc:w}),S=!0):v&&!w&&(r.track({type:1,doc:v}),S=!0,(d||f)&&(c=!0)),S&&(w?(a=a.add(w),i=_?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,g)=>function(w,I){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:S})}};return _(w)-_(I)}(p.type,g.type)||this.eu(p.doc,g.doc)),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,a.length!==0||f?{snapshot:new rd(this.query,e.tu,i,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new ON(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new jN(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return rd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const J_="SyncEngine";class e7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class t7{constructor(e){this.key=e,this.hu=!1}}class n7{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new go(c=>NR(c),vy),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Ee.comparator),this.Au=new Map,this.Ru=new M_,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function r7(n,e,t=!0){const r=UN(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await DN(r,e,t,!0),s}async function s7(n,e){const t=UN(n);await DN(t,e,!0,!1)}async function DN(n,e,t,r){const s=await Tz(n.localStore,hs(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await i7(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&kN(n.remoteStore,s),c}async function i7(n,e,t,r,s){n.pu=(g,v,w)=>async function(_,S,C,R){let j=S.view.ru(C);j.Cs&&(j=await Fk(_.localStore,S.query,!1).then(({documents:P})=>S.view.ru(P,j)));const D=R&&R.targetChanges.get(S.targetId),U=R&&R.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(j,_.isPrimaryClient,D,U);return Yk(_,S.targetId,z.au),z.snapshot}(n,g,v,w);const i=await Fk(n.localStore,e,!0),a=new Zz(e,i.Qs),c=a.ru(i.documents),d=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=a.applyChanges(c,n.isPrimaryClient,d);Yk(n,t,f.au);const p=new e7(e,t,a);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function o7(n,e,t){const r=qe(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!vy(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&$_(r.remoteStore,s.targetId),hx(r,s.targetId)}).catch(oc)):(hx(r,s.targetId),await cx(r.localStore,s.targetId,!0))}async function a7(n,e){const t=qe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$_(t.remoteStore,r.targetId))}async function l7(n,e,t){const r=$N(n);try{const s=await function(a,c){const d=qe(a),f=wt.now(),p=c.reduce((w,I)=>w.add(I.key),tt());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=qr(),_=tt();return d.Ns.getEntries(w,p).next(S=>{I=S,I.forEach((C,R)=>{R.isValidDocument()||(_=_.add(C))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,I)).next(S=>{g=S;const C=[];for(const R of c){const j=E9(R,g.get(R.key).overlayedDocument);j!=null&&C.push(new yo(R.key,j,ER(j.value.mapValue),er.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,C,c)}).next(S=>{v=S;const C=S.applyToLocalDocumentSet(g,_);return d.documentOverlayCache.saveOverlays(w,S.batchId,C)})}).then(()=>({batchId:v.batchId,changes:DR(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,d){let f=a.Vu[a.currentUser.toKey()];f||(f=new Lt(We)),f=f.insert(c,d),a.Vu[a.currentUser.toKey()]=f}(r,s.batchId,t),await Hf(r,s.changes),await qf(r.remoteStore)}catch(s){const i=H_(s,"Failed to persist write");t.reject(i)}}async function MN(n,e){const t=qe(n);try{const r=await _z(t.localStore,e);e.targetChanges.forEach((s,i)=>{const a=t.Au.get(i);a&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Me(a.hu,14607):s.removedDocuments.size>0&&(Me(a.hu,42227),a.hu=!1))}),await Hf(t,r,e)}catch(r){await oc(r)}}function Kk(n,e,t){const r=qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const d=qe(a);d.onlineState=c;let f=!1;d.queries.forEach((p,g)=>{for(const v of g.Sa)v.va(c)&&(f=!0)}),f&&Y_(d)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c7(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Lt(Ee.comparator);a=a.insert(i,Kt.newNoDocument(i,Le.min()));const c=tt().add(i),d=new by(Le.min(),new Map,new Lt(We),a,c);await MN(r,d),r.du=r.du.remove(i),r.Au.delete(e),X_(r)}else await cx(r.localStore,e,!1).then(()=>hx(r,e,t)).catch(oc)}async function u7(n,e){const t=qe(n),r=e.batch.batchId;try{const s=await xz(t.localStore,e);VN(t,r,null),LN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hf(t,s)}catch(s){await oc(s)}}async function d7(n,e,t){const r=qe(n);try{const s=await function(a,c){const d=qe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next(g=>(Me(g!==null,37113),p=g.keys(),d.mutationQueue.removeMutationBatch(f,g))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(r.localStore,e);VN(r,e,t),LN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hf(r,s)}catch(s){await oc(s)}}function LN(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function VN(n,e,t){const r=qe(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function hx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||FN(n,r)})}function FN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&($_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),X_(n))}function Yk(n,e,t){for(const r of t)r instanceof jN?(n.Ru.addReference(r.key,e),h7(n,r)):r instanceof ON?(he(J_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||FN(n,r.key)):Ce(19791,{wu:r})}function h7(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(he(J_,"New document in limbo: "+t),n.Eu.add(r),X_(n))}function X_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(vt.fromString(e)),r=n.fu.next();n.Au.set(r,new t7(t)),n.du=n.du.insert(t,r),kN(n.remoteStore,new no(hs($f(t.path)),r,"TargetPurposeLimboResolution",ds.ce))}}async function Hf(n,e,t){const r=qe(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,d)=>{a.push(r.pu(d,e,t).then(f=>{var p;if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=F_.As(d.targetId,f);i.push(g)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(d,f){const p=qe(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Y.forEach(f,v=>Y.forEach(v.Es,w=>p.persistence.referenceDelegate.addReference(g,v.targetId,w)).next(()=>Y.forEach(v.ds,w=>p.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))}catch(g){if(!Na(g))throw g;he(U_,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const w=p.Ms.get(v),I=w.snapshotVersion,_=w.withLastLimboFreeSnapshotVersion(I);p.Ms=p.Ms.insert(v,_)}}}(r.localStore,i))}async function f7(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){he(J_,"User change. New user:",e.toKey());const r=await bN(t.localStore,e);t.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(d=>{d.reject(new ye(se.CANCELLED,a))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hf(t,r.Ls)}}function p7(n,e){const t=qe(n),r=t.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let s=tt();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function UN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c7.bind(null,e),e.Pu.H_=Jz.bind(null,e.eventManager),e.Pu.yu=Xz.bind(null,e.eventManager),e}function $N(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d7.bind(null,e),e}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Iy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _N(this.persistence,new xN,e.initialUser,this.serializer)}Cu(e){return new L_(Sy.mi,this.serializer)}Du(e){return new TN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class m7 extends _f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Me(this.persistence.referenceDelegate instanceof Ig,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new L_(r=>Ig.mi(r,t),this.serializer)}}class g7 extends _f{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await $N(this.xu.syncEngine),await qf(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return _N(this.persistence,new xN,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new mN(r,e.asyncQueue,t)}Mu(e,t){const r=new b8(t,this.persistence);return new _8(e.asyncQueue,r)}Cu(e){const t=gz(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new V_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Rz(),Km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new TN}}class Pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f7.bind(null,this.syncEngine),await Kz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qz}()}createDatastore(e){const t=Iy(e.databaseInfo.databaseId),r=function(i){return new Az(i)}(e.databaseInfo);return function(i,a,c,d){return new Dz(i,a,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,a,c){return new Lz(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Kk(this.syncEngine,t,0),function(){return Bk.v()?new Bk:new Iz}())}createSyncEngine(e,t){return function(s,i,a,c,d,f,p){const g=new n7(s,i,a,c,d,f);return p&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=qe(s);he(Jl,"RemoteStore shutting down."),i.Ea.add(5),await Wf(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="FirestoreClient";class y7{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ln.UNAUTHENTICATED,this.clientId=y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{he(Pa,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(he(Pa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=H_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function n0(n,e){n.asyncQueue.verifyOperationInProgress(),he(Pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Qk(n,e){n.asyncQueue.verifyOperationInProgress();const t=await v7(n);he(Pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Wk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Wk(e.remoteStore,s)),n._onlineComponents=e}async function v7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Pa,"Using user provided OfflineComponentProvider");try{await n0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ql("Error using user provided cache. Falling back to memory cache: "+t),await n0(n,new _f)}}else he(Pa,"Using default OfflineComponentProvider"),await n0(n,new m7(void 0));return n._offlineComponents}async function BN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Pa,"Using user provided OnlineComponentProvider"),await Qk(n,n._uninitializedComponentsProvider._online)):(he(Pa,"Using default OnlineComponentProvider"),await Qk(n,new Pg))),n._onlineComponents}function w7(n){return BN(n).then(e=>e.syncEngine)}async function Cg(n){const e=await BN(n),t=e.eventManager;return t.onListen=r7.bind(null,e.syncEngine),t.onUnlisten=o7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=s7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=a7.bind(null,e.syncEngine),t}function x7(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,c,d,f){const p=new Z_({next:v=>{p.Nu(),a.enqueueAndForget(()=>K_(i,g));const w=v.docs.has(c);!w&&v.fromCache?f.reject(new ye(se.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ye(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Q_($f(c.path),p,{includeMetadataChanges:!0,qa:!0});return G_(i,g)}(await Cg(n),n.asyncQueue,e,t,r)),r.promise}function _7(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,c,d,f){const p=new Z_({next:v=>{p.Nu(),a.enqueueAndForget(()=>K_(i,g)),v.fromCache&&d.source==="server"?f.reject(new ye(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Q_(c,p,{includeMetadataChanges:!0,qa:!0});return G_(i,g)}(await Cg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="firestore.googleapis.com",Xk=!0;class Zk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WN,this.ssl=Xk}else this.host=e.host,this.ssl=e.ssl??Xk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z9)throw new ye(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Py{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new a8;switch(r.type){case"firstParty":return new d8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Jk.get(t);r&&(he("ComponentProvider","Removing Datastore"),Jk.delete(t),r.terminate())}(this),Promise.resolve()}}function b7(n,e,t,r={}){var f;n=cr(n,Py);const s=Ra(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(t_(`https://${c}`),n_("Firestore",!0)),i.host!==WN&&i.host!==c&&ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:c,ssl:s,emulatorOptions:r};if(!$l(d,a)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Ln.MOCK_USER;else{p=zC(r.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ye(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ln(v)}n._authCredentials=new l8(new QA(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vo(this.firestore,e,this._query)}}class Qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Vf(t,Qt._jsonSchema))return new Qt(e,r||null,new Ee(vt.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:un("string",Qt._jsonSchemaVersion),referencePath:un("string")};class xa extends vo{constructor(e,t,r){super(e,t,$f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ee(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function cs(n,e,...t){if(n=et(n),XA("collection","path",e),n instanceof Py){const r=vt.fromString(e,...t);return zI(r),new xa(n,null,r)}{if(!(n instanceof Qt||n instanceof xa))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return zI(r),new xa(n.firestore,null,r)}}function ms(n,e,...t){if(n=et(n),arguments.length===1&&(e=y_.newId()),XA("doc","path",e),n instanceof Py){const r=vt.fromString(e,...t);return BI(r),new Qt(n,null,new Ee(r))}{if(!(n instanceof Qt||n instanceof xa))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return BI(r),new Qt(n.firestore,n instanceof xa?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="AsyncQueue";class t1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SN(this,"async_queue_retry"),this._c=()=>{const r=Km();r&&he(e1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new xi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;he(e1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",n1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=q_.createAndSchedule(this,e,t,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:n1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function n1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(n,["next","error","complete"])}class Ii extends Py{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new t1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t1(e),this._firestoreClient=void 0,await e}}}function E7(n,e){const t=typeof n=="object"?n:i_(),r=typeof n=="string"?n:yg,s=Xg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=UC("firestore");i&&b7(s,...i)}return s}function Cy(n){if(n._terminated)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qN(n),n._firestoreClient}function qN(n){var r,s,i;const e=n._freezeSettings(),t=function(c,d,f,p){return new J8(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,zN(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new y7(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}function T7(n,e){ql("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return S7(n,Pg.provider,{build:r=>new g7(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function S7(n,e,t){if((n=cr(n,Ii))._firestoreClient||n._terminated)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ye(se.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},qN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(dn.fromBase64String(e))}catch(t){throw new ye(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new us(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vf(e,us._jsonSchema))return us.fromBase64String(e.bytes)}}us._jsonSchemaVersion="firestore/bytes/1.0",us._jsonSchema={type:un("string",us._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(Vf(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:un("string",_i._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vf(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new bi(e.vectorValues);throw new ye(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:un("string",bi._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=/^__.*__$/;class k7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class HN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class eb{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new eb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ag(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GN(this.Ac)&&I7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class P7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Iy(e)}Cc(e,t,r,s=!1){return new eb({Ac:e,methodName:t,Dc:r,path:$t.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ny(n){const e=n._freezeSettings(),t=Iy(n._databaseId);return new P7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KN(n,e,t,r,s,i={}){const a=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);nb("Data must be an object, but it was:",a,r);const c=YN(r,a);let d,f;if(i.merge)d=new Tr(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const v=fx(e,g,t);if(!a.contains(v))throw new ye(se.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);JN(p,v)||p.push(v)}d=new Tr(p),f=a.fieldTransforms.filter(g=>d.covers(g.field))}else d=null,f=a.fieldTransforms;return new k7(new Zn(c),d,f)}class jy extends Ry{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jy}}class tb extends Ry{_toFieldTransform(e){return new BR(e.path,new Zu)}isEqual(e){return e instanceof tb}}function C7(n,e,t,r){const s=n.Cc(1,e,t);nb("Data must be an object, but it was:",s,r);const i=[],a=Zn.empty();ja(r,(d,f)=>{const p=rb(e,d,t);f=et(f);const g=s.yc(p);if(f instanceof jy)i.push(p);else{const v=Gf(f,g);v!=null&&(i.push(p),a.set(p,v))}});const c=new Tr(i);return new HN(a,c,s.fieldTransforms)}function A7(n,e,t,r,s,i){const a=n.Cc(1,e,t),c=[fx(e,r,t)],d=[s];if(i.length%2!=0)throw new ye(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)c.push(fx(e,i[v])),d.push(i[v+1]);const f=[],p=Zn.empty();for(let v=c.length-1;v>=0;--v)if(!JN(f,c[v])){const w=c[v];let I=d[v];I=et(I);const _=a.yc(w);if(I instanceof jy)f.push(w);else{const S=Gf(I,_);S!=null&&(f.push(w),p.set(w,S))}}const g=new Tr(f);return new HN(p,g,a.fieldTransforms)}function R7(n,e,t,r=!1){return Gf(t,n.Cc(r?4:3,e))}function Gf(n,e){if(QN(n=et(n)))return nb("Unsupported field value:",e,n),YN(n,e);if(n instanceof Ry)return function(r,s){if(!GN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let d=Gf(c,s.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=wt.fromDate(r);return{timestampValue:nd(s.serializer,i)}}if(r instanceof wt){const i=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nd(s.serializer,i)}}if(r instanceof _i)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof us)return{bytesValue:YR(s.serializer,r._byteString)};if(r instanceof Qt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:j_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bi)return function(a,c){return{mapValue:{fields:{[S_]:{stringValue:I_},[Yu]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return P_(c.serializer,f)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${uy(r)}`)}(n,e)}function YN(n,e){const t={};return pR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(n,(r,s)=>{const i=Gf(s,e.mc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function QN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof _i||n instanceof us||n instanceof Qt||n instanceof Ry||n instanceof bi)}function nb(n,e,t){if(!QN(t)||!ZA(t)){const r=uy(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function fx(n,e,t){if((e=et(e))instanceof Ay)return e._internalPath;if(typeof e=="string")return rb(n,e);throw Ag("Field path arguments must be of type string or ",n,!1,void 0,t)}const N7=new RegExp("[~\\*/\\[\\]]");function rb(n,e,t){if(e.search(N7)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ay(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ag(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${r}`),a&&(d+=` in document ${s}`),d+=")"),new ye(se.INVALID_ARGUMENT,c+n+d)}function JN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Oy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class j7 extends XN{data(){return super.data()}}function Oy(n,e){return typeof e=="string"?rb(n,e):e instanceof Ay?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sb{}class ib extends sb{}function Gh(n,e,...t){let r=[];e instanceof sb&&r.push(e),r=r.concat(t),function(i){const a=i.filter(d=>d instanceof ob).length,c=i.filter(d=>d instanceof Dy).length;if(a>1||a>0&&c>0)throw new ye(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Dy extends ib{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Dy(e,t,r)}_apply(e){const t=this._parse(e);return ej(e._query,t),new vo(e.firestore,e.converter,tx(e._query,t))}_parse(e){const t=Ny(e.firestore);return function(i,a,c,d,f,p,g){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ye(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){o1(g,p);const I=[];for(const _ of g)I.push(i1(d,i,_));v={arrayValue:{values:I}}}else v=i1(d,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||o1(g,p),v=R7(c,a,g,p==="in"||p==="not-in");return it.create(f,p,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function s1(n,e,t){const r=e,s=Oy("where",n);return Dy._create(s,r,t)}class ob extends sb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ob(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const d of c)ej(a,d),a=tx(a,d)}(e._query,t),new vo(e.firestore,e.converter,tx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ab extends ib{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ab(e,t)}_apply(e){const t=function(s,i,a){if(s.startAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wf(i,a)}(e._query,this._field,this._direction);return new vo(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new yd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function px(n,e="asc"){const t=e,r=Oy("orderBy",n);return ab._create(r,t)}class lb extends ib{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lb(e,t,r)}_apply(e){return new vo(e.firestore,e.converter,xg(e._query,this._limit,this._limitType))}}function O7(n){return lb._create("limit",n,"F")}function i1(n,e,t){if(typeof(t=et(t))=="string"){if(t==="")throw new ye(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RR(e)&&t.indexOf("/")!==-1)throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Ee.isDocumentKey(r))throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yf(n,new Ee(r))}if(t instanceof Qt)return yf(n,t._key);throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uy(t)}.`)}function o1(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ej(n,e){const t=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class D7{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ja(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var r,s,i;const t=(i=(s=(r=e.fields)==null?void 0:r[Yu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Dt(a.doubleValue));return new bi(t)}convertGeoPoint(e){return new _i(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const t=ho(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);Me(iN(r),9688,{name:e});const s=new Hl(r.get(1),r.get(3)),i=new Ee(r.popFirst(5));return s.isEqual(t)||ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ml extends XN{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Oy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ml._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ml._jsonSchema={type:un("string",Ml._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class Ym extends Ml{data(e={}){return super.data(e)}}class Ll{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ah(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ym(this._firestore,this._userDataWriter,r.key,r,new Ah(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const d=new Ym(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ah(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const d=new Ym(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ah(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:M7(c.type),doc:d,oldIndex:f,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=y_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n){n=cr(n,Qt);const e=cr(n.firestore,Ii);return x7(Cy(e),n._key).then(t=>rj(e,n,t))}Ll._jsonSchemaVersion="firestore/querySnapshot/1.0",Ll._jsonSchema={type:un("string",Ll._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class cb extends D7{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function My(n){n=cr(n,vo);const e=cr(n.firestore,Ii),t=Cy(e),r=new cb(e);return ZN(n._query),_7(t,n._query).then(s=>new Ll(e,r,n,s))}function nj(n,e,t){n=cr(n,Qt);const r=cr(n.firestore,Ii),s=tj(n.converter,e,t);return Ly(r,[KN(Ny(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,er.none())])}function Xl(n,e,t,...r){n=cr(n,Qt);const s=cr(n.firestore,Ii),i=Ny(s);let a;return a=typeof(e=et(e))=="string"||e instanceof Ay?A7(i,"updateDoc",n._key,e,t,r):C7(i,"updateDoc",n._key,e),Ly(s,[a.toMutation(n._key,er.exists(!0))])}function L7(n){return Ly(cr(n.firestore,Ii),[new _y(n._key,er.none())])}function bf(n,e){const t=cr(n.firestore,Ii),r=ms(n),s=tj(n.converter,e);return Ly(t,[KN(Ny(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}function Rg(n,...e){var d,f,p;n=et(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||r1(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(r1(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let i,a,c;if(n instanceof Qt)a=cr(n.firestore,Ii),c=$f(n._key.path),i={next:g=>{e[r]&&e[r](rj(a,n,g))},error:e[r+1],complete:e[r+2]};else{const g=cr(n,vo);a=cr(g.firestore,Ii),c=g._query;const v=new cb(a);i={next:w=>{e[r]&&e[r](new Ll(a,v,g,w))},error:e[r+1],complete:e[r+2]},ZN(n._query)}return function(v,w,I,_){const S=new Z_(_),C=new Q_(w,S,I);return v.asyncQueue.enqueueAndForget(async()=>G_(await Cg(v),C)),()=>{S.Nu(),v.asyncQueue.enqueueAndForget(async()=>K_(await Cg(v),C))}}(Cy(a),c,s,i)}function Ly(n,e){return function(r,s){const i=new xi;return r.asyncQueue.enqueueAndForget(async()=>l7(await w7(r),s,i)),i.promise}(Cy(n),e)}function rj(n,e,t){const r=t.docs.get(e._key),s=new cb(n);return new Ml(n,s,e._key,r,new Ah(t.hasPendingWrites,t.fromCache),e.converter)}function ro(){return new tb("serverTimestamp")}(function(e,t=!0){(function(s){gd=s})(sc),Bl(new Ta("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Ii(new c8(r.getProvider("auth-internal")),new h8(a,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(f.options.projectId,p)}(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),wi(VI,FI,e),wi(VI,FI,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="firebasestorage.googleapis.com",ij="storageBucket",V7=2*60*1e3,F7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class oj extends Pi{constructor(e,t,r=0){super(r0(e),`Firebase Storage: ${t} (${r0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oj.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return r0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function r0(n){return"storage/"+n}function ub(){const n="An unknown error occurred, please check the error payload for server response.";return new fn(Xt.UNKNOWN,n)}function U7(n){return new fn(Xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function $7(n){return new fn(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function B7(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fn(Xt.UNAUTHENTICATED,n)}function z7(){return new fn(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W7(n){return new fn(Xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function q7(){return new fn(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H7(){return new fn(Xt.CANCELED,"User canceled the upload/download.")}function G7(n){return new fn(Xt.INVALID_URL,"Invalid URL '"+n+"'.")}function K7(n){return new fn(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Y7(){return new fn(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ij+"' property when initializing the app?")}function Q7(){return new fn(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J7(){return new fn(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function X7(n){return new fn(Xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mx(n){return new fn(Xt.INVALID_ARGUMENT,n)}function aj(){return new fn(Xt.APP_DELETED,"The Firebase app was deleted.")}function Z7(n){return new fn(Xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kh(n,e){return new fn(Xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function _h(n){throw new fn(Xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hr.makeFromUrl(e,t)}catch{return new Hr(e,"")}if(r.path==="")return r;throw K7(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),d={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${p}/b/${s}/o${v}`,"i"),I={bucket:1,path:3},_=t===sj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",C=new RegExp(`^https?://${_}/${s}/${S}`,"i"),j=[{regex:c,indices:d,postModify:i},{regex:w,indices:I,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<j.length;D++){const U=j[D],z=U.regex.exec(e);if(z){const P=z[U.indices.bucket];let A=z[U.indices.path];A||(A=""),r=new Hr(P,A),U.postModify(r);break}}if(r==null)throw G7(e);return r}}class eW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(n,e,t){let r=1,s=null,i=null,a=!1,c=0;function d(){return c===2}let f=!1;function p(...S){f||(f=!0,e.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,n(w,d())},S)}function v(){i&&clearTimeout(i)}function w(S,...C){if(f){v();return}if(S){v(),p.call(null,S,...C);return}if(d()||a){v(),p.call(null,S,...C);return}r<64&&(r*=2);let j;c===1?(c=2,j=0):j=(r+Math.random())*1e3,g(j)}let I=!1;function _(S){I||(I=!0,v(),!f&&(s!==null?(S||(c=2),clearTimeout(s),g(0)):S||(c=1)))}return g(0),i=setTimeout(()=>{a=!0,_(!0)},t),_}function nW(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rW(n){return n!==void 0}function sW(n){return typeof n=="object"&&!Array.isArray(n)}function db(n){return typeof n=="string"||n instanceof String}function a1(n){return hb()&&n instanceof Blob}function hb(){return typeof Blob<"u"}function l1(n,e,t,r){if(r<e)throw mx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mx(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function lj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Vl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vl||(Vl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,t,r,s,i,a,c,d,f,p,g,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,_)=>{this.resolve_=I,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Vl.NO_ERROR,d=i.getStatus();if(!c||iW(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Vl.ABORT;r(!1,new xm(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new xm(f,i))})},t=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());rW(d)?i(d):i()}catch(d){a(d)}else if(c!==null){const d=ub();d.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,d)):a(d)}else if(s.canceled){const d=this.appDelete_?aj():H7();a(d)}else{const d=q7();a(d)}};this.canceled_?t(!1,new xm(!1,null,!0)):this.backoffId_=tW(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function aW(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cW(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uW(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dW(n,e,t,r,s,i,a=!0,c=!1){const d=lj(n.urlParams),f=n.url+d,p=Object.assign({},n.headers);return cW(p,e),aW(p,t),lW(p,i),uW(p,r),new oW(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fW(...n){const e=hW();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(hb())return new Blob(n);throw new fn(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(n){if(typeof atob>"u")throw X7("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class s0{constructor(e,t){this.data=e,this.contentType=t||null}}function gW(n,e){switch(n){case yi.RAW:return new s0(cj(e));case yi.BASE64:case yi.BASE64URL:return new s0(uj(n,e));case yi.DATA_URL:return new s0(vW(e),wW(e))}throw ub()}function cj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=n.charCodeAt(++t);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yW(n){let e;try{e=decodeURIComponent(n)}catch{throw Kh(yi.DATA_URL,"Malformed data URL.")}return cj(e)}function uj(n,e){switch(n){case yi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Kh(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Kh(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=mW(e)}catch(s){throw s.message.includes("polyfill")?s:Kh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class dj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Kh(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=xW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function vW(n){const e=new dj(n);return e.base64?uj(yi.BASE64,e.rest):yW(e.rest)}function wW(n){return new dj(n).contentType}function xW(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){let r=0,s="";a1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(a1(this.data_)){const r=this.data_,s=pW(r,e,t);return s===null?null:new sa(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new sa(r,!0)}}static getBlob(...e){if(hb()){const t=e.map(r=>r instanceof sa?r.data_:r);return new sa(fW.apply(null,t))}else{const t=e.map(a=>db(a)?gW(yi.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new sa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n){let e;try{e=JSON.parse(n)}catch{return null}return sW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function bW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function fj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(n,e){return e}class sr{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||EW}}let _m=null;function TW(n){return!db(n)||n.length<2?n:fj(n)}function pj(){if(_m)return _m;const n=[];n.push(new sr("bucket")),n.push(new sr("generation")),n.push(new sr("metageneration")),n.push(new sr("name","fullPath",!0));function e(i,a){return TW(a)}const t=new sr("name");t.xform=e,n.push(t);function r(i,a){return a!==void 0?Number(a):a}const s=new sr("size");return s.xform=r,n.push(s),n.push(new sr("timeCreated")),n.push(new sr("updated")),n.push(new sr("md5Hash",null,!0)),n.push(new sr("cacheControl",null,!0)),n.push(new sr("contentDisposition",null,!0)),n.push(new sr("contentEncoding",null,!0)),n.push(new sr("contentLanguage",null,!0)),n.push(new sr("contentType",null,!0)),n.push(new sr("metadata","customMetadata",!0)),_m=n,_m}function SW(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new Hr(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function IW(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];r[a.local]=a.xform(r,e[a.server])}return SW(r,n),r}function mj(n,e,t){const r=hj(e);return r===null?null:IW(n,r,t)}function kW(n,e,t,r){const s=hj(e);if(s===null||!db(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(f=>{const p=n.bucket,g=n.fullPath,v="/b/"+a(p)+"/o/"+a(g),w=fb(v,t,r),I=lj({alt:"media",token:f});return w+I})[0]}function PW(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class gj{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(n){if(!n)throw ub()}function CW(n,e){function t(r,s){const i=mj(n,s,e);return yj(i!==null),i}return t}function AW(n,e){function t(r,s){const i=mj(n,s,e);return yj(i!==null),kW(i,s,n.host,n._protocol)}return t}function vj(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=z7():s=B7():t.getStatus()===402?s=$7(n.bucket):t.getStatus()===403?s=W7(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function RW(n){const e=vj(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=U7(n.path)),i.serverResponse=s.serverResponse,i}return t}function NW(n,e,t){const r=e.fullServerUrl(),s=fb(r,n.host,n._protocol),i="GET",a=n.maxOperationRetryTime,c=new gj(s,i,AW(n,t),a);return c.errorHandler=RW(e),c}function jW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function OW(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=jW(null,e)),r}function DW(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let j="";for(let D=0;D<2;D++)j=j+Math.random().toString().slice(2);return j}const d=c();a["Content-Type"]="multipart/related; boundary="+d;const f=OW(e,r,s),p=PW(f,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+d+"--",w=sa.getBlob(g,r,v);if(w===null)throw Q7();const I={name:f.fullPath},_=fb(i,n.host,n._protocol),S="POST",C=n.maxUploadRetryTime,R=new gj(_,S,CW(n,t),C);return R.urlParams=I,R.headers=a,R.body=w.uploadData(),R.errorHandler=vj(e),R}class MW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw _h("cannot .send() more than once");if(Ra(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _h("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _h("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _h("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _h("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LW extends MW{initXhr(){this.xhr_.responseType="text"}}function wj(){return new LW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t){this._service=e,t instanceof Hr?this._location=t:this._location=Hr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zl(e,t)}get root(){const e=new Hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fj(this._location.path)}get storage(){return this._service}get parent(){const e=_W(this._location.path);if(e===null)return null;const t=new Hr(this._location.bucket,e);return new Zl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Z7(e)}}function VW(n,e,t){n._throwIfRoot("uploadBytes");const r=DW(n.storage,n._location,pj(),new sa(e,!0),t);return n.storage.makeRequestWithTokens(r,wj).then(s=>({metadata:s,ref:n}))}function FW(n){n._throwIfRoot("getDownloadURL");const e=NW(n.storage,n._location,pj());return n.storage.makeRequestWithTokens(e,wj).then(t=>{if(t===null)throw J7();return t})}function UW(n,e){const t=bW(n._location.path,e),r=new Hr(n._location.bucket,t);return new Zl(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(n){return/^[A-Za-z]+:\/\//.test(n)}function BW(n,e){return new Zl(n,e)}function xj(n,e){if(n instanceof pb){const t=n;if(t._bucket==null)throw Y7();const r=new Zl(t,t._bucket);return e!=null?xj(r,e):r}else return e!==void 0?UW(n,e):n}function zW(n,e){if(e&&$W(e)){if(n instanceof pb)return BW(n,e);throw mx("To use ref(service, url), the first argument must be a Storage instance.")}else return xj(n,e)}function c1(n,e){const t=e==null?void 0:e[ij];return t==null?null:Hr.makeFromBucketSpec(t,n)}function WW(n,e,t,r={}){n.host=`${e}:${t}`;const s=Ra(e);s&&(t_(`https://${n.host}/b`),n_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:zC(i,n.app.options.projectId))}class pb{constructor(e,t,r,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=sj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V7,this._maxUploadRetryTime=F7,this._requests=new Set,s!=null?this._bucket=Hr.makeFromBucketSpec(s,this._host):this._bucket=c1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hr.makeFromBucketSpec(this._url,e):this._bucket=c1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zl(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new eW(aj());{const a=dW(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const u1="@firebase/storage",d1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="storage";function qW(n,e,t){return n=et(n),VW(n,e,t)}function HW(n){return n=et(n),FW(n)}function GW(n,e){return n=et(n),zW(n,e)}function KW(n=i_(),e){n=et(n);const r=Xg(n,_j).getImmediate({identifier:e}),s=UC("storage");return s&&YW(r,...s),r}function YW(n,e,t,r={}){WW(n,e,t,r)}function QW(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new pb(t,r,s,e,sc)}function JW(){Bl(new Ta(_j,QW,"PUBLIC").setMultipleInstances(!0)),wi(u1,d1,""),wi(u1,d1,"esm2020")}JW();const bj={apiKey:"your_firebase_api_key_here",authDomain:"your_firebase_auth_domain_here",projectId:"your_firebase_project_id_here",storageBucket:"your_firebase_storage_bucket_here",messagingSenderId:"your_firebase_messaging_sender_id_here",appId:"your_firebase_app_id_here",measurementId:"your_firebase_measurement_id_here"},XW=["apiKey","authDomain","projectId","appId","storageBucket","messagingSenderId"],h1=XW.filter(n=>!bj[n]);if(h1.length>0){const n=`Firebase initialization failed: Missing environment variables for: ${h1.join(", ")}. Please check your .env file.`;throw console.error(n),ie.error(n),new Error(n)}const mb=QC(bj),Yi=vB(mb),Yt=E7(mb),ZW=KW(mb);T7(Yt).then(()=>{console.log("Firestore offline persistence enabled successfully!")}).catch(n=>{n.code==="failed-precondition"?console.warn("Firestore persistence failed: Multiple tabs open, persistence can only be enabled in one tab at a time."):n.code==="unimplemented"?console.warn("Firestore persistence failed: The current browser does not support all of the features required to enable persistence."):console.error("Firestore persistence failed for unknown reason:",n)});const eq={url:`${window.location.origin}/finishSignIn`,handleCodeInApp:!0,android:{packageName:"com.tasko.app",installApp:!0,minimumVersion:"12"},ios:{bundleId:"com.tasko.app"}},Ej=b.createContext(void 0),tq=({children:n})=>{const[e,t]=H.useState({user:null,isAuthenticated:!1,loading:!0});H.useEffect(()=>{const g=Yi.onAuthStateChanged(async v=>{t(v?{user:v,isAuthenticated:!0,loading:!1}:{user:null,isAuthenticated:!1,loading:!1})});return()=>g()},[]);const p={...e,signupWithEmailPassword:async(g,v,w,I)=>{try{const _=await B5(Yi,g,v),S=`${w||""} ${I||""}`.trim();return await vI(_.user,{displayName:S,photoURL:null}),_.user?(await yI(_.user),ie.success("Account created successfully! A verification email has been sent to your inbox. Please verify your email to continue."),console.log(`[Auth Log] Signup successful (Email/Password) for user: ${g} at ${new Date().toISOString()}. Verification email sent.`),_.user):(ie.success("Account created successfully! You are now logged in."),console.log(`[Auth Log] Signup successful (Email/Password) for user: ${g} at ${new Date().toISOString()}`),null)}catch(_){console.error("Auth error caught during signup:",_),console.log(`[Auth Log] Signup failed (Email/Password) for user: ${g} at ${new Date().toISOString()} - Error: ${_.message}`);let S="Failed to create account.";throw _.code==="auth/email-already-in-use"?S="This email is already in use.":_.code==="auth/weak-password"?S="Password should be at least 6 characters.":_.message&&(S=_.message),ie.error(S),_}},loginWithEmailPassword:async(g,v)=>{try{await z5(Yi,g,v),ie.success("Logged in successfully!"),console.log(`[Auth Log] Login successful (Email/Password) for user: ${g} at ${new Date().toISOString()}`)}catch(w){console.error("Auth error caught during login:",w),console.log(`[Auth Log] Login failed (Email/Password) for user: ${g} at ${new Date().toISOString()} - Error: ${w.message}`);let I="Failed to log in.";throw w.code==="auth/invalid-credential"?I="Invalid email or password.":w.code==="auth/user-not-found"?I="No user found with this email.":w.code==="auth/wrong-password"?I="Incorrect password.":w.message&&(I=w.message),ie.error(I),w}},logout:async()=>{try{await n$(Yi),ie.success("Logged out successfully!"),console.log(`[Auth Log] Logout successful at ${new Date().toISOString()}`)}catch(g){console.error("Error signing out:",g),ie.error(`Failed to log out: ${g.message}`),console.log(`[Auth Log] Logout failed at ${new Date().toISOString()} - Error: ${g.message}`)}},updateUserProfile:async(g,v,w)=>{if(!e.user){ie.error("You must be logged in to update your profile.");return}try{const I=`${g} ${v}`.trim();await vI(e.user,{displayName:I,photoURL:w}),ie.success("Firebase profile updated successfully!"),console.log(`[Auth Log] Firebase profile update successful for user: ${e.user.uid} at ${new Date().toISOString()}`)}catch(I){throw console.error("Error updating Firebase profile:",I),ie.error(`Failed to update Firebase profile: ${I.message}`),console.log(`[Auth Log] Firebase profile update failed for user: ${e.user.uid} at ${new Date().toISOString()} - Error: ${I.message}`),I}},signInWithGoogle:async()=>{var g,v,w;try{t(_=>({..._,loading:!0}));const I=await s8.signInWithGoogle();if((g=I.credential)!=null&&g.idToken&&((v=I.credential)!=null&&v.accessToken)){const _=Zi.credential(I.credential.idToken,I.credential.accessToken);await iy(Yi,_),ie.success("Logged in with Google successfully!"),console.log(`[Auth Log] Google sign-in successful for user: ${(w=Yi.currentUser)==null?void 0:w.email} at ${new Date().toISOString()}`)}else throw new Error("Google sign-in did not return valid credentials.")}catch(I){console.error("Auth error caught during Google sign-in:",I),console.log(`[Auth Log] Login failed (Google) at ${new Date().toISOString()} - Error: ${I.message}`);let _="Failed to sign in with Google.";throw I.code==="auth/popup-closed-by-user"?_="Google sign-in popup closed.":I.message&&(_=I.message),ie.error(_),t(S=>({...S,loading:!1})),I}},sendVerificationEmail:async()=>{if(!e.user){ie.error("No user logged in to send verification email.");return}try{await yI(e.user),ie.success("Verification email sent! Please check your inbox."),console.log(`[Auth Log] Verification email sent to ${e.user.email} at ${new Date().toISOString()}`)}catch(g){throw console.error("Error sending verification email:",g),ie.error(`Failed to send verification email: ${g.message}`),console.log(`[Auth Log] Failed to send verification email to ${e.user.email} at ${new Date().toISOString()} - Error: ${g.message}`),g}},sendLoginLinkToEmail:async g=>{try{await W5(Yi,g,eq),window.localStorage.setItem("emailForSignIn",g),ie.success("Login link sent! Please check your email."),console.log(`[Auth Log] Email login link sent to ${g} at ${new Date().toISOString()}`)}catch(v){throw console.error("Error sending email login link:",v),ie.error(`Failed to send login link: ${v.message}`),console.log(`[Auth Log] Failed to send email login link to ${g} at ${new Date().toISOString()} - Error: ${v.message}`),v}}};return u.jsx(Ej.Provider,{value:p,children:n})},tn=()=>{const n=b.useContext(Ej);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},nq=async(n,e)=>{try{await bf(cs(Yt,"tasks"),{...n,posterId:e.uid,posterName:e.displayName||e.email||"Anonymous User",posterAvatar:e.photoURL||"https://randomuser.me/api/portraits/lego/1.jpg",datePosted:ro(),status:"open",imageUrl:n.imageUrl||"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}),ie.success("Task posted successfully!")}catch(t){throw console.error("Error adding task:",t),ie.error(`Failed to post task: ${t.message}`),t}},rq=async(n,e,t)=>{var r;try{const s=ms(Yt,"tasks",n),i=await xd(s);if(!i.exists()||((r=i.data())==null?void 0:r.posterId)!==t.uid){ie.error("You are not authorized to edit this task.");return}await Xl(s,e),ie.success("Task updated successfully!")}catch(s){throw console.error("Error updating task:",s),ie.error(`Failed to update task: ${s.message}`),s}},sq=async(n,e)=>{var t;try{const r=ms(Yt,"tasks",n),s=await xd(r);if(!s.exists()||((t=s.data())==null?void 0:t.posterId)!==e.uid){ie.error("You are not authorized to delete this task.");return}await L7(r),ie.success("Task deleted successfully!")}catch(r){throw console.error("Error deleting task:",r),ie.error(`Failed to delete task: ${r.message}`),r}},iq=async(n,e,t,r)=>{try{const s=ms(Yt,"tasks",n);await Xl(s,{status:"completed",rating:e,review:t}),ie.success("Task marked as completed and reviewed!")}catch(s){throw console.error("Error completing task with review:",s),ie.error(`Failed to complete task and add review: ${s.message}`),s}},oq=[{id:"task-open-1",title:"Clean my apartment",category:"cleaning",description:"Need a thorough cleaning for a 2-bedroom apartment. Includes kitchen, bathroom, and living area.",location:"Makati City",budget:1500,posterId:"seed-user-1",posterName:"Client A",posterAvatar:"https://randomuser.me/api/portraits/lego/2.jpg",datePosted:"2023-10-26T10:00:00Z",status:"open",imageUrl:"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"},{id:"task-open-2",title:"Assemble IKEA bookshelf",category:"assembly",description:"I need help assembling a large IKEA bookshelf. All tools provided.",location:"Quezon City",budget:800,posterId:"seed-user-2",posterName:"Client B",posterAvatar:"https://randomuser.me/api/portraits/lego/3.jpg",datePosted:"2023-10-25T14:30:00Z",status:"open",imageUrl:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],aq=[{id:"task-assigned-1",title:"Fix leaky faucet",category:"repairs",description:"My kitchen faucet is leaking and needs to be repaired or replaced.",location:"Taguig City",budget:1e3,posterId:"seed-user-3",posterName:"Client C",posterAvatar:"https://randomuser.me/api/portraits/lego/4.jpg",datePosted:"2023-10-20T09:00:00Z",status:"assigned",assignedTaskerId:"seed-tasker-1",imageUrl:"https://images.unsplash.com/photo-1581093458791-8a6b5d174d6c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],lq=[{id:"task-completed-1",title:"Deliver groceries",category:"delivery",description:"Need groceries delivered from SM Supermarket to my home.",location:"Pasig City",budget:500,posterId:"seed-user-4",posterName:"Client D",posterAvatar:"https://randomuser.me/api/portraits/lego/5.jpg",datePosted:"2023-10-15T11:00:00Z",status:"completed",assignedTaskerId:"seed-tasker-3",rating:5,review:"Fast and efficient delivery! Highly recommended.",imageUrl:"https://images.unsplash.com/photo-1541976590-713941681591?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],cq=async()=>{const n=cs(Yt,"tasks");if((await My(n)).empty){console.log("Database is empty, seeding initial tasks...");const t=[...oq,...aq,...lq];for(const r of t)await bf(n,r);ie.info("Initial demo tasks added!")}else console.log("Tasks collection is not empty, skipping seeding.")},Tj=b.createContext(void 0),uq=({children:n})=>{const{user:e,isAuthenticated:t}=tn(),[r,s]=H.useState([]),[i,a]=H.useState(!0),[c,d]=H.useState(null);H.useEffect(()=>{a(!0),d(null);const I=cs(Yt,"tasks"),_=Gh(I,px("datePosted","desc")),S=Rg(_,C=>{const R=C.docs.map(j=>{const D=j.data();let U;return D.datePosted instanceof wt?U=D.datePosted.toDate():typeof D.datePosted=="string"?U=new Date(D.datePosted):U=new Date,{id:j.id,title:D.title,category:D.category,description:D.description,location:D.location,budget:D.budget,posterId:D.posterId,posterName:D.posterName,posterAvatar:D.posterAvatar||"https://randomuser.me/api/portraits/lego/1.jpg",datePosted:U.toISOString().split("T")[0],status:D.status||"open",imageUrl:D.imageUrl||"https://images.unsplash.com/photo-1581578731548-c646952?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",assignedTaskerId:D.assignedTaskerId||void 0,assignedOfferId:D.assignedOfferId||void 0,rating:D.rating||void 0,review:D.review||void 0}});s(R),a(!1),R.length===0&&cq()},C=>{console.error("Error fetching tasks:",C),d("Failed to fetch tasks."),a(!1),ie.error("Failed to load tasks.")});return()=>S()},[]);const w={tasks:r,loading:i,error:c,addTask:async I=>{if(!t||!e){ie.error("You must be logged in to post a task.");return}await nq(I,e)},editTask:async(I,_)=>{if(!t||!e){ie.error("You must be logged in to edit a task.");return}await rq(I,_,e)},deleteTask:async I=>{if(!t||!e){ie.error("You must be logged in to delete a task.");return}await sq(I,e)},completeTaskWithReview:async(I,_,S)=>{if(!t||!e){ie.error("You must be logged in to complete and review a task.");return}await iq(I,_,S)}};return u.jsx(Tj.Provider,{value:w,children:n})},wo=()=>{const n=b.useContext(Tj);if(n===void 0)throw new Error("useTasks must be used within a TasksProvider");return n};function Pe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ef({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=dq({defaultProp:e,onChange:t}),i=n!==void 0,a=i?n:r,c=Ut(t),d=b.useCallback(f=>{if(i){const g=typeof f=="function"?f(n):f;g!==n&&c(g)}else s(f)},[i,n,s,c]);return[a,d]}function dq({defaultProp:n,onChange:e}){const t=b.useState(n),[r]=t,s=b.useRef(r),i=Ut(e);return b.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}var hq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=hq.reduce((n,e)=>{const t=Ul(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:a,...c}=s,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(d,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Sj(n,e){n&&od.flushSync(()=>n.dispatchEvent(e))}var fq="DismissableLayer",gx="dismissableLayer.update",pq="dismissableLayer.pointerDownOutside",mq="dismissableLayer.focusOutside",f1,Ij=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vy=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:c,...d}=n,f=b.useContext(Ij),[p,g]=b.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=b.useState({}),I=Qe(e,P=>g(P)),_=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(S),R=p?_.indexOf(p):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,D=R>=C,U=vq(P=>{const A=P.target,O=[...f.branches].some(M=>M.contains(A));!D||O||(s==null||s(P),a==null||a(P),P.defaultPrevented||c==null||c())},v),z=wq(P=>{const A=P.target;[...f.branches].some(M=>M.contains(A))||(i==null||i(P),a==null||a(P),P.defaultPrevented||c==null||c())},v);return mP(P=>{R===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&c&&(P.preventDefault(),c()))},v),b.useEffect(()=>{if(p)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(f1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),p1(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=f1)}},[p,v,t,f]),b.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),p1())},[p,f]),b.useEffect(()=>{const P=()=>w({});return document.addEventListener(gx,P),()=>document.removeEventListener(gx,P)},[]),u.jsx(Je.div,{...d,ref:I,style:{pointerEvents:j?D?"auto":"none":void 0,...n.style},onFocusCapture:Pe(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Pe(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Pe(n.onPointerDownCapture,U.onPointerDownCapture)})});Vy.displayName=fq;var gq="DismissableLayerBranch",yq=b.forwardRef((n,e)=>{const t=b.useContext(Ij),r=b.useRef(null),s=Qe(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),u.jsx(Je.div,{...n,ref:s})});yq.displayName=gq;function vq(n,e=globalThis==null?void 0:globalThis.document){const t=Ut(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let d=function(){kj(pq,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function wq(n,e=globalThis==null?void 0:globalThis.document){const t=Ut(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&kj(mq,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function p1(){const n=new CustomEvent(gx);document.dispatchEvent(n)}function kj(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Sj(s,i):s.dispatchEvent(i)}var i0="focusScope.autoFocusOnMount",o0="focusScope.autoFocusOnUnmount",m1={bubbles:!1,cancelable:!0},xq="FocusScope",Fy=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[c,d]=b.useState(null),f=Ut(s),p=Ut(i),g=b.useRef(null),v=Qe(e,_=>d(_)),w=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let _=function(j){if(w.paused||!c)return;const D=j.target;c.contains(D)?g.current=D:Xo(g.current,{select:!0})},S=function(j){if(w.paused||!c)return;const D=j.relatedTarget;D!==null&&(c.contains(D)||Xo(g.current,{select:!0}))},C=function(j){if(document.activeElement===document.body)for(const U of j)U.removedNodes.length>0&&Xo(c)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const R=new MutationObserver(C);return c&&R.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),R.disconnect()}}},[r,c,w.paused]),b.useEffect(()=>{if(c){y1.add(w);const _=document.activeElement;if(!c.contains(_)){const C=new CustomEvent(i0,m1);c.addEventListener(i0,f),c.dispatchEvent(C),C.defaultPrevented||(_q(Iq(Pj(c)),{select:!0}),document.activeElement===_&&Xo(c))}return()=>{c.removeEventListener(i0,f),setTimeout(()=>{const C=new CustomEvent(o0,m1);c.addEventListener(o0,p),c.dispatchEvent(C),C.defaultPrevented||Xo(_??document.body,{select:!0}),c.removeEventListener(o0,p),y1.remove(w)},0)}}},[c,f,p,w]);const I=b.useCallback(_=>{if(!t&&!r||w.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,C=document.activeElement;if(S&&C){const R=_.currentTarget,[j,D]=bq(R);j&&D?!_.shiftKey&&C===D?(_.preventDefault(),t&&Xo(j,{select:!0})):_.shiftKey&&C===j&&(_.preventDefault(),t&&Xo(D,{select:!0})):C===R&&_.preventDefault()}},[t,r,w.paused]);return u.jsx(Je.div,{tabIndex:-1,...a,ref:v,onKeyDown:I})});Fy.displayName=xq;function _q(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Xo(r,{select:e}),document.activeElement!==t)return}function bq(n){const e=Pj(n),t=g1(e,n),r=g1(e.reverse(),n);return[t,r]}function Pj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function g1(n,e){for(const t of n)if(!Eq(t,{upTo:e}))return t}function Eq(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Tq(n){return n instanceof HTMLInputElement&&"select"in n}function Xo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Tq(n)&&e&&n.select()}}var y1=Sq();function Sq(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=v1(n,e),n.unshift(e)},remove(e){var t;n=v1(n,e),(t=n[0])==null||t.resume()}}}function v1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Iq(n){return n.filter(e=>e.tagName!=="A")}var kq="Portal",Uy=b.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[s,i]=b.useState(!1);Bt(()=>i(!0),[]);const a=t||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?fP.createPortal(u.jsx(Je.div,{...r,ref:e}),a):null});Uy.displayName=kq;function Pq(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var ys=n=>{const{present:e,children:t}=n,r=Cq(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=Qe(r.ref,Aq(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};ys.displayName="Presence";function Cq(n){const[e,t]=b.useState(),r=b.useRef({}),s=b.useRef(n),i=b.useRef("none"),a=n?"mounted":"unmounted",[c,d]=Pq(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const f=bm(r.current);i.current=c==="mounted"?f:"none"},[c]),Bt(()=>{const f=r.current,p=s.current;if(p!==n){const v=i.current,w=bm(f);n?d("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(p&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Bt(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,g=w=>{const _=bm(r.current).includes(w.animationName);if(w.target===e&&_&&(d("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},v=w=>{w.target===e&&(i.current=bm(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:b.useCallback(f=>{f&&(r.current=getComputedStyle(f)),t(f)},[])}}function bm(n){return(n==null?void 0:n.animationName)||"none"}function Aq(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var a0=0;function gb(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??w1()),document.body.insertAdjacentElement("beforeend",n[1]??w1()),a0++,()=>{a0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a0--}},[])}function w1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var pi=function(){return pi=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pi.apply(this,arguments)};function Cj(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Rq(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Qm="right-scroll-bar-position",Jm="width-before-scroll-bar",Nq="with-scroll-bars-hidden",jq="--removed-body-scroll-bar-size";function l0(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Oq(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var Dq=typeof window<"u"?b.useLayoutEffect:b.useEffect,x1=new WeakMap;function Mq(n,e){var t=Oq(null,function(r){return n.forEach(function(s){return l0(s,r)})});return Dq(function(){var r=x1.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(c){i.has(c)||l0(c,null)}),i.forEach(function(c){s.has(c)||l0(c,a)})}x1.set(t,n)},[n]),t}function Lq(n){return n}function Vq(n,e){e===void 0&&(e=Lq);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(c){return i(c)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(i),a=t}var d=function(){var p=a;a=[],p.forEach(i)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(p){a.push(p),f()},filter:function(p){return a=a.filter(p),t}}}};return s}function Fq(n){n===void 0&&(n={});var e=Vq(null);return e.options=pi({async:!0,ssr:!1},n),e}var Aj=function(n){var e=n.sideCar,t=Cj(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,pi({},t))};Aj.isSideCarExport=!0;function Uq(n,e){return n.useMedium(e),Aj}var Rj=Fq(),c0=function(){},$y=b.forwardRef(function(n,e){var t=b.useRef(null),r=b.useState({onScrollCapture:c0,onWheelCapture:c0,onTouchMoveCapture:c0}),s=r[0],i=r[1],a=n.forwardProps,c=n.children,d=n.className,f=n.removeScrollBar,p=n.enabled,g=n.shards,v=n.sideCar,w=n.noIsolation,I=n.inert,_=n.allowPinchZoom,S=n.as,C=S===void 0?"div":S,R=n.gapMode,j=Cj(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,U=Mq([t,e]),z=pi(pi({},j),s);return b.createElement(b.Fragment,null,p&&b.createElement(D,{sideCar:Rj,removeScrollBar:f,shards:g,noIsolation:w,inert:I,setCallbacks:i,allowPinchZoom:!!_,lockRef:t,gapMode:R}),a?b.cloneElement(b.Children.only(c),pi(pi({},z),{ref:U})):b.createElement(C,pi({},z,{className:d,ref:U}),c))});$y.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$y.classNames={fullWidth:Jm,zeroRight:Qm};var $q=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Bq(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=$q();return e&&n.setAttribute("nonce",e),n}function zq(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Wq(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var qq=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Bq())&&(zq(e,t),Wq(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Hq=function(){var n=qq();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Nj=function(){var n=Hq(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},Gq={left:0,top:0,right:0,gap:0},u0=function(n){return parseInt(n||"",10)||0},Kq=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[u0(t),u0(r),u0(s)]},Yq=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Gq;var e=Kq(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Qq=Nj(),Pu="data-scroll-locked",Jq=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Nq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Pu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qm,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Jm,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Qm," .").concat(Qm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jm," .").concat(Jm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pu,`] {
    `).concat(jq,": ").concat(c,`px;
  }
`)},_1=function(){var n=parseInt(document.body.getAttribute(Pu)||"0",10);return isFinite(n)?n:0},Xq=function(){b.useEffect(function(){return document.body.setAttribute(Pu,(_1()+1).toString()),function(){var n=_1()-1;n<=0?document.body.removeAttribute(Pu):document.body.setAttribute(Pu,n.toString())}},[])},Zq=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;Xq();var i=b.useMemo(function(){return Yq(s)},[s]);return b.createElement(Qq,{styles:Jq(i,!e,s,t?"":"!important")})},yx=!1;if(typeof window<"u")try{var Em=Object.defineProperty({},"passive",{get:function(){return yx=!0,!0}});window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{yx=!1}var tu=yx?{passive:!1}:!1,eH=function(n){return n.tagName==="TEXTAREA"},jj=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!eH(n)&&t[e]==="visible")},tH=function(n){return jj(n,"overflowY")},nH=function(n){return jj(n,"overflowX")},b1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Oj(n,r);if(s){var i=Dj(n,r),a=i[1],c=i[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},rH=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},sH=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},Oj=function(n,e){return n==="v"?tH(e):nH(e)},Dj=function(n,e){return n==="v"?rH(e):sH(e)},iH=function(n,e){return n==="h"&&e==="rtl"?-1:1},oH=function(n,e,t,r,s){var i=iH(n,window.getComputedStyle(e).direction),a=i*r,c=t.target,d=e.contains(c),f=!1,p=a>0,g=0,v=0;do{var w=Dj(n,c),I=w[0],_=w[1],S=w[2],C=_-S-i*I;(I||C)&&Oj(n,c)&&(g+=C,v+=I),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(p&&Math.abs(g)<1||!p&&Math.abs(v)<1)&&(f=!0),f},Tm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},E1=function(n){return[n.deltaX,n.deltaY]},T1=function(n){return n&&"current"in n?n.current:n},aH=function(n,e){return n[0]===e[0]&&n[1]===e[1]},lH=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},cH=0,nu=[];function uH(n){var e=b.useRef([]),t=b.useRef([0,0]),r=b.useRef(),s=b.useState(cH++)[0],i=b.useState(Nj)[0],a=b.useRef(n);b.useEffect(function(){a.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var _=Rq([n.lockRef.current],(n.shards||[]).map(T1),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var c=b.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!a.current.allowPinchZoom;var C=Tm(_),R=t.current,j="deltaX"in _?_.deltaX:R[0]-C[0],D="deltaY"in _?_.deltaY:R[1]-C[1],U,z=_.target,P=Math.abs(j)>Math.abs(D)?"h":"v";if("touches"in _&&P==="h"&&z.type==="range")return!1;var A=b1(P,z);if(!A)return!0;if(A?U=P:(U=P==="v"?"h":"v",A=b1(P,z)),!A)return!1;if(!r.current&&"changedTouches"in _&&(j||D)&&(r.current=U),!U)return!0;var O=r.current||U;return oH(O,S,_,O==="h"?j:D)},[]),d=b.useCallback(function(_){var S=_;if(!(!nu.length||nu[nu.length-1]!==i)){var C="deltaY"in S?E1(S):Tm(S),R=e.current.filter(function(U){return U.name===S.type&&(U.target===S.target||S.target===U.shadowParent)&&aH(U.delta,C)})[0];if(R&&R.should){S.cancelable&&S.preventDefault();return}if(!R){var j=(a.current.shards||[]).map(T1).filter(Boolean).filter(function(U){return U.contains(S.target)}),D=j.length>0?c(S,j[0]):!a.current.noIsolation;D&&S.cancelable&&S.preventDefault()}}},[]),f=b.useCallback(function(_,S,C,R){var j={name:_,delta:S,target:C,should:R,shadowParent:dH(C)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(D){return D!==j})},1)},[]),p=b.useCallback(function(_){t.current=Tm(_),r.current=void 0},[]),g=b.useCallback(function(_){f(_.type,E1(_),_.target,c(_,n.lockRef.current))},[]),v=b.useCallback(function(_){f(_.type,Tm(_),_.target,c(_,n.lockRef.current))},[]);b.useEffect(function(){return nu.push(i),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,tu),document.addEventListener("touchmove",d,tu),document.addEventListener("touchstart",p,tu),function(){nu=nu.filter(function(_){return _!==i}),document.removeEventListener("wheel",d,tu),document.removeEventListener("touchmove",d,tu),document.removeEventListener("touchstart",p,tu)}},[]);var w=n.removeScrollBar,I=n.inert;return b.createElement(b.Fragment,null,I?b.createElement(i,{styles:lH(s)}):null,w?b.createElement(Zq,{gapMode:n.gapMode}):null)}function dH(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const hH=Uq(Rj,uH);var By=b.forwardRef(function(n,e){return b.createElement($y,pi({},n,{ref:e,sideCar:hH}))});By.classNames=$y.classNames;var fH=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},ru=new WeakMap,Sm=new WeakMap,Im={},d0=0,Mj=function(n){return n&&(n.host||Mj(n.parentNode))},pH=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=Mj(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},mH=function(n,e,t,r){var s=pH(e,Array.isArray(n)?n:[n]);Im[t]||(Im[t]=new WeakMap);var i=Im[t],a=[],c=new Set,d=new Set(s),f=function(g){!g||c.has(g)||(c.add(g),f(g.parentNode))};s.forEach(f);var p=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(c.has(v))p(v);else try{var w=v.getAttribute(r),I=w!==null&&w!=="false",_=(ru.get(v)||0)+1,S=(i.get(v)||0)+1;ru.set(v,_),i.set(v,S),a.push(v),_===1&&I&&Sm.set(v,!0),S===1&&v.setAttribute(t,"true"),I||v.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",v,C)}})};return p(e),c.clear(),d0++,function(){a.forEach(function(g){var v=ru.get(g)-1,w=i.get(g)-1;ru.set(g,v),i.set(g,w),v||(Sm.has(g)||g.removeAttribute(r),Sm.delete(g)),w||g.removeAttribute(t)}),d0--,d0||(ru=new WeakMap,ru=new WeakMap,Sm=new WeakMap,Im={})}},yb=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=fH(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),mH(r,s,t,"aria-hidden")):function(){return null}},vb="Dialog",[Lj,Vj]=gs(vb),[gH,Fs]=Lj(vb),Fj=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,c=b.useRef(null),d=b.useRef(null),[f=!1,p]=Ef({prop:r,defaultProp:s,onChange:i});return u.jsx(gH,{scope:e,triggerRef:c,contentRef:d,contentId:so(),titleId:so(),descriptionId:so(),open:f,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(g=>!g),[p]),modal:a,children:t})};Fj.displayName=vb;var Uj="DialogTrigger",$j=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Fs(Uj,t),i=Qe(e,s.triggerRef);return u.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_b(s.open),...r,ref:i,onClick:Pe(n.onClick,s.onOpenToggle)})});$j.displayName=Uj;var wb="DialogPortal",[yH,Bj]=Lj(wb,{forceMount:void 0}),zj=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=Fs(wb,e);return u.jsx(yH,{scope:e,forceMount:t,children:b.Children.map(r,a=>u.jsx(ys,{present:t||i.open,children:u.jsx(Uy,{asChild:!0,container:s,children:a})}))})};zj.displayName=wb;var Ng="DialogOverlay",Wj=b.forwardRef((n,e)=>{const t=Bj(Ng,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Fs(Ng,n.__scopeDialog);return i.modal?u.jsx(ys,{present:r||i.open,children:u.jsx(wH,{...s,ref:e})}):null});Wj.displayName=Ng;var vH=Ul("DialogOverlay.RemoveScroll"),wH=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Fs(Ng,t);return u.jsx(By,{as:vH,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Je.div,{"data-state":_b(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ec="DialogContent",qj=b.forwardRef((n,e)=>{const t=Bj(ec,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Fs(ec,n.__scopeDialog);return u.jsx(ys,{present:r||i.open,children:i.modal?u.jsx(xH,{...s,ref:e}):u.jsx(_H,{...s,ref:e})})});qj.displayName=ec;var xH=b.forwardRef((n,e)=>{const t=Fs(ec,n.__scopeDialog),r=b.useRef(null),s=Qe(e,t.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return yb(i)},[]),u.jsx(Hj,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Pe(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&i.preventDefault()}),onFocusOutside:Pe(n.onFocusOutside,i=>i.preventDefault())})}),_H=b.forwardRef((n,e)=>{const t=Fs(ec,n.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return u.jsx(Hj,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,c;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var d,f;(d=n.onInteractOutside)==null||d.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((f=t.triggerRef.current)==null?void 0:f.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Hj=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,c=Fs(ec,t),d=b.useRef(null),f=Qe(e,d);return gb(),u.jsxs(u.Fragment,{children:[u.jsx(Fy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(Vy,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":_b(c.open),...a,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(EH,{titleId:c.titleId}),u.jsx(SH,{contentRef:d,descriptionId:c.descriptionId})]})]})}),xb="DialogTitle",Gj=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Fs(xb,t);return u.jsx(Je.h2,{id:s.titleId,...r,ref:e})});Gj.displayName=xb;var Kj="DialogDescription",Yj=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Fs(Kj,t);return u.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});Yj.displayName=Kj;var Qj="DialogClose",Jj=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Fs(Qj,t);return u.jsx(Je.button,{type:"button",...r,ref:e,onClick:Pe(n.onClick,()=>s.onOpenChange(!1))})});Jj.displayName=Qj;function _b(n){return n?"open":"closed"}var Xj="DialogTitleWarning",[bH,Zj]=t4(Xj,{contentName:ec,titleName:xb,docsSlug:"dialog"}),EH=({titleId:n})=>{const e=Zj(Xj),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},TH="DialogDescriptionWarning",SH=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Zj(TH).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},e2=Fj,IH=$j,t2=zj,bb=Wj,Eb=qj,Tb=Gj,Sb=Yj,Ib=Jj;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},d)=>b.createElement("svg",{ref:d,...PH,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:n2("lucide",s),...c},[...a.map(([f,p])=>b.createElement(f,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(n,e)=>{const t=b.forwardRef(({className:r,...s},i)=>b.createElement(CH,{ref:i,iconNode:e,className:n2(`lucide-${kH(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=Be("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Be("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Be("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=Be("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=Be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=Be("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=Be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=Be("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=Be("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Be("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=Be("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=Be("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=Be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=Be("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=Be("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=Be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Be("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=Be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=Be("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=Be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=Be("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=Be("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lc=e2,rG=t2,m2=b.forwardRef(({className:n,...e},t)=>u.jsx(bb,{ref:t,className:Ae("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));m2.displayName=bb.displayName;const Da=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(rG,{children:[u.jsx(m2,{}),u.jsxs(Eb,{ref:r,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",n),...t,children:[e,u.jsxs(Ib,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(qy,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Da.displayName=Eb.displayName;const Ma=({className:n,...e})=>u.jsx("div",{className:Ae("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Ma.displayName="DialogHeader";const La=({className:n,...e})=>u.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});La.displayName="DialogFooter";const Va=b.forwardRef(({className:n,...e},t)=>u.jsx(Tb,{ref:t,className:Ae("text-lg font-semibold leading-none tracking-tight",n),...e}));Va.displayName=Tb.displayName;const Fa=b.forwardRef(({className:n,...e},t)=>u.jsx(Sb,{ref:t,className:Ae("text-sm text-muted-foreground",n),...e}));Fa.displayName=Sb.displayName;const bt=b.forwardRef(({className:n,type:e,...t},r)=>u.jsx("input",{type:e,className:Ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));bt.displayName="Input";var sG="Label",g2=b.forwardRef((n,e)=>u.jsx(Je.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));g2.displayName=sG;var y2=g2;const iG=Zx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yt=b.forwardRef(({className:n,...e},t)=>u.jsx(y2,{ref:t,className:Ae(iG(),n),...e}));yt.displayName=y2.displayName;const oG=({isOpen:n,onClose:e,onSwitchToSignup:t})=>{const{loginWithEmailPassword:r,signInWithGoogle:s,sendLoginLinkToEmail:i,loading:a}=tn(),[c,d]=H.useState(""),[f,p]=H.useState(""),[g,v]=H.useState(!1),w=g||a,I=async()=>{if(!c||!f){ie.error("Please enter both email and password.");return}v(!0);try{await r(c,f),e()}catch{}finally{v(!1)}},_=async()=>{v(!0);try{e(),await s()}catch{v(!1)}},S=async()=>{if(!c){ie.error("Please enter your email to receive a login link.");return}v(!0);try{await i(c),e()}catch{}finally{v(!1)}},C=()=>{e(),t()};return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[425px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Login to Tasko"}),u.jsx(Fa,{className:"text-[hsl(var(--text-light))]",children:"Access your tasks and connect with taskers."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"email",children:"Email"}),u.jsx(bt,{id:"email",type:"email",placeholder:"m@example.com",value:c,onChange:R=>d(R.target.value),disabled:w})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"password",children:"Password"}),u.jsx(bt,{id:"password",type:"password",value:f,onChange:R=>p(R.target.value),disabled:w})]}),u.jsx(fe,{onClick:I,disabled:w,className:"w-full bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:g&&!a?"Logging In...":"Login with Email"}),u.jsxs(fe,{onClick:S,disabled:w,variant:"outline",className:"w-full flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700",children:[u.jsx(zy,{size:20})," ",g&&!a?"Sending Link...":"Login with Email Link"]}),u.jsxs("div",{className:"relative my-4",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("span",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:u.jsx("span",{className:"bg-white px-2 text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Or continue with"})})]}),u.jsxs(fe,{onClick:_,disabled:w,variant:"outline",className:"w-full flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700",children:[u.jsx(jH,{size:20})," ",w?"Signing In...":"Sign in with Google"]})]}),u.jsxs(La,{className:"text-sm text-center text-[hsl(var(--text-light))]",children:["Don't have an account? ",u.jsx(fe,{variant:"link",className:"p-0 h-auto text-[hsl(var(--primary-color))] hover:text-[hsl(var(--primary-color))]",onClick:C,children:"Sign Up"})]})]})})},aG=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>md(async()=>{const{default:r}=await Promise.resolve().then(()=>bd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class kb extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class S1 extends kb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class I1 extends kb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class k1 extends kb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wx;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(wx||(wx={}));var lG=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class cG{constructor(e,{headers:t={},customFetch:r,region:s=wx.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=aG(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return lG(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a,signal:c}=t;let d={},{region:f}=t;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(d["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=a):typeof a=="string"?(d["Content-Type"]="text/plain",g=a):typeof FormData<"u"&&a instanceof FormData?g=a:(d["Content-Type"]="application/json",g=JSON.stringify(a)));const v=yield this.fetch(p.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:g,signal:c}).catch(S=>{throw S.name==="AbortError"?S:new S1(S)}),w=v.headers.get("x-relay-error");if(w&&w==="true")throw new I1(v);if(!v.ok)throw new k1(v);let I=((r=v.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return I==="application/json"?_=yield v.json():I==="application/octet-stream"?_=yield v.blob():I==="text/event-stream"?_=v:I==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new S1(s)}:{data:null,error:s,response:s instanceof k1||s instanceof I1?s.context:void 0}}})}}var kn={},su={},iu={},ou={},au={},lu={},uG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sd=uG();const dG=sd.fetch,v2=sd.fetch.bind(sd),w2=sd.Headers,hG=sd.Request,fG=sd.Response,bd=Object.freeze(Object.defineProperty({__proto__:null,Headers:w2,Request:hG,Response:fG,default:v2,fetch:dG},Symbol.toStringTag,{value:"Module"})),pG=HL(bd);var km={},P1;function x2(){if(P1)return km;P1=1,Object.defineProperty(km,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return km.default=n,km}var C1;function _2(){if(C1)return lu;C1=1;var n=lu&&lu.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lu,"__esModule",{value:!0});const e=n(pG),t=n(x2());class r{constructor(i){var a,c;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(c=i.isMaybeSingle)!==null&&c!==void 0?c:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,g,v,w;let I=null,_=null,S=null,C=f.status,R=f.statusText;if(f.ok){if(this.method!=="HEAD"){const z=await f.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?_=z:_=JSON.parse(z))}const D=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),U=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");D&&U&&U.length>1&&(S=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(I={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,C=406,R="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const D=await f.text();try{I=JSON.parse(D),Array.isArray(I)&&f.status===404&&(_=[],I=null,C=200,R="OK")}catch{f.status===404&&D===""?(C=204,R="No Content"):I={message:D}}if(I&&this.isMaybeSingle&&(!((w=I==null?void 0:I.details)===null||w===void 0)&&w.includes("0 rows"))&&(I=null,C=200,R="OK"),I&&this.shouldThrowOnError)throw new t.default(I)}return{error:I,data:_,count:S,status:C,statusText:R}});return this.shouldThrowOnError||(d=d.catch(f=>{var p,g,v;return{error:{message:`${(p=f==null?void 0:f.name)!==null&&p!==void 0?p:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(g=f==null?void 0:f.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,a)}returns(){return this}overrideTypes(){return this}}return lu.default=r,lu}var A1;function b2(){if(A1)return au;A1=1;var n=au&&au.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(au,"__esModule",{value:!0});const e=n(_2());class t extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:c=a}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var p;const g=[s?"analyze":null,i?"verbose":null,a?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return au.default=t,au}var R1;function Pb(){if(R1)return ou;R1=1;var n=ou&&ou.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ou,"__esModule",{value:!0});const e=n(b2());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${d}fts${f}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return ou.default=t,ou}var N1;function E2(){if(N1)return iu;N1=1;var n=iu&&iu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(iu,"__esModule",{value:!0});const e=n(Pb());class t{constructor(s,{headers:i={},schema:a,fetch:c}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=c}select(s,{head:i=!1,count:a}={}){const c=i?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var c;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(f.length>0){const p=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:c,defaultToNull:d=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(g.length>0){const v=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:i}={}){var a;const c="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return iu.default=t,iu}var j1;function mG(){if(j1)return su;j1=1;var n=su&&su.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(su,"__esModule",{value:!0});const e=n(E2()),t=n(Pb());class r{constructor(i,{headers:a={},schema:c,fetch:d}={}){this.url=i,this.headers=new Headers(a),this.schemaName=c,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:c=!1,get:d=!1,count:f}={}){var p;let g;const v=new URL(`${this.url}/rpc/${i}`);let w;c||d?(g=c?"HEAD":"GET",Object.entries(a).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(g="POST",w=a);const I=new Headers(this.headers);return f&&I.set("Prefer",`count=${f}`),new t.default({method:g,url:v,headers:I,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return su.default=r,su}var O1;function gG(){if(O1)return kn;O1=1;var n=kn&&kn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(kn,"__esModule",{value:!0}),kn.PostgrestError=kn.PostgrestBuilder=kn.PostgrestTransformBuilder=kn.PostgrestFilterBuilder=kn.PostgrestQueryBuilder=kn.PostgrestClient=void 0;const e=n(mG());kn.PostgrestClient=e.default;const t=n(E2());kn.PostgrestQueryBuilder=t.default;const r=n(Pb());kn.PostgrestFilterBuilder=r.default;const s=n(b2());kn.PostgrestTransformBuilder=s.default;const i=n(_2());kn.PostgrestBuilder=i.default;const a=n(x2());return kn.PostgrestError=a.default,kn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},kn}var yG=gG();const vG=Fx(yG),{PostgrestClient:wG,PostgrestQueryBuilder:wee,PostgrestFilterBuilder:xee,PostgrestTransformBuilder:_ee,PostgrestBuilder:bee,PostgrestError:Eee}=vG;class xG{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const _G="2.15.5",bG=`realtime-js/${_G}`,EG="1.0.0",xx=1e4,TG=1e3,SG=100;var Yh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Yh||(Yh={}));var yn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(yn||(yn={}));var Os;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Os||(Os={}));var _x;(function(n){n.websocket="websocket"})(_x||(_x={}));var Il;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Il||(Il={}));class IG{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const c=r.decode(e.slice(a,a+s));a=a+s;const d=r.decode(e.slice(a,a+i));a=a+i;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class T2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Pt||(Pt={}));const D1=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=kG(a,n,e,s),i),{})},kG=(n,e,t,r)=>{const s=e.find(c=>c.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?S2(i,a):bx(a)},S2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return RG(e,t)}switch(n){case Pt.bool:return PG(e);case Pt.float4:case Pt.float8:case Pt.int2:case Pt.int4:case Pt.int8:case Pt.numeric:case Pt.oid:return CG(e);case Pt.json:case Pt.jsonb:return AG(e);case Pt.timestamp:return NG(e);case Pt.abstime:case Pt.date:case Pt.daterange:case Pt.int4range:case Pt.int8range:case Pt.money:case Pt.reltime:case Pt.text:case Pt.time:case Pt.timestamptz:case Pt.timetz:case Pt.tsrange:case Pt.tstzrange:return bx(e);default:return bx(e)}},bx=n=>n,PG=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},CG=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},AG=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},RG=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(c=>S2(e,c))}return n},NG=n=>typeof n=="string"?n.replace(" ","T"):n,I2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class f0{constructor(e,t,r={},s=xx){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var M1;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(M1||(M1={}));class Qh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qh.syncState(this.state,s,i,a),this.pendingDiffs.forEach(d=>{this.state=Qh.syncDiff(this.state,d,i,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qh.syncDiff(this.state,s,i,a),c())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),c={},d={};return this.map(i,(f,p)=>{a[f]||(d[f]=p)}),this.map(a,(f,p)=>{const g=i[f];if(g){const v=p.map(S=>S.presence_ref),w=g.map(S=>S.presence_ref),I=p.filter(S=>w.indexOf(S.presence_ref)<0),_=g.filter(S=>v.indexOf(S.presence_ref)<0);I.length>0&&(c[f]=I),_.length>0&&(d[f]=_)}else c[f]=p}),this.syncDiff(i,{joins:c,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,d)=>{var f;const p=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),p.length>0){const g=e[c].map(w=>w.presence_ref),v=p.filter(w=>g.indexOf(w.presence_ref)<0);e[c].unshift(...v)}r(c,p,d)}),this.map(a,(c,d)=>{let f=e[c];if(!f)return;const p=d.map(g=>g.presence_ref);f=f.filter(g=>p.indexOf(g.presence_ref)<0),e[c]=f,s(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var L1;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(L1||(L1={}));var Jh;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Jh||(Jh={}));var Qi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Qi||(Qi={}));class Cb{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new f0(this,Os.join,this.params,this.timeout),this.rejoinTimer=new T2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Os.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Qh(this),this.broadcastEndpointURL=I2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:a,presence:c,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Jh.PRESENCE]&&this.bindings[Jh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},v={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Qi.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Qi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var I;if(this.socket.setAuth(),w===void 0){e==null||e(Qi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(I=_==null?void 0:_.length)!==null&&I!==void 0?I:0,C=[];for(let R=0;R<S;R++){const j=_[R],{filter:{event:D,schema:U,table:z,filter:P}}=j,A=w&&w[R];if(A&&A.event===D&&A.schema===U&&A.table===z&&A.filter===P)C.push(Object.assign(Object.assign({},j),{id:A.id}));else{this.unsubscribe(),this.state=yn.errored,e==null||e(Qi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Qi.SUBSCRIBED);return}}).receive("error",w=>{this.state=yn.errored,e==null||e(Qi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Qi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===yn.joined&&e===Jh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Os.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new f0(this,Os.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new f0(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>SG){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:p}=Os;if(r&&[c,d,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var I,_,S;return((I=w.filter)===null||I===void 0?void 0:I.event)==="*"||((S=(_=w.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(w=>w.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(w=>{var I,_,S,C,R,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const D=w.id,U=(I=w.filter)===null||I===void 0?void 0:I.event;return D&&((_=t.ids)===null||_===void 0?void 0:_.includes(D))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const D=(R=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return D==="*"||D===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof v=="object"&&"ids"in v){const I=v.data,{schema:_,table:S,commit_timestamp:C,type:R,errors:j}=I;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:C,eventType:R,new:{},old:{},errors:j}),this._getPayloadRecords(I))}w.callback(v,r)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Cb.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Os.close,{},e)}_onError(e){this._on(Os.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=D1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=D1(e.columns,e.old_record)),t}}const p0=()=>{},Pm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jG=[1e3,2e3,5e3,1e4],OG=1e4,DG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MG{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xx,this.transport=null,this.heartbeatIntervalMs=Pm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=p0,this.ref=0,this.reconnectTimer=null,this.logger=p0,this.conn=null,this.sendBuffer=[],this.serializer=new IG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>md(async()=>{const{default:c}=await Promise.resolve().then(()=>bd);return{default:c}},void 0).then(({default:c})=>c(...a)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_x.websocket}`,this.httpEndpoint=I2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xG.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EG}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yh.connecting:return Il.Connecting;case Yh.open:return Il.Open;case Yh.closing:return Il.Closing;default:return Il.Closed}}isConnected(){return this.connectionState()===Il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Cb(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(TG,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Pm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,c=a?`(${a})`:"",d=i.status||"";this.log("receive",`${d} ${r} ${s} ${c}`.trim(),i),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Os.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([DG],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:bG};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Os.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new T2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,c,d,f,p;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:xx,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Pm.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:p0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:g=>jG[g-1]||OG,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(g,v)=>v(JSON.stringify(g)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ab extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function an(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class LG extends Ab{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ex extends Ab{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var VG=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const k2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>md(async()=>{const{default:r}=await Promise.resolve().then(()=>bd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},FG=()=>VG(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield md(()=>Promise.resolve().then(()=>bd),void 0)).Response:Response}),Tx=n=>{if(Array.isArray(n))return n.map(t=>Tx(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Tx(r)}),e},UG=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var cc=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const m0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$G=(n,e,t)=>cc(void 0,void 0,void 0,function*(){const r=yield FG();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new LG(m0(s),i,a))}).catch(s=>{e(new Ex(m0(s),s))}):e(new Ex(m0(n),n))}),BG=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(UG(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Kf(n,e,t,r,s,i){return cc(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(t,BG(e,r,s,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>$G(d,c,r))})})}function jg(n,e,t,r){return cc(this,void 0,void 0,function*(){return Kf(n,"GET",e,t,r)})}function ci(n,e,t,r,s){return cc(this,void 0,void 0,function*(){return Kf(n,"POST",e,r,s,t)})}function Sx(n,e,t,r,s){return cc(this,void 0,void 0,function*(){return Kf(n,"PUT",e,r,s,t)})}function zG(n,e,t,r){return cc(this,void 0,void 0,function*(){return Kf(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function P2(n,e,t,r,s){return cc(this,void 0,void 0,function*(){return Kf(n,"DELETE",e,r,s,t)})}var WG=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class qG{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return WG(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(an(e))return{data:null,error:e};throw e}})}}var HG=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class GG{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new qG(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return HG(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(an(e))return{data:null,error:e};throw e}})}}var br=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const KG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class YG{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=k2(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return br(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},V1),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const f=this._removeEmptyFolders(t),p=this._getFinalPath(f),g=yield(e=="PUT"?Sx:ci)(this.fetch,`${this.url}/object/${p}`,i,Object.assign({headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(an(i))return{data:null,error:i};throw i}})}upload(e,t,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return br(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:V1.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const g=yield Sx(this.fetch,c.toString(),d,{headers:p});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(an(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return br(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield ci(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),c=a.searchParams.get("token");if(!c)throw new Ab("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r))return{data:null,error:r};throw r}})}update(e,t,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return br(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}})}copy(e,t,r){return br(this,void 0,void 0,function*(){try{return{data:{path:(yield ci(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return br(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ci(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return br(this,void 0,void 0,function*(){try{const s=yield ci(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"",c=this._getFinalPath(e),d=()=>jg(this.fetch,`${this.url}/${s}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new GG(d,this.shouldThrowOnError)}info(e){return br(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield jg(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Tx(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r))return{data:null,error:r};throw r}})}exists(e){return br(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield zG(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r)&&r instanceof Ex){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return br(this,void 0,void 0,function*(){try{return{data:yield P2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(an(t))return{data:null,error:t};throw t}})}list(e,t,r){return br(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},KG),t),{prefix:e||""});return{data:yield ci(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}})}listV2(e,t){return br(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ci(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const QG="2.12.2",JG={"X-Client-Info":`storage-js/${QG}`};var cu=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class XG{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},JG),t),this.fetch=k2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return cu(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(an(e))return{data:null,error:e};throw e}})}getBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(an(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return cu(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return cu(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(an(r))return{data:null,error:r};throw r}})}emptyBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(an(t))return{data:null,error:t};throw t}})}deleteBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield P2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(an(t))return{data:null,error:t};throw t}})}}class ZG extends XG{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new YG(this.url,this.headers,e,this.fetch)}}const eK="2.58.0";let Rh="";typeof Deno<"u"?Rh="deno":typeof document<"u"?Rh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rh="react-native":Rh="node";const tK={"X-Client-Info":`supabase-js-${Rh}/${eK}`},nK={headers:tK},rK={schema:"public"},sK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iK={};var oK=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const aK=n=>{let e;return n?e=n:typeof fetch>"u"?e=v2:e=fetch,(...t)=>e(...t)},lK=()=>typeof Headers>"u"?w2:Headers,cK=(n,e,t)=>{const r=aK(t),s=lK();return(i,a)=>oK(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:n;let f=new s(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},a),{headers:f}))})};var uK=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};function dK(n){return n.endsWith("/")?n:n+"/"}function hK(n,e){var t,r;const{db:s,auth:i,realtime:a,global:c}=n,{db:d,auth:f,realtime:p,global:g}=e,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),c),{headers:Object.assign(Object.assign({},(t=g==null?void 0:g.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>uK(this,void 0,void 0,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function fK(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dK(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const C2="2.72.0",wu=30*1e3,Ix=3,g0=Ix*wu,pK="http://localhost:9999",mK="supabase.auth.token",gK={"X-Client-Info":`gotrue-js/${C2}`},kx="X-Supabase-Api-Version",A2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vK=10*60*1e3;class Rb extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ke(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wK extends Rb{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function xK(n){return Ke(n)&&n.name==="AuthApiError"}class R2 extends Rb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ua extends Rb{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Zo extends Ua{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _K(n){return Ke(n)&&n.name==="AuthSessionMissingError"}class bh extends Ua{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cm extends Ua{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Am extends Ua{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bK(n){return Ke(n)&&n.name==="AuthImplicitGrantRedirectError"}class F1 extends Ua{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Px extends Ua{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function y0(n){return Ke(n)&&n.name==="AuthRetryableFetchError"}class U1 extends Ua{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Cx extends Ua{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Og="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$1=` 	
\r=`.split(""),EK=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<$1.length;e+=1)n[$1[e].charCodeAt(0)]=-2;for(let e=0;e<Og.length;e+=1)n[Og[e].charCodeAt(0)]=e;return n})();function B1(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Og[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Og[r]),e.queuedBits-=6}}function N2(n,e,t){const r=EK[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function z1(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{IK(a,r,t)};for(let a=0;a<n.length;a+=1)N2(n.charCodeAt(a),s,i);return e.join("")}function TK(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function SK(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}TK(r,e)}}function IK(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function kK(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)N2(n.charCodeAt(s),t,r);return new Uint8Array(e)}function PK(n){const e=[];return SK(n,t=>e.push(t)),new Uint8Array(e)}function CK(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>B1(s,t,r)),B1(null,t,r),e.join("")}function AK(n){return Math.round(Date.now()/1e3)+n}function RK(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const as=()=>typeof window<"u"&&typeof document<"u",gl={tested:!1,writable:!1},j2=()=>{if(!as())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gl.tested)return gl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),gl.tested=!0,gl.writable=!0}catch{gl.tested=!0,gl.writable=!1}return gl.writable};function NK(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const O2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>md(async()=>{const{default:r}=await Promise.resolve().then(()=>bd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},jK=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",xu=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},yl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Qo=async(n,e)=>{await n.removeItem(e)};class Hy{constructor(){this.promise=new Hy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Hy.promiseConstructor=Promise;function v0(n){const e=n.split(".");if(e.length!==3)throw new Cx("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yK.test(e[r]))throw new Cx("JWT not in base64url format");return{header:JSON.parse(z1(e[0])),payload:JSON.parse(z1(e[1])),signature:kK(e[2]),raw:{header:e[0],payload:e[1]}}}async function OK(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function DK(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function MK(n){return("0"+n.toString(16)).substr(-2)}function LK(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,MK).join("")}async function VK(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FK(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await VK(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function uu(n,e,t=!1){const r=LK();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await xu(n,`${e}-code-verifier`,s);const i=await FK(r);return[i,r===i?"plain":"s256"]}const UK=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $K(n){const e=n.headers.get(kx);if(!e||!e.match(UK))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function BK(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function zK(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function du(n){if(!WK.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function w0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function W1(n){return JSON.parse(JSON.stringify(n))}var qK=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const _l=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),HK=[502,503,504];async function q1(n){var e;if(!jK(n))throw new Px(_l(n),0);if(HK.includes(n.status))throw new Px(_l(n),n.status);let t;try{t=await n.json()}catch(i){throw new R2(_l(i),i)}let r;const s=$K(n);if(s&&s.getTime()>=A2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new U1(_l(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Zo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new U1(_l(t),n.status,t.weak_password.reasons);throw new wK(_l(t),n.status||500,r)}const GK=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function rt(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[kx]||(i[kx]=A2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await KK(n,e,t+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function KK(n,e,t,r,s,i){const a=GK(e,r,s,i);let c;try{c=await n(t,Object.assign({},a))}catch(d){throw console.error(d),new Px(_l(d),0)}if(c.ok||await q1(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await q1(d)}}function li(n){var e;let t=null;XK(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=AK(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function H1(n){const e=li(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ia(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function YK(n){return{data:n,error:null}}function QK(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=qK(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},d=Object.assign({},a);return{data:{properties:c,user:d},error:null}}function JK(n){return n}function XK(n){return n.access_token&&n.refresh_token&&n.expires_in}const x0=["global","local","others"];var ZK=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class eY{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=O2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=x0[0]){if(x0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${x0.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ia})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ZK(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QK,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ia})}catch(t){if(Ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:JK});if(p.error)throw p.error;const g=await p.json(),v=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(I=>{const _=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(I.split(";")[1].split("=")[1]);f[`${S}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Ke(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){du(e);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ia})}catch(t){if(Ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){du(e);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ia})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){du(e);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ia})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){du(e.userId);try{const{data:t,error:r}=await rt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){du(e.userId),du(e.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ke(t))return{data:null,error:t};throw t}}}function G1(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function tY(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hu={debug:!!(globalThis&&j2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class D2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nY extends D2{}async function rY(n,e,t){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),hu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new nY(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(hu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function M2(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function sY(n){return parseInt(n,16)}function iY(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function oY(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:c,requestId:d,resources:f,scheme:p,uri:g,version:v}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const w=M2(n.address),I=p?`${p}://${r}`:r,_=n.statement?`${n.statement}
`:"",S=`${I} wants you to sign in with your Ethereum account:
${w}

${_}`;let C=`URI: ${g}
Version: ${v}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(C+=`
Expiration Time: ${s.toISOString()}`),c&&(C+=`
Not Before: ${c.toISOString()}`),d&&(C+=`
Request ID: ${d}`),f){let R=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);R+=`
- ${j}`}C+=R}return`${S}
${C}`}tY();const aY={url:pK,storageKey:mK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function K1(n,e,t){return await t()}const fu={};class Sf{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sf.nextInstanceID,Sf.nextInstanceID+=1,this.instanceID>0&&as()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},aY),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new eY({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=O2(s.fetch),this.lock=s.lock||K1,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:as()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=rY:this.lock=K1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:j2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=G1(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=G1(this.memoryStorage)),as()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=fu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){fu[this.storageKey]=Object.assign(Object.assign({},fu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=fu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fu[this.storageKey]=Object.assign(Object.assign({},fu[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${C2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=NK(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),as()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),bK(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ke(t)?{error:t}:{error:new R2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:li}),{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:p,password:g,options:v}=e;let w=null,I=null;this.flowType==="pkce"&&([w,I]=await uu(this.storage,this.storageKey)),i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:g,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:I},xform:li})}else if("phone"in e){const{phone:p,password:g,options:v}=e;i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:li})}else throw new Cm("You must provide either an email or phone number and a password");const{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:c}=e;t=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:H1})}else if("phone"in e){const{phone:i,password:a,options:c}=e;t=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:H1})}else throw new Cm("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,a,c,d,f,p,g,v;let w,I;if("message"in e)w=e.message,I=e.signature;else{const{chain:_,wallet:S,statement:C,options:R}=e;let j;if(as())if(typeof S=="object")j=S;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")j=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=S}const D=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),U=await j.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=M2(U[0]);let P=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const O=await j.request({method:"eth_chainId"});P=sY(O)}const A={domain:D.host,address:z,statement:C,uri:D.href,version:"1",chainId:P,nonce:(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=R==null?void 0:R.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=oY(A),I=await j.request({method:"personal_sign",params:[iY(w),z]})}try{const{data:_,error:S}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:I},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:li});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new bh}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(Ke(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,r,s,i,a,c,d,f,p,g,v,w;let I,_;if("message"in e)I=e.message,_=e.signature;else{const{chain:S,wallet:C,statement:R,options:j}=e;let D;if(as())if(typeof C=="object")D=C;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=C}const U=new URL((t=j==null?void 0:j.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),R?{statement:R}:null));let P;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")P=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)P=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)I=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),_=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${U.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(s=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((a=j==null?void 0:j.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((g=(p=j==null?void 0:j.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...j.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(I),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=z}}try{const{data:S,error:C}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:CK(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:li});if(C)throw C;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new bh}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:C})}catch(S){if(Ke(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const t=await yl(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:li});if(await Qo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new bh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,c=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:li}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new bh}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:c,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await uu(this.storage,this.storageKey));const{error:g}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:p}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Cm("You must provide either an email or phone number.")}catch(c){if(Ke(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:li});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,f=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await uu(this.storage,this.storageKey)),await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:YK})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Zo;const{error:s}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await rt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:c}=await rt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new Cm("You must provide either an email or phone number and a type")}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await yl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<g0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await yl(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=w0()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,p))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ia}):await this._useSession(async t=>{var r,s,i;const{data:a,error:c}=t;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zo}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ia})})}catch(t){if(Ke(t))return _K(t)&&(await this._removeSession(),await Qo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Zo;const a=s.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await uu(this.storage,this.storageKey));const{data:f,error:p}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:a.access_token,xform:ia});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zo;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=v0(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ke(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:c}=t;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Zo;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!as())throw new Am("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Am(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new F1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Am("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new F1("No code detected.");const{data:R,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:c,expires_at:d,token_type:f}=e;if(!i||!c||!a||!f)throw new Am("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(c);let v=p+g;d&&(v=parseInt(d));const w=v-p;w*1e3<=wu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const I=v-g;p-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,v,p):p-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,v,p);const{data:_,error:S}=await this._getUser(i);if(S)throw S;const C={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:v,refresh_token:a,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await yl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(xK(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Qo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=RK(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await uu(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ke(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,c,d,f,p;const{data:g,error:v}=i;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return as()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Ke(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await DK(async s=>(s>0&&await OK(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:li})),(s,i)=>{const a=200*Math.pow(2,s);return i&&y0(i)&&Date.now()+a-r<wu})}catch(r){if(this._debug(t,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),as()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await yl(this.storage,this.storageKey);if(s&&this.userStorage){let a=await yl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await xu(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:w0()}else if(s&&!s.user&&!s.user){const a=await yl(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Qo(this.storage,this.storageKey+"-user"),await xu(this.storage,this.storageKey,s)):s.user=w0()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<g0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${g0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),y0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(s.access_token);!c&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Zo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hy;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Zo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),Ke(i)){const a={session:null,error:i};return y0(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){i.push(d)}});if(await Promise.all(a),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await xu(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=W1(s);await xu(this.storage,this.storageKey,i)}else{const s=W1(t);await xu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Qo(this.storage,this.storageKey),await Qo(this.storage,this.storageKey+"-code-verifier"),await Qo(this.storage,this.storageKey+"-user"),this.userStorage&&await Qo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&as()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/wu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wu}ms, refresh threshold is ${Ix} ticks`),s<=Ix&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof D2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!as()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await uu(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await rt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ke(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Ke(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:c}=await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})})}catch(t){if(Ke(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ke(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=v0(s.access_token);let c=null;a.aal&&(c=a.aal);let d=c;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=a.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+vK>s)return r;const{data:i,error:a}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:w,error:I}=await this.getSession();if(I||!w.session)return{data:null,error:I};r=w.session.access_token}const{header:s,payload:i,signature:a,raw:{header:c,payload:d}}=v0(r);t!=null&&t.allowExpired||BK(i.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:i,header:s,signature:a},error:null}}const p=zK(s.alg),g=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,a,PK(`${c}.${d}`)))throw new Cx("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}Sf.nextInstanceID=0;const lY=Sf;class cY extends lY{constructor(e){super(e)}}var uY=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(p){try{f(r.next(p))}catch(g){a(g)}}function d(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?i(p.value):s(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class dY{constructor(e,t,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=t;const c=fK(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:rK,realtime:iK,auth:Object.assign(Object.assign({},sK),{storageKey:d}),global:nK},p=hK(r??{},f);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=cK(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new wG(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new ZG(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new cG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uY(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:c,lock:d,debug:f},p,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cY({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,flowType:c,lock:d,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new MG(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hY=(n,e,t)=>new dY(n,e,t);function fY(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fY()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pY="https://capgdteaivuxhchxuchw.supabase.co",mY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGdkdGVhaXZ1eGhjaHh1Y2h3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzNTAxODIsImV4cCI6MjA3NDkyNjE4Mn0.OsCqJ_2pilQjzvraSk6bDDNncXAyXLm2Kb9sGMUTlog",L2=hY(pY,mY),gY=async n=>{try{const{data:e,error:t}=await L2.from("profiles").select("*").eq("id",n).single();if(t&&t.code!=="PGRST116")throw t;return e}catch(e){return console.error("Error fetching Supabase profile:",e),ie.error(`Failed to load user profile: ${e.message}`),null}},yY=async(n,e,t,r,s,i="user")=>{try{const{data:a,error:c}=await L2.from("profiles").upsert({id:n,first_name:e,last_name:t,avatar_url:s,phone:r,role:i,updated_at:new Date().toISOString()}).select().single();if(c)throw c;return a}catch(a){return console.error("Error creating/updating Supabase profile:",a),ie.error(`Failed to save user profile: ${a.message}`),null}},V2=b.createContext(void 0),vY=({children:n,firebaseUser:e})=>{const[t,r]=H.useState(null),[s,i]=H.useState(!0),[a,c]=H.useState(null),d=H.useCallback(async g=>{i(!0),c(null);try{const v=await gY(g);return r(v),v}catch(v){return c(v.message||"Failed to fetch Supabase profile."),null}finally{i(!1)}},[]),f=H.useCallback(async(g,v,w,I,_,S)=>{i(!0),c(null);try{const C=await yY(g,v,w,I,_,S);return r(C),ie.success("Supabase profile updated successfully!"),C}catch(C){return c(C.message||"Failed to update Supabase profile."),ie.error(`Failed to update Supabase profile: ${C.message}`),null}finally{i(!1)}},[]);H.useEffect(()=>{e?d(e.uid):(r(null),i(!1))},[e,d]);const p={profile:t,loadingProfile:s,errorProfile:a,fetchProfile:d,updateProfile:f};return u.jsx(V2.Provider,{value:p,children:n})},Gy=()=>{const n=b.useContext(V2);if(n===void 0)throw new Error("useSupabaseProfile must be used within a SupabaseProfileProvider");return n},wY=({isOpen:n,onClose:e,onSwitchToLogin:t})=>{const{signupWithEmailPassword:r,loading:s}=tn(),{updateProfile:i}=Gy(),[a,c]=H.useState(""),[d,f]=H.useState(""),[p,g]=H.useState(""),[v,w]=H.useState(""),[I,_]=H.useState(""),[S,C]=H.useState(!1),R=S||s,j=async()=>{if(!a||!d||!p||!v){ie.error("Please fill in all required fields (Email, Password, First Name, Last Name).");return}C(!0);try{const U=await r(a,d,p,v);U&&await i(U.uid,p,v,I,U.photoURL||null,"user"),e()}catch{}finally{C(!1)}},D=()=>{e(),t()};return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[425px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Sign Up for Tasko"}),u.jsx(Fa,{className:"text-[hsl(var(--text-light))]",children:"Join our community and start getting tasks done or earning money."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"firstName",children:"First Name"}),u.jsx(bt,{id:"firstName",type:"text",placeholder:"Juan",value:p,onChange:U=>g(U.target.value),disabled:R})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"lastName",children:"Last Name"}),u.jsx(bt,{id:"lastName",type:"text",placeholder:"Dela Cruz",value:v,onChange:U=>w(U.target.value),disabled:R})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"email",children:"Email"}),u.jsx(bt,{id:"email",type:"email",placeholder:"m@example.com",value:a,onChange:U=>c(U.target.value),disabled:R})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"password",children:"Password"}),u.jsx(bt,{id:"password",type:"password",value:d,onChange:U=>f(U.target.value),disabled:R})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"phone",children:"Phone Number (Optional)"}),u.jsx(bt,{id:"phone",type:"tel",placeholder:"+639171234567",value:I,onChange:U=>_(U.target.value),disabled:R})]}),u.jsx(fe,{onClick:j,disabled:R,className:"w-full bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:S?"Signing Up...":"Sign Up with Email"})]}),u.jsxs(La,{className:"text-sm text-center text-[hsl(var(--text-light))]",children:["Already have an account? ",u.jsx(fe,{variant:"link",className:"p-0 h-auto text-[hsl(var(--primary-color))] hover:text-[hsl(var(--primary-color))]",onClick:D,children:"Login"})]})]})})},Ed=b.forwardRef(({className:n,...e},t)=>u.jsx("textarea",{className:Ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Ed.displayName="Textarea";function Ax(n,[e,t]){return Math.min(t,Math.max(e,n))}function Nb(n){const e=n+"CollectionProvider",[t,r]=gs(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:S,children:C}=_,R=H.useRef(null),j=H.useRef(new Map).current;return u.jsx(s,{scope:S,itemMap:j,collectionRef:R,children:C})};a.displayName=e;const c=n+"CollectionSlot",d=Ul(c),f=H.forwardRef((_,S)=>{const{scope:C,children:R}=_,j=i(c,C),D=Qe(S,j.collectionRef);return u.jsx(d,{ref:D,children:R})});f.displayName=c;const p=n+"CollectionItemSlot",g="data-radix-collection-item",v=Ul(p),w=H.forwardRef((_,S)=>{const{scope:C,children:R,...j}=_,D=H.useRef(null),U=Qe(S,D),z=i(p,C);return H.useEffect(()=>(z.itemMap.set(D,{ref:D,...j}),()=>void z.itemMap.delete(D))),u.jsx(v,{[g]:"",ref:U,children:R})});w.displayName=p;function I(_){const S=i(n+"CollectionConsumer",_);return H.useCallback(()=>{const R=S.collectionRef.current;if(!R)return[];const j=Array.from(R.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((z,P)=>j.indexOf(z.ref.current)-j.indexOf(P.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:a,Slot:f,ItemSlot:w},I,r]}var xY=b.createContext(void 0);function Ky(n){const e=b.useContext(xY);return n||e||"ltr"}var _Y="Arrow",F2=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return u.jsx(Je.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});F2.displayName=_Y;var bY=F2,jb="Popper",[U2,Yy]=gs(jb),[EY,$2]=U2(jb),B2=n=>{const{__scopePopper:e,children:t}=n,[r,s]=b.useState(null);return u.jsx(EY,{scope:e,anchor:r,onAnchorChange:s,children:t})};B2.displayName=jb;var z2="PopperAnchor",W2=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=$2(z2,t),a=b.useRef(null),c=Qe(e,a);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:u.jsx(Je.div,{...s,ref:c})});W2.displayName=z2;var Ob="PopperContent",[TY,SY]=U2(Ob),q2=b.forwardRef((n,e)=>{var le,Se,Ne,Ve,He,Xe;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:I,..._}=n,S=$2(Ob,t),[C,R]=b.useState(null),j=Qe(e,mt=>R(mt)),[D,U]=b.useState(null),z=FP(D),P=(z==null?void 0:z.width)??0,A=(z==null?void 0:z.height)??0,O=r+(i!=="center"?"-"+i:""),M=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},F=Array.isArray(f)?f:[f],$=F.length>0,L={padding:M,boundary:F.filter(kY),altBoundary:$},{refs:ae,floatingStyles:me,placement:xe,isPositioned:ge,middlewareData:ee}=AP({strategy:"fixed",placement:O,whileElementsMounted:(...mt)=>PP(...mt,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[RP({mainAxis:s+A,alignmentAxis:a}),d&&NP({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?jP():void 0,...L}),d&&OP({...L}),DP({...L,apply:({elements:mt,rects:zt,availableWidth:pr,availableHeight:An})=>{const{width:Rn,height:Cr}=zt.reference,ht=mt.floating.style;ht.setProperty("--radix-popper-available-width",`${pr}px`),ht.setProperty("--radix-popper-available-height",`${An}px`),ht.setProperty("--radix-popper-anchor-width",`${Rn}px`),ht.setProperty("--radix-popper-anchor-height",`${Cr}px`)}}),D&&LP({element:D,padding:c}),PY({arrowWidth:P,arrowHeight:A}),v&&MP({strategy:"referenceHidden",...L})]}),[K,re]=K2(xe),W=Ut(I);Bt(()=>{ge&&(W==null||W())},[ge,W]);const X=(le=ee.arrow)==null?void 0:le.x,_e=(Se=ee.arrow)==null?void 0:Se.y,we=((Ne=ee.arrow)==null?void 0:Ne.centerOffset)!==0,[Re,De]=b.useState();return Bt(()=>{C&&De(window.getComputedStyle(C).zIndex)},[C]),u.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:ge?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(Ve=ee.transformOrigin)==null?void 0:Ve.x,(He=ee.transformOrigin)==null?void 0:He.y].join(" "),...((Xe=ee.hide)==null?void 0:Xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:u.jsx(TY,{scope:t,placedSide:K,onArrowChange:U,arrowX:X,arrowY:_e,shouldHideArrow:we,children:u.jsx(Je.div,{"data-side":K,"data-align":re,..._,ref:j,style:{..._.style,animation:ge?void 0:"none"}})})})});q2.displayName=Ob;var H2="PopperArrow",IY={top:"bottom",right:"left",bottom:"top",left:"right"},G2=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=SY(H2,r),a=IY[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(bY,{...s,ref:t,style:{...s.style,display:"block"}})})});G2.displayName=H2;function kY(n){return n!==null}var PY=n=>({name:"transformOrigin",options:n,fn(e){var S,C,R;const{placement:t,rects:r,middlewareData:s}=e,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,c=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[f,p]=K2(t),g={start:"0%",center:"50%",end:"100%"}[p],v=(((C=s.arrow)==null?void 0:C.x)??0)+c/2,w=(((R=s.arrow)==null?void 0:R.y)??0)+d/2;let I="",_="";return f==="bottom"?(I=a?g:`${v}px`,_=`${-d}px`):f==="top"?(I=a?g:`${v}px`,_=`${r.floating.height+d}px`):f==="right"?(I=`${-d}px`,_=a?g:`${w}px`):f==="left"&&(I=`${r.floating.width+d}px`,_=a?g:`${w}px`),{data:{x:I,y:_}}}});function K2(n){const[e,t="center"]=n.split("-");return[e,t]}var Y2=B2,Q2=W2,J2=q2,X2=G2;function CY(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var AY="VisuallyHidden",Z2=b.forwardRef((n,e)=>u.jsx(Je.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Z2.displayName=AY;var RY=[" ","Enter","ArrowUp","ArrowDown"],NY=[" ","Enter"],Yf="Select",[Qy,Jy,jY]=Nb(Yf),[Td,Tee]=gs(Yf,[jY,Yy]),Xy=Yy(),[OY,$a]=Td(Yf),[DY,MY]=Td(Yf),eO=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:c,onValueChange:d,dir:f,name:p,autoComplete:g,disabled:v,required:w,form:I}=n,_=Xy(e),[S,C]=b.useState(null),[R,j]=b.useState(null),[D,U]=b.useState(!1),z=Ky(f),[P=!1,A]=Ef({prop:r,defaultProp:s,onChange:i}),[O,M]=Ef({prop:a,defaultProp:c,onChange:d}),F=b.useRef(null),$=S?I||!!S.closest("form"):!0,[L,ae]=b.useState(new Set),me=Array.from(L).map(xe=>xe.props.value).join(";");return u.jsx(Y2,{..._,children:u.jsxs(OY,{required:w,scope:e,trigger:S,onTriggerChange:C,valueNode:R,onValueNodeChange:j,valueNodeHasChildren:D,onValueNodeHasChildrenChange:U,contentId:so(),value:O,onValueChange:M,open:P,onOpenChange:A,dir:z,triggerPointerDownPosRef:F,disabled:v,children:[u.jsx(Qy.Provider,{scope:e,children:u.jsx(DY,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(xe=>{ae(ge=>new Set(ge).add(xe))},[]),onNativeOptionRemove:b.useCallback(xe=>{ae(ge=>{const ee=new Set(ge);return ee.delete(xe),ee})},[]),children:t})}),$?u.jsxs(SO,{"aria-hidden":!0,required:w,tabIndex:-1,name:p,autoComplete:g,value:O,onChange:xe=>M(xe.target.value),disabled:v,form:I,children:[O===void 0?u.jsx("option",{value:""}):null,Array.from(L)]},me):null]})})};eO.displayName=Yf;var tO="SelectTrigger",nO=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Xy(t),a=$a(tO,t),c=a.disabled||r,d=Qe(e,a.onTriggerChange),f=Jy(t),p=b.useRef("touch"),[g,v,w]=IO(_=>{const S=f().filter(j=>!j.disabled),C=S.find(j=>j.value===a.value),R=kO(S,_,C);R!==void 0&&a.onValueChange(R.value)}),I=_=>{c||(a.onOpenChange(!0),w()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return u.jsx(Q2,{asChild:!0,...i,children:u.jsx(Je.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":TO(a.value)?"":void 0,...s,ref:d,onClick:Pe(s.onClick,_=>{_.currentTarget.focus(),p.current!=="mouse"&&I(_)}),onPointerDown:Pe(s.onPointerDown,_=>{p.current=_.pointerType;const S=_.target;S.hasPointerCapture(_.pointerId)&&S.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(I(_),_.preventDefault())}),onKeyDown:Pe(s.onKeyDown,_=>{const S=g.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&v(_.key),!(S&&_.key===" ")&&RY.includes(_.key)&&(I(),_.preventDefault())})})})});nO.displayName=tO;var rO="SelectValue",sO=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...c}=n,d=$a(rO,t),{onValueNodeHasChildrenChange:f}=d,p=i!==void 0,g=Qe(e,d.onValueNodeChange);return Bt(()=>{f(p)},[f,p]),u.jsx(Je.span,{...c,ref:g,style:{pointerEvents:"none"},children:TO(d.value)?u.jsx(u.Fragment,{children:a}):i})});sO.displayName=rO;var LY="SelectIcon",iO=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return u.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});iO.displayName=LY;var VY="SelectPortal",oO=n=>u.jsx(Uy,{asChild:!0,...n});oO.displayName=VY;var nc="SelectContent",aO=b.forwardRef((n,e)=>{const t=$a(nc,n.__scopeSelect),[r,s]=b.useState();if(Bt(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?od.createPortal(u.jsx(lO,{scope:n.__scopeSelect,children:u.jsx(Qy.Slot,{scope:n.__scopeSelect,children:u.jsx("div",{children:n.children})})}),i):null}return u.jsx(cO,{...n,ref:e})});aO.displayName=nc;var Cs=10,[lO,Ba]=Td(nc),FY="SelectContentImpl",UY=Ul("SelectContent.RemoveScroll"),cO=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:c,sideOffset:d,align:f,alignOffset:p,arrowPadding:g,collisionBoundary:v,collisionPadding:w,sticky:I,hideWhenDetached:_,avoidCollisions:S,...C}=n,R=$a(nc,t),[j,D]=b.useState(null),[U,z]=b.useState(null),P=Qe(e,le=>D(le)),[A,O]=b.useState(null),[M,F]=b.useState(null),$=Jy(t),[L,ae]=b.useState(!1),me=b.useRef(!1);b.useEffect(()=>{if(j)return yb(j)},[j]),gb();const xe=b.useCallback(le=>{const[Se,...Ne]=$().map(Xe=>Xe.ref.current),[Ve]=Ne.slice(-1),He=document.activeElement;for(const Xe of le)if(Xe===He||(Xe==null||Xe.scrollIntoView({block:"nearest"}),Xe===Se&&U&&(U.scrollTop=0),Xe===Ve&&U&&(U.scrollTop=U.scrollHeight),Xe==null||Xe.focus(),document.activeElement!==He))return},[$,U]),ge=b.useCallback(()=>xe([A,j]),[xe,A,j]);b.useEffect(()=>{L&&ge()},[L,ge]);const{onOpenChange:ee,triggerPointerDownPosRef:K}=R;b.useEffect(()=>{if(j){let le={x:0,y:0};const Se=Ve=>{var He,Xe;le={x:Math.abs(Math.round(Ve.pageX)-(((He=K.current)==null?void 0:He.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((Xe=K.current)==null?void 0:Xe.y)??0))}},Ne=Ve=>{le.x<=10&&le.y<=10?Ve.preventDefault():j.contains(Ve.target)||ee(!1),document.removeEventListener("pointermove",Se),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[j,ee,K]),b.useEffect(()=>{const le=()=>ee(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[ee]);const[re,W]=IO(le=>{const Se=$().filter(He=>!He.disabled),Ne=Se.find(He=>He.ref.current===document.activeElement),Ve=kO(Se,le,Ne);Ve&&setTimeout(()=>Ve.ref.current.focus())}),X=b.useCallback((le,Se,Ne)=>{const Ve=!me.current&&!Ne;(R.value!==void 0&&R.value===Se||Ve)&&(O(le),Ve&&(me.current=!0))},[R.value]),_e=b.useCallback(()=>j==null?void 0:j.focus(),[j]),we=b.useCallback((le,Se,Ne)=>{const Ve=!me.current&&!Ne;(R.value!==void 0&&R.value===Se||Ve)&&F(le)},[R.value]),Re=r==="popper"?Rx:uO,De=Re===Rx?{side:c,sideOffset:d,align:f,alignOffset:p,arrowPadding:g,collisionBoundary:v,collisionPadding:w,sticky:I,hideWhenDetached:_,avoidCollisions:S}:{};return u.jsx(lO,{scope:t,content:j,viewport:U,onViewportChange:z,itemRefCallback:X,selectedItem:A,onItemLeave:_e,itemTextRefCallback:we,focusSelectedItem:ge,selectedItemText:M,position:r,isPositioned:L,searchRef:re,children:u.jsx(By,{as:UY,allowPinchZoom:!0,children:u.jsx(Fy,{asChild:!0,trapped:R.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Pe(s,le=>{var Se;(Se=R.trigger)==null||Se.focus({preventScroll:!0}),le.preventDefault()}),children:u.jsx(Vy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:u.jsx(Re,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:le=>le.preventDefault(),...C,...De,onPlaced:()=>ae(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Pe(C.onKeyDown,le=>{const Se=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Se&&le.key.length===1&&W(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let Ve=$().filter(He=>!He.disabled).map(He=>He.ref.current);if(["ArrowUp","End"].includes(le.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const He=le.target,Xe=Ve.indexOf(He);Ve=Ve.slice(Xe+1)}setTimeout(()=>xe(Ve)),le.preventDefault()}})})})})})})});cO.displayName=FY;var $Y="SelectItemAlignedPosition",uO=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=$a(nc,t),a=Ba(nc,t),[c,d]=b.useState(null),[f,p]=b.useState(null),g=Qe(e,P=>p(P)),v=Jy(t),w=b.useRef(!1),I=b.useRef(!0),{viewport:_,selectedItem:S,selectedItemText:C,focusSelectedItem:R}=a,j=b.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&f&&_&&S&&C){const P=i.trigger.getBoundingClientRect(),A=f.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),M=C.getBoundingClientRect();if(i.dir!=="rtl"){const He=M.left-A.left,Xe=O.left-He,mt=P.left-Xe,zt=P.width+mt,pr=Math.max(zt,A.width),An=window.innerWidth-Cs,Rn=Ax(Xe,[Cs,Math.max(Cs,An-pr)]);c.style.minWidth=zt+"px",c.style.left=Rn+"px"}else{const He=A.right-M.right,Xe=window.innerWidth-O.right-He,mt=window.innerWidth-P.right-Xe,zt=P.width+mt,pr=Math.max(zt,A.width),An=window.innerWidth-Cs,Rn=Ax(Xe,[Cs,Math.max(Cs,An-pr)]);c.style.minWidth=zt+"px",c.style.right=Rn+"px"}const F=v(),$=window.innerHeight-Cs*2,L=_.scrollHeight,ae=window.getComputedStyle(f),me=parseInt(ae.borderTopWidth,10),xe=parseInt(ae.paddingTop,10),ge=parseInt(ae.borderBottomWidth,10),ee=parseInt(ae.paddingBottom,10),K=me+xe+L+ee+ge,re=Math.min(S.offsetHeight*5,K),W=window.getComputedStyle(_),X=parseInt(W.paddingTop,10),_e=parseInt(W.paddingBottom,10),we=P.top+P.height/2-Cs,Re=$-we,De=S.offsetHeight/2,le=S.offsetTop+De,Se=me+xe+le,Ne=K-Se;if(Se<=we){const He=F.length>0&&S===F[F.length-1].ref.current;c.style.bottom="0px";const Xe=f.clientHeight-_.offsetTop-_.offsetHeight,mt=Math.max(Re,De+(He?_e:0)+Xe+ge),zt=Se+mt;c.style.height=zt+"px"}else{const He=F.length>0&&S===F[0].ref.current;c.style.top="0px";const mt=Math.max(we,me+_.offsetTop+(He?X:0)+De)+Ne;c.style.height=mt+"px",_.scrollTop=Se-we+_.offsetTop}c.style.margin=`${Cs}px 0`,c.style.minHeight=re+"px",c.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[v,i.trigger,i.valueNode,c,f,_,S,C,i.dir,r]);Bt(()=>j(),[j]);const[D,U]=b.useState();Bt(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const z=b.useCallback(P=>{P&&I.current===!0&&(j(),R==null||R(),I.current=!1)},[j,R]);return u.jsx(zY,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:u.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:u.jsx(Je.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});uO.displayName=$Y;var BY="SelectPopperPosition",Rx=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Cs,...i}=n,a=Xy(t);return u.jsx(J2,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rx.displayName=BY;var[zY,Db]=Td(nc,{}),Nx="SelectViewport",dO=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Ba(Nx,t),a=Db(Nx,t),c=Qe(e,i.onViewportChange),d=b.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(Qy.Slot,{scope:t,children:u.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Pe(s.onScroll,f=>{const p=f.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&g){const w=Math.abs(d.current-p.scrollTop);if(w>0){const I=window.innerHeight-Cs*2,_=parseFloat(g.style.minHeight),S=parseFloat(g.style.height),C=Math.max(_,S);if(C<I){const R=C+w,j=Math.min(I,R),D=R-j;g.style.height=j+"px",g.style.bottom==="0px"&&(p.scrollTop=D>0?D:0,g.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});dO.displayName=Nx;var hO="SelectGroup",[WY,qY]=Td(hO),HY=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=so();return u.jsx(WY,{scope:t,id:s,children:u.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});HY.displayName=hO;var fO="SelectLabel",pO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=qY(fO,t);return u.jsx(Je.div,{id:s.id,...r,ref:e})});pO.displayName=fO;var Dg="SelectItem",[GY,mO]=Td(Dg),gO=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,c=$a(Dg,t),d=Ba(Dg,t),f=c.value===r,[p,g]=b.useState(i??""),[v,w]=b.useState(!1),I=Qe(e,R=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,R,r,s)}),_=so(),S=b.useRef("touch"),C=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(GY,{scope:t,value:r,disabled:s,textId:_,isSelected:f,onItemTextChange:b.useCallback(R=>{g(j=>j||((R==null?void 0:R.textContent)??"").trim())},[]),children:u.jsx(Qy.ItemSlot,{scope:t,value:r,disabled:s,textValue:p,children:u.jsx(Je.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:I,onFocus:Pe(a.onFocus,()=>w(!0)),onBlur:Pe(a.onBlur,()=>w(!1)),onClick:Pe(a.onClick,()=>{S.current!=="mouse"&&C()}),onPointerUp:Pe(a.onPointerUp,()=>{S.current==="mouse"&&C()}),onPointerDown:Pe(a.onPointerDown,R=>{S.current=R.pointerType}),onPointerMove:Pe(a.onPointerMove,R=>{var j;S.current=R.pointerType,s?(j=d.onItemLeave)==null||j.call(d):S.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(a.onPointerLeave,R=>{var j;R.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:Pe(a.onKeyDown,R=>{var D;((D=d.searchRef)==null?void 0:D.current)!==""&&R.key===" "||(NY.includes(R.key)&&C(),R.key===" "&&R.preventDefault())})})})})});gO.displayName=Dg;var Nh="SelectItemText",yO=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=$a(Nh,t),c=Ba(Nh,t),d=mO(Nh,t),f=MY(Nh,t),[p,g]=b.useState(null),v=Qe(e,C=>g(C),d.onItemTextChange,C=>{var R;return(R=c.itemTextRefCallback)==null?void 0:R.call(c,C,d.value,d.disabled)}),w=p==null?void 0:p.textContent,I=b.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:w},d.value),[d.disabled,d.value,w]),{onNativeOptionAdd:_,onNativeOptionRemove:S}=f;return Bt(()=>(_(I),()=>S(I)),[_,S,I]),u.jsxs(u.Fragment,{children:[u.jsx(Je.span,{id:d.textId,...i,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?od.createPortal(i.children,a.valueNode):null]})});yO.displayName=Nh;var vO="SelectItemIndicator",wO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return mO(vO,t).isSelected?u.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});wO.displayName=vO;var jx="SelectScrollUpButton",xO=b.forwardRef((n,e)=>{const t=Ba(jx,n.__scopeSelect),r=Db(jx,n.__scopeSelect),[s,i]=b.useState(!1),a=Qe(e,r.onScrollButtonChange);return Bt(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollTop>0;i(f)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?u.jsx(bO,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});xO.displayName=jx;var Ox="SelectScrollDownButton",_O=b.forwardRef((n,e)=>{const t=Ba(Ox,n.__scopeSelect),r=Db(Ox,n.__scopeSelect),[s,i]=b.useState(!1),a=Qe(e,r.onScrollButtonChange);return Bt(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;i(p)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?u.jsx(bO,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});_O.displayName=Ox;var bO=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Ba("SelectScrollButton",t),a=b.useRef(null),c=Jy(t),d=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>d(),[d]),Bt(()=>{var p;const f=c().find(g=>g.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[c]),u.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Pe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Pe(s.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Pe(s.onPointerLeave,()=>{d()})})}),KY="SelectSeparator",EO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return u.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});EO.displayName=KY;var Dx="SelectArrow",YY=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Xy(t),i=$a(Dx,t),a=Ba(Dx,t);return i.open&&a.position==="popper"?u.jsx(X2,{...s,...r,ref:e}):null});YY.displayName=Dx;function TO(n){return n===""||n===void 0}var SO=b.forwardRef((n,e)=>{const{value:t,...r}=n,s=b.useRef(null),i=Qe(e,s),a=CY(t);return b.useEffect(()=>{const c=s.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==t&&p){const g=new Event("change",{bubbles:!0});p.call(c,t),c.dispatchEvent(g)}},[a,t]),u.jsx(Z2,{asChild:!0,children:u.jsx("select",{...r,ref:i,defaultValue:t})})});SO.displayName="BubbleSelect";function IO(n){const e=Ut(n),t=b.useRef(""),r=b.useRef(0),s=b.useCallback(a=>{const c=t.current+a;e(c),function d(f){t.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function kO(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=QY(n,Math.max(i,0));s.length===1&&(a=a.filter(f=>f!==t));const d=a.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function QY(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var JY=eO,PO=nO,XY=sO,ZY=iO,eQ=oO,CO=aO,tQ=dO,AO=pO,RO=gO,nQ=yO,rQ=wO,NO=xO,jO=_O,OO=EO;const DO=JY,MO=XY,Mb=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(PO,{ref:r,className:Ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,u.jsx(ZY,{asChild:!0,children:u.jsx(o2,{className:"h-4 w-4 opacity-50"})})]}));Mb.displayName=PO.displayName;const Lb=b.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>u.jsx(eQ,{children:u.jsxs(CO,{ref:s,className:Ae("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t==="popper"&&"data-[state=closed]:slide-out-to-top-[5%] data-[state=open]:slide-in-from-top-[5%]",n),position:t,...r,children:[u.jsx(LO,{}),u.jsx(tQ,{className:Ae("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(VO,{})]})}));Lb.displayName=CO.displayName;const sQ=b.forwardRef(({className:n,...e},t)=>u.jsx(AO,{ref:t,className:Ae("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));sQ.displayName=AO.displayName;const Fn=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(RO,{ref:r,className:Ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(rQ,{children:u.jsx(i2,{className:"h-4 w-4"})})}),u.jsx(nQ,{children:e})]}));Fn.displayName=RO.displayName;const iQ=b.forwardRef(({className:n,...e},t)=>u.jsx(OO,{ref:t,className:Ae("-mx-1 my-1 h-px bg-muted",n),...e}));iQ.displayName=OO.displayName;const LO=b.forwardRef(({className:n,...e},t)=>u.jsx(NO,{className:Ae("flex cursor-default items-center justify-center py-1",n),ref:t,...e,children:u.jsx(NH,{className:"h-4 w-4"})}));LO.displayName=NO.displayName;const VO=b.forwardRef(({className:n,...e},t)=>u.jsx(jO,{className:Ae("flex cursor-default items-center justify-center py-1",n),ref:t,...e,children:u.jsx(o2,{className:"h-4 w-4"})}));VO.displayName=jO.displayName;const FO=()=>{const[n,e]=b.useState(!1),[t,r]=b.useState(null);return{uploadFile:async(i,a)=>{e(!0),r(null);try{const c=GW(ZW,a),d=await qW(c,i),f=await HW(d.ref);return ie.success("File uploaded successfully!"),f}catch(c){return console.error("Error uploading file:",c),r(`Failed to upload file: ${c.message}`),ie.error(`Failed to upload file: ${c.message}`),null}finally{e(!1)}},loading:n,error:t}},oQ=({isOpen:n,onClose:e})=>{const{addTask:t}=wo(),{uploadFile:r,loading:s}=FO(),[i,a]=H.useState(""),[c,d]=H.useState(""),[f,p]=H.useState(""),[g,v]=H.useState(""),[w,I]=H.useState(""),[_,S]=H.useState(null),[C,R]=H.useState(null),[j,D]=H.useState(!1);H.useEffect(()=>{n&&(a(""),d(""),p(""),v(""),I(""),S(null),R(null),D(!1))},[n]);const U=A=>{if(A.target.files&&A.target.files[0]){const O=A.target.files[0];S(O),R(URL.createObjectURL(O))}else S(null),R(null)},z=async()=>{if(!i||!c||!f||!g||!w){ie.error("Please fill in all task details.");return}if(isNaN(parseFloat(g))||parseFloat(g)<=0){ie.error("Budget must be a positive number.");return}D(!0);let A;if(_){const O=`task_images/${Date.now()}_${_.name}`,M=await r(_,O);if(M)A=M;else{D(!1);return}}try{await t({title:i,description:c,location:f,budget:parseFloat(g),category:w,imageUrl:A}),e()}catch{}finally{D(!1)}},P=j||s;return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[500px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Post a New Task"}),u.jsx(Fa,{className:"text-[hsl(var(--text-light))]",children:"Describe your task and let local taskers make offers."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"title",className:"text-right",children:"Title"}),u.jsx(bt,{id:"title",placeholder:"e.g., 'House Cleaning'",className:"col-span-3",value:i,onChange:A=>a(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"description",className:"text-right",children:"Description"}),u.jsx(Ed,{id:"description",placeholder:"Provide details about your task...",className:"col-span-3",value:c,onChange:A=>d(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"location",className:"text-right",children:"Location"}),u.jsx(bt,{id:"location",placeholder:"e.g., 'Quezon City, Metro Manila'",className:"col-span-3",value:f,onChange:A=>p(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"budget",className:"text-right",children:"Budget ()"}),u.jsx(bt,{id:"budget",type:"number",placeholder:"e.g., '1500'",className:"col-span-3",value:g,onChange:A=>v(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"category",className:"text-right",children:"Category"}),u.jsxs(DO,{value:w,onValueChange:I,disabled:P,children:[u.jsx(Mb,{id:"category",className:"col-span-3",children:u.jsx(MO,{placeholder:"Select a category"})}),u.jsxs(Lb,{children:[u.jsx(Fn,{value:"cleaning",children:"Home Cleaning"}),u.jsx(Fn,{value:"repairs",children:"Handyman Services"}),u.jsx(Fn,{value:"moving",children:"Moving & Hauling"}),u.jsx(Fn,{value:"delivery",children:"Delivery & Errands"}),u.jsx(Fn,{value:"painting",children:"Painting Services"}),u.jsx(Fn,{value:"assembly",children:"Assembly Services"}),u.jsx(Fn,{value:"marketing",children:"Marketing Services"}),u.jsx(Fn,{value:"other",children:"Other"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(yt,{htmlFor:"task-image-upload",className:"text-right pt-2",children:"Task Image"}),u.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[C&&u.jsx("img",{src:C,alt:"Task Preview",className:"w-32 h-32 object-cover rounded-md mb-2"}),u.jsxs(yt,{htmlFor:"task-image-upload",className:"cursor-pointer flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[u.jsx(s2,{size:20})," ",_?"Change Image":"Upload Image (Optional)",u.jsx(bt,{id:"task-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:U,disabled:P})]}),!_&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max file size: 5MB"})]})]})]}),u.jsxs(La,{children:[u.jsx(fe,{variant:"outline",onClick:e,disabled:P,children:"Cancel"}),u.jsx(fe,{onClick:z,disabled:P,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:P?"Posting...":"Post Task"})]})]})})},Y1=async n=>{try{const e=ms(Yt,"taskerProfiles",n),t=await xd(e);return t.exists()?t.data():null}catch(e){return console.error("Error fetching tasker profile by ID:",e),ie.error(`Failed to load tasker profile: ${e.message}`),null}},aQ=async(n,e)=>{try{const t=ms(Yt,"taskerProfiles",e.uid),r={userId:e.uid,displayName:e.displayName||e.email||"Anonymous Tasker",photoURL:e.photoURL||void 0,isTasker:!0,dateJoined:new Date().toISOString(),...n};return await nj(t,r,{merge:!0}),ie.success("Tasker profile saved successfully!"),r}catch(t){throw console.error("Error saving tasker profile:",t),ie.error(`Failed to save tasker profile: ${t.message}`),t}},Q1=async()=>{try{return(await My(cs(Yt,"taskerProfiles"))).docs.map(t=>t.data())}catch(n){throw console.error("Error fetching all tasker profiles:",n),ie.error("Failed to load all tasker profiles."),n}},lQ=async()=>{const n=cs(Yt,"taskerProfiles");if((await My(n)).empty){console.log("Tasker profiles collection is empty, seeding initial tasker profiles...");const t=[{userId:"seed-tasker-1",displayName:"Kuya Juan",photoURL:"https://randomuser.me/api/portraits/men/21.jpg",skills:["Plumbing","Electrical","Carpentry","Assembly Services"],bio:"Experienced handyman with 10+ years in home repairs and installations. Mabilis at maaasahan!",hourlyRate:350,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-2",displayName:"Ate Maria",photoURL:"https://randomuser.me/api/portraits/women/22.jpg",skills:["Home Cleaning","Office Cleaning","Deep Cleaning"],bio:"Dedicated cleaner providing top-notch cleaning services for homes and offices. Malinis at maayos ang trabaho!",hourlyRate:250,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-3",displayName:"Manong Pedro",photoURL:"https://randomuser.me/api/portraits/men/23.jpg",skills:["Delivery","Errands","Grocery Shopping"],bio:"Fast and reliable delivery service for documents, packages, and groceries. On-time palagi!",hourlyRate:180,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-4",displayName:"Inday Elena",photoURL:"https://randomuser.me/api/portraits/women/24.jpg",skills:["Painting Services","Wall Repair"],bio:"Professional painter for residential and commercial spaces. Quality finish guaranteed!",hourlyRate:300,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-5",displayName:"Mang Ramon",photoURL:"https://randomuser.me/api/portraits/men/25.jpg",skills:["Laptop Fix","Appliance Repair","Electronics Setup"],bio:"Tech-savvy individual offering repair services for laptops and home appliances. Expert sa gadgets!",hourlyRate:400,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-6",displayName:"Teacher Sofia",photoURL:"https://randomuser.me/api/portraits/women/26.jpg",skills:["Tutoring (Math)","Tutoring (English)","Online Teaching"],bio:"Patient and effective tutor for students of all ages. Helping you achieve academic success!",hourlyRate:280,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-7",displayName:"Kuya Carlo",photoURL:"https://randomuser.me/api/portraits/men/27.jpg",skills:["Carpentry","Furniture Assembly","Woodwork"],bio:"Skilled carpenter for custom furniture and repairs. Gawaing kahoy, ako bahala!",hourlyRate:380,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-8",displayName:"Ate Anna",photoURL:"https://randomuser.me/api/portraits/women/28.jpg",skills:["Gardening","Landscaping","Plant Care"],bio:"Passionate gardener ready to transform your outdoor space. Green thumb, happy plants!",hourlyRate:220,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-9",displayName:"Manong Mark",photoURL:"https://randomuser.me/api/portraits/men/29.jpg",skills:["Moving","Hauling","Packing"],bio:"Efficient and careful mover for your relocation needs. Walang hassle sa paglipat!",hourlyRate:450,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-10",displayName:"Ate Grace",photoURL:"https://randomuser.me/api/portraits/women/30.jpg",skills:["Pet Sitting","Dog Walking","Pet Care"],bio:"Loving and responsible pet sitter for your furry friends. Alaga ang pets mo sa akin!",hourlyRate:200,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-11",displayName:"Kuya Benny",photoURL:"https://randomuser.me/api/portraits/men/31.jpg",skills:["Construction","Renovation","Demolition"],bio:"Expert in small to medium construction and renovation projects. Building dreams, one brick at a time!",hourlyRate:500,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-12",displayName:"Chef Carla",photoURL:"https://randomuser.me/api/portraits/women/32.jpg",skills:["Catering","Personal Chef","Meal Prep"],bio:"Bringing delicious meals to your table. From intimate dinners to small events, I've got you covered!",hourlyRate:400,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-13",displayName:"Kuya David",photoURL:"https://randomuser.me/api/portraits/men/33.jpg",skills:["Personal Driver","Airport Transfer","Logistics"],bio:"Safe and reliable driver for all your transportation needs. Your comfort is my priority!",hourlyRate:250,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-14",displayName:"Event Planner Emily",photoURL:"https://randomuser.me/api/portraits/women/34.jpg",skills:["Event Planning","Party Organizer","Decorations"],bio:"Making your special occasions unforgettable. Let's plan your perfect event!",hourlyRate:600,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-15",displayName:"Mang Frank",photoURL:"https://randomuser.me/api/portraits/men/35.jpg",skills:["General Repairs","Home Maintenance","Appliance Installation"],bio:"Your go-to guy for all household fixes. No job too small, no problem too big!",hourlyRate:320,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-16",displayName:"Graphic Designer Gina",photoURL:"https://randomuser.me/api/portraits/women/36.jpg",skills:["Graphic Design","Logo Design","Social Media Content"],bio:"Creative graphic designer ready to elevate your brand's visual identity. Let's make it pop!",hourlyRate:480,isTasker:!0,dateJoined:new Date().toISOString()},{userId:"seed-tasker-17",displayName:"Kuya Henry",photoURL:"https://randomuser.me/api/portraits/men/37.jpg",skills:["Errands","Personal Assistant","Shopping"],bio:"Your reliable personal helper for daily errands and tasks. Consider it done!",hourlyRate:200,isTasker:!0,dateJoined:new Date().toISOString()}];for(const r of t)await nj(ms(n,r.userId),r);ie.info("Initial demo tasker profiles added!")}else console.log("Tasker profiles collection is not empty, skipping seeding.")},UO=b.createContext(void 0),cQ=({children:n})=>{const{user:e,isAuthenticated:t,loading:r}=tn(),{profile:s,updateProfile:i}=Gy(),[a,c]=H.useState(null),[d,f]=H.useState([]),[p,g]=H.useState(!0),[v,w]=H.useState(null),[I,_]=H.useState(!1),S=async j=>Y1(j);H.useEffect(()=>{(async()=>{if(g(!0),w(null),t&&e)try{const D=await Y1(e.uid);c(D),_(!!D)}catch{}else c(null),_(!1);try{const D=await Q1();f(D)}catch{}finally{g(!1)}})(),lQ()},[t,e,r]);const R={taskerProfile:a,allTaskerProfiles:d,loading:p,error:v,createOrUpdateTaskerProfile:async j=>{var D,U;if(!t||!e){ie.error("You must be logged in to manage a tasker profile.");return}g(!0);try{const z=await aQ(j,e);c(z),_(!0),await i(e.uid,((D=e.displayName)==null?void 0:D.split(" ")[0])||null,((U=e.displayName)==null?void 0:U.split(" ").slice(1).join(" "))||null,(s==null?void 0:s.phone)||null,e.photoURL||null,"tasker");const P=await Q1();f(P)}catch{}finally{g(!1)}},isTasker:I,fetchTaskerProfileById:S};return u.jsx(UO.Provider,{value:R,children:n})},Yr=()=>{const n=b.useContext(UO);if(n===void 0)throw new Error("useTaskerProfile must be used within a TaskerProfileProvider");return n},uQ=["Home Cleaning","Plumbing","Electrical","Carpentry","Moving","Delivery","Painting","Furniture Assembly","Gardening","Pet Sitting","Marketing","Web Development","Graphic Design","Tutoring","Photography","Event Planning","Other"],dQ=({isOpen:n,onClose:e})=>{const{taskerProfile:t,createOrUpdateTaskerProfile:r,loading:s}=Yr(),[i,a]=H.useState([]),[c,d]=H.useState(""),[f,p]=H.useState(""),[g,v]=H.useState(!1);H.useEffect(()=>{t?(a(t.skills||[]),d(t.bio||""),p(t.hourlyRate?String(t.hourlyRate):"")):(a([]),d(""),p(""))},[t,n]);const w=_=>{a(S=>S.includes(_)?S.filter(C=>C!==_):[...S,_])},I=async()=>{if(i.length===0||c.trim()===""||!f){ie.error("Please fill in all required fields.");return}if(isNaN(parseFloat(f))||parseFloat(f)<=0){ie.error("Hourly rate must be a positive number.");return}v(!0);try{await r({skills:i,bio:c,hourlyRate:parseFloat(f)}),e()}catch{}finally{v(!1)}};return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[600px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:t?"Edit Your Tasker Profile":"Become a Tasker"}),u.jsx(Fa,{className:"text-[hsl(var(--text-light))]",children:t?"Update your skills and availability.":"Share your skills and start earning!"})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(yt,{htmlFor:"skills",className:"text-right pt-2",children:"Skills"}),u.jsx("div",{className:"col-span-3 flex flex-wrap gap-2",children:uQ.map(_=>u.jsx(fe,{variant:i.includes(_)?"default":"outline",onClick:()=>w(_),disabled:g||s,className:i.includes(_)?"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white":"border-[hsl(var(--border-color))] text-[hsl(var(--text-dark))] hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700",children:_},_))})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"bio",className:"text-right",children:"Bio"}),u.jsx(Ed,{id:"bio",placeholder:"Tell us about your experience and what you offer...",className:"col-span-3",value:c,onChange:_=>d(_.target.value),disabled:g||s})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"hourlyRate",className:"text-right",children:"Hourly Rate ()"}),u.jsx(bt,{id:"hourlyRate",type:"number",placeholder:"e.g., 300",className:"col-span-3",value:f,onChange:_=>p(_.target.value),disabled:g||s})]})]}),u.jsxs(La,{children:[u.jsx(fe,{variant:"outline",onClick:e,disabled:g||s,children:"Cancel"}),u.jsx(fe,{onClick:I,disabled:g||s,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:g?"Saving...":"Save Profile"})]})]})})},$O=b.createContext(void 0),hQ=({children:n})=>{const{user:e,isAuthenticated:t,loading:r}=tn(),{taskerProfile:s,loading:i}=Yr(),[a,c]=H.useState([]),[d,f]=H.useState([]),[p,g]=H.useState(!0),[v,w]=H.useState(!1),[I,_]=H.useState(null),[S,C]=H.useState(null);H.useEffect(()=>{if(!t||!e||r){c([]),g(!1);return}g(!0),_(null);const z=cs(Yt,"chatRooms"),P=Gh(z,s1("participants","array-contains",e.uid),px("lastMessageTimestamp","desc")),A=Rg(P,O=>{const M=O.docs.map(F=>{var L,ae;const $=F.data();return{id:F.id,participants:$.participants,participantNames:$.participantNames,lastMessage:$.lastMessage,lastMessageTimestamp:(L=$.lastMessageTimestamp)==null?void 0:L.toDate().toISOString(),createdAt:(ae=$.createdAt)==null?void 0:ae.toDate().toISOString()}});c(M),g(!1)},O=>{console.error("Error fetching chat rooms:",O),_("Failed to fetch chat rooms."),g(!1),ie.error("Failed to load chat rooms.")});return()=>A()},[t,e,r]),H.useEffect(()=>{if(!S){f([]);return}w(!0),_(null);const z=cs(Yt,"chatRooms",S,"messages"),P=Gh(z,px("timestamp","asc")),A=Rg(P,O=>{const M=O.docs.map(F=>{var L;const $=F.data();return{id:F.id,roomId:S,senderId:$.senderId,senderName:$.senderName,senderAvatar:$.senderAvatar,text:$.text,timestamp:(L=$.timestamp)==null?void 0:L.toDate().toISOString()}});f(M),w(!1)},O=>{console.error("Error fetching messages:",O),_("Failed to fetch messages."),w(!1),ie.error("Failed to load messages.")});return()=>A()},[S]);const U={chatRooms:a,messages:d,loadingRooms:p||r,loadingMessages:v,error:I,sendMessage:async(z,P)=>{if(!t||!e||!P.trim()){ie.error("You must be logged in and provide a message.");return}try{const A=cs(Yt,"chatRooms",z,"messages");await bf(A,{senderId:e.uid,senderName:e.displayName||e.email||"Anonymous",senderAvatar:e.photoURL||void 0,text:P.trim(),timestamp:ro()});const O=ms(cs(Yt,"chatRooms"),z);await Xl(O,{lastMessage:P.trim(),lastMessageTimestamp:ro()})}catch(A){throw console.error("Error sending message:",A),ie.error(`Failed to send message: ${A.message}`),A}},createChatRoom:async(z,P)=>{if(!t||!e)return ie.error("You must be logged in to create a chat room."),null;z.includes(e.uid)||(z.push(e.uid),P.push(e.displayName||e.email||"Anonymous")),z.sort();try{const A=cs(Yt,"chatRooms"),O=Gh(A,s1("participants","==",z),O7(1)),M=await My(O);if(!M.empty){const $=M.docs[0].id;return ie.info("Chat room already exists."),$}const F=await bf(A,{participants:z,participantNames:P,createdAt:ro(),lastMessage:"New chat started.",lastMessageTimestamp:ro()});return ie.success("Chat room created!"),F.id}catch(A){throw console.error("Error creating chat room:",A),ie.error(`Failed to create chat room: ${A.message}`),A}},fetchMessagesForRoom:z=>{C(z)}};return u.jsx($O.Provider,{value:U,children:n})},Zy=()=>{const n=b.useContext($O);if(n===void 0)throw new Error("useChat must be used within a ChatProvider");return n},fQ=async(n,e,t,r,s,i)=>{try{await bf(cs(Yt,"offers"),{taskId:n,taskerId:s.uid,taskerName:i.displayName,taskerAvatar:i.photoURL,clientId:e,offerAmount:t,message:r,status:"pending",dateCreated:ro()}),ie.success("Offer submitted successfully!")}catch(a){throw console.error("Error adding offer:",a),ie.error(`Failed to submit offer: ${a.message}`),a}},pQ=async(n,e,t)=>{try{const r=ms(Yt,"offers",n),s=await xd(r);if(!s.exists())return ie.error("Offer not found."),null;const i=s.data();if(i.clientId!==t.uid)return ie.error("You are not authorized to accept this offer."),null;await Xl(r,{status:"accepted",dateUpdated:ro()});const a=ms(Yt,"tasks",e);return await Xl(a,{status:"assigned",assignedTaskerId:i.taskerId,assignedOfferId:n}),ie.success("Offer accepted!"),{taskerId:i.taskerId,clientId:i.clientId}}catch(r){throw console.error("Error accepting offer:",r),ie.error(`Failed to accept offer: ${r.message}`),r}},mQ=async(n,e)=>{try{const t=ms(Yt,"offers",n),r=await xd(t);if(!r.exists()){ie.error("Offer not found.");return}if(r.data().clientId!==e.uid){ie.error("You are not authorized to reject this offer.");return}await Xl(t,{status:"rejected",dateUpdated:ro()}),ie.info("Offer rejected.")}catch(t){throw console.error("Error rejecting offer:",t),ie.error(`Failed to reject offer: ${t.message}`),t}},gQ=async(n,e)=>{try{const t=ms(Yt,"offers",n),r=await xd(t);if(!r.exists()){ie.error("Offer not found.");return}if(r.data().taskerId!==e.uid){ie.error("You are not authorized to withdraw this offer.");return}await Xl(t,{status:"withdrawn",dateUpdated:ro()}),ie.info("Offer withdrawn.")}catch(t){throw console.error("Error withdrawing offer:",t),ie.error(`Failed to withdraw offer: ${t.message}`),t}},yQ=(n,e)=>{const t=cs(Yt,"offers"),r=Gh(t);return Rg(r,i=>{const a=i.docs.map(c=>{var f,p;const d=c.data();return{id:c.id,taskId:d.taskId,taskerId:d.taskerId,taskerName:d.taskerName,taskerAvatar:d.taskerAvatar,clientId:d.clientId,offerAmount:d.offerAmount,message:d.message,status:d.status,dateCreated:((f=d.dateCreated)==null?void 0:f.toDate().toISOString())||new Date().toISOString(),dateUpdated:(p=d.dateUpdated)==null?void 0:p.toDate().toISOString()}});n(a)},i=>{console.error("Error fetching offers:",i),e("Failed to fetch offers."),ie.error("Failed to load offers.")})},BO=b.createContext(void 0),vQ=({children:n})=>{const{user:e,isAuthenticated:t}=tn(),{taskerProfile:r,isTasker:s,loading:i,fetchTaskerProfileById:a}=Yr(),{createChatRoom:c}=Zy(),[d,f]=H.useState([]),[p,g]=H.useState(!0),[v,w]=H.useState(null);H.useEffect(()=>{g(!0),w(null);const D=yQ(U=>{f(U),g(!1)},U=>{w(U),g(!1)});return()=>D()},[]);const j={offers:d,loading:p||i,error:v,addOffer:async(D,U,z,P)=>{if(!t||!e||!s||!r){ie.error("You must be logged in as a tasker to make an offer.");return}g(!0);try{await fQ(D,U,z,P,e,r)}catch{}finally{g(!1)}},getOffersForTask:D=>d.filter(U=>U.taskId===D),acceptOffer:async(D,U)=>{if(!t||!e)return ie.error("You must be logged in to accept an offer."),null;g(!0);try{const z=await pQ(D,U,e);if(z){const{taskerId:P,clientId:A}=z,O=await a(P),M=(O==null?void 0:O.displayName)||"Tasker",F=e.displayName||e.email||"Client";return await c([A,P],[F,M])}return null}catch{return null}finally{g(!1)}},rejectOffer:async D=>{if(!t||!e){ie.error("You must be logged in to reject an offer.");return}g(!0);try{await mQ(D,e)}catch{}finally{g(!1)}},withdrawOffer:async D=>{if(!t||!e){ie.error("You must be logged in to withdraw an offer.");return}g(!0);try{await gQ(D,e)}catch{}finally{g(!1)}}};return u.jsx(BO.Provider,{value:j,children:n})},ev=()=>{const n=b.useContext(BO);if(n===void 0)throw new Error("useOffers must be used within an OffersProvider");return n},wQ=({isOpen:n,onClose:e,task:t})=>{const{isAuthenticated:r,user:s}=tn(),{isTasker:i,loading:a}=Yr(),{addOffer:c,loading:d}=ev(),[f,p]=H.useState(""),[g,v]=H.useState(""),[w,I]=H.useState(!1);H.useEffect(()=>{n&&(p(""),v(""))},[n]);const _=async()=>{if(!r||!s){ie.error("You must be logged in to make an offer.");return}if(!i){ie.error("You must be registered as a tasker to make an offer.");return}if(!t){ie.error("No task selected to make an offer on.");return}if(!f||!g.trim()){ie.error("Please enter an offer amount and a message.");return}const C=parseFloat(f);if(isNaN(C)||C<=0){ie.error("Offer amount must be a positive number.");return}I(!0);try{await c(t.id,t.posterId,C,g),e()}catch{}finally{I(!1)}},S=w||a||d;return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[500px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Make an Offer"}),u.jsxs(Fa,{className:"text-[hsl(var(--text-light))]",children:['Submit your offer for "',(t==null?void 0:t.title)||"this task",'".']})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"offerAmount",className:"text-right",children:"Your Offer ()"}),u.jsx(bt,{id:"offerAmount",type:"number",placeholder:"e.g., 1200",className:"col-span-3",value:f,onChange:C=>p(C.target.value),disabled:S})]}),u.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[u.jsx(yt,{htmlFor:"message",className:"text-right pt-2",children:"Message"}),u.jsx(Ed,{id:"message",placeholder:"Tell the client why you're the best tasker for this job...",className:"col-span-3",value:g,onChange:C=>v(C.target.value),disabled:S})]})]}),u.jsxs(La,{children:[u.jsx(fe,{variant:"outline",onClick:e,disabled:S,children:"Cancel"}),u.jsx(fe,{onClick:_,disabled:S,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:w?"Submitting...":"Submit Offer"})]})]})})},xQ=({isOpen:n,onClose:e,onReviewSubmit:t,taskTitle:r})=>{const[s,i]=b.useState(0),[a,c]=b.useState(""),[d,f]=b.useState(!1);H.useEffect(()=>{n&&(i(0),c(""))},[n]);const p=v=>{i(v+1)},g=async()=>{if(s===0){ie.error("Please provide a star rating.");return}if(a.trim()===""){ie.error("Please write a review.");return}f(!0);try{await t(s,a),e()}catch{}finally{f(!1)}};return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[425px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Review Task"}),u.jsxs(Fa,{className:"text-[hsl(var(--text-light))]",children:['Share your experience for "',r,'".']})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{className:"text-lg font-semibold",children:"Rating"}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((v,w)=>u.jsx(io,{size:32,className:Ae("cursor-pointer transition-colors",w<s?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"),onClick:()=>p(w),"aria-label":`${w+1} star rating`},w))})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"review",children:"Your Review"}),u.jsx(Ed,{id:"review",placeholder:"How was your experience with the tasker?",value:a,onChange:v=>c(v.target.value),rows:4,disabled:d})]})]}),u.jsxs(La,{children:[u.jsx(fe,{variant:"outline",onClick:e,disabled:d,children:"Cancel"}),u.jsx(fe,{onClick:g,disabled:d,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:d?"Submitting...":"Submit Review"})]})]})})},_Q=({isOpen:n,onClose:e,task:t})=>{const{editTask:r}=wo(),[s,i]=H.useState((t==null?void 0:t.title)||""),[a,c]=H.useState((t==null?void 0:t.description)||""),[d,f]=H.useState((t==null?void 0:t.location)||""),[p,g]=H.useState(t!=null&&t.budget?String(t.budget):""),[v,w]=H.useState((t==null?void 0:t.category)||""),[I,_]=H.useState(!1);H.useEffect(()=>{t&&(i(t.title),c(t.description),f(t.location),g(String(t.budget)),w(t.category))},[t]);const S=async()=>{if(!t){ie.error("No task selected for editing.");return}if(!s||!a||!d||!p||!v){ie.error("Please fill in all task details.");return}_(!0);try{await r(t.id,{title:s,description:a,location:d,budget:parseFloat(p),category:v}),e()}catch{}finally{_(!1)}};return u.jsx(lc,{open:n,onOpenChange:e,children:u.jsxs(Da,{className:"sm:max-w-[500px]",children:[u.jsxs(Ma,{children:[u.jsx(Va,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Edit Task"}),u.jsx(Fa,{className:"text-[hsl(var(--text-light))]",children:"Update the details of your task."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"title",className:"text-right",children:"Title"}),u.jsx(bt,{id:"title",placeholder:"e.g., 'House Cleaning'",className:"col-span-3",value:s,onChange:C=>i(C.target.value),disabled:I})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"description",className:"text-right",children:"Description"}),u.jsx(Ed,{id:"description",placeholder:"Provide details about your task...",className:"col-span-3",value:a,onChange:C=>c(C.target.value),disabled:I})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"location",className:"text-right",children:"Location"}),u.jsx(bt,{id:"location",placeholder:"e.g., 'Quezon City, Metro Manila'",className:"col-span-3",value:d,onChange:C=>f(C.target.value),disabled:I})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"budget",className:"text-right",children:"Budget ()"}),u.jsx(bt,{id:"budget",type:"number",placeholder:"e.g., '1500'",className:"col-span-3",value:p,onChange:C=>g(C.target.value),disabled:I})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(yt,{htmlFor:"category",className:"text-right",children:"Category"}),u.jsxs(DO,{value:v,onValueChange:w,disabled:I,children:[u.jsx(Mb,{id:"category",className:"col-span-3",children:u.jsx(MO,{placeholder:"Select a category"})}),u.jsxs(Lb,{children:[u.jsx(Fn,{value:"cleaning",children:"Home Cleaning"}),u.jsx(Fn,{value:"repairs",children:"Handyman Services"}),u.jsx(Fn,{value:"moving",children:"Moving & Hauling"}),u.jsx(Fn,{value:"delivery",children:"Delivery & Errands"}),u.jsx(Fn,{value:"painting",children:"Painting Services"}),u.jsx(Fn,{value:"assembly",children:"Assembly Services"}),u.jsx(Fn,{value:"marketing",children:"Marketing Services"}),u.jsx(Fn,{value:"other",children:"Other"})]})]})]})]}),u.jsxs(La,{children:[u.jsx(fe,{variant:"outline",onClick:e,disabled:I,children:"Cancel"}),u.jsx(fe,{onClick:S,disabled:I,className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:I?"Saving...":"Save Changes"})]})]})})},zO=b.createContext(void 0),bQ=({children:n})=>{const[e,t]=H.useState(!1),[r,s]=H.useState(!1),[i,a]=H.useState(!1),[c,d]=H.useState(!1),[f,p]=H.useState(!1),[g,v]=H.useState(!1),[w,I]=H.useState(!1),[_,S]=H.useState(null),[C,R]=H.useState(null),[j,D]=H.useState(null),{isAuthenticated:U}=tn(),{completeTaskWithReview:z}=wo(),P=()=>{if(U){ie.info("You are already logged in.");return}me(),t(!0)},A=()=>{if(U){ie.info("You are already logged in.");return}me(),s(!0)},O=()=>{if(!U){ie.error("Please log in to post a task."),P();return}me(),a(!0)},M=()=>{if(!U){ie.error("Please log in to register as a tasker."),P();return}me(),d(!0)},F=ge=>{if(!U){ie.error("Please log in to make an offer."),P();return}me(),S(ge),p(!0)},$=ge=>{if(!U){ie.error("Please log in to review a task."),P();return}me(),R(ge),v(!0)},L=ge=>{if(!U){ie.error("Please log in to edit a task."),P();return}me(),D(ge),I(!0)},ae=async(ge,ee)=>{C&&C.assignedTaskerId?await z(C.id,ge,ee):ie.error("Cannot submit review: Task or assigned tasker information is missing.")},me=()=>{t(!1),s(!1),a(!1),d(!1),p(!1),v(!1),I(!1),S(null),R(null),D(null)},xe={openLoginModal:P,openSignupModal:A,openPostTaskModal:O,openTaskerRegistrationModal:M,openMakeOfferModal:F,openReviewTaskModal:$,openEditTaskModal:L,closeAllModals:me};return u.jsxs(zO.Provider,{value:xe,children:[n,u.jsx(oG,{isOpen:e,onClose:me,onSwitchToSignup:A}),u.jsx(wY,{isOpen:r,onClose:me,onSwitchToLogin:P}),u.jsx(oQ,{isOpen:i,onClose:me}),u.jsx(dQ,{isOpen:c,onClose:me}),u.jsx(wQ,{isOpen:f,onClose:me,task:_}),u.jsx(xQ,{isOpen:g,onClose:me,onReviewSubmit:ae,taskTitle:(C==null?void 0:C.title)||""}),u.jsx(_Q,{isOpen:w,onClose:me,task:j})]})},za=()=>{const n=b.useContext(zO);if(n===void 0)throw new Error("useModal must be used within a ModalProvider");return n};var Vb="Avatar",[EQ,See]=gs(Vb),[TQ,WO]=EQ(Vb),qO=b.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=b.useState("idle");return u.jsx(TQ,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:u.jsx(Je.span,{...r,ref:e})})});qO.displayName=Vb;var HO="AvatarImage",GO=b.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=WO(HO,t),c=SQ(r,i),d=Ut(f=>{s(f),a.onImageLoadingStatusChange(f)});return Bt(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?u.jsx(Je.img,{...i,ref:e,src:r}):null});GO.displayName=HO;var KO="AvatarFallback",YO=b.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=WO(KO,t),[a,c]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&i.imageLoadingStatus!=="loaded"?u.jsx(Je.span,{...s,ref:e}):null});YO.displayName=KO;function J1(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function SQ(n,{referrerPolicy:e,crossOrigin:t}){const r=kQ(),s=b.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,c]=b.useState(()=>J1(i,n));return Bt(()=>{c(J1(i,n))},[i,n]),Bt(()=>{const d=g=>()=>{c(g)};if(!i)return;const f=d("loaded"),p=d("error");return i.addEventListener("load",f),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",f),i.removeEventListener("error",p)}},[i,t,e]),a}function IQ(){return()=>{}}function kQ(){return b.useSyncExternalStore(IQ,()=>!0,()=>!1)}var QO=qO,JO=GO,XO=YO;const Sr=b.forwardRef(({className:n,...e},t)=>u.jsx(QO,{ref:t,className:Ae("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Sr.displayName=QO.displayName;const Ir=b.forwardRef(({className:n,...e},t)=>u.jsx(JO,{ref:t,className:Ae("aspect-square h-full w-full",n),...e}));Ir.displayName=JO.displayName;const kr=b.forwardRef(({className:n,children:e,...t},r)=>u.jsx(XO,{ref:r,className:Ae("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...t,children:e}));kr.displayName=XO.displayName;const PQ=({isAuthenticated:n,onSignOut:e})=>{const{openLoginModal:t,openSignupModal:r,openPostTaskModal:s}=za(),{user:i}=tn(),{isTasker:a}=Yr();return u.jsx("header",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-50 h-[60px] flex items-center pt-[var(--safe-area-top)]",children:u.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center w-full",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("h1",{className:"text-2xl text-[hsl(var(--primary-color))] font-bold",children:"Tasko"})}),u.jsxs("nav",{className:"hidden md:flex gap-8",children:[u.jsx(Xn,{to:"/",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"Home"}),u.jsx("a",{href:"#categories",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"Services"}),n&&u.jsx(Xn,{to:"/my-tasks",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"My Tasks"}),n&&a&&u.jsx(Xn,{to:"/tasker-dashboard",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"Tasker Dashboard"}),u.jsx("a",{href:"#how-it-works",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"How It Works"}),u.jsx(Xn,{to:"/features-earnings",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"Become a Tasker"}),n&&u.jsx(Xn,{to:"/profile",className:"text-[hsl(var(--text-dark))] hover:text-[hsl(var(--primary-color))] font-semibold transition-colors p-2 rounded-md text-sm",children:"Profile"})]}),u.jsx("div",{className:"flex gap-3 items-center",children:n?u.jsxs(u.Fragment,{children:[u.jsxs(fe,{onClick:s,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] flex items-center gap-1 px-3 py-2 h-auto text-sm",children:[u.jsx(f2,{size:16})," Post Task"]}),u.jsx(Xn,{to:"/profile",className:"flex items-center",children:u.jsxs(Sr,{className:"w-8 h-8 border-2 border-[hsl(var(--primary-color))]",children:[u.jsx(Ir,{src:(i==null?void 0:i.photoURL)||void 0,alt:(i==null?void 0:i.displayName)||(i==null?void 0:i.email)||"User"}),u.jsx(kr,{className:"bg-[hsl(var(--primary-color))] text-white text-sm font-semibold",children:i!=null&&i.displayName?i.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:16})})]})}),u.jsx(fe,{onClick:e,variant:"outline",className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"Sign Out"})]}):u.jsxs(u.Fragment,{children:[u.jsx(fe,{onClick:t,variant:"outline",className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"Login"}),u.jsx(fe,{onClick:r,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]",children:"Sign Up"})]})})]})})},CQ=({searchTerm:n,onSearchTermChange:e,onSearchSubmit:t})=>{const r=s=>{s.key==="Enter"&&t()};return u.jsxs("section",{className:"relative bg-gradient-to-r from-[hsl(var(--primary-color))] to-[#008a25] text-white py-20 md:py-32 overflow-hidden mt-[60px] rounded-b-[20px] mb-6",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:u.jsx("img",{src:"https://images.unsplash.com/photo-1507679799977-c91849123e4f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Background",className:"w-full h-full object-cover",loading:"lazy"})}),u.jsxs("div",{className:"container mx-auto px-4 relative z-10 text-center",children:[u.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold leading-tight mb-4 drop-shadow-lg",children:"Your Everyday Tasks, Simplified."}),u.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-3xl mx-auto drop-shadow-md opacity-90",children:"Connect with trusted local taskers for home services, errands, and more."}),u.jsxs("div",{className:"max-w-2xl mx-auto relative",children:[u.jsx(HH,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 z-20",size:20}),u.jsx(bt,{type:"text",placeholder:" What task do you need help with? (e.g., 'house cleaning', 'furniture assembly')",className:"w-full py-4 pl-12 pr-4 rounded-full border border-gray-300 bg-white text-gray-800 shadow-lg focus:ring-2 focus:ring-[hsl(var(--primary-color))]",value:n,onChange:s=>e(s.target.value),onKeyDown:r}),u.jsx(fe,{onClick:t,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[hsl(var(--secondary-color))] hover:bg-[#e05a00] text-white rounded-full px-6 py-2 h-auto",children:"Search"})]}),u.jsx("p",{className:"mt-6 text-sm md:text-base drop-shadow-md",children:"Popular: Cleaning, Handyman, Moving, Delivery"})]})]})},lt=b.forwardRef(({className:n,...e},t)=>u.jsx("div",{ref:t,className:Ae("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));lt.displayName="Card";const dr=b.forwardRef(({className:n,...e},t)=>u.jsx("div",{ref:t,className:Ae("flex flex-col space-y-1.5 p-6",n),...e}));dr.displayName="CardHeader";const hr=b.forwardRef(({className:n,...e},t)=>u.jsx("h3",{ref:t,className:Ae("text-2xl font-semibold leading-none tracking-tight",n),...e}));hr.displayName="CardTitle";const Fb=b.forwardRef(({className:n,...e},t)=>u.jsx("p",{ref:t,className:Ae("text-sm text-muted-foreground",n),...e}));Fb.displayName="CardDescription";const ct=b.forwardRef(({className:n,...e},t)=>u.jsx("div",{ref:t,className:Ae("p-6 pt-0",n),...e}));ct.displayName="CardContent";const AQ=b.forwardRef(({className:n,...e},t)=>u.jsx("div",{ref:t,className:Ae("flex items-center p-6 pt-0",n),...e}));AQ.displayName="CardFooter";const RQ=[{name:"All Services",icon:d2,description:"Browse all available tasks.",value:"all"},{name:"Home Cleaning",icon:u2,description:"Sparkling clean homes, hassle-free.",value:"cleaning"},{name:"Handyman Services",icon:nG,description:"Fixes, repairs, and installations.",value:"repairs"},{name:"Moving & Hauling",icon:ZH,description:"Effortless moving and junk removal.",value:"moving"},{name:"Delivery & Errands",icon:zH,description:"Get anything delivered or done.",value:"delivery"},{name:"Painting Services",icon:WH,description:"Transform your space with a fresh coat.",value:"painting"},{name:"Assembly Services",icon:FH,description:"Furniture assembly, electronics setup.",value:"assembly"}],NQ=({activeCategory:n,onCategorySelect:e})=>u.jsx("section",{id:"categories",className:"py-12 bg-[hsl(var(--bg-light))] dark:bg-gray-800",children:u.jsxs("div",{className:"container mx-auto px-4 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-10",children:"Explore Our Services"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:RQ.map((t,r)=>u.jsx(lt,{className:Ae("flex flex-col items-center p-6 shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer border-[hsl(var(--border-color))] rounded-[var(--border-radius)]",n===t.value?"border-2 border-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)] dark:bg-gray-700":"border border-[hsl(var(--border-color))] dark:border-gray-700"),onClick:()=>e(t.value),children:u.jsxs(ct,{className:"flex flex-col items-center p-0",children:[u.jsx(t.icon,{size:48,className:"text-[hsl(var(--primary-color))] mb-4"}),u.jsx("h3",{className:"text-xl font-semibold mb-2 text-[hsl(var(--text-dark))] dark:text-gray-100",children:t.name}),u.jsx("p",{className:"text-[hsl(var(--text-light))] dark:text-gray-300 text-sm",children:t.description})]})},r))})]})}),jQ=()=>{const n=[{icon:DH,title:"Post Your Task",description:"Describe what you need help with and set your budget."},{icon:VH,title:"Get Offers",description:"Taskers in your area will send you offers."},{icon:eG,title:"Choose a Tasker",description:"Review profiles and pick the best fit."},{icon:Tf,title:"Get It Done",description:"Your task gets completed safely and efficiently."}];return u.jsx("section",{id:"how-it-works",className:"py-12 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8",children:u.jsxs("div",{className:"container mx-auto px-4 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-10",children:"How Tasko Works"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((e,t)=>u.jsxs(lt,{className:"flex flex-col items-center p-6 shadow-md rounded-[var(--border-radius)]",children:[u.jsxs(dr,{className:"p-0 mb-4",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(e.icon,{size:32,className:"text-[hsl(var(--primary-color))] dark:text-green-200"})}),u.jsx(hr,{className:"text-xl font-semibold text-[hsl(var(--text-dark))] dark:text-gray-100",children:e.title})]}),u.jsx(ct,{className:"p-0",children:u.jsx("p",{className:"text-[hsl(var(--text-light))] dark:text-gray-300 text-sm",children:e.description})})]},t))})]})})},OQ=()=>u.jsxs("footer",{className:"bg-gray-800 text-gray-300 py-10",children:[u.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Tasko"}),u.jsx("p",{className:"text-sm mb-2",children:"Your trusted partner for everyday tasks."}),u.jsx("p",{className:"text-sm",children:"Making life easier, one task at a time."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Links"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(Xn,{to:"/",className:"hover:text-white transition-colors duration-200",children:"Home"})}),u.jsx("li",{children:u.jsx("a",{href:"#how-it-works",className:"hover:text-white transition-colors duration-200",children:"How it Works"})}),u.jsx("li",{children:u.jsx(Xn,{to:"/features-earnings",className:"hover:text-white transition-colors duration-200",children:"Become a Tasker"})}),u.jsx("li",{children:u.jsx(Xn,{to:"/contact",className:"hover:text-white transition-colors duration-200",children:"Help & Support"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Legal"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(Xn,{to:"/privacy",className:"hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),u.jsx("li",{children:u.jsx(Xn,{to:"/terms",className:"hover:text-white transition-colors duration-200",children:"Terms of Service"})}),u.jsx("li",{children:u.jsx(Xn,{to:"/eula",className:"hover:text-white transition-colors duration-200",children:"EULA"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Download Our App"}),u.jsx("p",{className:"text-sm mb-4",children:"Get the full Tasko experience on your mobile device."}),u.jsx("div",{className:"flex flex-col space-y-3 mb-6",children:u.jsxs("div",{className:"flex flex-col space-y-3",children:[u.jsx("a",{href:"/app-store-badge.png",target:"_blank",rel:"noopener noreferrer",children:u.jsxs(fe,{className:"w-full bg-black text-white hover:bg-gray-700 flex items-center justify-center space-x-2 py-2 px-4 rounded-lg",children:[u.jsx(AH,{size:20}),u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-xs",children:"Download on the"}),u.jsx("span",{className:"text-sm font-semibold",children:"App Store"})]})]})}),u.jsx("a",{href:"/google-play-badge.png",target:"_blank",rel:"noopener noreferrer",children:u.jsxs(fe,{className:"w-full bg-black text-white hover:bg-gray-700 flex items-center justify-center space-x-2 py-2 px-4 rounded-lg",children:[u.jsx(qH,{size:20}),u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-xs",children:"Get it on"}),u.jsx("span",{className:"text-sm font-semibold",children:"Google Play"})]})]})})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Follow Us"}),u.jsx("div",{className:"flex space-x-4"})]})]})]}),u.jsxs("div",{className:"text-center text-sm text-gray-500 mt-10 border-t border-gray-700 pt-6",children:[" ",new Date().getFullYear()," Tasko. All rights reserved."]})]}),DQ=()=>u.jsx("div",{className:"p-4 text-center",children:u.jsx("a",{href:"https://www.dyad.sh/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Made with Dyad"})}),MQ=()=>u.jsxs("div",{className:"fixed inset-0 bg-[hsl(var(--primary-color))] flex flex-col items-center justify-center z-[9999] text-white transition-opacity duration-500",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tasko"}),u.jsx("p",{children:"Loading your task service..."}),u.jsx("div",{className:"w-10 h-10 border-3 border-solid border-[rgba(255,255,255,0.3)] border-t-white rounded-full animate-spin"})]}),LQ=({isVisible:n,onInstall:e,onClose:t})=>n?u.jsxs("div",{className:"fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-xl p-4 z-50 flex flex-col md:flex-row items-center gap-4 animate-slideUp md:max-w-md md:mx-auto",children:[u.jsx("div",{className:"text-3xl text-[hsl(var(--primary-color))]",children:""}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h3",{className:"font-semibold text-[hsl(var(--text-dark))]",children:"Install Tasko App"}),u.jsx("p",{className:"text-sm text-[hsl(var(--text-light))]",children:"Get the full app experience with offline access"})]}),u.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-center",children:[u.jsx(fe,{onClick:e,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] text-sm px-4 py-2",children:"Install"}),u.jsx(fe,{onClick:t,variant:"ghost",size:"icon",className:"text-[hsl(var(--text-light))] hover:bg-gray-100",children:u.jsx(qy,{size:20})})]})]}):null,VQ=({isVisible:n})=>u.jsx("div",{className:Ae("fixed top-[60px] left-0 right-0 bg-[hsl(var(--secondary-color))] text-white text-center py-2 z-40 transition-transform duration-300 ease-out",n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(tG,{size:18}),u.jsx("span",{children:"You are currently offline"})]})}),FQ=()=>{const{isAuthenticated:n}=tn(),{isTasker:e}=Yr(),{openLoginModal:t}=za(),r=hn(),s=()=>{n?r("/profile"):t()};return u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 md:hidden pb-[var(--safe-area-bottom)]",children:u.jsxs("div",{className:"flex justify-around py-2",children:[u.jsxs(um,{to:"/",className:({isActive:i})=>Ae("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),children:[u.jsx(u2,{size:20,className:"mb-1"}),u.jsx("span",{children:"Home"})]}),u.jsxs("a",{href:"#categories",className:"flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200 text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50",children:[u.jsx(d2,{size:20,className:"mb-1"}),u.jsx("span",{children:"Services"})]}),u.jsxs(um,{to:"/my-tasks",className:({isActive:i})=>Ae("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),children:[u.jsx(UH,{size:20,className:"mb-1"}),u.jsx("span",{children:"My Tasks"})]}),n&&e&&u.jsxs(um,{to:"/tasker-dashboard",className:({isActive:i})=>Ae("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),children:[u.jsx(Cu,{size:20,className:"mb-1"}),u.jsx("span",{children:"Dashboard"})]}),u.jsxs(um,{to:"/chat",className:({isActive:i})=>Ae("flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200",i?"text-[hsl(var(--primary-color))] bg-[rgba(0,168,45,0.1)]":"text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50"),children:[u.jsx(tc,{size:20,className:"mb-1"}),u.jsx("span",{children:"Chat"})]}),u.jsxs("button",{onClick:s,className:"flex flex-col items-center text-xs font-medium p-2 rounded-md transition-colors duration-200 text-[hsl(var(--text-light))] hover:text-[hsl(var(--primary-color))] hover:bg-gray-50",children:[u.jsx(Vs,{size:20,className:"mb-1"}),u.jsx("span",{children:"Profile"})]})]})})},Rm=[{title:"Welcome to Tasko!",description:"Your go-to platform for finding reliable help and getting tasks done efficiently.",image:"https://images.unsplash.com/photo-1522071820075-efceb6a63d43?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Find Skilled Taskers",description:"Browse through a wide range of categories and connect with verified professionals near you.",image:"https://images.unsplash.com/photo-1552664730-d307ca8849d1?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Post Your Tasks",description:"Need something done? Post your task, set your budget, and let taskers bid on it.",image:"https://images.unsplash.com/photo-1504384308090-c894fd24153e?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Earn Money as a Tasker",description:"Offer your skills, find tasks that match your expertise, and start earning on your own terms.",image:"https://images.unsplash.com/photo-1556740738-b63629034c2f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Secure & Transparent",description:"Enjoy secure payments, transparent pricing, and reliable support every step of the way.",image:"https://images.unsplash.com/photo-1579621970563-cd787c538e76?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],UQ=({onClose:n})=>{const[e,t]=H.useState(0),r=Rm[e],s=()=>{e<Rm.length-1?t(e+1):a()},i=()=>{e>0&&t(e-1)},a=()=>{localStorage.setItem("hasSeenOnboarding","true"),n()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4",children:u.jsxs(lt,{className:"w-full max-w-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg shadow-2xl relative",children:[u.jsx(fe,{variant:"ghost",size:"icon",onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u.jsx(qy,{size:24})}),u.jsxs(ct,{className:"p-6 text-center",children:[u.jsx("img",{src:r.image,alt:"Onboarding illustration",className:"w-32 h-32 object-contain mx-auto mb-6"}),u.jsx("h2",{className:"text-3xl font-bold text-[hsl(var(--primary-color))] mb-3",children:r.title}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-8",children:r.description}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs(fe,{variant:"outline",onClick:i,disabled:e===0,className:"flex items-center gap-2 border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[u.jsx(RH,{size:20})," Previous"]}),u.jsx("div",{className:"flex space-x-2",children:Rm.map((c,d)=>u.jsx("span",{className:`block w-3 h-3 rounded-full ${d===e?"bg-[hsl(var(--primary-color))]":"bg-gray-300 dark:bg-gray-600"}`},d))}),u.jsxs(fe,{onClick:s,className:"flex items-center gap-2 bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]",children:[e===Rm.length-1?"Finish":"Next"," ",u.jsx(a2,{size:20})]})]})]})]})})},$Q=({minBudget:n,setMinBudget:e,maxBudget:t,setMaxBudget:r,filterLocation:s,setFilterLocation:i,onApplyFilters:a,onResetFilters:c})=>u.jsxs("section",{className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-6",children:"Refine Your Search"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterLocation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),u.jsx(bt,{id:"filterLocation",type:"text",placeholder:"e.g., 'Makati City'",value:s,onChange:d=>i(d.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"minBudget",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Budget ()"}),u.jsx(bt,{id:"minBudget",type:"number",placeholder:"e.g., 500",value:n,onChange:d=>e(d.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"maxBudget",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Budget ()"}),u.jsx(bt,{id:"maxBudget",type:"number",placeholder:"e.g., 2000",value:t,onChange:d=>r(d.target.value),className:"w-full"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(fe,{onClick:c,variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:"Reset Filters"}),u.jsx(fe,{onClick:a,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))]",children:"Apply Filters"})]})]});function Gt({className:n,...e}){return u.jsx("div",{className:Ae("animate-pulse rounded-md bg-muted",n),...e})}const BQ=n=>({all:"All Services",cleaning:"Cleaning",moving:"Moving",assembly:"Assembly",repairs:"Repairs",delivery:"Delivery",mounting:"Mounting",painting:"Painting",marketing:"Marketing",other:"Other"})[n]||"Task",zQ=({tasks:n,loading:e,onViewTaskDetails:t})=>u.jsxs("section",{id:"featured-tasks",className:"py-8",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8 text-center",children:" Featured Tasks"}),e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((r,s)=>u.jsxs(lt,{className:"shadow-lg rounded-[var(--border-radius)] overflow-hidden",children:[u.jsx(Gt,{className:"h-40 w-full"}),u.jsxs(ct,{className:"p-4",children:[u.jsx(Gt,{className:"h-6 w-3/4 mb-2"}),u.jsx(Gt,{className:"h-4 w-1/2 mb-2"}),u.jsx(Gt,{className:"h-6 w-1/3 mb-4"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gt,{className:"h-8 w-8 rounded-full"}),u.jsx(Gt,{className:"h-4 w-20"})]}),u.jsx(Gt,{className:"h-10 w-24 rounded-md"})]})]})]},s))}):n.length===0?u.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No featured tasks available right now."}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(r=>u.jsxs(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute top-2 left-2 bg-[hsl(var(--primary-color))] text-white px-3 py-1 rounded-full text-xs font-semibold",children:BQ(r.category)})]}),u.jsxs(ct,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),u.jsxs("p",{className:"text-[hsl(var(--text-light))] flex items-center mb-2",children:[u.jsx(_d,{size:16,className:"mr-2"})," ",r.location]}),u.jsxs("p",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:["",r.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:r.posterAvatar,alt:r.posterName,className:"w-8 h-8 rounded-full object-cover border-2 border-[hsl(var(--border-color))]"}),u.jsx("span",{className:"font-medium",children:r.posterName})]}),u.jsx(fe,{variant:"outline",onClick:()=>t(r.id),className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"View Details"})]})]})]},r.id))})]}),WQ=n=>({all:"All Services",cleaning:"Cleaning",moving:"Moving",assembly:"Assembly",repairs:"Repairs",delivery:"Delivery",mounting:"Mounting",painting:"Painting",marketing:"Marketing",other:"Other"})[n]||"Task",qQ=({tasks:n,loading:e,error:t,onViewTaskDetails:r})=>{const{openPostTaskModal:s}=za();return u.jsxs("section",{id:"tasks",className:"py-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))]",children:" Available Tasks Near You"}),u.jsxs(fe,{onClick:s,className:"bg-[hsl(var(--primary-color))] text-white hover:bg-[hsl(var(--primary-color))] flex items-center gap-2",children:[u.jsx(f2,{size:20})," Post a Task"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t&&u.jsxs("p",{className:"col-span-full text-center text-red-500 italic py-8",children:["Error loading tasks: ",t]}),e&&[...Array(6)].map((i,a)=>u.jsxs(lt,{className:"shadow-lg rounded-[var(--border-radius)] overflow-hidden",children:[u.jsx(Gt,{className:"h-40 w-full"}),u.jsxs(ct,{className:"p-4",children:[u.jsx(Gt,{className:"h-6 w-3/4 mb-2"}),u.jsx(Gt,{className:"h-4 w-1/2 mb-2"}),u.jsx(Gt,{className:"h-6 w-1/3 mb-4"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gt,{className:"h-8 w-8 rounded-full"}),u.jsx(Gt,{className:"h-4 w-20"})]}),u.jsx(Gt,{className:"h-10 w-24 rounded-md"})]})]})]},a)),!e&&n.length===0&&!t?u.jsx("p",{className:"col-span-full text-center text-gray-500 italic py-8",children:"No tasks found matching your criteria. Try adjusting your filters!"}):!e&&n.map(i=>u.jsxs(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute top-2 left-2 bg-[hsl(var(--primary-color))] text-white px-3 py-1 rounded-full text-xs font-semibold",children:WQ(i.category)})]}),u.jsxs(ct,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.title}),u.jsxs("p",{className:"text-[hsl(var(--text-light))] flex items-center mb-2",children:[u.jsx(_d,{size:16,className:"mr-2"})," ",i.location]}),u.jsxs("p",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:["",i.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:i.posterAvatar,alt:i.posterName,className:"w-8 h-8 rounded-full object-cover border-2 border-[hsl(var(--border-color))]"}),u.jsx("span",{className:"font-medium",children:i.posterName})]}),u.jsx(fe,{variant:"outline",onClick:()=>r(i.id),className:"border-[hsl(var(--primary-color))] text-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] hover:text-white",children:"View Details"})]})]})]},i.id))]})]})},HQ=Zx("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Mt({className:n,variant:e,...t}){return u.jsx("div",{className:Ae(HQ({variant:e}),n),...t})}const GQ=({taskers:n,loading:e})=>{const t=hn();return u.jsxs("section",{id:"top-taskers",className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8 text-center",children:" Top Taskers"}),e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((r,s)=>u.jsx(lt,{className:"shadow-md rounded-[var(--border-radius)]",children:u.jsxs(ct,{className:"p-4 flex flex-col items-center text-center",children:[u.jsx(Gt,{className:"w-20 h-20 rounded-full mb-3"}),u.jsx(Gt,{className:"h-6 w-3/4 mb-1"}),u.jsx(Gt,{className:"h-4 w-1/2 mb-2"}),u.jsx(Gt,{className:"h-4 w-1/3 mb-3"}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[u.jsx(Gt,{className:"h-6 w-16 rounded-full"}),u.jsx(Gt,{className:"h-6 w-16 rounded-full"}),u.jsx(Gt,{className:"h-6 w-16 rounded-full"})]}),u.jsx(Gt,{className:"h-10 w-32 rounded-md"})]})},s))}):n.length===0?u.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No top taskers available yet. Be the first to register!"}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(r=>u.jsx(lt,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 rounded-[var(--border-radius)]",children:u.jsxs(ct,{className:"p-4 flex flex-col items-center text-center",children:[u.jsxs(Sr,{className:"w-20 h-20 mb-3 border-2 border-green-500",children:[u.jsx(Ir,{src:r.photoURL||void 0,alt:r.displayName}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-2xl font-semibold",children:r.displayName?r.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:24})})]}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:r.displayName}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:r.bio}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-3",children:[u.jsx(Oa,{size:16})," ",u.jsxs("span",{children:["",r.hourlyRate.toLocaleString(),"/hr"]})]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[r.skills.slice(0,3).map((s,i)=>u.jsx(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:s},i)),r.skills.length>3&&u.jsxs(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:["+",r.skills.length-3," more"]})]}),u.jsx(fe,{variant:"outline",onClick:()=>t(`/taskers/${r.userId}`),className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Profile"})]})},r.userId))})]})},KQ=()=>u.jsxs("section",{id:"gamification",className:"py-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg my-8 p-6 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-[hsl(var(--primary-color))] mb-8",children:" Earn Badges!"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"Complete tasks, get 5-star ratings, and be a fast responder to earn exclusive Tasko badges!"}),u.jsxs("div",{className:"flex justify-center gap-6 flex-wrap",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(h0,{size:48,className:"text-yellow-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"5-Star Rated"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Achieve perfect ratings"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(h0,{size:48,className:"text-blue-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Fast Responder"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reply quickly to clients"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx(h0,{size:48,className:"text-purple-500 mb-2"}),u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Task Master"}),u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete many tasks"})]})]})]}),YQ=()=>u.jsxs("section",{id:"referral-promo",className:"py-8 bg-[hsl(var(--primary-color))] text-white rounded-lg shadow-lg my-8 p-6 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold mb-4",children:" Invite Friends & Earn!"}),u.jsx("p",{className:"text-lg mb-6",children:"Refer a friend to Tasko and both of you will earn 50 credits!"}),u.jsxs(fe,{className:"bg-[hsl(var(--secondary-color))] hover:bg-[#e05a00] text-white text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all flex items-center gap-2 mx-auto",children:[u.jsx(LH,{size:24})," Refer Now!"]})]}),ZO=H.createContext(void 0),QQ=2e3,JQ=({children:n})=>{const[e,t]=H.useState(typeof navigator<"u"?navigator.onLine:!0),[r,s]=H.useState(null),[i,a]=H.useState(!1),[c,d]=H.useState(!0);H.useEffect(()=>{const w=setTimeout(()=>{d(!1)},QQ),I=()=>{t(!0),ie.success("You are back online!")},_=()=>{t(!1),ie.error("You are currently offline.")},S=R=>{R.preventDefault(),s(R),f()||setTimeout(()=>{a(!0)},3e3)},C=()=>{s(null),a(!1),ie.success("Tasko installed successfully!")};return typeof window<"u"&&(window.addEventListener("online",I),window.addEventListener("offline",_),window.addEventListener("beforeinstallprompt",S),window.addEventListener("appinstalled",C),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(R=>{console.log("SW registered: ",R)}).catch(R=>{console.log("SW registration failed: ",R),ie.error("Failed to register service worker for offline support.")})})),()=>{clearTimeout(w),typeof window<"u"&&(window.removeEventListener("online",I),window.removeEventListener("offline",_),window.removeEventListener("beforeinstallprompt",S),window.removeEventListener("appinstalled",C))}},[]);const f=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,v={isOnline:e,showInstallPrompt:i,installApp:async()=>{if(r){r.prompt();const{outcome:w}=await r.userChoice;w==="accepted"&&(s(null),a(!1))}},closeInstallPrompt:()=>{a(!1)},showSplashScreen:c};return u.jsx(ZO.Provider,{value:v,children:n})},XQ=()=>{const n=H.useContext(ZO);if(n===void 0)throw new Error("usePWA must be used within a PWAProvider");return n},ZQ=()=>{const{isOnline:n,showInstallPrompt:e,installApp:t,closeInstallPrompt:r,showSplashScreen:s}=XQ(),{isAuthenticated:i,loading:a,logout:c}=tn(),{openPostTaskModal:d,openLoginModal:f}=za(),p=hn(),{tasks:g,loading:v,error:w}=wo(),{allTaskerProfiles:I,loading:_}=Yr(),[S,C]=H.useState(""),[R,j]=H.useState("all"),[D,U]=H.useState(""),[z,P]=H.useState(""),[A,O]=H.useState(""),[M,F]=H.useState(!1);H.useEffect(()=>{localStorage.getItem("hasSeenOnboarding")||F(!0)},[]);const $=async()=>{await c()},L=()=>{console.log("Searching for:",S,"in category:",R,"min budget:",D,"max budget:",z,"location:",A)},ae=re=>{j(re),C("")},me=re=>{p(`/tasks/${re}`)},xe=()=>{C(""),j("all"),U(""),P(""),O("")},ge=H.useMemo(()=>{let re=g;if(R&&R!=="all"&&(re=re.filter(W=>W.category===R)),S){const W=S.toLowerCase();re=re.filter(X=>X.title.toLowerCase().includes(W)||X.description.toLowerCase().includes(W)||X.location.toLowerCase().includes(W))}if(D){const W=parseFloat(D);isNaN(W)||(re=re.filter(X=>X.budget>=W))}if(z){const W=parseFloat(z);isNaN(W)||(re=re.filter(X=>X.budget<=W))}if(A){const W=A.toLowerCase();re=re.filter(X=>X.location.toLowerCase().includes(W))}return re},[g,S,R,D,z,A]),ee=H.useMemo(()=>g.filter(re=>re.status==="open").slice(0,5),[g]),K=H.useMemo(()=>I.slice(0,3),[I]);return u.jsxs("div",{className:"min-h-screen bg-[hsl(var(--bg-light))] dark:bg-gray-900 text-[hsl(var(--text-dark))] dark:text-gray-100 pb-16 md:pb-0",children:[u.jsx("div",{className:Ae("fixed inset-0 z-[9999] transition-opacity duration-500",s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:u.jsx(MQ,{})}),u.jsx(VQ,{isVisible:!n}),u.jsx(PQ,{isAuthenticated:i,onSignOut:$}),u.jsx(CQ,{searchTerm:S,onSearchTermChange:C,onSearchSubmit:L}),u.jsxs("main",{className:"container mx-auto p-4 pt-[60px]",children:[u.jsx(NQ,{activeCategory:R,onCategorySelect:ae}),u.jsx($Q,{minBudget:D,setMinBudget:U,maxBudget:z,setMaxBudget:P,filterLocation:A,setFilterLocation:O,onApplyFilters:L,onResetFilters:xe}),u.jsx(zQ,{tasks:ee,loading:v,onViewTaskDetails:me}),u.jsx(qQ,{tasks:ge,loading:v,error:w,onViewTaskDetails:me}),u.jsx(GQ,{taskers:K,loading:_}),u.jsx(KQ,{}),u.jsx(YQ,{}),u.jsx(jQ,{})]}),u.jsx(OQ,{}),u.jsx(DQ,{}),u.jsx(LQ,{isVisible:e,onInstall:t,onClose:r}),u.jsx(FQ,{}),M&&u.jsx(UQ,{onClose:()=>F(!1)})]})},eJ=()=>{const n=dd();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),u.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),u.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},tJ=()=>{const{id:n}=CC(),e=hn(),{tasks:t,loading:r,error:s}=wo(),{user:i,isAuthenticated:a,loading:c}=tn(),{isTasker:d,loading:f}=Yr(),{offers:p,loading:g,acceptOffer:v,rejectOffer:w,withdrawOffer:I}=ev(),{openMakeOfferModal:_}=za(),{createChatRoom:S}=Zy(),C=t.find(L=>L.id===n),R=p.filter(L=>L.taskId===n);if(r||c||f||g)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading task details..."});if(s)return u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",s]});if(!C)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Task not found."});const D=a&&(i==null?void 0:i.uid)===C.posterId,U=a&&d&&!D,z=a&&(i==null?void 0:i.uid)!==C.posterId,P=()=>{C&&_(C)},A=async()=>{if(!i||!C){ie.error("User or task information is missing.");return}if(i.uid===C.posterId){ie.info("You cannot chat with yourself.");return}try{await S([i.uid,C.posterId],[i.displayName||i.email||"You",C.posterName])&&e("/chat")}catch(L){console.error("Failed to create or navigate to chat room:",L),ie.error("Failed to start chat.")}},O=async L=>{if(!D){ie.error("You are not authorized to accept offers for this task.");return}try{await v(L,C.id)}catch{}},M=async L=>{if(!D){ie.error("You are not authorized to reject offers for this task.");return}try{await w(L)}catch{}},F=async L=>{const ae=R.find(me=>me.id===L);if(!a||(i==null?void 0:i.uid)!==(ae==null?void 0:ae.taskerId)){ie.error("You are not authorized to withdraw this offer.");return}try{await I(L)}catch{}},$=L=>{switch(L){case"pending":return u.jsx(Mt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Mt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Mt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Mt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});default:return u.jsx(Mt,{variant:"outline",children:"Unknown"})}};return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx(fe,{onClick:()=>e(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:" Back to Tasks"}),u.jsxs(lt,{className:"shadow-lg",children:[u.jsxs(dr,{className:"relative p-0",children:[u.jsx("img",{src:C.imageUrl,alt:C.title,className:"w-full h-64 object-cover rounded-t-lg"}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 text-white",children:[u.jsx(hr,{className:"text-3xl font-bold mb-1",children:C.title}),u.jsxs(Fb,{className:"text-gray-200 flex items-center gap-2",children:[u.jsx(_d,{size:18})," ",C.location]})]})]}),u.jsxs(ct,{className:"p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-gray-100",children:"Task Details"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:C.description}),u.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Wy,{size:18})," ",u.jsx("strong",{children:"Category:"})," ",C.category]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(r2,{size:18})," ",u.jsx("strong",{children:"Posted:"})," ",new Date(C.datePosted).toLocaleDateString()]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Oa,{size:18})," ",u.jsx("strong",{children:"Budget:"})," ",C.budget.toLocaleString()]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-gray-100",children:"Posted By"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("img",{src:C.posterAvatar,alt:C.posterName,className:"w-16 h-16 rounded-full object-cover border-2 border-green-500"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:C.posterName}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Task Poster"})]})]}),U&&u.jsxs(fe,{onClick:P,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center gap-2 mb-2",children:[u.jsx(Vs,{size:20})," Make an Offer"]}),z&&u.jsxs(fe,{onClick:A,variant:"outline",className:"w-full border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white flex items-center gap-2",children:[u.jsx(tc,{size:20})," Chat with Poster"]}),!a&&u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Log in to make an offer or chat."}),a&&!d&&!D&&u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Register as a tasker to make an offer."})]})]}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:["Offers (",R.length,")"]}),R.length===0?u.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No offers yet. Be the first to make one!"}):u.jsx("div",{className:"space-y-4",children:R.map(L=>u.jsx(lt,{className:"p-4 shadow-sm",children:u.jsxs(ct,{className:"p-0 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(Sr,{className:"w-12 h-12 border-2 border-blue-500",children:[u.jsx(Ir,{src:L.taskerAvatar||void 0,alt:L.taskerName}),u.jsx(kr,{className:"bg-blue-200 text-blue-800 text-lg font-semibold",children:L.taskerName?L.taskerName.charAt(0).toUpperCase():u.jsx(Vs,{size:20})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:L.taskerName}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[u.jsx(tc,{size:14})," ",L.message]})]})]}),u.jsxs("div",{className:"flex flex-col items-end sm:items-center gap-2",children:[u.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",L.offerAmount.toLocaleString()]}),$(L.status),D&&L.status==="pending"&&u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsxs(fe,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>O(L.id),children:[u.jsx(Tf,{size:16,className:"mr-1"})," Accept"]}),u.jsxs(fe,{size:"sm",variant:"destructive",onClick:()=>M(L.id),children:[u.jsx(l2,{size:16,className:"mr-1"})," Reject"]})]}),a&&(i==null?void 0:i.uid)===L.taskerId&&L.status==="pending"&&u.jsxs(fe,{size:"sm",variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 mt-2",onClick:()=>F(L.id),children:[u.jsx(c2,{size:16,className:"mr-1"})," Withdraw"]})]})]})},L.id))})]})]})]})]})})};var eD="AlertDialog",[nJ,Iee]=gs(eD,[Vj]),xo=Vj(),tD=n=>{const{__scopeAlertDialog:e,...t}=n,r=xo(e);return u.jsx(e2,{...r,...t,modal:!0})};tD.displayName=eD;var rJ="AlertDialogTrigger",sJ=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=xo(t);return u.jsx(IH,{...s,...r,ref:e})});sJ.displayName=rJ;var iJ="AlertDialogPortal",nD=n=>{const{__scopeAlertDialog:e,...t}=n,r=xo(e);return u.jsx(t2,{...r,...t})};nD.displayName=iJ;var oJ="AlertDialogOverlay",rD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=xo(t);return u.jsx(bb,{...s,...r,ref:e})});rD.displayName=oJ;var Au="AlertDialogContent",[aJ,lJ]=nJ(Au),cJ=QU("AlertDialogContent"),sD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...s}=n,i=xo(t),a=b.useRef(null),c=Qe(e,a),d=b.useRef(null);return u.jsx(bH,{contentName:Au,titleName:iD,docsSlug:"alert-dialog",children:u.jsx(aJ,{scope:t,cancelRef:d,children:u.jsxs(Eb,{role:"alertdialog",...i,...s,ref:c,onOpenAutoFocus:Pe(s.onOpenAutoFocus,f=>{var p;f.preventDefault(),(p=d.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[u.jsx(cJ,{children:r}),u.jsx(dJ,{contentRef:a})]})})})});sD.displayName=Au;var iD="AlertDialogTitle",oD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=xo(t);return u.jsx(Tb,{...s,...r,ref:e})});oD.displayName=iD;var aD="AlertDialogDescription",lD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=xo(t);return u.jsx(Sb,{...s,...r,ref:e})});lD.displayName=aD;var uJ="AlertDialogAction",cD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=xo(t);return u.jsx(Ib,{...s,...r,ref:e})});cD.displayName=uJ;var uD="AlertDialogCancel",dD=b.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:s}=lJ(uD,t),i=xo(t),a=Qe(e,s);return u.jsx(Ib,{...i,...r,ref:a})});dD.displayName=uD;var dJ=({contentRef:n})=>{const e=`\`${Au}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Au}\` by passing a \`${aD}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Au}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},hJ=tD,fJ=nD,hD=rD,fD=sD,pD=cD,mD=dD,gD=oD,Ub=lD;const pJ=hJ,mJ=fJ,yD=b.forwardRef(({className:n,...e},t)=>u.jsx(hD,{ref:t,className:Ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));yD.displayName=hD.displayName;const vD=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(mJ,{children:[u.jsx(yD,{}),u.jsxs(fD,{ref:r,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,u.jsx(Ub,{className:"sr-only",children:"This is an alert dialog."})]})]}));vD.displayName=fD.displayName;const wD=({className:n,...e})=>u.jsx("div",{className:Ae("flex flex-col space-y-2 text-center sm:text-left",n),...e});wD.displayName="AlertDialogHeader";const xD=({className:n,...e})=>u.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});xD.displayName="AlertDialogFooter";const _D=b.forwardRef(({className:n,...e},t)=>u.jsx(gD,{ref:t,className:Ae("text-lg font-semibold",n),...e}));_D.displayName=gD.displayName;const bD=b.forwardRef(({className:n,...e},t)=>u.jsx(Ub,{ref:t,className:Ae("text-sm text-muted-foreground",n),...e}));bD.displayName=Ub.displayName;const ED=b.forwardRef(({className:n,...e},t)=>u.jsx(pD,{ref:t,className:Ae(e_(),n),...e}));ED.displayName=pD.displayName;const TD=b.forwardRef(({className:n,...e},t)=>u.jsx(mD,{ref:t,className:Ae(e_({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));TD.displayName=mD.displayName;const gJ=()=>{const{user:n,isAuthenticated:e,loading:t}=tn(),{tasks:r,loading:s,error:i,deleteTask:a}=wo(),{offers:c,loading:d,acceptOffer:f,rejectOffer:p}=ev(),{openReviewTaskModal:g,openEditTaskModal:v}=za(),w=hn(),[I,_]=H.useState(!1),[S,C]=H.useState(null);if(t||s||d)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading your tasks and offers..."});if(!e||!n)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your tasks."}),u.jsx(fe,{onClick:()=>w("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});const R=r.filter(M=>M.posterId===n.uid),j=M=>{C(M),_(!0)},D=async()=>{if(S)try{const M=c.filter(F=>F.taskId===S);for(const F of M);await a(S)}catch{}finally{C(null),_(!1)}},U=async(M,F)=>{try{await f(M,F)&&w("/chat")}catch{}},z=async M=>{try{await p(M)}catch{}},P=M=>{g(M)},A=M=>{v(M)},O=M=>{switch(M){case"pending":return u.jsx(Mt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Mt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Mt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Mt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});default:return u.jsx(Mt,{variant:"outline",children:"Unknown"})}};return u.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:[u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Posted Tasks"}),i&&u.jsxs("p",{className:"col-span-full text-center text-red-500 italic py-8",children:["Error loading tasks: ",i]}),R.length===0&&!s&&!i?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:"You haven't posted any tasks yet."}),u.jsx(fe,{onClick:()=>w("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Post a New Task"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(M=>{const F=c.filter(ae=>ae.taskId===M.id),$=F.find(ae=>ae.status==="accepted"),L=$==null?void 0:$.taskerName;return u.jsxs(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:M.imageUrl,alt:M.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:`absolute top-2 left-2 px-3 py-1 rounded-full text-xs font-semibold ${M.status==="open"?"bg-blue-600 text-white":M.status==="assigned"?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})]}),u.jsxs(ct,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:M.title}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(_d,{size:16,className:"mr-2"})," ",M.location]}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(Wy,{size:16,className:"mr-2"})," ",M.category]}),u.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-4",children:["",M.budget.toLocaleString()]}),M.status==="assigned"&&L&&u.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900 rounded-md flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[u.jsx(Vs,{size:18}),u.jsxs("span",{children:["Assigned to: ",u.jsx("span",{className:"font-semibold",children:L})]})]}),M.status==="completed"&&M.rating&&M.review?u.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900 rounded-md text-green-800 dark:text-green-200",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[[...Array(5)].map((ae,me)=>u.jsx(io,{size:16,className:me<M.rating?"fill-green-600 text-green-600":"text-gray-400"},me)),u.jsxs("span",{className:"font-semibold ml-1",children:[M.rating,"/5"]})]}),u.jsxs("p",{className:"text-sm italic",children:['"',M.review,'"']})]}):M.status==="assigned"&&u.jsxs(fe,{onClick:()=>P(M),className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2 mb-4",children:[u.jsx(Tf,{size:20})," Mark as Complete & Review"]}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[u.jsx(fe,{variant:"outline",onClick:()=>w(`/tasks/${M.id}`),className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Details"}),u.jsxs("div",{className:"flex gap-2",children:[M.status==="open"&&u.jsx(fe,{variant:"outline",size:"icon",onClick:()=>A(M),className:"border-blue-600 text-blue-600 hover:bg-blue-100",children:u.jsx(vx,{size:20})}),u.jsx(fe,{variant:"destructive",size:"icon",onClick:()=>j(M.id),className:"bg-red-600 hover:bg-red-700 text-white",children:u.jsx(QH,{size:20})})]})]}),M.status==="open"&&u.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("h4",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-100",children:["Offers (",F.length,")"]}),F.length===0?u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No offers yet."}):u.jsx("div",{className:"space-y-3",children:F.map(ae=>u.jsx(lt,{className:"p-3 shadow-sm",children:u.jsxs(ct,{className:"p-0 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Sr,{className:"w-10 h-10 border-2 border-blue-500",children:[u.jsx(Ir,{src:ae.taskerAvatar||void 0,alt:ae.taskerName}),u.jsx(kr,{className:"bg-blue-200 text-blue-800 text-md font-semibold",children:ae.taskerName?ae.taskerName.charAt(0).toUpperCase():u.jsx(Vs,{size:16})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-md text-gray-800 dark:text-gray-100",children:ae.taskerName}),u.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[u.jsx(tc,{size:12})," ",ae.message]})]})]}),u.jsxs("div",{className:"flex flex-col items-end sm:items-center gap-1",children:[u.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",ae.offerAmount.toLocaleString()]}),O(ae.status),ae.status==="pending"&&u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsxs(fe,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white h-7 px-3 text-xs",onClick:()=>U(ae.id,M.id),children:[u.jsx(Tf,{size:14,className:"mr-1"})," Accept"]}),u.jsxs(fe,{size:"sm",variant:"destructive",className:"h-7 px-3 text-xs",onClick:()=>z(ae.id),children:[u.jsx(l2,{size:14,className:"mr-1"})," Reject"]})]})]})]})},ae.id))})]})]})]},M.id)})})]}),u.jsx(pJ,{open:I,onOpenChange:_,children:u.jsxs(vD,{children:[u.jsxs(wD,{children:[u.jsx(_D,{children:"Are you absolutely sure?"}),u.jsx(bD,{children:"This action cannot be undone. This will permanently delete your task."})]}),u.jsxs(xD,{children:[u.jsx(TD,{children:"Cancel"}),u.jsx(ED,{onClick:D,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})},yJ=()=>{hn();const{openTaskerRegistrationModal:n}=za(),e=[{icon:Oa,title:"Competitive Earnings",description:"Set your own rates and earn what you deserve for your skills."},{icon:io,title:"Flexible Schedule",description:"Work when you want, where you want. Be your own boss."},{icon:JH,title:"Grow Your Business",description:"Access a wide customer base and expand your service offerings."},{icon:KH,title:"Secure Payments",description:"All payments are processed securely through the platform."},{icon:Tf,title:"Variety of Tasks",description:"Choose from a diverse range of tasks that match your expertise."}];return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-6 text-center",children:"Become a Tasker with Tasko!"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-12 text-center max-w-3xl mx-auto",children:"Join our growing community of skilled taskers and turn your talents into income. Enjoy flexibility, fair pay, and a steady stream of opportunities."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:e.map((t,r)=>u.jsxs(lt,{className:"shadow-lg p-6 text-center",children:[u.jsxs(dr,{className:"p-0 mb-4",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(t.icon,{size:32,className:"text-green-600 dark:text-green-200"})}),u.jsx(hr,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:t.title})]}),u.jsx(ct,{className:"p-0",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:t.description})})]},r))}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"Ready to Start Earning?"}),u.jsx(fe,{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all",children:"Sign Up as a Tasker"})]})]})})},vJ=({onCancel:n,onSaveSuccess:e})=>{const{user:t,updateUserProfile:r}=tn(),{profile:s,loadingProfile:i,updateProfile:a}=Gy(),{uploadFile:c,loading:d}=FO(),[f,p]=H.useState((s==null?void 0:s.first_name)||""),[g,v]=H.useState((s==null?void 0:s.last_name)||""),[w,I]=H.useState((s==null?void 0:s.phone)||""),[_,S]=H.useState(null),[C,R]=H.useState((t==null?void 0:t.photoURL)||(s==null?void 0:s.avatar_url)||null),[j,D]=H.useState(!1);H.useEffect(()=>{s&&(p(s.first_name||""),v(s.last_name||""),I(s.phone||""),R((t==null?void 0:t.photoURL)||(s==null?void 0:s.avatar_url)||null))},[s,t==null?void 0:t.photoURL]);const U=A=>{if(A.target.files&&A.target.files[0]){const O=A.target.files[0];S(O),R(URL.createObjectURL(O))}},z=async()=>{if(!t||!s){ie.error("No user profile found.");return}if(f.trim()===""||g.trim()===""){ie.error("First name and last name cannot be empty.");return}D(!0);let A=t.photoURL||s.avatar_url;if(_){const O=`avatars/${t.uid}/${_.name}`,M=await c(_,O);if(M)A=M;else{D(!1);return}}try{await r(f,g,A||void 0),await a(t.uid,f,g,w,A||null,s.role),e()}catch{}finally{D(!1)}},P=j||d||i;return u.jsxs(lt,{className:"shadow-lg p-6",children:[u.jsx(dr,{className:"p-0 mb-4",children:u.jsx(hr,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Edit Profile"})}),u.jsxs(ct,{className:"p-0 space-y-4",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[u.jsxs(Sr,{className:"w-24 h-24 border-4 border-green-500",children:[u.jsx(Ir,{src:C||void 0,alt:(t==null?void 0:t.displayName)||"User Avatar"}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:t!=null&&t.displayName?t.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:48})})]}),u.jsxs(yt,{htmlFor:"avatar-upload",className:"cursor-pointer flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[u.jsx(s2,{size:20})," Change Avatar",u.jsx(bt,{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:U,disabled:P})]})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"firstName",children:"First Name"}),u.jsx(bt,{id:"firstName",value:f,onChange:A=>p(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"lastName",children:"Last Name"}),u.jsx(bt,{id:"lastName",value:g,onChange:A=>v(A.target.value),disabled:P})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(yt,{htmlFor:"phone",children:"Phone Number"}),u.jsx(bt,{id:"phone",value:w,onChange:A=>I(A.target.value),disabled:P,placeholder:"e.g., +639171234567"})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[u.jsx(fe,{variant:"outline",onClick:n,disabled:P,children:"Cancel"}),u.jsx(fe,{onClick:z,disabled:P,className:"bg-green-600 hover:bg-green-700 text-white",children:P?"Saving...":"Save Changes"})]})]})]})},wJ=()=>{const{user:n,isAuthenticated:e,loading:t}=tn(),{profile:r,loadingProfile:s}=Gy(),{taskerProfile:i,isTasker:a,loading:c}=Yr(),{openTaskerRegistrationModal:d}=za(),f=hn(),[p,g]=H.useState(!1);if(t||s||c)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading profile..."});if(!e||!n)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your profile."}),u.jsx(fe,{onClick:()=>f("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});const v=r!=null&&r.first_name&&(r!=null&&r.last_name)?`${r.first_name} ${r.last_name}`:n.displayName||"Anonymous User";return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Profile"}),p?u.jsx(vJ,{onCancel:()=>g(!1),onSaveSuccess:()=>g(!1)}):u.jsxs(u.Fragment,{children:[u.jsx(lt,{className:"shadow-lg p-6 mb-8",children:u.jsxs(ct,{className:"flex flex-col items-center text-center p-0",children:[u.jsxs(Sr,{className:"w-24 h-24 mb-4 border-4 border-green-500",children:[u.jsx(Ir,{src:n.photoURL||(r==null?void 0:r.avatar_url)||void 0,alt:v}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:v.charAt(0).toUpperCase()})]}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:v}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[u.jsx(zy,{size:18})," ",n.email]}),(r==null?void 0:r.phone)&&u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2 mt-1",children:[u.jsx(h2,{size:18})," ",r.phone]}),u.jsxs(fe,{variant:"outline",onClick:()=>g(!0),className:"mt-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white flex items-center gap-2",children:[u.jsx(vx,{size:18})," Edit Profile"]})]})}),a&&i&&u.jsxs(lt,{className:"shadow-lg p-6 mb-8",children:[u.jsx(dr,{className:"p-0 mb-4",children:u.jsxs(hr,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[u.jsx(Cu,{size:24})," Tasker Profile"]})}),u.jsxs(ct,{className:"p-0 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bio:"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.bio})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[u.jsx(Oa,{size:18})," Hourly Rate:"]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["",i.hourlyRate.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[u.jsx(io,{size:18})," Skills:"]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills.map((w,I)=>u.jsx(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:w},I))})]}),u.jsxs(fe,{variant:"outline",onClick:d,className:"mt-6 w-full border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white flex items-center gap-2",children:[u.jsx(vx,{size:18})," Edit Tasker Profile"]}),u.jsxs(fe,{onClick:()=>f("/tasker-dashboard"),className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-6 flex items-center justify-center gap-2 mt-4",children:[u.jsx(Cu,{size:20})," View Tasker Dashboard"]})]})]}),u.jsxs(lt,{className:"shadow-lg p-6",children:[u.jsx(dr,{className:"p-0 mb-4",children:u.jsx(hr,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"My Activities"})}),u.jsxs(ct,{className:"p-0 space-y-4",children:[u.jsx(fe,{onClick:()=>f("/my-tasks"),className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-6",children:"View My Posted Tasks"}),a&&u.jsxs(fe,{onClick:()=>f("/my-offers"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-lg py-6 flex items-center justify-center gap-2",children:[u.jsx(Cu,{size:20})," View My Offers"]}),u.jsxs(fe,{onClick:()=>f("/settings"),className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 text-lg py-6 flex items-center justify-center gap-2",children:[u.jsx(p2,{size:20})," App Settings"]})]})]})]})]})})},xJ=()=>{const n=hn(),e=[{question:"How do I post a task?",answer:"To post a task, simply click the 'Post a Task' button on the homepage, describe your task, set your budget, and choose a category. You'll need to be logged in to post."},{question:"How do I become a Tasker?",answer:"Visit the 'Become a Tasker' page from the navigation menu to learn about the benefits and sign up to offer your services."},{question:"How are payments handled?",answer:"All payments are processed securely through the Tasko platform. Once a task is completed and approved, funds are released to the Tasker."},{question:"What if I have an issue with a task?",answer:"If you encounter any issues, please contact our support team through the 'Contact Us' page. We're here to help resolve disputes and ensure satisfaction."},{question:"Is Tasko available nationwide?",answer:"Tasko is currently focused on key cities in the Philippines, but we are rapidly expanding! Check the app for service availability in your area."}];return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Frequently Asked Questions"}),u.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md",children:e.map((t,r)=>u.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700 last:border-b-0 last:mb-0 last:pb-0",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:t.question}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.answer})]},r))})]})})},_J=()=>{const n=hn();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Contact Us"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md text-center",children:[u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"Have questions, feedback, or need support? Reach out to us!"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(zy,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"support@tasko.ph"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(h2,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"+63 917 123 4567"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-800 dark:text-gray-100",children:[u.jsx(_d,{size:24,className:"text-green-600"}),u.jsx("p",{className:"text-xl font-medium",children:"Makati City, Metro Manila, Philippines"})]})]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Our support team is available Monday to Friday, 9 AM - 5 PM (PST)."})]})]})})},bJ=()=>{const n=hn();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Privacy Policy"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:"This Privacy Policy describes Our policies and procedures on the collection, use and disclosure of Your information when You use the Service and tells You about Your privacy rights and how the law protects You."}),u.jsx("p",{children:"We use Your Personal data to provide and improve the Service. By using the Service, You agree to the collection and use of information in accordance with this Privacy Policy."}),u.jsx("h2",{children:"Interpretation and Definitions"}),u.jsx("h3",{children:"Interpretation"}),u.jsx("p",{children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),u.jsx("h3",{children:"Definitions"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Account"})," means a unique account created for You to access our Service or parts of our Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Company"}),' (referred to as either "the Company", "We", "Us" or "Our" in this Agreement) refers to Tasko Philippines.']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies"})," are small files that are placed on Your computer, mobile device or any other device by a website, containing the details of Your browsing history on that website among its many uses."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Country"})," refers to: Philippines"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Device"})," means any device that can access the Service such as a computer, a cellphone or a digital tablet."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Personal Data"})," is any information that relates to an identified or identifiable individual."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Service"})," refers to the Website."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Service Provider"})," means any natural or legal person who processes the data on behalf of the Company. It refers to third-party companies or individuals employed by the Company to facilitate the Service, to provide the Service on behalf of the Company, to perform services related to the Service or to assist the Company in analyzing how the Service is used."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Usage Data"})," refers to data collected automatically, either generated by the use of the Service or from the Service infrastructure itself (for example, the duration of a page visit)."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Website"})," refers to Tasko, accessible from ",u.jsx("a",{href:"https://www.dyad.sh",target:"_blank",rel:"noopener noreferrer",children:"https://www.dyad.sh"})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"You"})," means the individual accessing or using the Service, or the company, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."]})]}),u.jsx("h2",{children:"Collecting and Using Your Personal Data"}),u.jsx("h3",{children:"Types of Data Collected"}),u.jsx("h4",{children:"Personal Data"}),u.jsx("p",{children:"While using Our Service, We may ask You to provide Us with certain personally identifiable information that can be used to contact or identify You. Personally identifiable information may include, but is not limited to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Email address"}),u.jsx("li",{children:"First name and last name"}),u.jsx("li",{children:"Phone number"}),u.jsx("li",{children:"Address, State, Province, ZIP/Postal code, City"}),u.jsx("li",{children:"Usage Data"})]}),u.jsx("h4",{children:"Usage Data"}),u.jsx("p",{children:"Usage Data is collected automatically when using the Service."}),u.jsx("p",{children:"Usage Data may include information such as Your Device's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that You visit, the time and date of Your visit, the time spent on those pages, unique device identifiers and other diagnostic data."}),u.jsx("p",{children:"When You access the Service by or through a mobile device, We may collect certain information automatically, including, but not limited to, the type of mobile device You use, Your mobile device unique ID, the IP address of Your mobile device, Your mobile operating system, the type of mobile Internet browser You use, unique device identifiers and other diagnostic data."}),u.jsx("p",{children:"We may also collect information that Your browser sends whenever You visit our Service or when You access the Service by or through a mobile device."}),u.jsx("h4",{children:"Tracking Technologies and Cookies"}),u.jsx("p",{children:"We use Cookies and similar tracking technologies to track the activity on Our Service and store certain information. Tracking technologies used are beacons, tags, and scripts to collect and track information and to improve and analyze Our Service. The technologies We use may include:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies or Browser Cookies."})," A cookie is a small file placed on Your Device. You can instruct Your browser to refuse all Cookies or to indicate when a Cookie is being sent. However, if You do not accept Cookies, You may not be able to use some parts of our Service. Unless you have adjusted Your browser setting so that it will refuse Cookies, our Service may use Cookies."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Web Beacons."})," Certain sections of our Service and our emails may contain small electronic files known as web beacons (also referred to as clear gifs, pixel tags, and single-pixel gifs) that permit the Company, for example, to count users who have visited those pages or opened an email and for other related website statistics (for example, recording the popularity of a certain section and verifying system and server integrity)."]})]}),u.jsx("p",{children:'Cookies can be "Persistent" or "Session" Cookies. Persistent Cookies remain on Your personal computer or mobile device when You go offline, while Session Cookies are deleted as soon as You close Your web browser.'}),u.jsx("p",{children:"We use both Session and Persistent Cookies for the purposes set out below:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Necessary / Essential Cookies"}),u.jsx("p",{children:"Type: Session Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies are essential to provide You with services available through the Website and to enable You to use some of its features. They help to authenticate users and prevent fraudulent use of user accounts. Without these Cookies, the services that You have asked for cannot be provided, and We only use these Cookies to provide You with those services."})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies Policy / Notice Acceptance Cookies"}),u.jsx("p",{children:"Type: Persistent Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies identify if users have accepted the use of cookies on the Website."})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Functionality Cookies"}),u.jsx("p",{children:"Type: Persistent Cookies"}),u.jsx("p",{children:"Administered by: Us"}),u.jsx("p",{children:"Purpose: These Cookies allow us to remember choices You make when You use the Website, such as remembering your login details or language preference. The purpose of these Cookies is to provide You with a more personal experience and to avoid You having to re-enter your preferences every time You use the Website."})]})]}),u.jsx("h3",{children:"Use of Your Personal Data"}),u.jsx("p",{children:"The Company may use Personal Data for the following purposes:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"To provide and maintain our Service"}),", including to monitor the usage of our Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To manage Your Account:"})," to manage Your registration as a user of the Service. The Personal Data You provide can give You access to different functionalities of the Service that are available to You as a registered user."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For the performance of a contract:"})," the development, compliance and undertaking of the purchase contract for the products, items or services You have purchased or of any other contract with Us through the Service."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To contact You:"})," To contact You by email, telephone calls, SMS, or other equivalent forms of electronic communication, such as a mobile application's push notifications regarding updates or informative communications related to the functionalities, products or contracted services, including the security updates, when necessary or reasonable for their implementation."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To provide You"})," with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless You have opted not to receive such information."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"To manage Your requests:"})," To attend and manage Your requests to Us."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For business transfers:"})," We may use Your information to evaluate or conduct a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Our assets, whether as a going concern or as part of bankruptcy, liquidation, or similar proceeding, in which Personal Data held by Us about our Service users is among the assets transferred."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For other purposes"}),": We may use Your information for other purposes, such as data analysis, identifying usage trends, determining the effectiveness of our promotional campaigns and to evaluate and improve our Service, products, services, marketing and your experience."]})]}),u.jsx("p",{children:"We may share Your personal information in the following situations:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"With Service Providers:"})," We may share Your personal information with Service Providers to monitor and analyze the use of our Service, to contact You."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For business transfers:"})," We may share or transfer Your personal information in connection with, or during negotiations of, any merger, sale of Company assets, financing, or acquisition of all or a portion of Our business to another company."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Affiliates:"})," We may share Your information with Our affiliates, in which case we will require those affiliates to honor this Privacy Policy. Affiliates include Our parent company and any other subsidiaries, joint venture partners or other companies that We control or that are under common control with Us."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With business partners:"})," We may share Your information with Our business partners to offer You certain products, services or promotions."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With other users:"})," when You share personal information or otherwise interact in the public areas with other users, such information may be viewed by all users and may be publicly distributed outside."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Your consent"}),": We may disclose Your personal information for any other purpose with Your consent."]})]}),u.jsx("h3",{children:"Retention of Your Personal Data"}),u.jsx("p",{children:"The Company will retain Your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use Your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."}),u.jsx("p",{children:"The Company will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period of time, except when this data is used to strengthen the security or to improve the functionality of Our Service, or We are legally obligated to retain this data for longer time periods."}),u.jsx("h3",{children:"Transfer of Your Personal Data"}),u.jsx("p",{children:"Your information, including Personal Data, is processed at the Company's operating offices and in any other places where the parties involved in the processing are located. It means that this information may be transferred to  and maintained on  computers located outside of Your state, province, country or other governmental jurisdiction where the data protection laws may differ than those from Your jurisdiction."}),u.jsx("p",{children:"Your consent to this Privacy Policy followed by Your submission of such information represents Your agreement to that transfer."}),u.jsx("p",{children:"The Company will take all steps reasonably necessary to ensure that Your data is treated securely and in accordance with this Privacy Policy and no transfer of Your Personal Data will take place to an organization or a country unless there are adequate controls in place including the security of Your data and other personal information."}),u.jsx("h3",{children:"Delete Your Personal Data"}),u.jsx("p",{children:"You have the right to delete or request that We assist in deleting the Personal Data that We have collected about You."}),u.jsx("p",{children:"Our Service may give You the ability to delete certain information about You from within the Service."}),u.jsx("p",{children:"You may update, amend, or delete Your information at any time by signing in to Your Account, if you have one, and visiting the account settings section that allows you to manage Your personal information. You may also contact Us to request access to, correct, or delete any personal information that You have provided to Us."}),u.jsx("p",{children:"Please note, however, that We may need to retain certain information when we have a legal obligation or lawful basis to do so."}),u.jsx("h3",{children:"Disclosure of Your Personal Data"}),u.jsx("h4",{children:"Business Transactions"}),u.jsx("p",{children:"If the Company is involved in a merger, acquisition or asset sale, Your Personal Data may be transferred. We will provide notice before Your Personal Data is transferred and becomes subject to a different Privacy Policy."}),u.jsx("h4",{children:"Law enforcement"}),u.jsx("p",{children:"Under certain circumstances, the Company may be required to disclose Your Personal Data if required to do so by law or in response to valid requests by public authorities (e.g. a court or a government agency)."}),u.jsx("h4",{children:"Other legal requirements"}),u.jsx("p",{children:"The Company may disclose Your Personal Data in the good faith belief that such action is necessary to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Comply with a legal obligation"}),u.jsx("li",{children:"Protect and defend the rights or property of the Company"}),u.jsx("li",{children:"Prevent or investigate possible wrongdoing in connection with the Service"}),u.jsx("li",{children:"Protect the personal safety of Users of the Service or the public"}),u.jsx("li",{children:"Protect against legal liability"})]}),u.jsx("h3",{children:"Security of Your Personal Data"}),u.jsx("p",{children:"The security of Your Personal Data is important to Us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While We strive to use commercially acceptable means to protect Your Personal Data, We cannot guarantee its absolute security."}),u.jsx("h2",{children:"Children's Privacy"}),u.jsx("p",{children:"Our Service does not address anyone under the age of 13. We do not knowingly collect personally identifiable information from anyone under the age of 13. If You are a parent or guardian and You are aware that Your child has provided Us with Personal Data, please contact Us. If We become aware that We have collected Personal Data from anyone under the age of 13 without verification of parental consent, We take steps to remove that information from Our servers."}),u.jsx("p",{children:"If We need to rely on consent as a legal basis for processing Your information and Your country requires consent from a parent, We may require Your parent's consent before We collect and use that information."}),u.jsx("h2",{children:"Links to Other Websites"}),u.jsx("p",{children:"Our Service may contain links to other websites that are not operated by Us. If You click on a third party link, You will be directed to that third party's site. We strongly advise You to review the Privacy Policy of every site You visit."}),u.jsx("p",{children:"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."}),u.jsx("h2",{children:"Changes to this Privacy Policy"}),u.jsx("p",{children:"We may update Our Privacy Policy from time to time. We will notify You of any changes by posting the new Privacy Policy on this page."}),u.jsx("p",{children:'We will let You know via email and/or a prominent notice on Our Service, prior to the change becoming effective and update the "Last updated" date at the top of this Privacy Policy.'}),u.jsx("p",{children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."}),u.jsx("h2",{children:"Contact Us"}),u.jsx("p",{children:"If you have any questions about this Privacy Policy, You can contact us:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"By email: support@tasko.ph"}),u.jsxs("li",{children:["By visiting this page on our website: ",u.jsx("a",{href:"https://www.dyad.sh/contact",target:"_blank",rel:"noopener noreferrer",children:"https://www.dyad.sh/contact"})]})]})]})]})})},EJ=()=>{const n=hn();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Terms of Service"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:'Welcome to Tasko! These Terms of Service ("Terms") govern your access to and use of the Tasko website, mobile applications, and services (collectively, the "Service"). By accessing or using the Service, you agree to be bound by these Terms.'}),u.jsx("h2",{children:"1. Acceptance of Terms"}),u.jsx("p",{children:"By creating an account, posting a task, offering services, or otherwise using the Service, you signify your agreement to these Terms. If you do not agree to these Terms, you may not access or use the Service."}),u.jsx("h2",{children:"2. Changes to Terms"}),u.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify you of any changes by posting the new Terms on this page. Your continued use of the Service after such modifications constitutes your acceptance of the revised Terms."}),u.jsx("h2",{children:"3. User Accounts"}),u.jsxs("ul",{children:[u.jsx("li",{children:"You must be at least 18 years old to use the Service."}),u.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account login information."}),u.jsx("li",{children:"You agree to provide accurate, current, and complete information during the registration process and to update such information to keep it accurate, current, and complete."})]}),u.jsx("h2",{children:"4. Service Description"}),u.jsx("p",{children:'Tasko is a platform that connects individuals ("Clients") seeking assistance with various tasks with individuals or businesses ("Taskers") offering to perform those tasks. Tasko facilitates the connection but does not directly employ Taskers or guarantee the quality of their work.'}),u.jsx("h2",{children:"5. Tasker Responsibilities"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Taskers agree to perform tasks with reasonable care and skill."}),u.jsx("li",{children:"Taskers are independent contractors and not employees of Tasko."}),u.jsx("li",{children:"Taskers are responsible for their own taxes, insurance, and compliance with all applicable laws and regulations."})]}),u.jsx("h2",{children:"6. Client Responsibilities"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Clients agree to provide clear and accurate descriptions of tasks."}),u.jsx("li",{children:"Clients agree to pay Taskers for completed tasks as per the agreed-upon budget."}),u.jsx("li",{children:"Clients are responsible for ensuring a safe working environment for Taskers."})]}),u.jsx("h2",{children:"7. Payments and Fees"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Tasko may charge fees for its services, which will be clearly disclosed."}),u.jsx("li",{children:"Payments for tasks are processed securely through the platform."}),u.jsx("li",{children:"Tasko reserves the right to withhold or cancel payments if fraud or a violation of these Terms is suspected."})]}),u.jsx("h2",{children:"8. Prohibited Conduct"}),u.jsx("p",{children:"You agree not to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Use the Service for any illegal or unauthorized purpose."}),u.jsx("li",{children:"Harass, abuse, or harm another person or group."}),u.jsx("li",{children:"Impersonate any person or entity."}),u.jsx("li",{children:"Interfere with or disrupt the Service or servers or networks connected to the Service."})]}),u.jsx("h2",{children:"9. Intellectual Property"}),u.jsx("p",{children:"All content on the Service, including text, graphics, logos, and software, is the property of Tasko or its licensors and is protected by intellectual property laws."}),u.jsx("h2",{children:"10. Disclaimers and Limitation of Liability"}),u.jsx("p",{children:'The Service is provided "as is" without warranties of any kind. Tasko is not liable for any damages arising from your use of the Service or from tasks performed by Taskers.'}),u.jsx("h2",{children:"11. Governing Law"}),u.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the Philippines."}),u.jsx("h2",{children:"12. Contact Information"}),u.jsx("p",{children:"If you have any questions about these Terms, please contact us at support@tasko.ph."})]})]})})},TJ=()=>{const n=hn();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"End-User License Agreement (EULA)"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md prose dark:prose-invert max-w-none",children:[u.jsx("p",{children:'This End-User License Agreement ("EULA") is a legal agreement between you and Tasko Philippines. By installing or using the Tasko application, you are agreeing to be bound by the terms and conditions of this EULA.'}),u.jsx("h2",{children:"1. Grant of License"}),u.jsx("p",{children:"Tasko Philippines grants you a revocable, non-exclusive, non-transferable, limited license to download, install and use the application solely for your personal, non-commercial purposes strictly in accordance with the terms of this Agreement."}),u.jsx("h2",{children:"2. Restrictions"}),u.jsx("p",{children:"You agree not to, and you will not permit others to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"License, sell, rent, lease, assign, distribute, transmit, host, outsource, disclose or otherwise commercially exploit the application or make the application available to any third party."}),u.jsx("li",{children:"Modify, make derivative works of, disassemble, decrypt, reverse compile or reverse engineer any part of the application."}),u.jsx("li",{children:"Remove, alter or obscure any proprietary notice (including any notice of copyright or trademark) of Tasko Philippines or its affiliates, partners, suppliers or the licensors of the application."})]}),u.jsx("h2",{children:"3. Intellectual Property"}),u.jsx("p",{children:"The application, including without limitation all copyrights, patents, trademarks, trade secrets and other intellectual property rights are, and shall remain, the sole and exclusive property of Tasko Philippines."}),u.jsx("h2",{children:"4. Amendments to this Agreement"}),u.jsx("p",{children:"Tasko Philippines reserves the right, at its sole discretion, to modify or replace this Agreement at any time. If a revision is material we will provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."}),u.jsx("h2",{children:"5. Contact Information"}),u.jsx("p",{children:"If you have any questions about this EULA, please contact us at support@tasko.ph."})]})]})})},SJ=["Home Cleaning","Plumbing","Electrical","Carpentry","Moving","Delivery","Painting","Furniture Assembly","Gardening","Pet Sitting","Marketing","Web Development","Graphic Design","Tutoring","Photography","Event Planning","Other"],IJ=()=>{const n=hn(),{allTaskerProfiles:e,loading:t,error:r}=Yr(),[s,i]=b.useState(""),[a,c]=b.useState([]),[d,f]=b.useState(""),[p,g]=b.useState(""),v=_=>{c(S=>S.includes(_)?S.filter(C=>C!==_):[...S,_])},w=()=>{i(""),c([]),f(""),g("")},I=b.useMemo(()=>{let _=e;if(s){const S=s.toLowerCase();_=_.filter(C=>C.displayName.toLowerCase().includes(S)||C.bio.toLowerCase().includes(S)||C.skills.some(R=>R.toLowerCase().includes(S)))}if(a.length>0&&(_=_.filter(S=>a.some(C=>S.skills.includes(C)))),d){const S=parseFloat(d);isNaN(S)||(_=_.filter(C=>C.hourlyRate>=S))}if(p){const S=parseFloat(p);isNaN(S)||(_=_.filter(C=>C.hourlyRate<=S))}return _},[e,s,a,d,p]);return t?u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading taskers..."}):r?u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",r]}):u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:" Back"}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Browse Skilled Taskers"}),u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-12 text-center max-w-3xl mx-auto",children:"Find the perfect professional for your task. Filter by skills, ratings, price, and location."}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-8",children:[u.jsxs("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4 flex items-center gap-2",children:[u.jsx(MH,{size:24})," Filter Taskers"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search by Name or Bio"}),u.jsx(bt,{id:"search",type:"text",placeholder:"e.g., 'Juan Handyman', 'cleaning expert'",value:s,onChange:_=>i(_.target.value),className:"w-full"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"minRate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Hourly Rate ()"}),u.jsx(bt,{id:"minRate",type:"number",placeholder:"e.g., 200",value:d,onChange:_=>f(_.target.value),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"maxRate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Hourly Rate ()"}),u.jsx(bt,{id:"maxRate",type:"number",placeholder:"e.g., 500",value:p,onChange:_=>g(_.target.value),className:"w-full"})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Skills"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:SJ.map(_=>u.jsx(fe,{variant:a.includes(_)?"default":"outline",onClick:()=>v(_),className:Ae(a.includes(_)?"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white":"border-[hsl(var(--border-color))] text-[hsl(var(--text-dark))] hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700"),children:_},_))})]}),u.jsx("div",{className:"flex justify-end gap-2",children:u.jsxs(fe,{onClick:w,variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[u.jsx(qy,{size:18,className:"mr-2"})," Reset Filters"]})})]}),I.length===0?u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md text-center",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xl mb-4",children:"No taskers found matching your criteria. Try adjusting your filters!"}),u.jsx(fe,{onClick:()=>n("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(_=>u.jsx(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-[var(--border-radius)] overflow-hidden",children:u.jsxs(ct,{className:"p-4 flex flex-col items-center text-center",children:[u.jsxs(Sr,{className:"w-20 h-20 mb-3 border-2 border-green-500",children:[u.jsx(Ir,{src:_.photoURL||void 0,alt:_.displayName}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-2xl font-semibold",children:_.displayName?_.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:24})})]}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:_.displayName}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:_.bio}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-3",children:[u.jsx(Oa,{size:16})," ",u.jsxs("span",{children:["",_.hourlyRate.toLocaleString(),"/hr"]})]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[_.skills.slice(0,3).map((S,C)=>u.jsx(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:S},C)),_.skills.length>3&&u.jsxs(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-2 py-0.5 text-xs",children:["+",_.skills.length-3," more"]})]}),u.jsx(Xn,{to:`/taskers/${_.userId}`,className:"w-full",children:u.jsx(fe,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Profile"})})]})},_.userId))})]})})},kJ=()=>{const{id:n}=CC(),e=hn(),{fetchTaskerProfileById:t,loading:r}=Yr(),{tasks:s,loading:i}=wo(),{user:a,isAuthenticated:c,loading:d}=tn(),{createChatRoom:f}=Zy(),[p,g]=H.useState(null),[v,w]=H.useState(!0),[I,_]=H.useState(null);H.useEffect(()=>{(async()=>{if(!n){_("Tasker ID is missing."),w(!1);return}w(!0),_(null);const U=await t(n);U?g(U):_("Tasker not found."),w(!1)})()},[n,t]);const S=H.useMemo(()=>!p||i?[]:s.filter(D=>D.status==="completed"&&D.assignedTaskerId===p.userId&&D.review&&D.rating),[p,s,i]),C=H.useMemo(()=>S.length===0?0:(S.reduce((U,z)=>U+(z.rating||0),0)/S.length).toFixed(1),[S]),R=c&&(a==null?void 0:a.uid)===(p==null?void 0:p.userId),j=async()=>{if(!c||!a){ie.error("Please log in to contact this tasker.");return}if(!p){ie.error("Tasker information is missing.");return}if(R){ie.info("You are viewing your own profile.");return}try{await f([a.uid,p.userId],[a.displayName||a.email||"You",p.displayName])&&e("/chat")}catch(D){console.error("Failed to create or navigate to chat room:",D),ie.error("Failed to start chat with tasker.")}};return v||r||i||d?u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading tasker profile..."}):I?u.jsxs("div",{className:"container mx-auto p-4 text-center text-red-500 pt-[80px]",children:["Error: ",I]}):p?u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-3xl",children:[u.jsx(fe,{onClick:()=>e(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:" Back to Taskers"}),u.jsx(lt,{className:"shadow-lg p-6",children:u.jsxs(ct,{className:"flex flex-col items-center text-center p-0",children:[u.jsxs(Sr,{className:"w-32 h-32 mb-4 border-4 border-green-500",children:[u.jsx(Ir,{src:p.photoURL||void 0,alt:p.displayName}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-5xl font-semibold",children:p.displayName?p.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:48})})]}),u.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:p.displayName}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-4",children:[u.jsx(zy,{size:18})," ",p.userId]}),u.jsx(Fb,{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 max-w-prose",children:p.bio}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full mb-6",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(Oa,{size:20,className:"text-green-600"}),u.jsx("span",{className:"font-semibold",children:"Hourly Rate:"})," ",p.hourlyRate.toLocaleString()]}),u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(r2,{size:20,className:"text-green-600"}),u.jsx("span",{className:"font-semibold",children:"Joined:"})," ",new Date(p.dateJoined).toLocaleDateString()]})]}),S.length>0&&u.jsxs("div",{className:"w-full mb-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center justify-center md:justify-start gap-2",children:[u.jsx(io,{size:20})," Average Rating: ",C," (",S.length," reviews)"]}),u.jsx("div",{className:"flex items-center justify-center md:justify-start gap-1 mb-4",children:[...Array(5)].map((D,U)=>{const z=U<Math.round(parseFloat(C))?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600";return u.jsx(io,{size:24,className:Ae("transition-colors",z)},U)})})]}),u.jsxs("div",{className:"w-full mb-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center justify-center md:justify-start gap-2",children:[u.jsx(Cu,{size:20})," Skills"]}),u.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:p.skills.map((D,U)=>u.jsx(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:D},U))})]}),S.length>0&&u.jsxs("div",{className:"w-full mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 text-center md:text-left",children:"Client Reviews"}),u.jsx("div",{className:"space-y-4",children:S.map((D,U)=>u.jsx(lt,{className:"p-4 shadow-sm",children:u.jsxs(ct,{className:"p-0",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[...Array(5)].map((z,P)=>u.jsx(io,{size:16,className:P<D.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"},P)),u.jsxs("span",{className:"font-semibold ml-1",children:[D.rating,"/5"]})]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic mb-2",children:['"',D.review,'"']}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",D.posterName,' for "',D.title,'"']})]})},U))})]}),u.jsxs(fe,{onClick:j,disabled:!c||R,className:Ae("mt-6 text-lg px-8 py-4 rounded-full shadow-md hover:shadow-lg transition-all flex items-center gap-2",!c||R?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:[u.jsx(tc,{size:24}),R?"This is your profile":c?"Contact Tasker":"Login to Contact Tasker"]})]})})]})}):u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Tasker profile not found."})};function PJ(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var $b="ScrollArea",[SD,kee]=gs($b),[CJ,vs]=SD($b),ID=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[c,d]=b.useState(null),[f,p]=b.useState(null),[g,v]=b.useState(null),[w,I]=b.useState(null),[_,S]=b.useState(null),[C,R]=b.useState(0),[j,D]=b.useState(0),[U,z]=b.useState(!1),[P,A]=b.useState(!1),O=Qe(e,F=>d(F)),M=Ky(s);return u.jsx(CJ,{scope:t,type:r,dir:M,scrollHideDelay:i,scrollArea:c,viewport:f,onViewportChange:p,content:g,onContentChange:v,scrollbarX:w,onScrollbarXChange:I,scrollbarXEnabled:U,onScrollbarXEnabledChange:z,scrollbarY:_,onScrollbarYChange:S,scrollbarYEnabled:P,onScrollbarYEnabledChange:A,onCornerWidthChange:R,onCornerHeightChange:D,children:u.jsx(Je.div,{dir:M,...a,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":j+"px",...n.style}})})});ID.displayName=$b;var kD="ScrollAreaViewport",PD=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=vs(kD,t),c=b.useRef(null),d=Qe(e,c,a.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),u.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:u.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});PD.displayName=kD;var Ci="ScrollAreaScrollbar",Bb=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vs(Ci,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,c=n.orientation==="horizontal";return b.useEffect(()=>(c?i(!0):a(!0),()=>{c?i(!1):a(!1)}),[c,i,a]),s.type==="hover"?u.jsx(AJ,{...r,ref:e,forceMount:t}):s.type==="scroll"?u.jsx(RJ,{...r,ref:e,forceMount:t}):s.type==="auto"?u.jsx(CD,{...r,ref:e,forceMount:t}):s.type==="always"?u.jsx(zb,{...r,ref:e}):null});Bb.displayName=Ci;var AJ=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vs(Ci,n.__scopeScrollArea),[i,a]=b.useState(!1);return b.useEffect(()=>{const c=s.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),a(!0)},p=()=>{d=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",p)}}},[s.scrollArea,s.scrollHideDelay]),u.jsx(ys,{present:t||i,children:u.jsx(CD,{"data-state":i?"visible":"hidden",...r,ref:e})})}),RJ=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vs(Ci,n.__scopeScrollArea),i=n.orientation==="horizontal",a=nv(()=>d("SCROLL_END"),100),[c,d]=PJ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,s.scrollHideDelay,d]),b.useEffect(()=>{const f=s.viewport,p=i?"scrollLeft":"scrollTop";if(f){let g=f[p];const v=()=>{const w=f[p];g!==w&&(d("SCROLL"),a()),g=w};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,i,d,a]),u.jsx(ys,{present:t||c!=="hidden",children:u.jsx(zb,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Pe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Pe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),CD=b.forwardRef((n,e)=>{const t=vs(Ci,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=b.useState(!1),c=n.orientation==="horizontal",d=nv(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;a(c?f:p)}},10);return id(t.viewport,d),id(t.content,d),u.jsx(ys,{present:r||i,children:u.jsx(zb,{"data-state":i?"visible":"hidden",...s,ref:e})})}),zb=b.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=vs(Ci,n.__scopeScrollArea),i=b.useRef(null),a=b.useRef(0),[c,d]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=OD(c.viewport,c.content),p={...r,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function g(v,w){return LJ(v,a.current,c,w)}return t==="horizontal"?u.jsx(NJ,{...p,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,w=X1(v,c,s.dir);i.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=g(v,s.dir))}}):t==="vertical"?u.jsx(jJ,{...p,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,w=X1(v,c);i.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=g(v))}}):null}),NJ=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=vs(Ci,n.__scopeScrollArea),[a,c]=b.useState(),d=b.useRef(null),f=Qe(e,d,i.onScrollbarXChange);return b.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),u.jsx(RD,{"data-orientation":"horizontal",...s,ref:f,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tv(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.x),onDragScroll:p=>n.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(i.viewport){const v=i.viewport.scrollLeft+p.deltaX;n.onWheelScroll(v),MD(v,g)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Lg(a.paddingLeft),paddingEnd:Lg(a.paddingRight)}})}})}),jJ=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=vs(Ci,n.__scopeScrollArea),[a,c]=b.useState(),d=b.useRef(null),f=Qe(e,d,i.onScrollbarYChange);return b.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),u.jsx(RD,{"data-orientation":"vertical",...s,ref:f,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tv(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.y),onDragScroll:p=>n.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(i.viewport){const v=i.viewport.scrollTop+p.deltaY;n.onWheelScroll(v),MD(v,g)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Lg(a.paddingTop),paddingEnd:Lg(a.paddingBottom)}})}})}),[OJ,AD]=SD(Ci),RD=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:g,...v}=n,w=vs(Ci,t),[I,_]=b.useState(null),S=Qe(e,O=>_(O)),C=b.useRef(null),R=b.useRef(""),j=w.viewport,D=r.content-r.viewport,U=Ut(p),z=Ut(d),P=nv(g,10);function A(O){if(C.current){const M=O.clientX-C.current.left,F=O.clientY-C.current.top;f({x:M,y:F})}}return b.useEffect(()=>{const O=M=>{const F=M.target;(I==null?void 0:I.contains(F))&&U(M,D)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[j,I,D,U]),b.useEffect(z,[r,z]),id(I,P),id(w.content,P),u.jsx(OJ,{scope:t,scrollbar:I,hasThumb:s,onThumbChange:Ut(i),onThumbPointerUp:Ut(a),onThumbPositionChange:z,onThumbPointerDown:Ut(c),children:u.jsx(Je.div,{...v,ref:S,style:{position:"absolute",...v.style},onPointerDown:Pe(n.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),C.current=I.getBoundingClientRect(),R.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),A(O))}),onPointerMove:Pe(n.onPointerMove,A),onPointerUp:Pe(n.onPointerUp,O=>{const M=O.target;M.hasPointerCapture(O.pointerId)&&M.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=R.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),Mg="ScrollAreaThumb",ND=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=AD(Mg,n.__scopeScrollArea);return u.jsx(ys,{present:t||s.hasThumb,children:u.jsx(DJ,{ref:e,...r})})}),DJ=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=vs(Mg,t),a=AD(Mg,t),{onThumbPositionChange:c}=a,d=Qe(e,g=>a.onThumbChange(g)),f=b.useRef(void 0),p=nv(()=>{f.current&&(f.current(),f.current=void 0)},100);return b.useEffect(()=>{const g=i.viewport;if(g){const v=()=>{if(p(),!f.current){const w=VJ(g,c);f.current=w,c()}};return c(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[i.viewport,p,c]),u.jsx(Je.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Pe(n.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),I=g.clientX-w.left,_=g.clientY-w.top;a.onThumbPointerDown({x:I,y:_})}),onPointerUp:Pe(n.onPointerUp,a.onThumbPointerUp)})});ND.displayName=Mg;var Wb="ScrollAreaCorner",jD=b.forwardRef((n,e)=>{const t=vs(Wb,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?u.jsx(MJ,{...n,ref:e}):null});jD.displayName=Wb;var MJ=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=vs(Wb,t),[i,a]=b.useState(0),[c,d]=b.useState(0),f=!!(i&&c);return id(s.scrollbarX,()=>{var g;const p=((g=s.scrollbarX)==null?void 0:g.offsetHeight)||0;s.onCornerHeightChange(p),d(p)}),id(s.scrollbarY,()=>{var g;const p=((g=s.scrollbarY)==null?void 0:g.offsetWidth)||0;s.onCornerWidthChange(p),a(p)}),f?u.jsx(Je.div,{...r,ref:e,style:{width:i,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Lg(n){return n?parseInt(n,10):0}function OD(n,e){const t=n/e;return isNaN(t)?0:t}function tv(n){const e=OD(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function LJ(n,e,t,r="ltr"){const s=tv(t),i=s/2,a=e||i,c=s-a,d=t.scrollbar.paddingStart+a,f=t.scrollbar.size-t.scrollbar.paddingEnd-c,p=t.content-t.viewport,g=r==="ltr"?[0,p]:[p*-1,0];return DD([d,f],g)(n)}function X1(n,e,t="ltr"){const r=tv(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,c=i-r,d=t==="ltr"?[0,a]:[a*-1,0],f=Ax(n,d);return DD([0,a],[0,c])(f)}function DD(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function MD(n,e){return n>0&&n<e}var VJ=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,c=t.top!==i.top;(a||c)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function nv(n,e){const t=Ut(n),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function id(n,e){const t=Ut(e);Bt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var LD=ID,FJ=PD,UJ=jD;const Mx=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(LD,{ref:r,className:Ae("relative overflow-hidden",n),...t,children:[u.jsx(FJ,{className:"h-full w-full rounded-[inherit]",children:e}),u.jsx(VD,{}),u.jsx(UJ,{})]}));Mx.displayName=LD.displayName;const VD=b.forwardRef(({className:n,orientation:e="vertical",...t},r)=>u.jsx(Bb,{ref:r,orientation:e,className:Ae("flex touch-none select-none transition-colors data-[state=hidden]:bg-transparent data-[orientation=vertical]:h-full data-[orientation=horizontal]:flex-col data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:u.jsx(ND,{className:"relative flex-1 rounded-full bg-border"})}));VD.displayName=Bb.displayName;const _0=768;function $J(){const[n,e]=b.useState(void 0);return b.useEffect(()=>{if(typeof window>"u"){e(!1);return}const t=window.matchMedia(`(max-width: ${_0-1}px)`),r=()=>{e(window.innerWidth<_0)};return t.addEventListener("change",r),e(window.innerWidth<_0),()=>t.removeEventListener("change",r)},[]),!!n}const BJ=()=>{const n=hn(),{user:e,isAuthenticated:t,loading:r}=tn(),{chatRooms:s,messages:i,loadingRooms:a,loadingMessages:c,error:d,sendMessage:f,fetchMessagesForRoom:p}=Zy(),[g,v]=H.useState(null),[w,I]=H.useState(""),_=b.useRef(null),S=$J(),[C,R]=H.useState(!0);b.useEffect(()=>{var P;(P=_.current)==null||P.scrollIntoView({behavior:"smooth"})},[i]),b.useEffect(()=>{!g&&s.length>0&&(v(s[0]),p(s[0].id))},[s,g,p]);const j=P=>{v(P),p(P.id),S&&R(!1)},D=async()=>{g&&w.trim()&&(await f(g.id,w),I(""))},U=P=>{if(!e)return"Unknown";const A=P.participantNames.filter(O=>O!==(e.displayName||e.email));return A.length>0?A.join(", "):"Self Chat"},z=P=>{e&&P.participants.filter(A=>A!==e.uid)};return r?u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading authentication..."}):!t||!e?u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs("div",{className:"w-full max-w-md text-center shadow-lg bg-white dark:bg-gray-800 p-8 rounded-lg",children:[u.jsx("h1",{className:"text-2xl font-bold text-[hsl(var(--primary-color))] mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your chats."}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})}):u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] flex flex-col md:flex-row w-full",children:u.jsx("div",{className:"container mx-auto px-4 flex flex-grow",children:u.jsxs("div",{className:"flex w-full h-[calc(100vh-160px)] md:h-[calc(100vh-120px)] bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("div",{className:Ae("w-full md:w-1/3 border-r border-gray-200 dark:border-gray-700 flex flex-col",S&&!C&&"hidden"),children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Chats"}),u.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>n(-1),className:"md:hidden",children:u.jsx(po,{size:20})})]}),u.jsx(Mx,{className:"flex-grow",children:a?u.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"Loading chat rooms..."}):s.length===0?u.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"No chat rooms yet."}):s.map(P=>u.jsxs("div",{className:Ae("flex items-center gap-3 p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",(g==null?void 0:g.id)===P.id&&"bg-gray-100 dark:bg-gray-700 border-l-4 border-[hsl(var(--primary-color))]"),onClick:()=>j(P),children:[u.jsxs(Sr,{className:"w-10 h-10",children:[u.jsx(Ir,{src:z(P),alt:U(P)}),u.jsx(kr,{className:"bg-blue-200 text-blue-800",children:U(P).charAt(0).toUpperCase()})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:U(P)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:P.lastMessage||"Start a conversation"})]}),P.lastMessageTimestamp&&u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(P.lastMessageTimestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},P.id))})]}),u.jsx("div",{className:Ae("flex flex-col w-full md:w-2/3",S&&C&&"hidden"),children:g?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[S&&u.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>R(!0),children:u.jsx(po,{size:20})}),u.jsxs(Sr,{className:"w-10 h-10",children:[u.jsx(Ir,{src:z(g),alt:U(g)}),u.jsx(kr,{className:"bg-blue-200 text-blue-800",children:U(g).charAt(0).toUpperCase()})]}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:U(g)})]}),u.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 p-3 flex items-center gap-2 text-sm",children:[u.jsx(XH,{size:20}),u.jsxs("span",{children:[u.jsx("span",{className:"font-semibold",children:"Scam Alert:"})," Be cautious of requests for off-platform payments or personal info. Report suspicious activity."]})]}),u.jsxs(Mx,{className:"flex-grow p-4 space-y-4",children:[c?u.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading messages..."}):i.length===0?u.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No messages yet. Start the conversation!"}):i.map(P=>u.jsxs("div",{className:Ae("flex items-end gap-2",P.senderId===e.uid?"justify-end":"justify-start"),children:[P.senderId!==e.uid&&u.jsxs(Sr,{className:"w-8 h-8",children:[u.jsx(Ir,{src:P.senderAvatar||void 0,alt:P.senderName}),u.jsx(kr,{className:"bg-gray-200 text-gray-700 text-sm",children:P.senderName.charAt(0).toUpperCase()})]}),u.jsxs("div",{className:Ae("max-w-[70%] p-3 rounded-lg",P.senderId===e.uid?"bg-[hsl(var(--primary-color))] text-white rounded-br-none":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"),children:[u.jsx("p",{className:"text-sm",children:P.text}),u.jsx("span",{className:"text-xs opacity-75 mt-1 block",children:new Date(P.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),P.senderId===e.uid&&u.jsxs(Sr,{className:"w-8 h-8",children:[u.jsx(Ir,{src:P.senderAvatar||void 0,alt:P.senderName}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-sm",children:P.senderName.charAt(0).toUpperCase()})]})]},P.id)),u.jsx("div",{ref:_})]}),u.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[u.jsx(bt,{placeholder:"Type your message...",value:w,onChange:P=>I(P.target.value),onKeyPress:P=>P.key==="Enter"&&D(),className:"flex-grow",disabled:c}),u.jsx(fe,{onClick:D,disabled:c||!w.trim(),className:"bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:u.jsx(GH,{size:20})})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow text-center p-4",children:[u.jsx(tc,{size:64,className:"text-gray-400 mb-4"}),u.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Select a chat to start messaging"}),S&&u.jsx(fe,{onClick:()=>R(!0),className:"mt-4 bg-[hsl(var(--primary-color))] hover:bg-[hsl(var(--primary-color))] text-white",children:"View Chats"})]})})]})})})},zJ=()=>{const n=hn(),{user:e,isAuthenticated:t,loading:r}=tn(),{isTasker:s,loading:i}=Yr(),{offers:a,loading:c,withdrawOffer:d}=ev(),{tasks:f,loading:p}=wo();if(r||i||c||p)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading your offers..."});if(!t||!e)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view your offers."}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});if(!s)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Not a Tasker"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be registered as a tasker to view your offers."}),u.jsx(fe,{onClick:()=>n("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]})]})});const v=a.filter(_=>_.taskerId===e.uid),w=async _=>{try{await d(_)}catch{}},I=_=>{switch(_){case"pending":return u.jsx(Mt,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",children:"Pending"});case"accepted":return u.jsx(Mt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Accepted"});case"rejected":return u.jsx(Mt,{variant:"outline",className:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",children:"Rejected"});case"withdrawn":return u.jsx(Mt,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:"Withdrawn"});default:return u.jsx(Mt,{variant:"outline",children:"Unknown"})}};return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"My Offers"}),v.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:"You haven't made any offers yet."}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Browse Tasks"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(_=>{const S=f.find(C=>C.id===_.taskId);return S?u.jsx(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:u.jsxs(ct,{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:S.title}),I(_.status)]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center mb-2",children:[u.jsx(Wy,{size:16,className:"mr-2"})," ",S.category]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 flex items-center mb-2",children:[u.jsx(tc,{size:16,className:"mr-2"})," ",_.message]}),u.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[u.jsx(Oa,{size:20,className:"mr-2"})," ",_.offerAmount.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(Xn,{to:`/tasks/${S.id}`,children:u.jsx(fe,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Task"})}),_.status==="pending"&&u.jsxs(fe,{variant:"outline",className:"border-gray-400 text-gray-700 hover:bg-gray-100",onClick:()=>w(_.id),children:[u.jsx(c2,{size:16,className:"mr-2"})," Withdraw Offer"]})]})]})},_.id):null})})]})})};var Vg=["light","dark"],qb="(prefers-color-scheme: dark)",WJ=typeof window>"u",Hb=b.createContext(void 0),qJ={setTheme:n=>{},themes:[]},HJ=()=>{var n;return(n=b.useContext(Hb))!=null?n:qJ},GJ=n=>b.useContext(Hb)?n.children:b.createElement(YJ,{...n}),KJ=["light","dark"],YJ=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=KJ,defaultTheme:a=t?"system":"light",attribute:c="data-theme",value:d,children:f,nonce:p})=>{let[g,v]=b.useState(()=>Z1(s,a)),[w,I]=b.useState(()=>Z1(s)),_=d?Object.values(d):i,S=b.useCallback(D=>{let U=D;if(!U)return;D==="system"&&t&&(U=eP());let z=d?d[U]:U,P=e?JJ():null,A=document.documentElement;if(c==="class"?(A.classList.remove(..._),z&&A.classList.add(z)):z?A.setAttribute(c,z):A.removeAttribute(c),r){let O=Vg.includes(a)?a:null,M=Vg.includes(U)?U:O;A.style.colorScheme=M}P==null||P()},[]),C=b.useCallback(D=>{let U=typeof D=="function"?D(D):D;v(U);try{localStorage.setItem(s,U)}catch{}},[n]),R=b.useCallback(D=>{let U=eP(D);I(U),g==="system"&&t&&!n&&S("system")},[g,n]);b.useEffect(()=>{let D=window.matchMedia(qb);return D.addListener(R),R(D),()=>D.removeListener(R)},[R]),b.useEffect(()=>{let D=U=>{if(U.key!==s)return;let z=U.newValue||a;C(z)};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[C]),b.useEffect(()=>{S(n??g)},[n,g]);let j=b.useMemo(()=>({theme:g,setTheme:C,forcedTheme:n,resolvedTheme:g==="system"?w:g,themes:t?[...i,"system"]:i,systemTheme:t?w:void 0}),[g,C,n,w,t,i]);return b.createElement(Hb.Provider,{value:j},b.createElement(QJ,{forcedTheme:n,disableTransitionOnChange:e,enableSystem:t,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:a,attribute:c,value:d,children:f,attrs:_,nonce:p}),f)},QJ=b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:c,nonce:d})=>{let f=i==="system",p=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(I=>`'${I}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,g=s?Vg.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(I,_=!1,S=!0)=>{let C=a?a[I]:I,R=_?I+"|| ''":`'${C}'`,j="";return s&&S&&!_&&Vg.includes(I)&&(j+=`d.style.colorScheme = '${I}';`),t==="class"?_||C?j+=`c.add(${R})`:j+="null":C&&(j+=`d[s](n,${R})`),j},w=n?`!function(){${p}${v(n)}}()`:r?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${qb}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}${f?"":"else{"+v(i,!1,!1)+"}"}${g}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${g}}catch(t){}}();`;return b.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:w}})}),Z1=(n,e)=>{if(WJ)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},JJ=()=>{let n=document.createElement("style");return n.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(n),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(n)},1)}},eP=n=>(n||(n=window.matchMedia(qb)),n.matches?"dark":"light"),b0="rovingFocusGroup.onEntryFocus",XJ={bubbles:!1,cancelable:!0},rv="RovingFocusGroup",[Lx,FD,ZJ]=Nb(rv),[eX,UD]=gs(rv,[ZJ]),[tX,nX]=eX(rv),$D=b.forwardRef((n,e)=>u.jsx(Lx.Provider,{scope:n.__scopeRovingFocusGroup,children:u.jsx(Lx.Slot,{scope:n.__scopeRovingFocusGroup,children:u.jsx(rX,{...n,ref:e})})}));$D.displayName=rv;var rX=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...g}=n,v=b.useRef(null),w=Qe(e,v),I=Ky(i),[_=null,S]=Ef({prop:a,defaultProp:c,onChange:d}),[C,R]=b.useState(!1),j=Ut(f),D=FD(t),U=b.useRef(!1),[z,P]=b.useState(0);return b.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(b0,j),()=>A.removeEventListener(b0,j)},[j]),u.jsx(tX,{scope:t,orientation:r,dir:I,loop:s,currentTabStopId:_,onItemFocus:b.useCallback(A=>S(A),[S]),onItemShiftTab:b.useCallback(()=>R(!0),[]),onFocusableItemAdd:b.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:b.useCallback(()=>P(A=>A-1),[]),children:u.jsx(Je.div,{tabIndex:C||z===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...n.style},onMouseDown:Pe(n.onMouseDown,()=>{U.current=!0}),onFocus:Pe(n.onFocus,A=>{const O=!U.current;if(A.target===A.currentTarget&&O&&!C){const M=new CustomEvent(b0,XJ);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=D().filter(xe=>xe.focusable),$=F.find(xe=>xe.active),L=F.find(xe=>xe.id===_),me=[$,L,...F].filter(Boolean).map(xe=>xe.ref.current);WD(me,p)}}U.current=!1}),onBlur:Pe(n.onBlur,()=>R(!1))})})}),BD="RovingFocusGroupItem",zD=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...a}=n,c=so(),d=i||c,f=nX(BD,t),p=f.currentTabStopId===d,g=FD(t),{onFocusableItemAdd:v,onFocusableItemRemove:w}=f;return b.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),u.jsx(Lx.ItemSlot,{scope:t,id:d,focusable:r,active:s,children:u.jsx(Je.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:Pe(n.onMouseDown,I=>{r?f.onItemFocus(d):I.preventDefault()}),onFocus:Pe(n.onFocus,()=>f.onItemFocus(d)),onKeyDown:Pe(n.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){f.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const _=oX(I,f.orientation,f.dir);if(_!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let C=g().filter(R=>R.focusable).map(R=>R.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const R=C.indexOf(I.currentTarget);C=f.loop?aX(C,R+1):C.slice(R+1)}setTimeout(()=>WD(C))}})})})});zD.displayName=BD;var sX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iX(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function oX(n,e,t){const r=iX(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sX[r]}function WD(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function aX(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var lX=$D,cX=zD,Vx=["Enter"," "],uX=["ArrowDown","PageUp","Home"],qD=["ArrowUp","PageDown","End"],dX=[...uX,...qD],hX={ltr:[...Vx,"ArrowRight"],rtl:[...Vx,"ArrowLeft"]},fX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qf="Menu",[If,pX,mX]=Nb(Qf),[uc,HD]=gs(Qf,[mX,Yy,UD]),sv=Yy(),GD=UD(),[gX,dc]=uc(Qf),[yX,Jf]=uc(Qf),KD=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=n,c=sv(e),[d,f]=b.useState(null),p=b.useRef(!1),g=Ut(i),v=Ky(s);return b.useEffect(()=>{const w=()=>{p.current=!0,document.addEventListener("pointerdown",I,{capture:!0,once:!0}),document.addEventListener("pointermove",I,{capture:!0,once:!0})},I=()=>p.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",I,{capture:!0}),document.removeEventListener("pointermove",I,{capture:!0})}},[]),u.jsx(Y2,{...c,children:u.jsx(gX,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:f,children:u.jsx(yX,{scope:e,onClose:b.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:p,dir:v,modal:a,children:r})})})};KD.displayName=Qf;var vX="MenuAnchor",Gb=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=sv(t);return u.jsx(Q2,{...s,...r,ref:e})});Gb.displayName=vX;var Kb="MenuPortal",[wX,YD]=uc(Kb,{forceMount:void 0}),QD=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=dc(Kb,e);return u.jsx(wX,{scope:e,forceMount:t,children:u.jsx(ys,{present:t||i.open,children:u.jsx(Uy,{asChild:!0,container:s,children:r})})})};QD.displayName=Kb;var fs="MenuContent",[xX,Yb]=uc(fs),JD=b.forwardRef((n,e)=>{const t=YD(fs,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=dc(fs,n.__scopeMenu),a=Jf(fs,n.__scopeMenu);return u.jsx(If.Provider,{scope:n.__scopeMenu,children:u.jsx(ys,{present:r||i.open,children:u.jsx(If.Slot,{scope:n.__scopeMenu,children:a.modal?u.jsx(_X,{...s,ref:e}):u.jsx(bX,{...s,ref:e})})})})}),_X=b.forwardRef((n,e)=>{const t=dc(fs,n.__scopeMenu),r=b.useRef(null),s=Qe(e,r);return b.useEffect(()=>{const i=r.current;if(i)return yb(i)},[]),u.jsx(Qb,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Pe(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),bX=b.forwardRef((n,e)=>{const t=dc(fs,n.__scopeMenu);return u.jsx(Qb,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),EX=Ul("MenuContent.ScrollLock"),Qb=b.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:v,onDismiss:w,disableOutsideScroll:I,..._}=n,S=dc(fs,t),C=Jf(fs,t),R=sv(t),j=GD(t),D=pX(t),[U,z]=b.useState(null),P=b.useRef(null),A=Qe(e,P,S.onContentChange),O=b.useRef(0),M=b.useRef(""),F=b.useRef(0),$=b.useRef(null),L=b.useRef("right"),ae=b.useRef(0),me=I?By:b.Fragment,xe=I?{as:EX,allowPinchZoom:!0}:void 0,ge=K=>{var le,Se;const re=M.current+K,W=D().filter(Ne=>!Ne.disabled),X=document.activeElement,_e=(le=W.find(Ne=>Ne.ref.current===X))==null?void 0:le.textValue,we=W.map(Ne=>Ne.textValue),Re=DX(we,re,_e),De=(Se=W.find(Ne=>Ne.textValue===Re))==null?void 0:Se.ref.current;(function Ne(Ve){M.current=Ve,window.clearTimeout(O.current),Ve!==""&&(O.current=window.setTimeout(()=>Ne(""),1e3))})(re),De&&setTimeout(()=>De.focus())};b.useEffect(()=>()=>window.clearTimeout(O.current),[]),gb();const ee=b.useCallback(K=>{var W,X;return L.current===((W=$.current)==null?void 0:W.side)&&LX(K,(X=$.current)==null?void 0:X.area)},[]);return u.jsx(xX,{scope:t,searchRef:M,onItemEnter:b.useCallback(K=>{ee(K)&&K.preventDefault()},[ee]),onItemLeave:b.useCallback(K=>{var re;ee(K)||((re=P.current)==null||re.focus(),z(null))},[ee]),onTriggerLeave:b.useCallback(K=>{ee(K)&&K.preventDefault()},[ee]),pointerGraceTimerRef:F,onPointerGraceIntentChange:b.useCallback(K=>{$.current=K},[]),children:u.jsx(me,{...xe,children:u.jsx(Fy,{asChild:!0,trapped:s,onMountAutoFocus:Pe(i,K=>{var re;K.preventDefault(),(re=P.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:u.jsx(Vy,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:v,onDismiss:w,children:u.jsx(lX,{asChild:!0,...j,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:U,onCurrentTabStopIdChange:z,onEntryFocus:Pe(d,K=>{C.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(J2,{role:"menu","aria-orientation":"vertical","data-state":fM(S.open),"data-radix-menu-content":"",dir:C.dir,...R,..._,ref:A,style:{outline:"none",..._.style},onKeyDown:Pe(_.onKeyDown,K=>{const W=K.target.closest("[data-radix-menu-content]")===K.currentTarget,X=K.ctrlKey||K.altKey||K.metaKey,_e=K.key.length===1;W&&(K.key==="Tab"&&K.preventDefault(),!X&&_e&&ge(K.key));const we=P.current;if(K.target!==we||!dX.includes(K.key))return;K.preventDefault();const De=D().filter(le=>!le.disabled).map(le=>le.ref.current);qD.includes(K.key)&&De.reverse(),jX(De)}),onBlur:Pe(n.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(O.current),M.current="")}),onPointerMove:Pe(n.onPointerMove,kf(K=>{const re=K.target,W=ae.current!==K.clientX;if(K.currentTarget.contains(re)&&W){const X=K.clientX>ae.current?"right":"left";L.current=X,ae.current=K.clientX}}))})})})})})})});JD.displayName=fs;var TX="MenuGroup",Jb=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Je.div,{role:"group",...r,ref:e})});Jb.displayName=TX;var SX="MenuLabel",XD=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Je.div,{...r,ref:e})});XD.displayName=SX;var Fg="MenuItem",tP="menu.itemSelect",iv=b.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=b.useRef(null),a=Jf(Fg,n.__scopeMenu),c=Yb(Fg,n.__scopeMenu),d=Qe(e,i),f=b.useRef(!1),p=()=>{const g=i.current;if(!t&&g){const v=new CustomEvent(tP,{bubbles:!0,cancelable:!0});g.addEventListener(tP,w=>r==null?void 0:r(w),{once:!0}),Sj(g,v),v.defaultPrevented?f.current=!1:a.onClose()}};return u.jsx(ZD,{...s,ref:d,disabled:t,onClick:Pe(n.onClick,p),onPointerDown:g=>{var v;(v=n.onPointerDown)==null||v.call(n,g),f.current=!0},onPointerUp:Pe(n.onPointerUp,g=>{var v;f.current||(v=g.currentTarget)==null||v.click()}),onKeyDown:Pe(n.onKeyDown,g=>{const v=c.searchRef.current!=="";t||v&&g.key===" "||Vx.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});iv.displayName=Fg;var ZD=b.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,a=Yb(Fg,t),c=GD(t),d=b.useRef(null),f=Qe(e,d),[p,g]=b.useState(!1),[v,w]=b.useState("");return b.useEffect(()=>{const I=d.current;I&&w((I.textContent??"").trim())},[i.children]),u.jsx(If.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:u.jsx(cX,{asChild:!0,...c,focusable:!r,children:u.jsx(Je.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:f,onPointerMove:Pe(n.onPointerMove,kf(I=>{r?a.onItemLeave(I):(a.onItemEnter(I),I.defaultPrevented||I.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(n.onPointerLeave,kf(I=>a.onItemLeave(I))),onFocus:Pe(n.onFocus,()=>g(!0)),onBlur:Pe(n.onBlur,()=>g(!1))})})})}),IX="MenuCheckboxItem",eM=b.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return u.jsx(iM,{scope:n.__scopeMenu,checked:t,children:u.jsx(iv,{role:"menuitemcheckbox","aria-checked":Ug(t)?"mixed":t,...s,ref:e,"data-state":Zb(t),onSelect:Pe(s.onSelect,()=>r==null?void 0:r(Ug(t)?!0:!t),{checkForDefaultPrevented:!1})})})});eM.displayName=IX;var tM="MenuRadioGroup",[kX,PX]=uc(tM,{value:void 0,onValueChange:()=>{}}),nM=b.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Ut(r);return u.jsx(kX,{scope:n.__scopeMenu,value:t,onValueChange:i,children:u.jsx(Jb,{...s,ref:e})})});nM.displayName=tM;var rM="MenuRadioItem",sM=b.forwardRef((n,e)=>{const{value:t,...r}=n,s=PX(rM,n.__scopeMenu),i=t===s.value;return u.jsx(iM,{scope:n.__scopeMenu,checked:i,children:u.jsx(iv,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Zb(i),onSelect:Pe(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,t)},{checkForDefaultPrevented:!1})})})});sM.displayName=rM;var Xb="MenuItemIndicator",[iM,CX]=uc(Xb,{checked:!1}),oM=b.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=CX(Xb,t);return u.jsx(ys,{present:r||Ug(i.checked)||i.checked===!0,children:u.jsx(Je.span,{...s,ref:e,"data-state":Zb(i.checked)})})});oM.displayName=Xb;var AX="MenuSeparator",aM=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});aM.displayName=AX;var RX="MenuArrow",lM=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=sv(t);return u.jsx(X2,{...s,...r,ref:e})});lM.displayName=RX;var NX="MenuSub",[Pee,cM]=uc(NX),jh="MenuSubTrigger",uM=b.forwardRef((n,e)=>{const t=dc(jh,n.__scopeMenu),r=Jf(jh,n.__scopeMenu),s=cM(jh,n.__scopeMenu),i=Yb(jh,n.__scopeMenu),a=b.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=i,f={__scopeMenu:n.__scopeMenu},p=b.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return b.useEffect(()=>p,[p]),b.useEffect(()=>{const g=c.current;return()=>{window.clearTimeout(g),d(null)}},[c,d]),u.jsx(Gb,{asChild:!0,...f,children:u.jsx(ZD,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":fM(t.open),...n,ref:Af(e,s.onTriggerChange),onClick:g=>{var v;(v=n.onClick)==null||v.call(n,g),!(n.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Pe(n.onPointerMove,kf(g=>{i.onItemEnter(g),!g.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:Pe(n.onPointerLeave,kf(g=>{var w,I;p();const v=(w=t.content)==null?void 0:w.getBoundingClientRect();if(v){const _=(I=t.content)==null?void 0:I.dataset.side,S=_==="right",C=S?-5:5,R=v[S?"left":"right"],j=v[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:g.clientX+C,y:g.clientY},{x:R,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:R,y:v.bottom}],side:_}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(g),g.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(n.onKeyDown,g=>{var w;const v=i.searchRef.current!=="";n.disabled||v&&g.key===" "||hX[r.dir].includes(g.key)&&(t.onOpenChange(!0),(w=t.content)==null||w.focus(),g.preventDefault())})})})});uM.displayName=jh;var dM="MenuSubContent",hM=b.forwardRef((n,e)=>{const t=YD(fs,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=dc(fs,n.__scopeMenu),a=Jf(fs,n.__scopeMenu),c=cM(dM,n.__scopeMenu),d=b.useRef(null),f=Qe(e,d);return u.jsx(If.Provider,{scope:n.__scopeMenu,children:u.jsx(ys,{present:r||i.open,children:u.jsx(If.Slot,{scope:n.__scopeMenu,children:u.jsx(Qb,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:f,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var g;a.isUsingKeyboardRef.current&&((g=d.current)==null||g.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:Pe(n.onFocusOutside,p=>{p.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Pe(n.onEscapeKeyDown,p=>{a.onClose(),p.preventDefault()}),onKeyDown:Pe(n.onKeyDown,p=>{var w;const g=p.currentTarget.contains(p.target),v=fX[a.dir].includes(p.key);g&&v&&(i.onOpenChange(!1),(w=c.trigger)==null||w.focus(),p.preventDefault())})})})})})});hM.displayName=dM;function fM(n){return n?"open":"closed"}function Ug(n){return n==="indeterminate"}function Zb(n){return Ug(n)?"indeterminate":n?"checked":"unchecked"}function jX(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function OX(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function DX(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=OX(n,Math.max(i,0));s.length===1&&(a=a.filter(f=>f!==t));const d=a.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function MX(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const c=e[i].x,d=e[i].y,f=e[a].x,p=e[a].y;d>r!=p>r&&t<(f-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function LX(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return MX(t,e)}function kf(n){return e=>e.pointerType==="mouse"?n(e):void 0}var VX=KD,FX=Gb,UX=QD,$X=JD,BX=Jb,zX=XD,WX=iv,qX=eM,HX=nM,GX=sM,KX=oM,YX=aM,QX=lM,JX=uM,XX=hM,eE="DropdownMenu",[ZX,Cee]=gs(eE,[HD]),fr=HD(),[eZ,pM]=ZX(eE),mM=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:c=!0}=n,d=fr(e),f=b.useRef(null),[p=!1,g]=Ef({prop:s,defaultProp:i,onChange:a});return u.jsx(eZ,{scope:e,triggerId:so(),triggerRef:f,contentId:so(),open:p,onOpenChange:g,onOpenToggle:b.useCallback(()=>g(v=>!v),[g]),modal:c,children:u.jsx(VX,{...d,open:p,onOpenChange:g,dir:r,modal:c,children:t})})};mM.displayName=eE;var gM="DropdownMenuTrigger",yM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=pM(gM,t),a=fr(t);return u.jsx(FX,{asChild:!0,...a,children:u.jsx(Je.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Af(e,i.triggerRef),onPointerDown:Pe(n.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:Pe(n.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});yM.displayName=gM;var tZ="DropdownMenuPortal",vM=n=>{const{__scopeDropdownMenu:e,...t}=n,r=fr(e);return u.jsx(UX,{...r,...t})};vM.displayName=tZ;var wM="DropdownMenuContent",xM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=pM(wM,t),i=fr(t),a=b.useRef(!1);return u.jsx($X,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Pe(n.onCloseAutoFocus,c=>{var d;a.current||(d=s.triggerRef.current)==null||d.focus(),a.current=!1,c.preventDefault()}),onInteractOutside:Pe(n.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,p=d.button===2||f;(!s.modal||p)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xM.displayName=wM;var nZ="DropdownMenuGroup",rZ=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(BX,{...s,...r,ref:e})});rZ.displayName=nZ;var sZ="DropdownMenuLabel",_M=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(zX,{...s,...r,ref:e})});_M.displayName=sZ;var iZ="DropdownMenuItem",bM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(WX,{...s,...r,ref:e})});bM.displayName=iZ;var oZ="DropdownMenuCheckboxItem",EM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(qX,{...s,...r,ref:e})});EM.displayName=oZ;var aZ="DropdownMenuRadioGroup",lZ=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(HX,{...s,...r,ref:e})});lZ.displayName=aZ;var cZ="DropdownMenuRadioItem",TM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(GX,{...s,...r,ref:e})});TM.displayName=cZ;var uZ="DropdownMenuItemIndicator",SM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(KX,{...s,...r,ref:e})});SM.displayName=uZ;var dZ="DropdownMenuSeparator",IM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(YX,{...s,...r,ref:e})});IM.displayName=dZ;var hZ="DropdownMenuArrow",fZ=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(QX,{...s,...r,ref:e})});fZ.displayName=hZ;var pZ="DropdownMenuSubTrigger",kM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(JX,{...s,...r,ref:e})});kM.displayName=pZ;var mZ="DropdownMenuSubContent",PM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return u.jsx(XX,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PM.displayName=mZ;var gZ=mM,yZ=yM,vZ=vM,CM=xM,AM=_M,RM=bM,NM=EM,jM=TM,OM=SM,DM=IM,MM=kM,LM=PM;const wZ=gZ,xZ=yZ,_Z=b.forwardRef(({className:n,inset:e,children:t,...r},s)=>u.jsxs(MM,{ref:s,className:Ae("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",n),...r,children:[t,u.jsx(a2,{className:"ml-auto h-4 w-4"})]}));_Z.displayName=MM.displayName;const bZ=b.forwardRef(({className:n,...e},t)=>u.jsx(LM,{ref:t,className:Ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=open]:slide-in-from-left-1/2",n),...e}));bZ.displayName=LM.displayName;const VM=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>u.jsx(vZ,{children:u.jsx(CM,{ref:r,sideOffset:e,className:Ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));VM.displayName=CM.displayName;const Xm=b.forwardRef(({className:n,inset:e,...t},r)=>u.jsx(RM,{ref:r,className:Ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));Xm.displayName=RM.displayName;const EZ=b.forwardRef(({className:n,children:e,checked:t,...r},s)=>u.jsxs(NM,{ref:s,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(OM,{children:u.jsx(i2,{className:"h-4 w-4"})})}),e]}));EZ.displayName=NM.displayName;const TZ=b.forwardRef(({className:n,children:e,...t},r)=>u.jsxs(jM,{ref:r,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(OM,{children:u.jsx(OH,{className:"h-2 w-2 fill-current"})})}),e]}));TZ.displayName=jM.displayName;const SZ=b.forwardRef(({className:n,inset:e,...t},r)=>u.jsx(AM,{ref:r,className:Ae("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));SZ.displayName=AM.displayName;const IZ=b.forwardRef(({className:n,...e},t)=>u.jsx(DM,{ref:t,className:Ae("-mx-1 my-1 h-px bg-muted",n),...e}));IZ.displayName=DM.displayName;function kZ(){const{setTheme:n}=HJ();return u.jsxs(wZ,{children:[u.jsx(xZ,{asChild:!0,children:u.jsxs(fe,{variant:"outline",size:"icon",children:[u.jsx(YH,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),u.jsx(BH,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),u.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),u.jsxs(VM,{align:"end",children:[u.jsx(Xm,{onClick:()=>n("light"),children:"Light"}),u.jsx(Xm,{onClick:()=>n("dark"),children:"Dark"}),u.jsx(Xm,{onClick:()=>n("system"),children:"System"})]})]})}const PZ=()=>{const n=hn();return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px]",children:u.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[u.jsxs(fe,{onClick:()=>n(-1),variant:"outline",className:"mb-6 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:[u.jsx(po,{size:20,className:"mr-2"})," Back"]}),u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"App Settings"}),u.jsxs(lt,{className:"shadow-lg p-6",children:[u.jsx(dr,{className:"p-0 mb-4",children:u.jsxs(hr,{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[u.jsx(p2,{size:24})," General Settings"]})}),u.jsx(ct,{className:"p-0 space-y-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Theme"}),u.jsx(kZ,{})]})})]})]})})},CZ=()=>{const n=hn(),{user:e,isAuthenticated:t,loading:r}=tn(),{taskerProfile:s,isTasker:i,loading:a}=Yr(),{tasks:c,loading:d}=wo();if(r||a||d)return u.jsx("div",{className:"container mx-auto p-4 text-center pt-[80px]",children:"Loading tasker dashboard..."});if(!t||!e)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Access Denied"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to view the tasker dashboard."}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]})]})});if(!i||!s)return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 pt-[60px] px-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:"Not a Tasker"})}),u.jsxs(ct,{children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be registered as a tasker to access this dashboard."}),u.jsx(fe,{onClick:()=>n("/features-earnings"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Become a Tasker"})]})]})});const p=c.filter(w=>w.assignedTaskerId===e.uid),g=p.filter(w=>w.status==="completed"&&w.rating&&w.review),v=g.length>0?(g.reduce((w,I)=>w+(I.rating||0),0)/g.length).toFixed(1):"N/A";return u.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 pt-[80px] px-4",children:u.jsxs("div",{className:"container mx-auto max-w-5xl",children:[u.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-8 text-center",children:"Tasker Dashboard"}),u.jsx(lt,{className:"shadow-lg p-6 mb-8",children:u.jsxs(ct,{className:"flex flex-col md:flex-row items-center md:items-start gap-6 p-0",children:[u.jsxs(Sr,{className:"w-24 h-24 border-4 border-green-500",children:[u.jsx(Ir,{src:s.photoURL||void 0,alt:s.displayName}),u.jsx(kr,{className:"bg-green-200 text-green-800 text-3xl font-semibold",children:s.displayName?s.displayName.charAt(0).toUpperCase():u.jsx(Vs,{size:48})})]}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:s.displayName}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center md:justify-start gap-2 mb-2",children:[u.jsx(Cu,{size:18})," Tasker since ",new Date(s.dateJoined).toLocaleDateString()]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center md:justify-start gap-2 mb-2",children:[u.jsx(Oa,{size:18})," Hourly Rate: ",s.hourlyRate.toLocaleString()]}),u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-gray-800 dark:text-gray-100",children:[u.jsx(io,{size:18,className:"text-yellow-500"}),u.jsxs("span",{className:"font-semibold",children:["Average Rating: ",v]}),g.length>0&&u.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.length," reviews)"]})]}),u.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mt-4",children:s.skills.map((w,I)=>u.jsx(Mt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200 px-3 py-1 rounded-full",children:w},I))})]}),u.jsx(fe,{onClick:()=>n("/profile"),variant:"outline",className:"mt-4 md:mt-0 border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View My Public Profile"})]})}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center md:text-left",children:"My Assigned Tasks"}),p.length===0?u.jsxs("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-4",children:"No tasks currently assigned to you."}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Browse Open Tasks"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(w=>u.jsxs(lt,{className:"shadow-lg hover:shadow-xl transition-all duration-300",children:[u.jsxs("div",{className:"h-40 overflow-hidden relative",children:[u.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:`absolute top-2 left-2 px-3 py-1 rounded-full text-xs font-semibold ${w.status==="open"?"bg-blue-600 text-white":w.status==="assigned"?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]}),u.jsxs(ct,{className:"p-4",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:w.title}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(_d,{size:16,className:"mr-2"})," ",w.location]}),u.jsxs("p",{className:"text-gray-600 flex items-center mb-2",children:[u.jsx(Wy,{size:16,className:"mr-2"})," ",w.category]}),u.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-4",children:["",w.budget.toLocaleString()]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(Xn,{to:`/tasks/${w.id}`,children:u.jsx(fe,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:"View Task Details"})}),w.status==="assigned"&&u.jsx(Mt,{variant:"outline",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-200",children:"Awaiting Client Completion"}),w.status==="completed"&&u.jsx(Mt,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",children:"Completed"})]})]})]},w.id))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center md:text-left",children:"Client Reviews"}),g.length===0?u.jsx("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"No reviews yet. Complete more tasks to get feedback!"})}):u.jsx("div",{className:"space-y-4",children:g.map((w,I)=>u.jsx(lt,{className:"p-4 shadow-sm",children:u.jsxs(ct,{className:"p-0",children:[u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[...Array(5)].map((_,S)=>u.jsx(io,{size:16,className:S<w.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"},S)),u.jsxs("span",{className:"font-semibold ml-1",children:[w.rating,"/5"]})]}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic mb-2",children:['"',w.review,'"']}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",w.posterName,' for "',w.title,'"']})]})},I))})]})]})})};function AZ(){const[n,e]=b.useState(!0),[t,r]=b.useState(null);return b.useEffect(()=>{(async()=>{if(q5(Yi,window.location.href)){let i=window.localStorage.getItem("emailForSignIn");if(i||(i=window.prompt("Please provide your email for confirmation")),!i){r("Email not provided for sign-in confirmation."),e(!1),ie.error("Email not provided for sign-in confirmation.");return}try{await H5(Yi,i,window.location.href),console.log("User signed in successfully with email link."),localStorage.removeItem("emailForSignIn"),e(!1)}catch(a){console.error("Error during email link sign-in:",a),r(a.message||"Failed to sign in with email link."),e(!1),ie.error(`Failed to sign in: ${a.message}`)}}else e(!1)})()},[]),{loading:n,error:t}}const RZ=()=>{const n=hn(),{loading:e,error:t}=AZ();return b.useEffect(()=>{if(!e&&!t){const r=setTimeout(()=>{n("/profile"),ie.success("Successfully logged in!")},1e3);return()=>clearTimeout(r)}else t&&ie.error(`Login failed: ${t}`)},[e,t,n]),u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:u.jsxs(lt,{className:"w-full max-w-md text-center shadow-lg",children:[u.jsx(dr,{children:u.jsx(hr,{className:"text-2xl font-bold text-[hsl(var(--primary-color))]",children:e?"Logging you in...":"Sign-in Complete"})}),u.jsx(ct,{children:e?u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx($H,{className:"h-8 w-8 animate-spin text-[hsl(var(--primary-color))] mb-4"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we complete your sign-in."})]}):t?u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsxs("p",{className:"text-red-500 mb-4",children:["An error occurred during sign-in: ",t]}),u.jsx(fe,{onClick:()=>n("/"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Home"})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have successfully logged in."}),u.jsx(fe,{onClick:()=>n("/profile"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Go to Profile"})]})})]})})};function NZ({children:n,...e}){return u.jsx(GJ,{...e,children:n})}const jZ=b.createContext(void 0),OZ=({children:n})=>{const{user:e,isAuthenticated:t,loading:r}=tn(),[s,i]=H.useState(!1);b.useEffect(()=>{!r&&t&&e&&!s?(console.log(`[Chat Log] Chat session initialized for user: ${e.uid} (${e.email}) at ${new Date().toISOString()}`),i(!0)):!t&&s&&(console.log(`[Chat Log] Chat session ended for previous user at ${new Date().toISOString()}`),i(!1))},[t,e,r,s]);const a={isChatSessionInitialized:s};return u.jsx(jZ.Provider,{value:a,children:n})},DZ=new zF,MZ=({children:n})=>{const{user:e}=tn();return u.jsx(vY,{firebaseUser:e,children:n})},LZ=()=>u.jsxs(qF,{client:DZ,children:[u.jsx(NZ,{defaultTheme:"system",storageKey:"vite-ui-theme",children:u.jsx(wF,{children:u.jsx(BU,{children:u.jsx(tq,{children:u.jsxs(MZ,{children:[" ",u.jsx(JQ,{children:u.jsx(uq,{children:u.jsx(cQ,{children:u.jsx(hQ,{children:u.jsx(vQ,{children:u.jsx(OZ,{children:u.jsx(bQ,{children:u.jsx("div",{className:"min-h-screen w-full flex flex-col items-center",children:u.jsxs(OU,{children:[u.jsx(gn,{path:"/",element:u.jsx(ZQ,{})}),u.jsx(gn,{path:"/tasks/:id",element:u.jsx(tJ,{})}),u.jsx(gn,{path:"/my-tasks",element:u.jsx(gJ,{})}),u.jsx(gn,{path:"/my-offers",element:u.jsx(zJ,{})}),u.jsx(gn,{path:"/features-earnings",element:u.jsx(yJ,{})}),u.jsx(gn,{path:"/profile",element:u.jsx(wJ,{})}),u.jsx(gn,{path:"/settings",element:u.jsx(PZ,{})}),u.jsx(gn,{path:"/faq",element:u.jsx(xJ,{})}),u.jsx(gn,{path:"/contact",element:u.jsx(_J,{})}),u.jsx(gn,{path:"/privacy",element:u.jsx(bJ,{})}),u.jsx(gn,{path:"/terms",element:u.jsx(EJ,{})}),u.jsx(gn,{path:"/eula",element:u.jsx(TJ,{})})," ",u.jsx(gn,{path:"/browse-taskers",element:u.jsx(IJ,{})}),u.jsx(gn,{path:"/taskers/:id",element:u.jsx(kJ,{})}),u.jsx(gn,{path:"/chat",element:u.jsx(BJ,{})}),u.jsx(gn,{path:"/tasker-dashboard",element:u.jsx(CZ,{})}),u.jsx(gn,{path:"/finishSignIn",element:u.jsx(RZ,{})})," ",u.jsx(gn,{path:"*",element:u.jsx(eJ,{})})]})})})})})})})})})]})})})})}),u.jsx(HB,{})]}),nP=document.getElementById("root");nP?e4.createRoot(nP).render(u.jsx(LZ,{})):console.error("Root element not found in the document.");export{v5 as A,ZZ as B,dee as C,cee as D,ic as E,ea as F,ta as G,hee as H,uee as I,U5 as J,uo as K,nee as L,dI as M,y$ as N,Dm as O,MI as P,AA as Q,oee as R,i$ as S,na as T,BA as W,JZ as a,QZ as b,B5 as c,iee as d,fee as e,XZ as f,vB as g,Zi as h,q5 as i,see as j,YZ as k,lee as l,W5 as m,DI as n,ree as o,HZ as p,KZ as q,H3 as r,yI as s,z5 as t,H5 as u,aee as v,GZ as w,eee as x,tee as y,vI as z};
